From bcc51b62903258ed12c9cb134cf538e6c575a7bd Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Thu, 23 Jul 2020 15:08:02 +0900
Subject: [PATCH 13/84] Add and show gooroom protocol logo with short brand
 text and fake scheme gooroom:// instead of chrome:// in omnibox.

---
 .../chrome_location_bar_model_delegate.cc     |  6 +++
 .../views/location_bar/location_icon_view.cc  | 11 +++++
 .../views/page_info/page_info_bubble_view.cc  |  9 +++-
 components/omnibox/browser/BUILD.gn           |  3 ++
 .../browser/vector_icons/gooroom_product.icon | 47 +++++++++++++++++++
 .../vector_icons/gooroom_product_1x.icon      | 47 +++++++++++++++++++
 6 files changed, 122 insertions(+), 1 deletion(-)
 create mode 100644 components/omnibox/browser/vector_icons/gooroom_product.icon
 create mode 100644 components/omnibox/browser/vector_icons/gooroom_product_1x.icon

diff --git a/chrome/browser/ui/toolbar/chrome_location_bar_model_delegate.cc b/chrome/browser/ui/toolbar/chrome_location_bar_model_delegate.cc
index e159c9231..810929629 100644
--- a/chrome/browser/ui/toolbar/chrome_location_bar_model_delegate.cc
+++ b/chrome/browser/ui/toolbar/chrome_location_bar_model_delegate.cc
@@ -179,6 +179,12 @@ const gfx::VectorIcon* ChromeLocationBarModelDelegate::GetVectorIconOverride()
     return &omnibox::kExtensionAppIcon;
 #endif
 
+#if defined(GOOROOM_BUILD)
+  // Show gooroom protocol logo prior to url "chrome://*".
+  if (url.SchemeIs(content::kGooroomUIScheme))
+    return &omnibox::kGooroomProductIcon;
+#endif // GOOROOM_BUILD
+
   return nullptr;
 }
 
diff --git a/chrome/browser/ui/views/location_bar/location_icon_view.cc b/chrome/browser/ui/views/location_bar/location_icon_view.cc
index 8c38af079..1fc2b9b91 100644
--- a/chrome/browser/ui/views/location_bar/location_icon_view.cc
+++ b/chrome/browser/ui/views/location_bar/location_icon_view.cc
@@ -135,6 +135,10 @@ bool LocationIconView::GetShowText() const {
   const GURL& url = location_bar_model->GetURL();
   if (url.SchemeIs(content::kChromeUIScheme) ||
       url.SchemeIs(extensions::kExtensionScheme) ||
+#if defined(GOOROOM_BUILD)
+      // Show a string "Gooroom" immediately after Gooroom protocol logo
+      url.SchemeIs(content::kGooroomUIScheme) ||
+#endif
       url.SchemeIs(url::kFileScheme) ||
       url.SchemeIs(dom_distiller::kDomDistillerScheme)) {
     return true;
@@ -151,9 +155,16 @@ base::string16 LocationIconView::GetText() const {
   if (delegate_->IsEditingOrEmpty())
     return base::string16();
 
+#if defined(GOOROOM_BUILD)
+  // Show a string " Gooroom 댁瑜.." after clicking Gooroom protocol logo
+  if (delegate_->GetLocationBarModel()->GetURL().SchemeIs(content::kGooroomUIScheme)) {
+    return l10n_util::GetStringUTF16(IDS_SHORT_PRODUCT_NAME);
+  }
+#else
   if (delegate_->GetLocationBarModel()->GetURL().SchemeIs(
           content::kChromeUIScheme))
     return l10n_util::GetStringUTF16(IDS_SHORT_PRODUCT_NAME);
+#endif
 
   if (delegate_->GetLocationBarModel()->GetURL().SchemeIs(url::kFileScheme))
     return l10n_util::GetStringUTF16(IDS_OMNIBOX_FILE);
diff --git a/chrome/browser/ui/views/page_info/page_info_bubble_view.cc b/chrome/browser/ui/views/page_info/page_info_bubble_view.cc
index 4a4327075..072cbf786 100644
--- a/chrome/browser/ui/views/page_info/page_info_bubble_view.cc
+++ b/chrome/browser/ui/views/page_info/page_info_bubble_view.cc
@@ -393,7 +393,11 @@ InternalPageInfoBubbleView::InternalPageInfoBubbleView(
     } else {
       text = IDS_PAGE_INFO_READER_MODE_PAGE;
     }
-  } else if (!url.SchemeIs(content::kChromeUIScheme)) {
+  } else if (!url.SchemeIs(content::kChromeUIScheme) 
+#if defined(GOOROOM_BUILD)
+             && !url.SchemeIs(content::kGooroomUIScheme)
+#endif
+  ) {
     NOTREACHED();
   }
 
@@ -448,6 +452,9 @@ views::BubbleDialogDelegateView* PageInfoBubbleView::CreatePageInfoBubble(
   gfx::NativeView parent_view = platform_util::GetViewForWindow(parent_window);
 
   if (PageInfo::IsFileOrInternalPage(url) ||
+#if defined(GOOROOM_BUILD)
+      url.SchemeIs(content::kGooroomUIScheme) ||
+#endif
       url.SchemeIs(extensions::kExtensionScheme) ||
       url.SchemeIs(dom_distiller::kDomDistillerScheme)) {
     return new InternalPageInfoBubbleView(anchor_view, anchor_rect, parent_view,
diff --git a/components/omnibox/browser/BUILD.gn b/components/omnibox/browser/BUILD.gn
index 10486d7e0..40eb3951b 100644
--- a/components/omnibox/browser/BUILD.gn
+++ b/components/omnibox/browser/BUILD.gn
@@ -64,6 +64,9 @@ aggregate_vector_icons("omnibox_vector_icons") {
     "switch.icon",
     "tab.icon",
     "trending_up.icon",
+    # convert Gooroom protocol logo, .svg to skia
+    "gooroom_product_1x.icon",
+    "gooroom_product.icon",
   ]
 }
 
diff --git a/components/omnibox/browser/vector_icons/gooroom_product.icon b/components/omnibox/browser/vector_icons/gooroom_product.icon
new file mode 100644
index 000000000..b62188f9d
--- /dev/null
+++ b/components/omnibox/browser/vector_icons/gooroom_product.icon
@@ -0,0 +1,47 @@
+// Copyright 2017 The Chromium Authors. All rights reserved.
+// Use of this source code is governed by a BSD-style license that can be
+// found in the LICENSE file.
+
+CANVAS_DIMENSIONS, 16,
+MOVE_TO, 7.85f, 15.79f,
+R_ARC_TO, 6.67f, 6.67f, 0, 0, 1, -0.78f, -0.31f,
+R_CUBIC_TO, -0.54f, -0.27f, -1.18f, -0.72f, -1.74f, -1.23f,
+R_ARC_TO, 18.02f, 18.02f, 0, 0, 1, -1.01f, -1.02f,
+CUBIC_TO, 3.19f, 11.96f, 2.27f, 10.35f, 1.8f, 8.84f,
+R_CUBIC_TO, -0.29f, -0.92f, -0.36f, -1.48f, -0.34f, -2.55f,
+R_CUBIC_TO, 0.01f, -0.64f, 0.03f, -0.77f, 0.13f, -1.17f,
+R_CUBIC_TO, 0.38f, -1.48f, 1.52f, -2.96f, 2.99f, -3.88f,
+R_CUBIC_TO, 1.93f, -1.21f, 4.26f, -1.38f, 6.33f, -0.48f,
+R_CUBIC_TO, 1.55f, 0.68f, 2.89f, 1.98f, 3.43f, 3.35f,
+R_CUBIC_TO, 0.09f, 0.22f, 0.15f, 0.48f, 0.18f, 0.68f,
+R_CUBIC_TO, 0.02f, 0.15f, 0.01f, 0.17f, -0.03f, 0.13f,
+R_ARC_TO, 4.55f, 4.55f, 0, 0, 0, -0.34f, -0.18f,
+R_CUBIC_TO, -1.19f, -0.59f, -2.91f, -1.18f, -4.37f, -1.5f,
+R_CUBIC_TO, -1.3f, -0.28f, -2.5f, -0.36f, -3.37f, -0.2f,
+R_CUBIC_TO, -0.59f, 0.1f, -1.13f, 0.34f, -1.44f, 0.64f,
+R_LINE_TO, -0.15f, 0.15f,
+R_LINE_TO, -0.07f, 0.3f,
+R_CUBIC_TO, -0.32f, 1.35f, -0.4f, 2.73f, -0.23f, 3.91f,
+R_CUBIC_TO, 0.07f, 0.47f, 0.14f, 0.7f, 0.33f, 1.13f,
+R_CUBIC_TO, 0.39f, 0.86f, 0.9f, 1.62f, 1.56f, 2.32f,
+R_CUBIC_TO, 0.58f, 0.61f, 1.06f, 1.01f, 1.57f, 1.3f,
+R_CUBIC_TO, 0.2f, 0.11f, 0.2f, 0.11f, 0.28f, 0.08f,
+R_CUBIC_TO, 0.47f, -0.17f, 0.9f, -0.47f, 1.45f, -1.02f,
+R_ARC_TO, 6.94f, 6.94f, 0, 0, 0, 1.5f, -2.22f,
+R_CUBIC_TO, 0.1f, -0.24f, 0.22f, -0.59f, 0.22f, -0.65f,
+R_CUBIC_TO, 0, -0.06f, -0.34f, -0.32f, -0.58f, -0.45f,
+R_CUBIC_TO, -0.54f, -0.28f, -1.12f, -0.39f, -1.94f, -0.39f,
+R_CUBIC_TO, -0.24f, 0, -0.49f, 0.01f, -0.54f, 0.02f,
+R_LINE_TO, -0.1f, 0.02f,
+R_LINE_TO, -0.01f, -0.43f,
+R_CUBIC_TO, -0.01f, -0.24f, -0.02f, -0.69f, -0.02f, -1.01f,
+LINE_TO, 8.2f, 6.13f,
+R_LINE_TO, 0.32f, -0.01f,
+R_CUBIC_TO, 0.5f, -0.02f, 1.23f, 0.04f, 1.84f, 0.16f,
+R_ARC_TO, 9.73f, 9.73f, 0, 0, 1, 3.77f, 1.64f,
+R_CUBIC_TO, 0.45f, 0.33f, 0.41f, 0.27f, 0.38f, 0.45f,
+R_CUBIC_TO, -0.11f, 0.6f, -0.4f, 1.58f, -0.66f, 2.18f,
+R_CUBIC_TO, -0.81f, 1.91f, -2.16f, 3.42f, -4.05f, 4.55f,
+R_CUBIC_TO, -0.42f, 0.25f, -1.19f, 0.63f, -1.36f, 0.68f,
+R_ARC_TO, 1.63f, 1.63f, 0, 0, 1, -0.58f, 0.01f,
+CLOSE
diff --git a/components/omnibox/browser/vector_icons/gooroom_product_1x.icon b/components/omnibox/browser/vector_icons/gooroom_product_1x.icon
new file mode 100644
index 000000000..b62188f9d
--- /dev/null
+++ b/components/omnibox/browser/vector_icons/gooroom_product_1x.icon
@@ -0,0 +1,47 @@
+// Copyright 2017 The Chromium Authors. All rights reserved.
+// Use of this source code is governed by a BSD-style license that can be
+// found in the LICENSE file.
+
+CANVAS_DIMENSIONS, 16,
+MOVE_TO, 7.85f, 15.79f,
+R_ARC_TO, 6.67f, 6.67f, 0, 0, 1, -0.78f, -0.31f,
+R_CUBIC_TO, -0.54f, -0.27f, -1.18f, -0.72f, -1.74f, -1.23f,
+R_ARC_TO, 18.02f, 18.02f, 0, 0, 1, -1.01f, -1.02f,
+CUBIC_TO, 3.19f, 11.96f, 2.27f, 10.35f, 1.8f, 8.84f,
+R_CUBIC_TO, -0.29f, -0.92f, -0.36f, -1.48f, -0.34f, -2.55f,
+R_CUBIC_TO, 0.01f, -0.64f, 0.03f, -0.77f, 0.13f, -1.17f,
+R_CUBIC_TO, 0.38f, -1.48f, 1.52f, -2.96f, 2.99f, -3.88f,
+R_CUBIC_TO, 1.93f, -1.21f, 4.26f, -1.38f, 6.33f, -0.48f,
+R_CUBIC_TO, 1.55f, 0.68f, 2.89f, 1.98f, 3.43f, 3.35f,
+R_CUBIC_TO, 0.09f, 0.22f, 0.15f, 0.48f, 0.18f, 0.68f,
+R_CUBIC_TO, 0.02f, 0.15f, 0.01f, 0.17f, -0.03f, 0.13f,
+R_ARC_TO, 4.55f, 4.55f, 0, 0, 0, -0.34f, -0.18f,
+R_CUBIC_TO, -1.19f, -0.59f, -2.91f, -1.18f, -4.37f, -1.5f,
+R_CUBIC_TO, -1.3f, -0.28f, -2.5f, -0.36f, -3.37f, -0.2f,
+R_CUBIC_TO, -0.59f, 0.1f, -1.13f, 0.34f, -1.44f, 0.64f,
+R_LINE_TO, -0.15f, 0.15f,
+R_LINE_TO, -0.07f, 0.3f,
+R_CUBIC_TO, -0.32f, 1.35f, -0.4f, 2.73f, -0.23f, 3.91f,
+R_CUBIC_TO, 0.07f, 0.47f, 0.14f, 0.7f, 0.33f, 1.13f,
+R_CUBIC_TO, 0.39f, 0.86f, 0.9f, 1.62f, 1.56f, 2.32f,
+R_CUBIC_TO, 0.58f, 0.61f, 1.06f, 1.01f, 1.57f, 1.3f,
+R_CUBIC_TO, 0.2f, 0.11f, 0.2f, 0.11f, 0.28f, 0.08f,
+R_CUBIC_TO, 0.47f, -0.17f, 0.9f, -0.47f, 1.45f, -1.02f,
+R_ARC_TO, 6.94f, 6.94f, 0, 0, 0, 1.5f, -2.22f,
+R_CUBIC_TO, 0.1f, -0.24f, 0.22f, -0.59f, 0.22f, -0.65f,
+R_CUBIC_TO, 0, -0.06f, -0.34f, -0.32f, -0.58f, -0.45f,
+R_CUBIC_TO, -0.54f, -0.28f, -1.12f, -0.39f, -1.94f, -0.39f,
+R_CUBIC_TO, -0.24f, 0, -0.49f, 0.01f, -0.54f, 0.02f,
+R_LINE_TO, -0.1f, 0.02f,
+R_LINE_TO, -0.01f, -0.43f,
+R_CUBIC_TO, -0.01f, -0.24f, -0.02f, -0.69f, -0.02f, -1.01f,
+LINE_TO, 8.2f, 6.13f,
+R_LINE_TO, 0.32f, -0.01f,
+R_CUBIC_TO, 0.5f, -0.02f, 1.23f, 0.04f, 1.84f, 0.16f,
+R_ARC_TO, 9.73f, 9.73f, 0, 0, 1, 3.77f, 1.64f,
+R_CUBIC_TO, 0.45f, 0.33f, 0.41f, 0.27f, 0.38f, 0.45f,
+R_CUBIC_TO, -0.11f, 0.6f, -0.4f, 1.58f, -0.66f, 2.18f,
+R_CUBIC_TO, -0.81f, 1.91f, -2.16f, 3.42f, -4.05f, 4.55f,
+R_CUBIC_TO, -0.42f, 0.25f, -1.19f, 0.63f, -1.36f, 0.68f,
+R_ARC_TO, 1.63f, 1.63f, 0, 0, 1, -0.58f, 0.01f,
+CLOSE
-- 
2.20.1

