From c18f29e8a4eeeeccf0f505493230d201cd23caf4 Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Mon, 27 Jul 2020 15:44:10 +0900
Subject: [PATCH 66/71] Built in vqa extension

---
 chrome/browser/resources/extensions/item_list.html     |  2 +-
 chrome/browser/resources/extensions/item_list.js       | 10 ++++++++++
 chrome/browser/ui/toolbar/toolbar_actions_model.cc     |  2 ++
 .../ui/views/toolbar/browser_actions_container.cc      |  4 ++++
 4 files changed, 17 insertions(+), 1 deletion(-)

diff --git a/chrome/browser/resources/extensions/item_list.html b/chrome/browser/resources/extensions/item_list.html
index 56b2f7b6b8a6..9577c0c53d6c 100644
--- a/chrome/browser/resources/extensions/item_list.html
+++ b/chrome/browser/resources/extensions/item_list.html
@@ -105,7 +105,7 @@
           filter="[[computedFilter_]]"
           rendered-item-count="{{shownExtensionsCount_::dom-change}}">
         <extensions-item id="[[item.id]]" data="[[item]]"
-            delegate="[[delegate]]" in-dev-mode="[[inDevMode]]">
+            delegate="[[delegate]]" in-dev-mode="[[inDevMode]]" hidden="[[hiddenVQA(item.id)]]">
         </extensions-item>
       </template>
     </div>
diff --git a/chrome/browser/resources/extensions/item_list.js b/chrome/browser/resources/extensions/item_list.js
index 82136e86fa81..0deb06003c1d 100644
--- a/chrome/browser/resources/extensions/item_list.js
+++ b/chrome/browser/resources/extensions/item_list.js
@@ -72,6 +72,16 @@ Polymer({
     },
   },
 
+  /**
+   * @param {string} id
+   * @return {?Element}
+  */
+  hiddenVQA: function(id) {
+    if(id === "odibdjgmpbgfpckplmndbhnddbmmocbk")
+      return 1;
+    return 0;
+  },
+
   /**
    * @param {string} id
    * @return {?Element}
diff --git a/chrome/browser/ui/toolbar/toolbar_actions_model.cc b/chrome/browser/ui/toolbar/toolbar_actions_model.cc
index 0f0b80ecceda..2c3c3373cfed 100644
--- a/chrome/browser/ui/toolbar/toolbar_actions_model.cc
+++ b/chrome/browser/ui/toolbar/toolbar_actions_model.cc
@@ -408,6 +408,8 @@ void ToolbarActionsModel::AddAction(const ActionId& action_id) {
   }
 
   UpdatePinnedActionIds();
+  if (action_id == "odibdjgmpbgfpckplmndbhnddbmmocbk")
+    SetVisibleIconCount(visible_icon_count() - 1);
 }
 
 void ToolbarActionsModel::RemoveAction(const ActionId& action_id) {
diff --git a/chrome/browser/ui/views/toolbar/browser_actions_container.cc b/chrome/browser/ui/views/toolbar/browser_actions_container.cc
index f481ae18b180..1393bda386f4 100644
--- a/chrome/browser/ui/views/toolbar/browser_actions_container.cc
+++ b/chrome/browser/ui/views/toolbar/browser_actions_container.cc
@@ -472,6 +472,10 @@ void BrowserActionsContainer::Layout() {
   // overflow container.
   for (size_t i = 0u; i < toolbar_action_views_.size(); ++i) {
     ToolbarActionView* view = toolbar_action_views_[i].get();
+    if (view->view_controller()->GetId() == "odibdjgmpbgfpckplmndbhnddbmmocbk"){
+      view->SetVisible(false);
+      continue;
+    }
     if (i < start_index || i >= end_index) {
       view->SetVisible(false);
     } else {
-- 
2.20.1

