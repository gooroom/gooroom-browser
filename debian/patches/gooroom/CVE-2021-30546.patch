From a6ec46c72f930bd031ebaacbe669108aaac7b888 Mon Sep 17 00:00:00 2001
From: Christoph Schwering <schwering@google.com>
Date: Thu, 10 Jun 2021 07:34:37 +0000
Subject: [PATCH] Fixed missing Hide() of credit-card bubble.

(cherry picked from commit 46bed19e49ab2d941e6728c28a9b6fcb095a8da3)

(cherry picked from commit 331767c3797eb380295c41cbbbc553b3934d19f9)

Bug: 1206911
Change-Id: Ia350746b3796f09493910bb5c6f57b3ba990a108
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/2908195
Reviewed-by: Marc Treib <treib@chromium.org>
Reviewed-by: Mohamed Amir Yosef <mamir@chromium.org>
Commit-Queue: Christoph Schwering <schwering@google.com>
Cr-Original-Original-Commit-Position: refs/heads/master@{#885001}
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/2938482
Commit-Queue: Fabio Tirelo <ftirelo@chromium.org>
Auto-Submit: Christoph Schwering <schwering@google.com>
Reviewed-by: Fabio Tirelo <ftirelo@chromium.org>
Cr-Original-Commit-Position: refs/branch-heads/4472@{#1437}
Cr-Original-Branched-From: 3d60439cfb36485e76a1c5bb7f513d3721b20da1-refs/heads/master@{#870763}
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/2948748
Owners-Override: Victor-Gabriel Savu <vsavu@google.com>
Reviewed-by: Artem Sumaneev <asumaneev@google.com>
Commit-Queue: Victor-Gabriel Savu <vsavu@google.com>
Cr-Commit-Position: refs/branch-heads/4430@{#1515}
Cr-Branched-From: e5ce7dc4f7518237b3d9bb93cccca35d25216cbe-refs/heads/master@{#857950}
---
 .../ui/autofill/payments/save_card_bubble_controller_impl.cc    | 2 --
 .../ui/autofill/save_address_profile_bubble_controller_impl.cc  | 2 --
 2 files changed, 4 deletions(-)

diff --git a/chrome/browser/ui/autofill/payments/save_card_bubble_controller_impl.cc b/chrome/browser/ui/autofill/payments/save_card_bubble_controller_impl.cc
index da665e60d..0bd703058 100644
--- a/chrome/browser/ui/autofill/payments/save_card_bubble_controller_impl.cc
+++ b/chrome/browser/ui/autofill/payments/save_card_bubble_controller_impl.cc
@@ -264,8 +264,6 @@ bool SaveCardBubbleControllerImpl::ShouldRequestExpirationDateFromUser() const {
 
 void SaveCardBubbleControllerImpl::OnSaveButton(
     const AutofillClient::UserProvidedCardDetails& user_provided_card_details) {
-  set_bubble_view(nullptr);
-
   switch (current_bubble_type_) {
     case BubbleType::UPLOAD_SAVE: {
       DCHECK(!upload_save_card_prompt_callback_.is_null());
diff --git a/chrome/browser/ui/autofill/save_address_profile_bubble_controller_impl.cc b/chrome/browser/ui/autofill/save_address_profile_bubble_controller_impl.cc
index 92fcfec58..38aa8f83b 100644
--- a/chrome/browser/ui/autofill/save_address_profile_bubble_controller_impl.cc
+++ b/chrome/browser/ui/autofill/save_address_profile_bubble_controller_impl.cc
@@ -50,8 +50,6 @@ SaveAddressProfileBubbleControllerImpl::GetProfileToSave() const {
 
 void SaveAddressProfileBubbleControllerImpl::OnUserDecision(
     AutofillClient::SaveAddressProfileOfferUserDecision decision) {
-  set_bubble_view(nullptr);
-
   std::move(address_profile_save_prompt_callback_)
       .Run(decision, address_profile_);
 }
-- 
2.20.1

