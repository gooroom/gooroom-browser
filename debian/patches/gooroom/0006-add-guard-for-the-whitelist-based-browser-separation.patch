From 2fa05f6abf64571cb0469a96f709b162d35ab22d Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Wed, 22 Jul 2020 14:14:47 +0900
Subject: [PATCH 06/71] add guard for the whitelist based browser separation

---
 build/config/chrome_build.gni   | 1 +
 ppapi/buildflags/BUILD.gn       | 5 ++++-
 ppapi/buildflags/buildflags.gni | 1 +
 3 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/build/config/chrome_build.gni b/build/config/chrome_build.gni
index e8f9660f2c3d..6ec402c58b29 100644
--- a/build/config/chrome_build.gni
+++ b/build/config/chrome_build.gni
@@ -7,6 +7,7 @@ declare_args() {
   # true means official Google Chrome branding (requires extra Google-internal
   # resources).
   is_chrome_branded = false
+  is_gooroom = true
 
   # Turn this on to generate order files. See
   # https://chromium.googlesource.com/chromium/src/+/master/docs/win_order_files.md
diff --git a/ppapi/buildflags/BUILD.gn b/ppapi/buildflags/BUILD.gn
index 4dfdc7a5b335..2b50baf98d4d 100644
--- a/ppapi/buildflags/BUILD.gn
+++ b/ppapi/buildflags/BUILD.gn
@@ -11,5 +11,8 @@ import("//ppapi/buildflags/buildflags.gni")
 
 buildflag_header("buildflags") {
   header = "buildflags.h"
-  flags = [ "ENABLE_PLUGINS=$enable_plugins" ]
+  flags = [
+    "ENABLE_PLUGINS=$enable_plugins",
+    "ENABLE_GOOROOM=$enable_gooroom"
+  ]
 }
diff --git a/ppapi/buildflags/buildflags.gni b/ppapi/buildflags/buildflags.gni
index 560d1ecaecbd..cdfbc36d2a06 100644
--- a/ppapi/buildflags/buildflags.gni
+++ b/ppapi/buildflags/buildflags.gni
@@ -8,4 +8,5 @@ import("//build/config/features.gni")
 
 declare_args() {
   enable_plugins = !is_android && !is_ios && !is_chromecast && !is_fuchsia
+  enable_gooroom = is_gooroom
 }
-- 
2.20.1

