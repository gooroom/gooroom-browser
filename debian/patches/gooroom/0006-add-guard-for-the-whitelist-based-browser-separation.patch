From 5ab212580c178e08c08b88a832338ef471540b3a Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Wed, 22 Jul 2020 14:14:47 +0900
Subject: [PATCH 06/84] add guard for the whitelist based browser separation

---
 build/config/chrome_build.gni   | 1 +
 ppapi/buildflags/BUILD.gn       | 5 ++++-
 ppapi/buildflags/buildflags.gni | 1 +
 3 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/build/config/chrome_build.gni b/build/config/chrome_build.gni
index 5c51d7f2c..e9c6531b8 100644
--- a/build/config/chrome_build.gni
+++ b/build/config/chrome_build.gni
@@ -7,6 +7,7 @@ declare_args() {
   # true means official Google Chrome branding (requires extra Google-internal
   # resources).
   is_chrome_branded = false
+  is_gooroom = true
 }
 
 declare_args() {
diff --git a/ppapi/buildflags/BUILD.gn b/ppapi/buildflags/BUILD.gn
index 4dfdc7a5b..2b50baf98 100644
--- a/ppapi/buildflags/BUILD.gn
+++ b/ppapi/buildflags/BUILD.gn
@@ -11,5 +11,8 @@ import("//ppapi/buildflags/buildflags.gni")
 
 buildflag_header("buildflags") {
   header = "buildflags.h"
-  flags = [ "ENABLE_PLUGINS=$enable_plugins" ]
+  flags = [
+    "ENABLE_PLUGINS=$enable_plugins",
+    "ENABLE_GOOROOM=$enable_gooroom"
+  ]
 }
diff --git a/ppapi/buildflags/buildflags.gni b/ppapi/buildflags/buildflags.gni
index 560d1ecae..cdfbc36d2 100644
--- a/ppapi/buildflags/buildflags.gni
+++ b/ppapi/buildflags/buildflags.gni
@@ -8,4 +8,5 @@ import("//build/config/features.gni")
 
 declare_args() {
   enable_plugins = !is_android && !is_ios && !is_chromecast && !is_fuchsia
+  enable_gooroom = is_gooroom
 }
-- 
2.20.1

