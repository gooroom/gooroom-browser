From 22e984a72a5105dabc8e170c208b940325dcdfa6 Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Mon, 27 Jul 2020 15:36:42 +0900
Subject: [PATCH 72/88] [BTS:1979] Change scheme chrome ://to gooroom:// on 
 print preview page'

---
 .../ui/webui/print_preview/print_preview_handler.cc      | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/chrome/browser/ui/webui/print_preview/print_preview_handler.cc b/chrome/browser/ui/webui/print_preview/print_preview_handler.cc
index 113d34201f90..caec871bccba 100644
--- a/chrome/browser/ui/webui/print_preview/print_preview_handler.cc
+++ b/chrome/browser/ui/webui/print_preview/print_preview_handler.cc
@@ -12,6 +12,10 @@
 #include <utility>
 #include <vector>
 
+#if defined(GOOROOM_BUILD)
+#include "gooroom/URLRewrite/gooroom_url_rewrite.h"
+#endif
+
 #include "base/base64.h"
 #include "base/bind.h"
 #include "base/bind_helpers.h"
@@ -827,7 +831,12 @@ void PrintPreviewHandler::HandleGetPreview(const base::ListValue* args) {
     url::Replacements<char> url_sanitizer;
     url_sanitizer.ClearUsername();
     url_sanitizer.ClearPassword();
+#if defined(GOOROOM_BUILD)
+    // Change "chrome://" to "gooroom://"
+    const GURL& initiator_url = GooroomURLRewrite::ChangeGooroomScheme(initiator->GetLastCommittedURL());
+#else
     const GURL& initiator_url = initiator->GetLastCommittedURL();
+#endif
     settings.SetKey(kSettingHeaderFooterURL,
                     base::Value(url_formatter::FormatUrl(
                         initiator_url.ReplaceComponents(url_sanitizer))));
-- 
2.20.1

