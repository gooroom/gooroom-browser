From 8b139dc4cecbf6cdef1af9ed9ce9a6a531325718 Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Fri, 24 Jul 2020 12:00:11 +0900
Subject: [PATCH 32/84] Support ppapi-flash module

---
 gooroom/browser/gooroom_pref.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/gooroom/browser/gooroom_pref.cc b/gooroom/browser/gooroom_pref.cc
index 3e33505a8..bffa5fb2a 100644
--- a/gooroom/browser/gooroom_pref.cc
+++ b/gooroom/browser/gooroom_pref.cc
@@ -82,6 +82,9 @@ void GooroomPref::setup() {
   std::string untrust_user_data_dir_option =
       "--user-data-dir=" + home_path_dir.AsUTF8Unsafe() +
       "/.config/gooroom/untrust";
+  //TODO need to get the flash version dynamically.
+  std::string flash_dir = "--ppapi-flash-path=/usr/lib/adobe-flashplugin/libpepflashplayer.so";
+  std::string flash_version = "--ppapi-flash-version=31.0.0.153";
 
   bool use_user_data_dir = false;
   for (base::CommandLine::StringVector::const_iterator it = argv.begin();
@@ -109,7 +112,7 @@ void GooroomPref::setup() {
           exit(0);
         } else {
           execl(exe_path.c_str(), "gooroom-browser",
-                trust_user_data_dir_option.c_str(), GURL(*it).spec().c_str(),
+                trust_user_data_dir_option.c_str(), flash_dir.c_str(), flash_version.c_str(), GURL(*it).spec().c_str(),
                 NULL);
           exit(0);
         }
@@ -119,7 +122,7 @@ void GooroomPref::setup() {
           exit(0);
         } else {
           execl(exe_path.c_str(), "gooroom-browser",
-                untrust_user_data_dir_option.c_str(), GURL(*it).spec().c_str(),
+                untrust_user_data_dir_option.c_str(),flash_dir.c_str(), flash_version.c_str(), GURL(*it).spec().c_str(),
                 NULL);
           exit(0);
         }
-- 
2.20.1

