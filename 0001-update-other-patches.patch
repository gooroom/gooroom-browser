From 921234ada1f39f27f4c039dace139554befa5467 Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Fri, 1 Apr 2022 16:39:45 +0900
Subject: [PATCH] update other patches

---
 debian/patches/bullseye/blink-constexpr.patch |    24 +
 debian/patches/bullseye/clang11.patch         |    32 +
 debian/patches/bullseye/icu-types.patch       |    43 +
 .../patches/{fixes => bullseye}/nomerge.patch |    10 +
 debian/patches/buster/clang7.patch            |   157 -
 debian/patches/buster/drm97.patch             |    31 -
 debian/patches/buster/icu63.patch             |  1911 ---
 debian/patches/buster/re2.patch               |    31 -
 debian/patches/buster/vpx17.patch             |   793 --
 .../debianization/explicit-python2.patch      | 10768 ----------------
 debian/patches/debianization/manpage.patch    |     4 +-
 .../debianization/master-preferences.patch    |     7 +-
 .../patches/debianization/optimization.patch  |    27 +-
 debian/patches/debianization/sandbox.patch    |     2 +-
 debian/patches/disable/android.patch          |     6 +-
 debian/patches/disable/angle-perftests.patch  |    23 +-
 debian/patches/disable/buildbot.patch         |   174 -
 debian/patches/disable/catapult.patch         |   139 +-
 .../patches/disable/devtools-unittests.patch  |   294 +-
 debian/patches/disable/font-tests.patch       |    29 +-
 debian/patches/disable/fuzzers.patch          |     4 +-
 debian/patches/disable/glmark.patch           |    21 -
 .../patches/disable/google-api-warning.patch  |    15 +-
 debian/patches/disable/installer.patch        |    10 +-
 debian/patches/disable/ios.patch              |    10 -
 debian/patches/disable/libaom-arm.patch       |     8 +-
 debian/patches/disable/mojo.patch             |   489 -
 debian/patches/disable/openh264.patch         |     4 +-
 debian/patches/disable/ozone-unittests.patch  |    44 -
 debian/patches/disable/signin.patch           |    79 +-
 debian/patches/disable/swiftshader-2.patch    |   120 +
 debian/patches/disable/swiftshader.patch      |    18 +-
 debian/patches/disable/tests.patch            |    75 +-
 debian/patches/disable/tflite-test.patch      |    21 -
 .../patches/disable/third-party-cookies.patch |    28 +-
 debian/patches/disable/unrar.patch            |    46 +-
 debian/patches/disable/web-ui-tests.patch     |   102 -
 debian/patches/disable/welcome-page.patch     |     2 +-
 debian/patches/disable/widevine-cdm-cu.patch  |     8 +-
 .../patches/fixes/chromeos_devicetype.patch   |    59 -
 debian/patches/fixes/clang-and-gcc11.patch    |   206 +
 debian/patches/fixes/closure.patch            |     2 +-
 debian/patches/fixes/gnu-as.patch             |    14 -
 debian/patches/fixes/inspector.patch          |   258 -
 debian/patches/fixes/missing-includes.patch   |   125 -
 .../patches/fixes/multiple-destruction.patch  |    16 -
 debian/patches/fixes/no-ozone.patch           |    14 -
 debian/patches/fixes/not-constexpr.patch      |    14 -
 .../patches/fixes/nullptr-dereference.patch   |    14 -
 debian/patches/fixes/ps-print.patch           |     2 +-
 debian/patches/fixes/sequence-point.patch     |    38 -
 debian/patches/fixes/time64-sandbox.patch     |    47 -
 debian/patches/fixes/widevine-locations.patch |    10 +-
 debian/patches/gn/explicit-python2.patch      |    38 -
 debian/patches/gn/libcxx.patch                |    13 -
 debian/patches/gn/parallel.patch              |    28 -
 ...ut-gooroom-logo-into-the-browser.patch.swp |   Bin 24576 -> 0 bytes
 debian/patches/system/eu-strip.patch          |    11 +
 debian/patches/system/ffmpeg.patch            |    79 -
 debian/patches/system/harfbuzz.patch          |    90 -
 debian/patches/system/icu-shim.patch          |    19 +
 debian/patches/system/icu.patch               |    43 +-
 debian/patches/system/jsoncpp.patch           |     4 +-
 debian/patches/system/node.patch              |    59 -
 debian/patches/system/nspr.patch              |    49 -
 debian/patches/system/openjpeg.patch          |     6 +-
 debian/patches/system/opus.patch              |     2 +-
 debian/patches/system/png.patch               |    11 -
 debian/patches/system/rapidjson.patch         |    22 +
 .../system/use-desktop-gl-as-default.patch    |    24 -
 debian/patches/system/vpx.patch               |   696 -
 debian/patches/system/zlib.patch              |    10 -
 debian/patches/upstream/libdrm.patch          |    54 +
 debian/patches/upstream/mojo.patch            |  7545 +++++++++++
 debian/patches/warnings/deprecated.patch      |    14 -
 debian/patches/warnings/gcc-diagnostic.patch  |    16 -
 .../warnings/int-in-bool-context.patch        |    98 -
 debian/patches/warnings/multichar.patch       |    13 -
 .../patches/warnings/null-destination.patch   |    22 -
 debian/patches/warnings/restrict.patch        |    14 -
 debian/patches/warnings/sign-compare.patch    |    93 -
 .../patches/warnings/stringop-overflow.patch  |    14 -
 82 files changed, 8544 insertions(+), 16971 deletions(-)
 create mode 100644 debian/patches/bullseye/blink-constexpr.patch
 create mode 100644 debian/patches/bullseye/clang11.patch
 create mode 100644 debian/patches/bullseye/icu-types.patch
 rename debian/patches/{fixes => bullseye}/nomerge.patch (51%)
 delete mode 100644 debian/patches/buster/clang7.patch
 delete mode 100644 debian/patches/buster/drm97.patch
 delete mode 100644 debian/patches/buster/icu63.patch
 delete mode 100644 debian/patches/buster/re2.patch
 delete mode 100644 debian/patches/buster/vpx17.patch
 delete mode 100644 debian/patches/debianization/explicit-python2.patch
 delete mode 100644 debian/patches/disable/buildbot.patch
 delete mode 100644 debian/patches/disable/glmark.patch
 delete mode 100644 debian/patches/disable/ios.patch
 delete mode 100644 debian/patches/disable/mojo.patch
 delete mode 100644 debian/patches/disable/ozone-unittests.patch
 create mode 100644 debian/patches/disable/swiftshader-2.patch
 delete mode 100644 debian/patches/disable/tflite-test.patch
 delete mode 100644 debian/patches/disable/web-ui-tests.patch
 delete mode 100644 debian/patches/fixes/chromeos_devicetype.patch
 create mode 100644 debian/patches/fixes/clang-and-gcc11.patch
 delete mode 100644 debian/patches/fixes/gnu-as.patch
 delete mode 100644 debian/patches/fixes/inspector.patch
 delete mode 100644 debian/patches/fixes/missing-includes.patch
 delete mode 100644 debian/patches/fixes/multiple-destruction.patch
 delete mode 100644 debian/patches/fixes/no-ozone.patch
 delete mode 100644 debian/patches/fixes/not-constexpr.patch
 delete mode 100644 debian/patches/fixes/nullptr-dereference.patch
 delete mode 100644 debian/patches/fixes/sequence-point.patch
 delete mode 100644 debian/patches/fixes/time64-sandbox.patch
 delete mode 100644 debian/patches/gn/explicit-python2.patch
 delete mode 100644 debian/patches/gn/libcxx.patch
 delete mode 100644 debian/patches/gn/parallel.patch
 delete mode 100644 debian/patches/gooroom/.0009-Put-gooroom-logo-into-the-browser.patch.swp
 create mode 100644 debian/patches/system/eu-strip.patch
 delete mode 100644 debian/patches/system/ffmpeg.patch
 delete mode 100644 debian/patches/system/harfbuzz.patch
 create mode 100644 debian/patches/system/icu-shim.patch
 delete mode 100644 debian/patches/system/node.patch
 delete mode 100644 debian/patches/system/nspr.patch
 delete mode 100644 debian/patches/system/png.patch
 create mode 100644 debian/patches/system/rapidjson.patch
 delete mode 100644 debian/patches/system/use-desktop-gl-as-default.patch
 delete mode 100644 debian/patches/system/vpx.patch
 create mode 100644 debian/patches/upstream/libdrm.patch
 create mode 100644 debian/patches/upstream/mojo.patch
 delete mode 100644 debian/patches/warnings/deprecated.patch
 delete mode 100644 debian/patches/warnings/gcc-diagnostic.patch
 delete mode 100644 debian/patches/warnings/int-in-bool-context.patch
 delete mode 100644 debian/patches/warnings/multichar.patch
 delete mode 100644 debian/patches/warnings/null-destination.patch
 delete mode 100644 debian/patches/warnings/restrict.patch
 delete mode 100644 debian/patches/warnings/sign-compare.patch
 delete mode 100644 debian/patches/warnings/stringop-overflow.patch

diff --git a/debian/patches/bullseye/blink-constexpr.patch b/debian/patches/bullseye/blink-constexpr.patch
new file mode 100644
index 0000000..df4c8df
--- /dev/null
+++ b/debian/patches/bullseye/blink-constexpr.patch
@@ -0,0 +1,24 @@
+description: fix build error w/ clang 11
+author: Andres Salomon <dilinger@debian.org>
+
+The constexpr works fine w/ clang-13, but not with clang-11. The code
+still must be inlined (otherwise you get conflicting symbols), but
+the computations can't be computed at compile time under the older
+clang.
+
+--- a/third_party/blink/renderer/platform/wtf/math_extras.h
++++ b/third_party/blink/renderer/platform/wtf/math_extras.h
+@@ -127,11 +127,11 @@ constexpr float Grad2turn(float g) {
+   return g * (1.0f / 400.0f);
+ }
+ 
+-constexpr double RoundHalfTowardsPositiveInfinity(double value) {
++inline double RoundHalfTowardsPositiveInfinity(double value) {
+   return std::floor(value + 0.5);
+ }
+ 
+-constexpr float RoundHalfTowardsPositiveInfinity(float value) {
++inline float RoundHalfTowardsPositiveInfinity(float value) {
+   return std::floor(value + 0.5f);
+ }
+ 
diff --git a/debian/patches/bullseye/clang11.patch b/debian/patches/bullseye/clang11.patch
new file mode 100644
index 0000000..91d2f47
--- /dev/null
+++ b/debian/patches/bullseye/clang11.patch
@@ -0,0 +1,32 @@
+description: clang-11 doesn't support -ffile-compilation-dir, -fuse-ctor-homing, or -Wno-unused-but-set-variable
+author: Andres Salomon <dilinger@debian.org>
+
+--- a/build/config/compiler/BUILD.gn
++++ b/build/config/compiler/BUILD.gn
+@@ -1249,7 +1249,8 @@ config("compiler_deterministic") {
+     } else {
+       # -ffile-compilation-dir is an alias for both -fdebug-compilation-dir=
+       # and -fcoverage-compilation-dir=.
+-      cflags += [ "-ffile-compilation-dir=." ]
++      #cflags += [ "-ffile-compilation-dir=." ]
++      cflags += [ "-fdebug-compilation-dir=." ]
+     }
+     if (!is_win) {
+       # We don't use clang -cc1as on Windows (yet? https://crbug.com/762167)
+@@ -1678,8 +1679,6 @@ config("no_chromium_code") {
+     ]
+     if (!is_nacl) {
+       cflags += [
+-        # Disabled for similar reasons as -Wunused-variable.
+-        "-Wno-unused-but-set-variable",
+ 
+         # TODO(https://crbug.com/1202159): Clean up and enable.
+         "-Wno-misleading-indentation",
+@@ -2359,7 +2358,6 @@ config("symbols") {
+       # by emitting class type info only when constructors are emitted.
+       cflags += [
+         "-Xclang",
+-        "-fuse-ctor-homing",
+       ]
+     }
+   }
diff --git a/debian/patches/bullseye/icu-types.patch b/debian/patches/bullseye/icu-types.patch
new file mode 100644
index 0000000..d5ef32c
--- /dev/null
+++ b/debian/patches/bullseye/icu-types.patch
@@ -0,0 +1,43 @@
+--- a/v8/src/objects/intl-objects.h
++++ b/v8/src/objects/intl-objects.h
+@@ -21,7 +21,7 @@
+ #include "unicode/locid.h"
+ #include "unicode/uversion.h"
+ 
+-#define V8_MINIMUM_ICU_VERSION 69
++#define V8_MINIMUM_ICU_VERSION 67
+ 
+ namespace U_ICU_NAMESPACE {
+ class BreakIterator;
+--- a/v8/src/objects/intl-objects.cc
++++ b/v8/src/objects/intl-objects.cc
+@@ -2551,12 +2551,10 @@ bool ICUTimezoneCache::GetOffsets(double
+   if (is_utc) {
+     GetTimeZone()->getOffset(time_ms, false, *raw_offset, *dst_offset, status);
+   } else {
+-    // Note that casting TimeZone to BasicTimeZone is safe because we know that
+-    // icu::TimeZone used here is a BasicTimeZone.
+     static_cast<const icu::BasicTimeZone*>(GetTimeZone())
+-        ->getOffsetFromLocal(time_ms, UCAL_TZ_LOCAL_FORMER,
+-                             UCAL_TZ_LOCAL_FORMER, *raw_offset, *dst_offset,
+-                             status);
++        ->getOffsetFromLocal(time_ms, icu::BasicTimeZone::kFormer,
++                             icu::BasicTimeZone::kFormer, *raw_offset,
++                             *dst_offset, status);
+   }
+ 
+   return U_SUCCESS(status);
+--- a/third_party/blink/renderer/platform/wtf/date_math.cc
++++ b/third_party/blink/renderer/platform/wtf/date_math.cc
+@@ -672,8 +672,9 @@ absl::optional<base::Time> ParseDateFrom
+     // Handle the conversion of localtime to UTC the same way as the
+     // latest ECMA 262 spec for Javascript (v8 does that, too).
+     static_cast<const icu::BasicTimeZone*>(timezone.get())
+-        ->getOffsetFromLocal(ms, UCAL_TZ_LOCAL_FORMER, UCAL_TZ_LOCAL_FORMER,
+-                             raw_offset, dst_offset, status);
++        ->getOffsetFromLocal(ms, icu::BasicTimeZone::kFormer,
++                             icu::BasicTimeZone::kFormer, raw_offset,
++                             dst_offset, status);
+     DCHECK(U_SUCCESS(status));
+     offset = static_cast<int>((raw_offset + dst_offset) / kMsPerMinute);
+   }
diff --git a/debian/patches/fixes/nomerge.patch b/debian/patches/bullseye/nomerge.patch
similarity index 51%
rename from debian/patches/fixes/nomerge.patch
rename to debian/patches/bullseye/nomerge.patch
index f3c655f..d4f8247 100644
--- a/debian/patches/fixes/nomerge.patch
+++ b/debian/patches/bullseye/nomerge.patch
@@ -1,3 +1,13 @@
+description: fix build error for clang-11
+
+../../base/check.h:88:3: error: 'nomerge' attribute cannot be applied to a declaration
+  NOMERGE ~CheckError();
+  ^       ~
+../../base/compiler_specific.h:369:19: note: expanded from macro 'NOMERGE'
+#define NOMERGE [[clang::nomerge]]
+                  ^
+1 error generated.
+
 --- a/base/check.h
 +++ b/base/check.h
 @@ -85,7 +85,7 @@ class BASE_EXPORT CheckError {
diff --git a/debian/patches/buster/clang7.patch b/debian/patches/buster/clang7.patch
deleted file mode 100644
index 0bd817e..0000000
--- a/debian/patches/buster/clang7.patch
+++ /dev/null
@@ -1,157 +0,0 @@
-description: disable flags that are introduced after clang 7
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/build/config/compiler/BUILD.gn
-+++ b/build/config/compiler/BUILD.gn
-@@ -129,7 +129,7 @@ declare_args() {
-   #
-   # TODO(crbug.com/977230): Enabling this when 'use_xcode_clang' is true may
-   # call an old clang that doesn't support auto-init.
--  init_stack_vars = !is_android && !use_xcode_clang
-+  init_stack_vars = false
- 
-   # This argument is to control whether enabling text section splitting in the
-   # final binary. When enabled, the separated text sections with prefix
-@@ -704,7 +704,7 @@ config("compiler") {
-   # present. On Android this increases binary size due to more thinks for long
-   # jumps. Turn it off by default and enable selectively for targets where it's
-   # beneficial.
--  if (use_lld && !enable_call_graph_profile_sort) {
-+  if (false) {
-     if (is_win) {
-       ldflags += [ "/call-graph-profile-sort:no" ]
-     } else if (!is_apple) {
-@@ -1514,29 +1514,9 @@ config("default_warnings") {
-         # Flags NaCl (Clang 3.7) and Xcode 9.2 (Clang clang-900.0.39.2) do not
-         # recognize.
-         cflags += [
--          # An ABI compat warning we don't care about, https://crbug.com/1102157
--          # TODO(thakis): Push this to the (few) targets that need it,
--          # instead of having a global flag.
--          "-Wno-psabi",
--
-           # Ignore warnings about MSVC optimization pragmas.
-           # TODO(thakis): Only for no_chromium_code? http://crbug.com/912662
-           "-Wno-ignored-pragma-optimize",
--
--          # TODO(https://crbug.com/989932): Evaluate and possibly enable.
--          "-Wno-implicit-int-float-conversion",
--
--          # TODO(https://crbug.com/999886): Clean up, enable.
--          "-Wno-final-dtor-non-final-class",
--
--          # TODO(https://crbug.com/1016945) Clean up, enable.
--          "-Wno-builtin-assume-aligned-alignment",
--
--          # TODO(https://crbug.com/1028110): Evaluate and possible enable.
--          "-Wno-deprecated-copy",
--
--          # TODO(https://crbug.com/1050281): Clean up, enable.
--          "-Wno-non-c-typedef-for-linkage",
-         ]
- 
-         cflags_c += [
-@@ -1549,12 +1529,6 @@ config("default_warnings") {
-           "-Wno-implicit-fallthrough",
-         ]
- 
--        if (enable_wmax_tokens) {
--          cflags += [ "-Wmax-tokens" ]
--        } else {
--          # TODO(https://crbug.com/1049569): Remove after Clang 87b235db.
--          cflags += [ "-Wno-max-tokens" ]
--        }
-       }
-     }
-   }
-@@ -1685,7 +1659,7 @@ config("no_chromium_code") {
-       # suppressing them individually, we just blanket suppress them here.
-       "-Wno-unused-variable",
-     ]
--    if (!is_nacl && (current_toolchain == host_toolchain || !use_xcode_clang)) {
-+    if (false) {
-       cflags += [
-         # TODO(https://crbug.com/1031169): Clean up and enable.
-         "-Wno-misleading-indentation",
---- a/third_party/blink/renderer/BUILD.gn
-+++ b/third_party/blink/renderer/BUILD.gn
-@@ -46,14 +46,7 @@ config("inside_blink") {
-       "-Wconversion",
-       "-Wno-float-conversion",
-       "-Wno-sign-conversion",
--      "-Wno-implicit-float-conversion",
--      "-Wno-implicit-int-conversion",
-     ]
--
--    if (!is_chromeos_ash ||
--        default_toolchain != "//build/toolchain/cros:target") {
--      cflags += [ "-Wno-enum-float-conversion" ]
--    }
-   }
- }
- 
---- a/third_party/angle/BUILD.gn
-+++ b/third_party/angle/BUILD.gn
-@@ -172,7 +172,6 @@ config("extra_warnings") {
-     cflags += [
-       "-Wbad-function-cast",
-       "-Wconditional-uninitialized",
--      "-Wextra-semi-stmt",
-       "-Wfloat-conversion",
-       "-Winconsistent-missing-destructor-override",
-       "-Wmissing-field-initializers",
-@@ -194,14 +193,6 @@ config("extra_warnings") {
-       "-Wunreachable-code",
-       "-Wshorten-64-to-32",
-     ]
--    if (!use_xcode_clang) {
--      # Mac catalyst uses a clang version that doesn't have these.
--      cflags += [
--        "-Wdeprecated-copy",
--        "-Wsuggest-destructor-override",
--        "-Wsuggest-override",
--      ]
--    }
-   }
- 
-   if (angle_is_winuwp) {
---- a/third_party/angle/src/compiler/preprocessor/preprocessor.l
-+++ b/third_party/angle/src/compiler/preprocessor/preprocessor.l
-@@ -50,7 +50,6 @@ IF YOU MODIFY THIS FILE YOU ALSO NEED TO
- #pragma clang diagnostic ignored "-Wunknown-warning-option"
- #endif
- // Flex isn't semi-colon clean.
--#pragma clang diagnostic ignored "-Wextra-semi-stmt"
- #pragma clang diagnostic ignored "-Wunreachable-code"
- #endif
- 
---- a/third_party/angle/src/compiler/translator/glslang.l
-+++ b/third_party/angle/src/compiler/translator/glslang.l
-@@ -46,7 +46,6 @@ WHICH GENERATES THE GLSL ES LEXER (glsla
- #pragma clang diagnostic ignored "-Wunknown-warning-option"
- #endif
- // Flex isn't semi-colon clean.
--#pragma clang diagnostic ignored "-Wextra-semi-stmt"
- #pragma clang diagnostic ignored "-Wunreachable-code"
- #endif
- }
---- a/third_party/angle/src/compiler/preprocessor/preprocessor_lex_autogen.cpp
-+++ b/third_party/angle/src/compiler/preprocessor/preprocessor_lex_autogen.cpp
-@@ -708,7 +708,6 @@ IF YOU MODIFY THIS FILE YOU ALSO NEED TO
- #        pragma clang diagnostic ignored "-Wunknown-warning-option"
- #    endif
- // Flex isn't semi-colon clean.
--#    pragma clang diagnostic ignored "-Wextra-semi-stmt"
- #    pragma clang diagnostic ignored "-Wunreachable-code"
- #endif
- 
---- a/third_party/angle/src/compiler/translator/glslang_lex_autogen.cpp
-+++ b/third_party/angle/src/compiler/translator/glslang_lex_autogen.cpp
-@@ -31,7 +31,6 @@
- #        pragma clang diagnostic ignored "-Wunknown-warning-option"
- #    endif
- // Flex isn't semi-colon clean.
--#    pragma clang diagnostic ignored "-Wextra-semi-stmt"
- #    pragma clang diagnostic ignored "-Wunreachable-code"
- #endif
- 
diff --git a/debian/patches/buster/drm97.patch b/debian/patches/buster/drm97.patch
deleted file mode 100644
index f5f1276..0000000
--- a/debian/patches/buster/drm97.patch
+++ /dev/null
@@ -1,31 +0,0 @@
-description: support libdrm in buster
-author: Jan Luca Naumann
-
---- a/ui/gfx/linux/drm_util_linux.cc
-+++ b/ui/gfx/linux/drm_util_linux.cc
-@@ -40,8 +40,6 @@ int GetFourCCFormatFromBufferFormat(gfx:
-       return DRM_FORMAT_YVU420;
-     case gfx::BufferFormat::YUV_420_BIPLANAR:
-       return DRM_FORMAT_NV12;
--    case gfx::BufferFormat::P010:
--      return DRM_FORMAT_P010;
-   }
-   return DRM_FORMAT_INVALID;
- }
-@@ -70,8 +68,6 @@ gfx::BufferFormat GetBufferFormatFromFou
-       return gfx::BufferFormat::YUV_420_BIPLANAR;
-     case DRM_FORMAT_YVU420:
-       return gfx::BufferFormat::YVU_420;
--    case DRM_FORMAT_P010:
--      return gfx::BufferFormat::P010;
-     default:
-       NOTREACHED();
-       return gfx::BufferFormat::BGRA_8888;
-@@ -91,7 +87,6 @@ bool IsValidBufferFormat(uint32_t curren
-     case DRM_FORMAT_RGB565:
-     case DRM_FORMAT_NV12:
-     case DRM_FORMAT_YVU420:
--    case DRM_FORMAT_P010:
-       return true;
-     default:
-       return false;
diff --git a/debian/patches/buster/icu63.patch b/debian/patches/buster/icu63.patch
deleted file mode 100644
index c75a2ef..0000000
--- a/debian/patches/buster/icu63.patch
+++ /dev/null
@@ -1,1911 +0,0 @@
-description: maintain compatibility with icu 6.3
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/chrome/browser/web_applications/BUILD.gn
-+++ b/chrome/browser/web_applications/BUILD.gn
-@@ -347,7 +347,6 @@ group("unit_tests") {
-     ":web_applications_unit_tests",
-     "//chrome/browser/web_applications/components:unit_tests",
-     "//chrome/browser/web_applications/extensions:unit_tests",
--    "//chrome/browser/web_applications/preinstalled_web_apps:unit_tests",
-   ]
- }
- 
---- a/chrome/browser/web_applications/preinstalled_web_apps/BUILD.gn
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/BUILD.gn
-@@ -17,7 +17,6 @@ source_set("preinstalled_web_apps") {
-     "//base",
-     "//build:branding_buildflags",
-     "//build:chromeos_buildflags",
--    "//chrome/browser:browser_process",
-     "//chrome/browser/web_applications/components",
-     "//chrome/common:non_code_constants",
-     "//skia",
-@@ -50,16 +49,3 @@ source_set("preinstalled_web_apps") {
-     deps += [ "//chrome/browser/resources:preinstalled_web_apps_resources" ]
-   }
- }
--
--source_set("unit_tests") {
--  testonly = true
--
--  sources = [ "preinstalled_web_app_utils_unittest.cc" ]
--
--  deps = [
--    "//chrome/browser:browser_process",
--    "//chrome/browser/web_applications/preinstalled_web_apps",
--    "//skia",
--    "//testing/gtest",
--  ]
--}
---- a/chrome/browser/web_applications/preinstalled_web_apps/google_docs.cc
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/google_docs.cc
-@@ -13,90 +13,6 @@
- 
- namespace web_app {
- 
--namespace {
--
--// clang-format off
--constexpr Translation kNameTranslations[] = {
--    {"af", u8"Dokumente"},
--    {"am", u8"ሰነዶች"},
--    {"ar", u8"مستندات"},
--    {"hy", u8"Փաստաթղթեր"},
--    {"az", u8"Sənəd"},
--    {"eu", u8"Dokumentuak"},
--    {"be", u8"Дакументы"},
--    {"bn", u8"Docs"},
--    {"bg", u8"Документи"},
--    {"my", u8"Docs"},
--    {"ca", u8"Documents"},
--    {"zh-HK", u8"Google 文件"},
--    {"zh-CN", u8"Google 文档"},
--    {"zh-TW", u8"文件"},
--    {"hr", u8"Dokumenti"},
--    {"cs", u8"Dokumenty"},
--    {"da", u8"Docs"},
--    {"nl", u8"Documenten"},
--    {"en-AU", u8"Docs"},
--    {"en-GB", u8"Docs"},
--    {"et", u8"Dokumendid"},
--    {"fil", u8"Docs"},
--    {"fi", u8"Docs"},
--    {"fr", u8"Docs"},
--    {"fr-CA", u8"Documents"},
--    {"gl", u8"Documentos"},
--    {"ka", u8"Docs"},
--    {"de", u8"Dokumente"},
--    {"el", u8"Έγγραφα"},
--    {"gu", u8"Docs"},
--    {"iw", u8"Docs"},
--    {"hi", u8"Docs"},
--    {"hu", u8"Dokumentumok"},
--    {"is", u8"Skjöl"},
--    {"id", u8"Dokumen"},
--    {"it", u8"Documenti"},
--    {"ja", u8"ドキュメント"},
--    {"kn", u8"Docs"},
--    {"kk", u8"Құжаттар"},
--    {"km", u8"ឯកសារ"},
--    {"ko", u8"문서"},
--    {"lo", u8"ເອກະສານ"},
--    {"lv", u8"Dokumenti"},
--    {"lt", u8"Dokumentai"},
--    {"ms", u8"Dokumen"},
--    {"ml", u8"Docs"},
--    {"mr", u8"Docs"},
--    {"mn", u8"Docs"},
--    {"ne", u8"कागजात"},
--    {"no", u8"Dokumenter"},
--    {"or", u8"Docs"},
--    {"fa", u8"سندنگار"},
--    {"pl", u8"Dokumenty"},
--    {"pt-BR", u8"Textos"},
--    {"pt-PT", u8"Docs"},
--    {"pa", u8"Docs"},
--    {"ro", u8"Documente"},
--    {"ru", u8"Документы"},
--    {"sr", u8"Документи"},
--    {"si", u8"Docs"},
--    {"sk", u8"Dokumenty"},
--    {"sl", u8"Dokumenti"},
--    {"es", u8"Documentos"},
--    {"es-419", u8"Documentos"},
--    {"sw", u8"Hati za Google"},
--    {"sv", u8"Dokument"},
--    {"ta", u8"Docs"},
--    {"te", u8"Docs"},
--    {"th", u8"เอกสาร"},
--    {"tr", u8"Dokümanlar"},
--    {"uk", u8"Документи"},
--    {"ur", u8"Docs"},
--    {"vi", u8"Tài liệu"},
--    {"cy", u8"Docs"},
--    {"zu", u8"Amadokhumenti"},
--};
--// clang-format on
--
--}  // namespace
--
- ExternalInstallOptions GetConfigForGoogleDocs() {
-   ExternalInstallOptions options(
-       /*install_url=*/GURL(
-@@ -111,8 +27,7 @@ ExternalInstallOptions GetConfigForGoogl
-   options.only_use_app_info_factory = true;
-   options.app_info_factory = base::BindRepeating([]() {
-     auto info = std::make_unique<WebApplicationInfo>();
--    info->title =
--        base::UTF8ToUTF16(GetTranslatedName("Docs", kNameTranslations));
-+    info->title = base::UTF8ToUTF16("Docs");
-     info->start_url =
-         GURL("https://docs.google.com/document/?usp=installed_webapp");
-     info->scope = GURL("https://docs.google.com/document/");
---- a/chrome/browser/web_applications/preinstalled_web_apps/google_drive.cc
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/google_drive.cc
-@@ -13,93 +13,6 @@
- 
- namespace web_app {
- 
--namespace {
--
--// clang-format off
--constexpr Translation kNameTranslations[] = {
--    {"af", u8"Google Drive"},
--    {"sq", u8"Disku i Google"},
--    {"am", u8"Google Drive"},
--    {"ar", u8"Google Drive"},
--    {"hy", u8"Google Drive"},
--    {"az", u8"Google Disk"},
--    {"eu", u8"Google Drive"},
--    {"be", u8"Google Дыск"},
--    {"bn", u8"Google Drive"},
--    {"bs", u8"Google Disk"},
--    {"bg", u8"Google Диск"},
--    {"my", u8"Google Drive"},
--    {"ca", u8"Google Drive"},
--    {"zh-HK", u8"Google 雲端硬碟"},
--    {"zh-CN", u8"Google 云端硬盘"},
--    {"zh-TW", u8"Google 雲端硬碟"},
--    {"hr", u8"Google disk"},
--    {"cs", u8"Disk Google"},
--    {"da", u8"Google Drev"},
--    {"nl", u8"Google Drive"},
--    {"en-GB", u8"Google Drive"},
--    {"et", u8"Google Drive"},
--    {"fil", u8"Google Drive"},
--    {"fi", u8"Google Drive"},
--    {"fr-CA", u8"Google Disque"},
--    {"fr", u8"Google Drive"},
--    {"gl", u8"Google Drive"},
--    {"ka", u8"Google Drive"},
--    {"de", u8"Google Drive"},
--    {"el", u8"Google Drive"},
--    {"gu", u8"Google Drive"},
--    {"iw", u8"Google Drive"},
--    {"hi", u8"Google Drive"},
--    {"hu", u8"Google Drive"},
--    {"is", u8"Google Drive"},
--    {"id", u8"Google Drive"},
--    {"it", u8"Google Drive"},
--    {"ja", u8"Google ドライブ"},
--    {"kn", u8"Google Drive"},
--    {"kk", u8"Google Drive"},
--    {"km", u8"Google ថាស"},
--    {"ko", u8"Google 드라이브"},
--    {"ky", u8"Google Drive"},
--    {"lo", u8"Google Drive"},
--    {"lv", u8"Google disks"},
--    {"lt", u8"„Google“ diskas"},
--    {"ms", u8"Google Drive"},
--    {"ml", u8"Google Drive"},
--    {"mr", u8"Google Drive"},
--    {"mn", u8"Google Драйв"},
--    {"ne", u8"Google Drive"},
--    {"no", u8"Google Disk"},
--    {"fa", u8"Google Drive"},
--    {"pl", u8"Dysk Google"},
--    {"pt-BR", u8"Google Drive"},
--    {"pt-PT", u8"Google Drive"},
--    {"pa", u8"Google Drive"},
--    {"ro", u8"Google Drive"},
--    {"ru", u8"Google Диск"},
--    {"sr", u8"Google диск"},
--    {"si", u8"Google Drive"},
--    {"sk", u8"Disk Google"},
--    {"sl", u8"Google Drive"},
--    {"es-419", u8"Google Drive"},
--    {"es", u8"Google Drive"},
--    {"sw", u8"Hifadhi ya Google"},
--    {"sv", u8"Google Drive"},
--    {"ta", u8"Google Drive"},
--    {"te", u8"Google Drive"},
--    {"th", u8"Google ไดรฟ์"},
--    {"tr", u8"Google Drive"},
--    {"uk", u8"Google Диск"},
--    {"ur", u8"Google Drive"},
--    {"uz", u8"Google Drive"},
--    {"vi", u8"Google Drive"},
--    {"cy", u8"Google Drive"},
--    {"zu", u8"Google Drayivu"},
--    {"zu", u8"Drayivu"},
--};
--// clang-format on
--
--}  // namespace
--
- ExternalInstallOptions GetConfigForGoogleDrive() {
-   ExternalInstallOptions options(
-       /*install_url=*/GURL(
-@@ -116,8 +29,7 @@ ExternalInstallOptions GetConfigForGoogl
-   options.only_use_app_info_factory = true;
-   options.app_info_factory = base::BindRepeating([]() {
-     auto info = std::make_unique<WebApplicationInfo>();
--    info->title =
--        base::UTF8ToUTF16(GetTranslatedName("Google Drive", kNameTranslations));
-+    info->title = base::UTF8ToUTF16("Google Drive");
-     info->start_url = GURL("https://drive.google.com/?lfhs=2");
-     info->scope = GURL("https://drive.google.com/");
-     info->display_mode = DisplayMode::kStandalone;
---- a/chrome/browser/web_applications/preinstalled_web_apps/google_sheets.cc
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/google_sheets.cc
-@@ -13,88 +13,6 @@
- 
- namespace web_app {
- 
--namespace {
--
--// clang-format off
--constexpr Translation kNameTranslations[] = {
--    {"af", u8"Blaaie"},
--    {"am", u8"ሉሆች"},
--    {"ar", u8"جداول البيانات"},
--    {"hy", u8"Աղյուսակներ"},
--    {"az", u8"Cədvəl"},
--    {"eu", u8"Kalkulu-orriak"},
--    {"be", u8"Табліцы"},
--    {"bn", u8"Sheets"},
--    {"bg", u8"Таблици"},
--    {"my", u8"စာမျက်နှာများ"},
--    {"ca", u8"Fulls de càlcul"},
--    {"zh-HK", u8"試算表"},
--    {"zh-CN", u8"表格"},
--    {"zh-TW", u8"試算表"},
--    {"hr", u8"Listovi"},
--    {"cs", u8"Tabulky"},
--    {"da", u8"Regneark"},
--    {"nl", u8"Spreadsheets"},
--    {"en-GB", u8"Sheets"},
--    {"et", u8"Lehed"},
--    {"fil", u8"Mga Sheet"},
--    {"fi", u8"Sheets"},
--    {"fr", u8"Feuilles de calcul"},
--    {"fr-CA", u8"Feuilles de calcul"},
--    {"gl", u8"Follas de cálculo"},
--    {"ka", u8"Sheets"},
--    {"de", u8"Tabellen"},
--    {"el", u8"Υπολογιστικά φύλλα"},
--    {"gu", u8"Sheets"},
--    {"iw", u8"Sheets"},
--    {"hi", u8"Sheets"},
--    {"hu", u8"Táblázatok"},
--    {"is", u8"Töflureiknar"},
--    {"id", u8"Spreadsheet"},
--    {"it", u8"Fogli"},
--    {"ja", u8"スプレッドシート"},
--    {"kn", u8"Sheets"},
--    {"kk", u8"Sheets"},
--    {"km", u8"បញ្ជី"},
--    {"ko", u8"스프레드시트"},
--    {"lo", u8"​ຊີດ"},
--    {"lv", u8"Izklājlapas"},
--    {"lt", u8"Skaičiuoklės"},
--    {"ms", u8"Helaian"},
--    {"ml", u8"Sheets"},
--    {"mr", u8"Sheets"},
--    {"mn", u8"Хүснэгт"},
--    {"ne", u8"पाना"},
--    {"no", u8"Regneark"},
--    {"fa", u8"کاربرگ‌نگار"},
--    {"pl", u8"Arkusze"},
--    {"pt-BR", u8"Planilhas"},
--    {"pt-PT", u8"Sheets"},
--    {"pa", u8"Sheets"},
--    {"ro", u8"Foi de calcul"},
--    {"ru", u8"Таблица"},
--    {"sr", u8"Табеле"},
--    {"si", u8"Sheets"},
--    {"sk", u8"Tabuľky"},
--    {"sl", u8"Preglednice"},
--    {"es", u8"Hojas de cálculo"},
--    {"es-419", u8"Hojas de cálculo"},
--    {"sw", u8"Majedwali"},
--    {"sv", u8"Kalkylark"},
--    {"ta", u8"Sheets"},
--    {"te", u8"షీట్‌లు"},
--    {"th", u8"ชีต"},
--    {"tr", u8"E-Tablolar"},
--    {"uk", u8"Таблиці"},
--    {"ur", u8"شیٹس"},
--    {"vi", u8"Trang tính"},
--    {"cy", u8"Dalenni"},
--    {"zu", u8"AmaSpredishithi"},
--};
--// clang-format on
--
--}  // namespace
--
- ExternalInstallOptions GetConfigForGoogleSheets() {
-   ExternalInstallOptions options(
-       /*install_url=*/GURL("https://docs.google.com/spreadsheets/"
-@@ -109,9 +27,7 @@ ExternalInstallOptions GetConfigForGoogl
-   options.only_use_app_info_factory = true;
-   options.app_info_factory = base::BindRepeating([]() {
-     auto info = std::make_unique<WebApplicationInfo>();
--    info->title =
--        base::UTF8ToUTF16(GetTranslatedName("Sheets", kNameTranslations));
--
-+    info->title = base::UTF8ToUTF16("Sheets");
-     info->start_url =
-         GURL("https://docs.google.com/spreadsheets/?usp=installed_webapp");
-     info->scope = GURL("https://docs.google.com/spreadsheets/");
---- a/chrome/browser/web_applications/preinstalled_web_apps/google_slides.cc
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/google_slides.cc
-@@ -13,88 +13,6 @@
- 
- namespace web_app {
- 
--namespace {
--
--// clang-format off
--constexpr Translation kNameTranslations[] = {
--    {"af", u8"Skyfies"},
--    {"am", u8"ስላይዶች"},
--    {"ar", u8"العروض التقديمية"},
--    {"hy", u8"Սլայդներ"},
--    {"az", u8"Slaydlar"},
--    {"eu", u8"Aurkezpenak"},
--    {"be", u8"Прэзентацыі"},
--    {"bn", u8"Slides"},
--    {"bg", u8"Презентации"},
--    {"my", u8"ဆလိုက်များ"},
--    {"ca", u8"Presentacions"},
--    {"zh-HK", u8"簡報"},
--    {"zh-CN", u8"幻灯片"},
--    {"zh-TW", u8"簡報"},
--    {"hr", u8"Prezentacije"},
--    {"cs", u8"Prezentace"},
--    {"da", u8"Præsentationer"},
--    {"nl", u8"Presentaties"},
--    {"en-GB", u8"Slides"},
--    {"et", u8"Esitlused"},
--    {"fil", u8"Mga Slide"},
--    {"fi", u8"Slides"},
--    {"fr", u8"Présentations"},
--    {"fr-CA", u8"Présentations"},
--    {"gl", u8"Presentacións"},
--    {"ka", u8"Slides"},
--    {"de", u8"Präsentationen"},
--    {"el", u8"Παρουσιάσεις"},
--    {"gu", u8"Slides"},
--    {"iw", u8"Slides"},
--    {"hi", u8"Slides"},
--    {"hu", u8"Diák"},
--    {"is", u8"Skyggnur"},
--    {"id", u8"Slide"},
--    {"it", u8"Presentazioni"},
--    {"ja", u8"スライド"},
--    {"kn", u8"Slides"},
--    {"kk", u8"Slides"},
--    {"km", u8"បទបង្ហាញ"},
--    {"ko", u8"프레젠테이션"},
--    {"lo", u8"ສະໄລ້"},
--    {"lv", u8"Prezentācijas"},
--    {"lt", u8"Skaidrės"},
--    {"ms", u8"Slaid"},
--    {"ml", u8"Slides"},
--    {"mr", u8"Slides"},
--    {"mn", u8"Слайд"},
--    {"ne", u8"स्लाइड"},
--    {"no", u8"Presentasjoner"},
--    {"fa", u8"اسلایدنگار"},
--    {"pl", u8"Prezentacje"},
--    {"pt-BR", u8"Apresentações"},
--    {"pt-PT", u8"Slides"},
--    {"pa", u8"Slides"},
--    {"ro", u8"Prezentări"},
--    {"ru", u8"Презентация"},
--    {"sr", u8"Презентације"},
--    {"si", u8"Slides"},
--    {"sk", u8"Prezentácie"},
--    {"sl", u8"Predstavitve"},
--    {"es", u8"Presentaciones"},
--    {"es-419", u8"Presentaciones"},
--    {"sw", u8"Slaidi"},
--    {"sv", u8"Presentationer"},
--    {"ta", u8"Slides"},
--    {"te", u8"Slides"},
--    {"th", u8"สไลด์"},
--    {"tr", u8"Slaytlar"},
--    {"uk", u8"Презентації"},
--    {"ur", u8"سلائیڈز"},
--    {"vi", u8"Trang trình bày"},
--    {"cy", u8"Sleidiau"},
--    {"zu", u8"Amaslayidi"},
--};
--// clang-format on
--
--}  // namespace
--
- ExternalInstallOptions GetConfigForGoogleSlides() {
-   ExternalInstallOptions options(
-       /*install_url=*/GURL("https://docs.google.com/presentation/"
-@@ -109,8 +27,7 @@ ExternalInstallOptions GetConfigForGoogl
-   options.only_use_app_info_factory = true;
-   options.app_info_factory = base::BindRepeating([]() {
-     auto info = std::make_unique<WebApplicationInfo>();
--    info->title =
--        base::UTF8ToUTF16(GetTranslatedName("Slides", kNameTranslations));
-+    info->title = base::UTF8ToUTF16("Slides");
-     info->start_url =
-         GURL("https://docs.google.com/presentation/?usp=installed_webapp");
-     info->scope = GURL("https://docs.google.com/presentation/");
---- a/chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.cc
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.cc
-@@ -4,24 +4,10 @@
- 
- #include "chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.h"
- 
--#include "chrome/browser/browser_process.h"
--#include "third_party/icu/source/common/unicode/localematcher.h"
- #include "ui/base/resource/resource_bundle.h"
- 
- namespace web_app {
- 
--namespace {
--
--icu::Locale GetLocaleFromTranslation(const Translation& translation) {
--  UErrorCode error = U_ZERO_ERROR;
--  icu::Locale locale =
--      icu::Locale::forLanguageTag(translation.bcp47_locale, error);
--  DCHECK(U_SUCCESS(error));
--  return locale;
--}
--
--}  // namespace
--
- std::map<SquareSizePx, SkBitmap> LoadBundledIcons(
-     const std::initializer_list<int>& icon_resource_ids) {
-   std::map<SquareSizePx, SkBitmap> results;
-@@ -34,28 +20,4 @@ std::map<SquareSizePx, SkBitmap> LoadBun
-   return results;
- }
- 
--const char* GetTranslatedName(const char* utf8_default_name,
--                              base::span<const Translation> translations) {
--  UErrorCode error = U_ZERO_ERROR;
--  icu::LocaleMatcher matcher = icu::LocaleMatcher::Builder()
--                                   .setSupportedLocalesViaConverter(
--                                       translations.begin(), translations.end(),
--                                       GetLocaleFromTranslation)
--                                   .build(error);
--  DCHECK(U_SUCCESS(error));
--
--  icu::Locale application_locale = icu::Locale::forLanguageTag(
--      g_browser_process->GetApplicationLocale(), error);
--  DCHECK(U_SUCCESS(error));
--
--  int32_t best_index =
--      matcher.getBestMatchResult(application_locale, error).getSupportedIndex();
--  DCHECK(U_SUCCESS(error));
--
--  if (best_index == -1)
--    return utf8_default_name;
--
--  return translations[best_index].utf8_translation;
--}
--
- }  // namespace web_app
---- a/chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.h
-+++ b/chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.h
-@@ -12,14 +12,6 @@ namespace web_app {
- std::map<SquareSizePx, SkBitmap> LoadBundledIcons(
-     const std::initializer_list<int>& icon_resource_ids);
- 
--struct Translation {
--  const char* bcp47_locale;
--  const char* utf8_translation;
--};
--
--const char* GetTranslatedName(const char* utf8_default_name,
--                              base::span<const Translation> translations);
--
- }  // namespace web_app
- 
- #endif  // CHROME_BROWSER_WEB_APPLICATIONS_PREINSTALLED_WEB_APPS_PREINSTALLED_WEB_APP_UTILS_H_
---- a/chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils_unittest.cc
-+++ /dev/null
-@@ -1,43 +0,0 @@
--// Copyright (c) 2018 The Chromium Authors. All rights reserved.
--// Use of this source code is governed by a BSD-style license that can be
--// found in the LICENSE file.
--
--#include "chrome/browser/web_applications/preinstalled_web_apps/preinstalled_web_app_utils.h"
--
--#include "chrome/browser/browser_process.h"
--#include "testing/gtest/include/gtest/gtest.h"
--
--namespace web_app {
--
--class PreinstalledWebAppUtilsTest : public testing::Test {
-- public:
--  PreinstalledWebAppUtilsTest() = default;
--  PreinstalledWebAppUtilsTest(const PreinstalledWebAppUtilsTest&) = delete;
--  PreinstalledWebAppUtilsTest& operator=(const PreinstalledWebAppUtilsTest&) =
--      delete;
--  ~PreinstalledWebAppUtilsTest() override = default;
--};
--
--TEST_F(PreinstalledWebAppUtilsTest, GetTranslatedName) {
--  std::string test_locale;
--  constexpr Translation kTranslations[] = {
--      {"en", "en"},
--      {"en-GB", "en-GB"},
--      {"fr", "fr"},
--  };
--
--  auto test = [&](const char* application_locale) -> std::string {
--    test_locale = application_locale;
--    g_browser_process->SetApplicationLocale(test_locale);
--    return GetTranslatedName("default", kTranslations);
--  };
--
--  EXPECT_EQ(test("en"), "en");
--  EXPECT_EQ(test("en-US"), "en");
--  EXPECT_EQ(test("en-GB"), "en-GB");
--  EXPECT_EQ(test("fr"), "fr");
--  EXPECT_EQ(test("fr-CA"), "fr");
--  EXPECT_EQ(test("ko"), "default");
--}
--
--}  // namespace web_app
---- a/v8/src/objects/intl-objects.h
-+++ b/v8/src/objects/intl-objects.h
-@@ -20,8 +20,9 @@
- #include "src/objects/objects.h"
- #include "unicode/locid.h"
- #include "unicode/uversion.h"
-+#include "unicode/dtitvfmt.h"
- 
--#define V8_MINIMUM_ICU_VERSION 68
-+#define V8_MINIMUM_ICU_VERSION 63
- 
- namespace U_ICU_NAMESPACE {
- class BreakIterator;
-@@ -37,6 +38,14 @@ template <typename T>
- class Handle;
- class JSCollator;
- 
-+Maybe<icu::Locale> CreateICULocale(const std::string& bcp47_locale);
-+
-+Maybe<std::string> CanonicalizeLanguageTag(Isolate* isolate,
-+                                           Handle<Object> locale_in);
-+
-+Maybe<std::string> CanonicalizeLanguageTag(Isolate* isolate,
-+                                           const std::string& locale);
-+
- class Intl {
-  public:
-   enum class BoundFunctionContextSlot {
-@@ -189,8 +198,8 @@ class Intl {
-       int32_t end);
- 
-   // Helper function to convert a FormattedValue to String
--  V8_WARN_UNUSED_RESULT static MaybeHandle<String> FormattedToString(
--      Isolate* isolate, const icu::FormattedValue& formatted);
-+  V8_WARN_UNUSED_RESULT static MaybeHandle<String> FormattedDateIntervalToString(
-+      Isolate* isolate, const icu::DateInterval& interval, const icu::DateIntervalFormat& format);
- 
-   // Helper function to convert number field id to type string.
-   static Handle<String> NumberFieldToType(Isolate* isolate,
-@@ -284,22 +293,24 @@ class Intl {
-   class AvailableLocales {
-    public:
-     AvailableLocales() {
--      UErrorCode status = U_ZERO_ERROR;
--      UEnumeration* uenum =
--          uloc_openAvailableByType(ULOC_AVAILABLE_WITH_LEGACY_ALIASES, &status);
--      DCHECK(U_SUCCESS(status));
-+      int32_t num_locales = 0;
-+      const icu::Locale* icu_available_locales =
-+          icu::Locale::getAvailableLocales(num_locales);
- 
-       std::vector<std::string> all_locales;
--      const char* loc;
--      while ((loc = uenum_next(uenum, nullptr, &status)) != nullptr) {
--        DCHECK(U_SUCCESS(status));
--        std::string locstr(loc);
-+      for (int32_t num = 0; num < num_locales; num++) {
-+        const icu::Locale* locale = icu_available_locales++;
-+        std::string locstr(locale->getName());
-         std::replace(locstr.begin(), locstr.end(), '_', '-');
-         // Handle special case
-         if (locstr == "en-US-POSIX") locstr = "en-US-u-va-posix";
-         all_locales.push_back(locstr);
-       }
--      uenum_close(uenum);
-+
-+      // Include legacy and alias locales.
-+      for (std::string locstr : {"ars","az-AZ","bs-BA","en-NH","en-RH","ff-CM","ff-GN","ff-MR","ff-SN","in","in-ID","iw","iw-IL","ks-Arab-IN","mni-IN","mo","no","no-NO","no-NO-NY","pa-IN","pa-PK","sat-IN","sd-PK","sh","sh-BA","sh-CS","sh-YU","shi-MA","sr-BA","sr-CS","sr-Cyrl-CS","sr-Cyrl-YU","sr-Latn-CS","sr-Latn-YU","sr-ME","sr-RS","sr-XK","sr-YU","su-ID","tl","tl-PH","uz-AF","uz-UZ","vai-LR","yue-CN","yue-HK","zh-CN","zh-HK","zh-MO","zh-TW","zh-SG"}) {
-+        all_locales.push_back(locstr);
-+      }
- 
-       set_ = Intl::BuildLocaleSet(all_locales, C::path(), C::key());
-     }
---- a/v8/src/objects/js-list-format.cc
-+++ b/v8/src/objects/js-list-format.cc
-@@ -30,26 +30,46 @@ namespace internal {
- 
- namespace {
- 
--UListFormatterWidth GetIcuWidth(JSListFormat::Style style) {
--  switch (style) {
--    case JSListFormat::Style::LONG:
--      return ULISTFMT_WIDTH_WIDE;
--    case JSListFormat::Style::SHORT:
--      return ULISTFMT_WIDTH_SHORT;
--    case JSListFormat::Style::NARROW:
--      return ULISTFMT_WIDTH_NARROW;
--  }
--  UNREACHABLE();
--}
--
--UListFormatterType GetIcuType(JSListFormat::Type type) {
-+// from chromium 87
-+const char* kStandard = "standard";
-+const char* kOr = "or";
-+const char* kUnit = "unit";
-+const char* kStandardShort = "standard-short";
-+const char* kOrShort = "or-short";
-+const char* kUnitShort = "unit-short";
-+const char* kStandardNarrow = "standard-narrow";
-+const char* kOrNarrow = "or-narrow";
-+const char* kUnitNarrow = "unit-narrow";
-+const char* GetIcuStyleString(JSListFormat::Style style,
-+                              JSListFormat::Type type) {
-   switch (type) {
-     case JSListFormat::Type::CONJUNCTION:
--      return ULISTFMT_TYPE_AND;
-+      switch (style) {
-+        case JSListFormat::Style::LONG:
-+          return kStandard;
-+        case JSListFormat::Style::SHORT:
-+          return kStandardShort;
-+        case JSListFormat::Style::NARROW:
-+          return kStandardNarrow;
-+      }
-     case JSListFormat::Type::DISJUNCTION:
--      return ULISTFMT_TYPE_OR;
-+      switch (style) {
-+        case JSListFormat::Style::LONG:
-+          return kOr;
-+        case JSListFormat::Style::SHORT:
-+          return kOrShort;
-+        case JSListFormat::Style::NARROW:
-+          return kOrNarrow;
-+      }
-     case JSListFormat::Type::UNIT:
--      return ULISTFMT_TYPE_UNITS;
-+      switch (style) {
-+        case JSListFormat::Style::LONG:
-+          return kUnit;
-+        case JSListFormat::Style::SHORT:
-+          return kUnitShort;
-+        case JSListFormat::Style::NARROW:
-+          return kUnitNarrow;
-+      }
-   }
-   UNREACHABLE();
- }
-@@ -124,7 +144,7 @@ MaybeHandle<JSListFormat> JSListFormat::
-   icu::Locale icu_locale = r.icu_locale;
-   UErrorCode status = U_ZERO_ERROR;
-   icu::ListFormatter* formatter = icu::ListFormatter::createInstance(
--      icu_locale, GetIcuType(type_enum), GetIcuWidth(style_enum), status);
-+      icu_locale, GetIcuStyleString(style_enum, type_enum), status);
-   if (U_FAILURE(status) || formatter == nullptr) {
-     delete formatter;
-     THROW_NEW_ERROR(isolate, NewRangeError(MessageTemplate::kIcuError),
-@@ -227,7 +247,7 @@ Maybe<std::vector<icu::UnicodeString>> T
- template <typename T>
- MaybeHandle<T> FormatListCommon(
-     Isolate* isolate, Handle<JSListFormat> format, Handle<JSArray> list,
--    MaybeHandle<T> (*formatToResult)(Isolate*, const icu::FormattedValue&)) {
-+    MaybeHandle<T> (*formatToResult)(Isolate*, const icu::UnicodeString&, const std::vector<icu::UnicodeString>&)) {
-   DCHECK(!list->IsUndefined());
-   Maybe<std::vector<icu::UnicodeString>> maybe_array =
-       ToUnicodeStringArray(isolate, list);
-@@ -238,49 +258,67 @@ MaybeHandle<T> FormatListCommon(
-   DCHECK_NOT_NULL(formatter);
- 
-   UErrorCode status = U_ZERO_ERROR;
--  icu::FormattedList formatted = formatter->formatStringsToValue(
--      array.data(), static_cast<int32_t>(array.size()), status);
-+  icu::UnicodeString formatted;
-+  formatter->format(array.data(), static_cast<int32_t>(array.size()), formatted,
-+                    status);
-   if (U_FAILURE(status)) {
-     THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), T);
-   }
--  return formatToResult(isolate, formatted);
-+  return formatToResult(isolate, formatted, array);
- }
- 
--Handle<String> IcuFieldIdToType(Isolate* isolate, int32_t field_id) {
--  switch (field_id) {
--    case ULISTFMT_LITERAL_FIELD:
--      return isolate->factory()->literal_string();
--    case ULISTFMT_ELEMENT_FIELD:
--      return isolate->factory()->element_string();
--    default:
--      UNREACHABLE();
--      // To prevent MSVC from issuing C4715 warning.
--      return Handle<String>();
--  }
-+MaybeHandle<String> FormattedListToString(
-+    Isolate* isolate, const icu::UnicodeString& formatted, const std::vector<icu::UnicodeString>& items) {
-+    return Intl::ToString(isolate, formatted);
- }
- 
- // A helper function to convert the FormattedList to a
- // MaybeHandle<JSArray> for the implementation of formatToParts.
- MaybeHandle<JSArray> FormattedListToJSArray(
--    Isolate* isolate, const icu::FormattedValue& formatted) {
--  Handle<JSArray> array = isolate->factory()->NewJSArray(0);
--  icu::ConstrainedFieldPosition cfpos;
--  cfpos.constrainCategory(UFIELD_CATEGORY_LIST);
-+    Isolate* isolate, const icu::UnicodeString& formatted, const std::vector<icu::UnicodeString>& items) {
-+// From chromium 70
-+// This is a temporary workaround until icu::ListFormat support FieldPosition
-+// It is inefficient and won't work correctly on the edge case that the input
-+// contains fraction of the list pattern.
-+// For example the following under English will mark the "an" incorrectly
-+// since the formatted is "a, b, and an".
-+// listFormat.formatToParts(["a", "b", "an"])
-+// https://ssl.icu-project.org/trac/ticket/13754
-+  Factory* factory = isolate->factory();
-+  int length = items.size();
-+  int estimate_size = length * 2 + 1;
-+  Handle<JSArray> array = factory->NewJSArray(estimate_size);
-   int index = 0;
--  UErrorCode status = U_ZERO_ERROR;
--  icu::UnicodeString string = formatted.toString(status);
--  Handle<String> substring;
--  while (formatted.nextPosition(cfpos, status) && U_SUCCESS(status)) {
-+  int last_pos = 0;
-+  for (int i = 0; i < length; i++) {
-+    int found = formatted.indexOf(items[i], last_pos);
-+    DCHECK_GE(found, 0);
-+    if (found > last_pos) {
-+      Handle<String> substring;
-+      ASSIGN_RETURN_ON_EXCEPTION(
-+          isolate, substring,
-+          Intl::ToString(isolate, formatted, last_pos, found), JSArray);
-+      Intl::AddElement(isolate, array, index++, factory->literal_string(),
-+                       substring);
-+    }
-+    last_pos = found + items[i].length();
-+    Handle<String> substring;
-     ASSIGN_RETURN_ON_EXCEPTION(
--        isolate, substring,
--        Intl::ToString(isolate, string, cfpos.getStart(), cfpos.getLimit()),
-+        isolate, substring, Intl::ToString(isolate, formatted, found, last_pos),
-         JSArray);
--    Intl::AddElement(isolate, array, index++,
--                     IcuFieldIdToType(isolate, cfpos.getField()), substring);
-+    Intl::AddElement(isolate, array, index++, factory->element_string(),
-+                     substring);
-   }
--  if (U_FAILURE(status)) {
--    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), JSArray);
-+  if (last_pos < formatted.length()) {
-+    Handle<String> substring;
-+    ASSIGN_RETURN_ON_EXCEPTION(
-+        isolate, substring,
-+        Intl::ToString(isolate, formatted, last_pos, formatted.length()),
-+        JSArray);
-+    Intl::AddElement(isolate, array, index++, factory->literal_string(),
-+                     substring);
-   }
-+
-   JSObject::ValidateElements(*array);
-   return array;
- }
-@@ -292,7 +330,7 @@ MaybeHandle<String> JSListFormat::Format
-                                              Handle<JSListFormat> format,
-                                              Handle<JSArray> list) {
-   return FormatListCommon<String>(isolate, format, list,
--                                  Intl::FormattedToString);
-+                                  FormattedListToString);
- }
- 
- // ecma42 #sec-formatlisttoparts
---- a/v8/src/objects/js-relative-time-format.cc
-+++ b/v8/src/objects/js-relative-time-format.cc
-@@ -19,7 +19,7 @@
- #include "src/objects/js-relative-time-format-inl.h"
- #include "src/objects/objects-inl.h"
- #include "unicode/decimfmt.h"
--#include "unicode/numfmt.h"
-+#include "unicode/numberformatter.h"
- #include "unicode/reldatefmt.h"
- #include "unicode/unum.h"
- 
-@@ -287,6 +287,65 @@ Handle<String> JSRelativeTimeFormat::Num
- 
- namespace {
- 
-+// From chromium 74
-+MaybeHandle<JSArray> GenerateRelativeTimeFormatParts(
-+    Isolate* isolate, const icu::UnicodeString& formatted,
-+    const icu::UnicodeString& integer_part, const Handle<String>& unit,
-+    double number, const icu::number::LocalizedNumberFormatter& nf) {
-+  Factory* factory = isolate->factory();
-+  Handle<JSArray> array = factory->NewJSArray(0);
-+  int32_t found = formatted.indexOf(integer_part);
-+
-+  Handle<String> substring;
-+  if (found < 0) {
-+    // Cannot find the integer_part in the formatted.
-+    // Return [{'type': 'literal', 'value': formatted}]
-+    ASSIGN_RETURN_ON_EXCEPTION(isolate, substring,
-+                               Intl::ToString(isolate, formatted), JSArray);
-+    Intl::AddElement(isolate, array,
-+                     0,                          // index
-+                     factory->literal_string(),  // field_type_string
-+                     substring);
-+  } else {
-+    // Found the formatted integer in the result.
-+    int index = 0;
-+
-+    // array.push({
-+    //     'type': 'literal',
-+    //     'value': formatted.substring(0, found)})
-+    if (found > 0) {
-+      ASSIGN_RETURN_ON_EXCEPTION(isolate, substring,
-+                                 Intl::ToString(isolate, formatted, 0, found),
-+                                 JSArray);
-+      Intl::AddElement(isolate, array, index++,
-+                       factory->literal_string(),  // field_type_string
-+                       substring);
-+    }
-+
-+    Handle<Object> number_obj = factory->NewNumber(number);
-+    Maybe<int> maybe_format_to_parts = JSNumberFormat::FormatToParts(
-+        isolate, array, index, nf, number_obj, unit);
-+    MAYBE_RETURN(maybe_format_to_parts, Handle<JSArray>());
-+    index = maybe_format_to_parts.FromJust();
-+
-+    // array.push({
-+    //     'type': 'literal',
-+    //     'value': formatted.substring(
-+    //         found + integer_part.length, formatted.length)})
-+    if (found + integer_part.length() < formatted.length()) {
-+      ASSIGN_RETURN_ON_EXCEPTION(
-+          isolate, substring,
-+          Intl::ToString(isolate, formatted, found + integer_part.length(),
-+                         formatted.length()),
-+          JSArray);
-+      Intl::AddElement(isolate, array, index,
-+                       factory->literal_string(),  // field_type_string
-+                       substring);
-+    }
-+  }
-+  return array;
-+}
-+
- Handle<String> UnitAsString(Isolate* isolate, URelativeDateTimeUnit unit_enum) {
-   Factory* factory = isolate->factory();
-   switch (unit_enum) {
-@@ -349,7 +408,8 @@ MaybeHandle<T> FormatCommon(
-     Isolate* isolate, Handle<JSRelativeTimeFormat> format,
-     Handle<Object> value_obj, Handle<Object> unit_obj, const char* func_name,
-     MaybeHandle<T> (*formatToResult)(Isolate*,
--                                     const icu::FormattedRelativeDateTime&,
-+                                     const icu::UnicodeString&,
-+                                     const icu::number::LocalizedNumberFormatter&,
-                                      Handle<Object>, Handle<String>)) {
-   // 3. Let value be ? ToNumber(value).
-   Handle<Object> value;
-@@ -379,26 +439,37 @@ MaybeHandle<T> FormatCommon(
-                       unit),
-         T);
-   }
-+
-   UErrorCode status = U_ZERO_ERROR;
--  icu::FormattedRelativeDateTime formatted =
--      (format->numeric() == JSRelativeTimeFormat::Numeric::ALWAYS)
--          ? formatter->formatNumericToValue(number, unit_enum, status)
--          : formatter->formatToValue(number, unit_enum, status);
-+  icu::UnicodeString formatted;
-+
-+  if (format->numeric() == JSRelativeTimeFormat::Numeric::ALWAYS) {
-+    formatter->formatNumeric(number, unit_enum, formatted, status);
-+  } else {
-+    DCHECK_EQ(JSRelativeTimeFormat::Numeric::AUTO, format->numeric());
-+    formatter->format(number, unit_enum, formatted, status);
-+  }
-+
-   if (U_FAILURE(status)) {
-     THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), T);
-   }
--  return formatToResult(isolate, formatted, value,
--                        UnitAsString(isolate, unit_enum));
-+
-+  std::string locale_str(format->locale().ToCString().get());
-+  Maybe<icu::Locale> maybe_icu_locale = CreateICULocale(locale_str);
-+  if (maybe_icu_locale.IsNothing()) {
-+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), T);
-+  }
-+
-+  icu::Locale icu_locale = maybe_icu_locale.FromJust();
-+  return formatToResult(isolate, formatted,
-+                        icu::number::NumberFormatter::withLocale(icu_locale),
-+                        value, UnitAsString(isolate, unit_enum));
- }
- 
- MaybeHandle<String> FormatToString(
--    Isolate* isolate, const icu::FormattedRelativeDateTime& formatted,
-+    Isolate* isolate, const icu::UnicodeString& result,
-+    const icu::number::LocalizedNumberFormatter& nf,
-     Handle<Object> value, Handle<String> unit) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::UnicodeString result = formatted.toString(status);
--  if (U_FAILURE(status)) {
--    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), String);
--  }
-   return Intl::ToString(isolate, result);
- }
- 
-@@ -429,67 +500,32 @@ Maybe<bool> AddUnit(Isolate* isolate, Ha
- }
- 
- MaybeHandle<JSArray> FormatToJSArray(
--    Isolate* isolate, const icu::FormattedRelativeDateTime& formatted,
-+    Isolate* isolate, const icu::UnicodeString& formatted,
-+    const icu::number::LocalizedNumberFormatter& nf,
-     Handle<Object> value, Handle<String> unit) {
-   UErrorCode status = U_ZERO_ERROR;
--  icu::UnicodeString string = formatted.toString(status);
--
--  Factory* factory = isolate->factory();
--  Handle<JSArray> array = factory->NewJSArray(0);
--  icu::ConstrainedFieldPosition cfpos;
--  cfpos.constrainCategory(UFIELD_CATEGORY_NUMBER);
--  int32_t index = 0;
--
--  int32_t previous_end = 0;
--  Handle<String> substring;
--  std::vector<std::pair<int32_t, int32_t>> groups;
--  while (formatted.nextPosition(cfpos, status) && U_SUCCESS(status)) {
--    int32_t category = cfpos.getCategory();
--    int32_t field = cfpos.getField();
--    int32_t start = cfpos.getStart();
--    int32_t limit = cfpos.getLimit();
--    if (category == UFIELD_CATEGORY_NUMBER) {
--      if (field == UNUM_GROUPING_SEPARATOR_FIELD) {
--        groups.push_back(std::pair<int32_t, int32_t>(start, limit));
--        continue;
--      }
--      if (start > previous_end) {
--        Maybe<bool> maybe_added =
--            AddLiteral(isolate, array, string, index++, previous_end, start);
--        MAYBE_RETURN(maybe_added, Handle<JSArray>());
--      }
--      if (field == UNUM_INTEGER_FIELD) {
--        for (auto start_limit : groups) {
--          if (start_limit.first > start) {
--            Maybe<bool> maybe_added =
--                AddUnit(isolate, array, string, index++, start,
--                        start_limit.first, field, value, unit);
--            MAYBE_RETURN(maybe_added, Handle<JSArray>());
--            maybe_added = AddUnit(isolate, array, string, index++,
--                                  start_limit.first, start_limit.second,
--                                  UNUM_GROUPING_SEPARATOR_FIELD, value, unit);
--            MAYBE_RETURN(maybe_added, Handle<JSArray>());
--            start = start_limit.second;
--          }
--        }
--      }
--      Maybe<bool> maybe_added = AddUnit(isolate, array, string, index++, start,
--                                        limit, field, value, unit);
--      MAYBE_RETURN(maybe_added, Handle<JSArray>());
--      previous_end = limit;
--    }
--  }
-+  double number = value->Number();
-+  double abs_number = std::abs(number);
-+  icu::number::FormattedNumber formatted_number
-+      = nf.formatDouble(abs_number, status);
-   if (U_FAILURE(status)) {
--    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), JSArray);
-+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError),
-+                    JSArray);
-   }
--  if (string.length() > previous_end) {
--    Maybe<bool> maybe_added = AddLiteral(isolate, array, string, index,
--                                         previous_end, string.length());
--    MAYBE_RETURN(maybe_added, Handle<JSArray>());
-+
-+  icu::UnicodeString number_str = formatted_number.toString(status);
-+  if (U_FAILURE(status)) {
-+    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError),
-+                    JSArray);
-   }
- 
--  JSObject::ValidateElements(*array);
--  return array;
-+  Handle<JSArray> elements;
-+  ASSIGN_RETURN_ON_EXCEPTION(isolate, elements,
-+                             GenerateRelativeTimeFormatParts(
-+                                 isolate, formatted, number_str, unit,
-+                                 abs_number, nf),
-+                             JSArray);
-+  return elements;
- }
- 
- }  // namespace
---- a/v8/src/objects/intl-objects.cc
-+++ b/v8/src/objects/intl-objects.cc
-@@ -33,9 +33,6 @@
- #include "unicode/coll.h"
- #include "unicode/datefmt.h"
- #include "unicode/decimfmt.h"
--#include "unicode/formattedvalue.h"
--#include "unicode/localebuilder.h"
--#include "unicode/localematcher.h"
- #include "unicode/locid.h"
- #include "unicode/normalizer2.h"
- #include "unicode/numberformatter.h"
-@@ -430,8 +427,6 @@ std::string Intl::GetNumberingSystem(con
-   return "latn";
- }
- 
--namespace {
--
- Maybe<icu::Locale> CreateICULocale(const std::string& bcp47_locale) {
-   DisallowGarbageCollection no_gc;
- 
-@@ -447,8 +442,6 @@ Maybe<icu::Locale> CreateICULocale(const
-   return Just(icu_locale);
- }
- 
--}  // anonymous namespace
--
- // static
- 
- MaybeHandle<String> Intl::ToString(Isolate* isolate,
-@@ -735,6 +728,8 @@ bool IsStructurallyValidLanguageTag(cons
-   return JSLocale::StartsWithUnicodeLanguageId(tag);
- }
- 
-+}  // anonymous namespace
-+
- // Canonicalize the locale.
- // https://tc39.github.io/ecma402/#sec-canonicalizelanguagetag,
- // including type check and structural validity check.
-@@ -789,9 +784,21 @@ Maybe<std::string> CanonicalizeLanguageT
-         Nothing<std::string>());
-   }
- 
--  // Use LocaleBuilder to validate locale.
--  icu_locale = icu::LocaleBuilder().setLocale(icu_locale).build(error);
--  icu_locale.canonicalize(error);
-+  // reject attribute of wrong length.
-+  if (std::strstr(icu_locale.getName(), "attribute=") != nullptr) {
-+    std::string attribute =
-+        icu_locale.getKeywordValue<std::string>("attribute", error);
-+    if (U_SUCCESS(error) &&
-+        (attribute.length() < 3 || attribute.length() > 8)) {
-+      THROW_NEW_ERROR_RETURN_VALUE(
-+          isolate,
-+          NewRangeError(
-+              MessageTemplate::kInvalidLanguageTag,
-+              isolate->factory()->NewStringFromAsciiChecked(locale.c_str())),
-+          Nothing<std::string>());
-+    }
-+  }
-+
-   if (U_FAILURE(error) || icu_locale.isBogus()) {
-     THROW_NEW_ERROR_RETURN_VALUE(
-         isolate,
-@@ -844,8 +851,6 @@ Maybe<std::string> CanonicalizeLanguageT
-   return CanonicalizeLanguageTag(isolate, locale);
- }
- 
--}  // anonymous namespace
--
- Maybe<std::vector<std::string>> Intl::CanonicalizeLocaleList(
-     Isolate* isolate, Handle<Object> locales, bool only_return_one_result) {
-   // 1. If locales is undefined, then
-@@ -1467,114 +1472,12 @@ std::vector<std::string> LookupSupported
-   return subset;
- }
- 
--icu::LocaleMatcher BuildLocaleMatcher(
--    Isolate* isolate, const std::set<std::string>& available_locales,
--    UErrorCode* status) {
--  icu::Locale default_locale =
--      icu::Locale::forLanguageTag(DefaultLocale(isolate), *status);
--  DCHECK(U_SUCCESS(*status));
--  icu::LocaleMatcher::Builder builder;
--  builder.setDefaultLocale(&default_locale);
--  for (auto it = available_locales.begin(); it != available_locales.end();
--       ++it) {
--    builder.addSupportedLocale(
--        icu::Locale::forLanguageTag(it->c_str(), *status));
--  }
--
--  return builder.build(*status);
--}
--
--class Iterator : public icu::Locale::Iterator {
-- public:
--  Iterator(std::vector<std::string>::const_iterator begin,
--           std::vector<std::string>::const_iterator end)
--      : iter_(begin), end_(end) {}
--  ~Iterator() override = default;
--
--  UBool hasNext() const override { return iter_ != end_; }
--
--  const icu::Locale& next() override {
--    UErrorCode status = U_ZERO_ERROR;
--    locale_ = icu::Locale::forLanguageTag(iter_->c_str(), status);
--    DCHECK(U_SUCCESS(status));
--    ++iter_;
--    return locale_;
--  }
--
-- private:
--  std::vector<std::string>::const_iterator iter_;
--  std::vector<std::string>::const_iterator end_;
--  icu::Locale locale_;
--};
--
--// ecma402/#sec-bestfitmatcher
--// The BestFitMatcher abstract operation compares requestedLocales, which must
--// be a List as returned by CanonicalizeLocaleList, against the locales in
--// availableLocales and determines the best available language to meet the
--// request. The algorithm is implementation dependent, but should produce
--// results that a typical user of the requested locales would perceive
--// as at least as good as those produced by the LookupMatcher abstract
--// operation. Options specified through Unicode locale extension sequences must
--// be ignored by the algorithm. Information about such subsequences is returned
--// separately. The abstract operation returns a record with a [[locale]] field,
--// whose value is the language tag of the selected locale, which must be an
--// element of availableLocales. If the language tag of the request locale that
--// led to the selected locale contained a Unicode locale extension sequence,
--// then the returned record also contains an [[extension]] field whose value is
--// the first Unicode locale extension sequence within the request locale
--// language tag.
--std::string BestFitMatcher(Isolate* isolate,
--                           const std::set<std::string>& available_locales,
--                           const std::vector<std::string>& requested_locales) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::LocaleMatcher matcher =
--      BuildLocaleMatcher(isolate, available_locales, &status);
--  DCHECK(U_SUCCESS(status));
--
--  Iterator iter(requested_locales.cbegin(), requested_locales.cend());
--  std::string bestfit =
--      matcher.getBestMatch(iter, status)->toLanguageTag<std::string>(status);
--  if (U_FAILURE(status)) {
--    return DefaultLocale(isolate);
--  }
--  // We need to return the extensions with it.
--  for (auto it = requested_locales.begin(); it != requested_locales.end();
--       ++it) {
--    if (it->find(bestfit) == 0) {
--      return *it;
--    }
--  }
--  return bestfit;
--}
--
- // ECMA 402 9.2.8 BestFitSupportedLocales(availableLocales, requestedLocales)
- // https://tc39.github.io/ecma402/#sec-bestfitsupportedlocales
- std::vector<std::string> BestFitSupportedLocales(
-     Isolate* isolate, const std::set<std::string>& available_locales,
-     const std::vector<std::string>& requested_locales) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::LocaleMatcher matcher =
--      BuildLocaleMatcher(isolate, available_locales, &status);
--  DCHECK(U_SUCCESS(status));
--
--  std::string default_locale = DefaultLocale(isolate);
--  std::vector<std::string> result;
--  for (auto it = requested_locales.cbegin(); it != requested_locales.cend();
--       it++) {
--    if (*it == default_locale) {
--      result.push_back(*it);
--    } else {
--      status = U_ZERO_ERROR;
--      icu::Locale desired = icu::Locale::forLanguageTag(it->c_str(), status);
--      std::string bestfit = matcher.getBestMatch(desired, status)
--                                ->toLanguageTag<std::string>(status);
--      // We need to return the extensions with it.
--      if (U_SUCCESS(status) && it->find(bestfit) == 0) {
--        result.push_back(*it);
--      }
--    }
--  }
--  return result;
-+  return LookupSupportedLocales(available_locales, requested_locales);
- }
- 
- // ecma262 #sec-createarrayfromlist
-@@ -1750,8 +1653,6 @@ std::map<std::string, std::string> Looku
-   std::map<std::string, std::string> extensions;
- 
-   UErrorCode status = U_ZERO_ERROR;
--  icu::LocaleBuilder builder;
--  builder.setLocale(*icu_locale).clearExtensions();
-   std::unique_ptr<icu::StringEnumeration> keywords(
-       icu_locale->createKeywords(status));
-   if (U_FAILURE(status)) return extensions;
-@@ -1813,14 +1714,13 @@ std::map<std::string, std::string> Looku
-       if (is_valid_value) {
-         extensions.insert(
-             std::pair<std::string, std::string>(bcp47_key, bcp47_value));
--        builder.setUnicodeLocaleKeyword(bcp47_key, bcp47_value);
-+        status = U_ZERO_ERROR;
-+        icu_locale->setKeywordValue(bcp47_key, bcp47_value, status);
-+        CHECK(U_SUCCESS(status));
-       }
-     }
-   }
- 
--  status = U_ZERO_ERROR;
--  *icu_locale = builder.build(status);
--
-   return extensions;
- }
- 
-@@ -1889,8 +1789,7 @@ Maybe<Intl::ResolvedLocale> Intl::Resolv
-     const std::vector<std::string>& requested_locales, MatcherOption matcher,
-     const std::set<std::string>& relevant_extension_keys) {
-   std::string locale;
--  if (matcher == Intl::MatcherOption::kBestFit && implement_bestfit) {
--    locale = BestFitMatcher(isolate, available_locales, requested_locales);
-+  if (false) {
-   } else {
-     locale = LookupMatcher(isolate, available_locales, requested_locales);
-   }
-@@ -2196,11 +2095,6 @@ Handle<String> Intl::NumberFieldToType(I
-       UNREACHABLE();
-       return Handle<String>();
- 
--    case UNUM_COMPACT_FIELD:
--      return isolate->factory()->compact_string();
--    case UNUM_MEASURE_UNIT_FIELD:
--      return isolate->factory()->unit_string();
--
-     default:
-       UNREACHABLE();
-       return Handle<String>();
-@@ -2208,10 +2102,13 @@ Handle<String> Intl::NumberFieldToType(I
- }
- 
- // A helper function to convert the FormattedValue for several Intl objects.
--MaybeHandle<String> Intl::FormattedToString(
--    Isolate* isolate, const icu::FormattedValue& formatted) {
-+MaybeHandle<String> Intl::FormattedDateIntervalToString(
-+    Isolate* isolate, const icu::DateInterval& interval, const icu::DateIntervalFormat& format) {
-+  icu::UnicodeString result;
-+  icu::FieldPosition fpos;
-+
-   UErrorCode status = U_ZERO_ERROR;
--  icu::UnicodeString result = formatted.toString(status);
-+  format.format(&interval, result, fpos, status);
-   if (U_FAILURE(status)) {
-     THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), String);
-   }
---- a/v8/src/objects/js-locale.cc
-+++ b/v8/src/objects/js-locale.cc
-@@ -21,7 +21,6 @@
- #include "src/objects/js-locale-inl.h"
- #include "src/objects/objects-inl.h"
- #include "unicode/char16ptr.h"
--#include "unicode/localebuilder.h"
- #include "unicode/locid.h"
- #include "unicode/uloc.h"
- #include "unicode/unistr.h"
-@@ -41,7 +40,7 @@ struct OptionData {
- // Inserts tags from options into locale string.
- Maybe<bool> InsertOptionsIntoLocale(Isolate* isolate,
-                                     Handle<JSReceiver> options,
--                                    icu::LocaleBuilder* builder) {
-+                                    icu::Locale* icu_locale) {
-   DCHECK(isolate);
- 
-   const std::vector<const char*> hour_cycle_values = {"h11", "h12", "h23",
-@@ -60,6 +59,7 @@ Maybe<bool> InsertOptionsIntoLocale(Isol
-   // TODO(cira): Pass in values as per the spec to make this to be
-   // spec compliant.
- 
-+  UErrorCode status = U_ZERO_ERROR;
-   for (const auto& option_to_bcp47 : kOptionToUnicodeTagMap) {
-     std::unique_ptr<char[]> value_str = nullptr;
-     bool value_bool = false;
-@@ -84,10 +84,16 @@ Maybe<bool> InsertOptionsIntoLocale(Isol
- 
-     // Overwrite existing, or insert new key-value to the locale string.
-     if (!uloc_toLegacyType(uloc_toLegacyKey(option_to_bcp47.key),
--                           value_str.get())) {
-+                          value_str.get())) {
-       return Just(false);
-+    } else {
-+      // Only call setUnicodeKeywordValue if that value is a valid one.
-+      icu_locale->setUnicodeKeywordValue(option_to_bcp47.key, value_str.get(),
-+                                         status);
-+      if (U_FAILURE(status)) {
-+        return Just(false);
-+      }
-     }
--    builder->setUnicodeLocaleKeyword(option_to_bcp47.key, value_str.get());
-   }
-   return Just(true);
- }
-@@ -142,16 +148,6 @@ bool IsUnicodeLanguageSubtag(const std::
-   return IsAlpha(value, 2, 3) || IsAlpha(value, 5, 8);
- }
- 
--bool IsUnicodeScriptSubtag(const std::string& value) {
--  // unicode_script_subtag = alpha{4} ;
--  return IsAlpha(value, 4, 4);
--}
--
--bool IsUnicodeRegionSubtag(const std::string& value) {
--  // unicode_region_subtag = (alpha{2} | digit{3});
--  return IsAlpha(value, 2, 2) || IsDigit(value, 3, 3);
--}
--
- bool IsDigitAlphanum3(const std::string& value) {
-   return value.length() == 4 && base::IsInRange(value[0], '0', '9') &&
-          IsAlphanum(value.substr(1), 3, 3);
-@@ -167,6 +163,16 @@ bool IsExtensionSingleton(const std::str
- }
- }  // namespace
- 
-+bool IsUnicodeScriptSubtag(const std::string& value) {
-+  // unicode_script_subtag = alpha{4} ;
-+  return IsAlpha(value, 4, 4);
-+}
-+
-+bool IsUnicodeRegionSubtag(const std::string& value) {
-+  // unicode_region_subtag = (alpha{2} | digit{3});
-+  return IsAlpha(value, 2, 2) || IsDigit(value, 3, 3);
-+}
-+
- bool JSLocale::Is38AlphaNumList(const std::string& value) {
-   std::size_t found = value.find("-");
-   if (found == std::string::npos) {
-@@ -220,8 +226,7 @@ bool JSLocale::StartsWithUnicodeLanguage
- 
- namespace {
- Maybe<bool> ApplyOptionsToTag(Isolate* isolate, Handle<String> tag,
--                              Handle<JSReceiver> options,
--                              icu::LocaleBuilder* builder) {
-+                              Handle<JSReceiver> options) {
-   v8::Isolate* v8_isolate = reinterpret_cast<v8::Isolate*>(isolate);
-   if (tag->length() == 0) {
-     THROW_NEW_ERROR_RETURN_VALUE(
-@@ -230,7 +235,6 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
-   }
- 
-   v8::String::Utf8Value bcp47_tag(v8_isolate, v8::Utils::ToLocal(tag));
--  builder->setLanguageTag({*bcp47_tag, bcp47_tag.length()});
-   DCHECK_LT(0, bcp47_tag.length());
-   DCHECK_NOT_NULL(*bcp47_tag);
-   // 2. If IsStructurallyValidLanguageTag(tag) is false, throw a RangeError
-@@ -239,12 +243,11 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
-     return Just(false);
-   }
-   UErrorCode status = U_ZERO_ERROR;
--  icu::Locale canonicalized = builder->build(status);
--  canonicalized.canonicalize(status);
-+  icu::Locale icu_locale =
-+      icu::Locale::forLanguageTag({*bcp47_tag, bcp47_tag.length()}, status);
-   if (U_FAILURE(status)) {
-     return Just(false);
-   }
--  builder->setLocale(canonicalized);
- 
-   // 3. Let language be ? GetOption(options, "language", "string", undefined,
-   // undefined).
-@@ -256,11 +259,9 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
-   MAYBE_RETURN(maybe_language, Nothing<bool>());
-   // 4. If language is not undefined, then
-   if (maybe_language.FromJust()) {
--    builder->setLanguage(language_str.get());
--    builder->build(status);
-     // a. If language does not match the unicode_language_subtag production,
-     //    throw a RangeError exception.
--    if (U_FAILURE(status) || language_str[0] == '\0' ||
-+    if (!IsUnicodeLanguageSubtag(language_str.get()) || language_str[0] == '\0' ||
-         IsAlpha(language_str.get(), 4, 4)) {
-       return Just(false);
-     }
-@@ -274,11 +275,9 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
-   MAYBE_RETURN(maybe_script, Nothing<bool>());
-   // 6. If script is not undefined, then
-   if (maybe_script.FromJust()) {
--    builder->setScript(script_str.get());
--    builder->build(status);
-     // a. If script does not match the unicode_script_subtag production, throw
-     //    a RangeError exception.
--    if (U_FAILURE(status) || script_str[0] == '\0') {
-+    if (!IsUnicodeScriptSubtag(script_str.get()) || script_str[0] == '\0') {
-       return Just(false);
-     }
-   }
-@@ -293,9 +292,7 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
-   if (maybe_region.FromJust()) {
-     // a. If region does not match the region production, throw a RangeError
-     // exception.
--    builder->setRegion(region_str.get());
--    builder->build(status);
--    if (U_FAILURE(status) || region_str[0] == '\0') {
-+    if (!IsUnicodeRegionSubtag(region_str.get()) || region_str[0] == '\0') {
-       return Just(false);
-     }
-   }
-@@ -330,9 +327,8 @@ Maybe<bool> ApplyOptionsToTag(Isolate* i
- MaybeHandle<JSLocale> JSLocale::New(Isolate* isolate, Handle<Map> map,
-                                     Handle<String> locale_str,
-                                     Handle<JSReceiver> options) {
--  icu::LocaleBuilder builder;
-   Maybe<bool> maybe_apply =
--      ApplyOptionsToTag(isolate, locale_str, options, &builder);
-+      ApplyOptionsToTag(isolate, locale_str, options);
-   MAYBE_RETURN(maybe_apply, MaybeHandle<JSLocale>());
-   if (!maybe_apply.FromJust()) {
-     THROW_NEW_ERROR(isolate,
-@@ -340,15 +336,22 @@ MaybeHandle<JSLocale> JSLocale::New(Isol
-                     JSLocale);
-   }
- 
--  Maybe<bool> maybe_insert =
--      InsertOptionsIntoLocale(isolate, options, &builder);
--  MAYBE_RETURN(maybe_insert, MaybeHandle<JSLocale>());
-+  Maybe<std::string> maybe_locale =
-+      CanonicalizeLanguageTag(isolate, locale_str);
-+  MAYBE_RETURN(maybe_locale, MaybeHandle<JSLocale>());
-   UErrorCode status = U_ZERO_ERROR;
--  icu::Locale icu_locale = builder.build(status);
--
--  icu_locale.canonicalize(status);
-+  icu::Locale icu_locale =
-+      icu::Locale::forLanguageTag(maybe_locale.FromJust().c_str(), status);
-+  if (U_FAILURE(status)) {
-+    THROW_NEW_ERROR(isolate,
-+                    NewRangeError(MessageTemplate::kLocaleBadParameters),
-+                    JSLocale);
-+  }
- 
--  if (!maybe_insert.FromJust() || U_FAILURE(status)) {
-+  Maybe<bool> maybe_insert =
-+      InsertOptionsIntoLocale(isolate, options, &icu_locale);
-+  MAYBE_RETURN(maybe_insert, MaybeHandle<JSLocale>());
-+  if (!maybe_insert.FromJust()) {
-     THROW_NEW_ERROR(isolate,
-                     NewRangeError(MessageTemplate::kLocaleBadParameters),
-                     JSLocale);
-@@ -392,62 +395,22 @@ MaybeHandle<JSLocale> Construct(Isolate*
- 
- MaybeHandle<JSLocale> JSLocale::Maximize(Isolate* isolate,
-                                          Handle<JSLocale> locale) {
--  // ICU has limitation on the length of the locale while addLikelySubtags
--  // is called. Work around the issue by only perform addLikelySubtags
--  // on the base locale and merge the extension if needed.
--  icu::Locale source(*(locale->icu_locale().raw()));
--  icu::Locale result = icu::Locale::createFromName(source.getBaseName());
-+  icu::Locale icu_locale(*(locale->icu_locale().raw()));
-   UErrorCode status = U_ZERO_ERROR;
--  result.addLikelySubtags(status);
--  if (strlen(source.getBaseName()) != strlen(result.getBaseName())) {
--    // Base name is changed
--    if (strlen(source.getBaseName()) != strlen(source.getName())) {
--      // the source has extensions, get the extensions from the source.
--      result = icu::LocaleBuilder()
--                   .setLocale(source)
--                   .setLanguage(result.getLanguage())
--                   .setRegion(result.getCountry())
--                   .setScript(result.getScript())
--                   .setVariant(result.getVariant())
--                   .build(status);
--    }
--  } else {
--    // Base name is not changed
--    result = source;
--  }
-+  icu_locale.addLikelySubtags(status);
-   DCHECK(U_SUCCESS(status));
--  DCHECK(!result.isBogus());
--  return Construct(isolate, result);
-+  DCHECK(!icu_locale.isBogus());
-+  return Construct(isolate, icu_locale);
- }
- 
- MaybeHandle<JSLocale> JSLocale::Minimize(Isolate* isolate,
-                                          Handle<JSLocale> locale) {
--  // ICU has limitation on the length of the locale while minimizeSubtags
--  // is called. Work around the issue by only perform addLikelySubtags
--  // on the base locale and merge the extension if needed.
--  icu::Locale source(*(locale->icu_locale().raw()));
--  icu::Locale result = icu::Locale::createFromName(source.getBaseName());
-+  icu::Locale icu_locale(*(locale->icu_locale().raw()));
-   UErrorCode status = U_ZERO_ERROR;
--  result.minimizeSubtags(status);
--  if (strlen(source.getBaseName()) != strlen(result.getBaseName())) {
--    // Base name is changed
--    if (strlen(source.getBaseName()) != strlen(source.getName())) {
--      // the source has extensions, get the extensions from the source.
--      result = icu::LocaleBuilder()
--                   .setLocale(source)
--                   .setLanguage(result.getLanguage())
--                   .setRegion(result.getCountry())
--                   .setScript(result.getScript())
--                   .setVariant(result.getVariant())
--                   .build(status);
--    }
--  } else {
--    // Base name is not changed
--    result = source;
--  }
-+  icu_locale.minimizeSubtags(status);
-   DCHECK(U_SUCCESS(status));
--  DCHECK(!result.isBogus());
--  return Construct(isolate, result);
-+  DCHECK(!icu_locale.isBogus());
-+  return Construct(isolate, icu_locale);
- }
- 
- Handle<Object> JSLocale::Language(Isolate* isolate, Handle<JSLocale> locale) {
---- a/v8/src/objects/js-date-time-format.cc
-+++ b/v8/src/objects/js-date-time-format.cc
-@@ -59,21 +59,6 @@ JSDateTimeFormat::HourCycle ToHourCycle(
-   return JSDateTimeFormat::HourCycle::kUndefined;
- }
- 
--JSDateTimeFormat::HourCycle ToHourCycle(UDateFormatHourCycle hc) {
--  switch (hc) {
--    case UDAT_HOUR_CYCLE_11:
--      return JSDateTimeFormat::HourCycle::kH11;
--    case UDAT_HOUR_CYCLE_12:
--      return JSDateTimeFormat::HourCycle::kH12;
--    case UDAT_HOUR_CYCLE_23:
--      return JSDateTimeFormat::HourCycle::kH23;
--    case UDAT_HOUR_CYCLE_24:
--      return JSDateTimeFormat::HourCycle::kH24;
--    default:
--      return JSDateTimeFormat::HourCycle::kUndefined;
--  }
--}
--
- Maybe<JSDateTimeFormat::HourCycle> GetHourCycle(Isolate* isolate,
-                                                 Handle<JSReceiver> options,
-                                                 const char* method) {
-@@ -1588,8 +1573,9 @@ MaybeHandle<JSDateTimeFormat> JSDateTime
-       generator_cache.Pointer()->CreateGenerator(icu_locale));
- 
-   // 15.Let hcDefault be dataLocaleData.[[hourCycle]].
--  HourCycle hc_default = ToHourCycle(generator->getDefaultHourCycle(status));
-+  icu::UnicodeString hour_pattern = generator->getBestPattern("jjmm", status);
-   DCHECK(U_SUCCESS(status));
-+  HourCycle hc_default = HourCycleFromPattern(hour_pattern);
- 
-   // 16.Let hc be r.[[hc]].
-   HourCycle hc = HourCycle::kUndefined;
-@@ -2095,55 +2081,12 @@ Maybe<bool> AddPartForFormatRange(Isolat
- // A helper function to convert the FormattedDateInterval to a
- // MaybeHandle<JSArray> for the implementation of formatRangeToParts.
- MaybeHandle<JSArray> FormattedDateIntervalToJSArray(
--    Isolate* isolate, const icu::FormattedValue& formatted) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::UnicodeString result = formatted.toString(status);
-+    Isolate* isolate, const icu::DateInterval& interval, const icu::DateIntervalFormat& format) {
- 
-   Factory* factory = isolate->factory();
-   Handle<JSArray> array = factory->NewJSArray(0);
--  icu::ConstrainedFieldPosition cfpos;
--  int index = 0;
--  int32_t previous_end_pos = 0;
--  SourceTracker tracker;
--  while (formatted.nextPosition(cfpos, status)) {
--    int32_t category = cfpos.getCategory();
--    int32_t field = cfpos.getField();
--    int32_t start = cfpos.getStart();
--    int32_t limit = cfpos.getLimit();
--
--    if (category == UFIELD_CATEGORY_DATE_INTERVAL_SPAN) {
--      DCHECK_LE(field, 2);
--      tracker.Add(field, start, limit);
--    } else {
--      DCHECK(category == UFIELD_CATEGORY_DATE);
--      if (start > previous_end_pos) {
--        // Add "literal" from the previous end position to the start if
--        // necessary.
--        Maybe<bool> maybe_added =
--            AddPartForFormatRange(isolate, array, result, index, -1,
--                                  previous_end_pos, start, tracker);
--        MAYBE_RETURN(maybe_added, Handle<JSArray>());
--        previous_end_pos = start;
--        index++;
--      }
--      Maybe<bool> maybe_added = AddPartForFormatRange(
--          isolate, array, result, index, field, start, limit, tracker);
--      MAYBE_RETURN(maybe_added, Handle<JSArray>());
--      previous_end_pos = limit;
--      ++index;
--    }
--  }
--  int32_t end = result.length();
--  // Add "literal" in the end if necessary.
--  if (end > previous_end_pos) {
--    Maybe<bool> maybe_added = AddPartForFormatRange(
--        isolate, array, result, index, -1, previous_end_pos, end, tracker);
--    MAYBE_RETURN(maybe_added, Handle<JSArray>());
--  }
--
--  if (U_FAILURE(status)) {
--    THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), JSArray);
--  }
-+  // TODO(ftang) To be implemented after ICU64 landed that support
-+  // DateIntervalFormat::formatToValue() and FormattedDateInterval.
- 
-   JSObject::ValidateElements(*array);
-   return array;
-@@ -2154,7 +2097,7 @@ template <typename T>
- MaybeHandle<T> FormatRangeCommon(
-     Isolate* isolate, Handle<JSDateTimeFormat> date_time_format, double x,
-     double y,
--    MaybeHandle<T> (*formatToResult)(Isolate*, const icu::FormattedValue&)) {
-+    MaybeHandle<T> (*formatToResult)(Isolate*, const icu::DateInterval&, const icu::DateIntervalFormat&)) {
-   // Track newer feature formateRange and formatRangeToParts
-   isolate->CountUsage(v8::Isolate::UseCounterFeature::kDateTimeFormatRange);
- 
-@@ -2189,15 +2132,11 @@ MaybeHandle<T> FormatRangeCommon(
-   std::unique_ptr<icu::Calendar> c2(calendar->clone());
-   c1->setTime(x, status);
-   c2->setTime(y, status);
--  // We need to format by Calendar because we need the Gregorian change
--  // adjustment already in the SimpleDateFormat to set the correct value of date
--  // older than Oct 15, 1582.
--  icu::FormattedDateInterval formatted =
--      format->formatToValue(*c1, *c2, status);
-+  icu::DateInterval interval(x, y);
-   if (U_FAILURE(status)) {
-     THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), T);
-   }
--  return formatToResult(isolate, formatted);
-+  return formatToResult(isolate, interval, *format);
- }
- 
- }  // namespace
-@@ -2206,7 +2145,7 @@ MaybeHandle<String> JSDateTimeFormat::Fo
-     Isolate* isolate, Handle<JSDateTimeFormat> date_time_format, double x,
-     double y) {
-   return FormatRangeCommon<String>(isolate, date_time_format, x, y,
--                                   Intl::FormattedToString);
-+                                   Intl::FormattedDateIntervalToString);
- }
- 
- MaybeHandle<JSArray> JSDateTimeFormat::FormatRangeToParts(
---- a/v8/src/objects/js-number-format.cc
-+++ b/v8/src/objects/js-number-format.cc
-@@ -1090,7 +1090,7 @@ MaybeHandle<JSNumberFormat> JSNumberForm
- 
-   if (style == Style::PERCENT) {
-     icu_number_formatter =
--        icu_number_formatter.unit(icu::MeasureUnit::getPercent())
-+        icu_number_formatter.unit(icu::NoUnit::percent())
-             .scale(icu::number::Scale::powerOfTen(2));
-   }
- 
-@@ -1261,11 +1261,12 @@ MaybeHandle<String> JSNumberFormat::Form
-     Handle<Object> numeric_obj) {
-   DCHECK(numeric_obj->IsNumeric());
- 
--  icu::number::FormattedNumber formatted;
-+  UErrorCode status = U_ZERO_ERROR;
-+  icu::number::LocalizedNumberFormatter formatter;
-+  icu::number::FormattedNumber formatted = formatter.formatInt(0, status);
-   Maybe<bool> maybe_format =
-       IcuFormatNumber(isolate, number_format, numeric_obj, &formatted);
-   MAYBE_RETURN(maybe_format, Handle<String>());
--  UErrorCode status = U_ZERO_ERROR;
-   icu::UnicodeString result = formatted.toString(status);
-   if (U_FAILURE(status)) {
-     THROW_NEW_ERROR(isolate, NewTypeError(MessageTemplate::kIcuError), String);
-@@ -1406,12 +1407,20 @@ Maybe<int> ConstructParts(Isolate* isola
-   regions.push_back(NumberFormatSpan(-1, 0, formatted_text.length()));
- 
-   {
-+#if U_ICU_VERSION_MAJOR_NUM >= 64
-     icu::ConstrainedFieldPosition cfp;
-     cfp.constrainCategory(UFIELD_CATEGORY_NUMBER);
-     while (formatted->nextPosition(cfp, status)) {
-       regions.push_back(
-           NumberFormatSpan(cfp.getField(), cfp.getStart(), cfp.getLimit()));
-     }
-+#else
-+    icu::FieldPosition fp;
-+    while (formatted->nextFieldPosition(fp, status)) {
-+      regions.push_back(NumberFormatSpan(fp.getField(), fp.getBeginIndex(),
-+                                         fp.getEndIndex()));
-+    }
-+#endif
-   }
- 
-   std::vector<NumberFormatSpan> parts = FlattenRegionsToParts(&regions);
-@@ -1443,6 +1452,25 @@ Maybe<int> ConstructParts(Isolate* isola
- 
- }  // namespace
- 
-+// From chromium 74
-+Maybe<int> JSNumberFormat::FormatToParts(Isolate* isolate,
-+                                         Handle<JSArray> result,
-+                                         int start_index,
-+                                         const icu::number::LocalizedNumberFormatter& number_format,
-+                                         Handle<Object> numeric_obj,
-+                                         Handle<String> unit) {
-+  DCHECK(numeric_obj->IsNumeric());
-+
-+  UErrorCode status = U_ZERO_ERROR;
-+  icu::number::LocalizedNumberFormatter formatter;
-+  icu::number::FormattedNumber formatted = formatter.formatInt(0, status);
-+  Maybe<bool> maybe_format =
-+      IcuFormatNumber(isolate, number_format, numeric_obj, &formatted);
-+  MAYBE_RETURN(maybe_format, Nothing<int>());
-+  return ConstructParts(isolate, &formatted, result,
-+                        start_index, numeric_obj, !unit.is_null());
-+}
-+
- MaybeHandle<JSArray> JSNumberFormat::FormatToParts(
-     Isolate* isolate, Handle<JSNumberFormat> number_format,
-     Handle<Object> numeric_obj) {
-@@ -1452,11 +1480,12 @@ MaybeHandle<JSArray> JSNumberFormat::For
-       number_format->icu_number_formatter().raw();
-   CHECK_NOT_NULL(fmt);
- 
--  icu::number::FormattedNumber formatted;
-+  UErrorCode status = U_ZERO_ERROR;
-+  icu::number::LocalizedNumberFormatter formatter;
-+  icu::number::FormattedNumber formatted = formatter.formatInt(0, status);
-   Maybe<bool> maybe_format =
-       IcuFormatNumber(isolate, *fmt, numeric_obj, &formatted);
-   MAYBE_RETURN(maybe_format, Handle<JSArray>());
--  UErrorCode status = U_ZERO_ERROR;
- 
-   bool style_is_unit =
-       Style::UNIT == StyleFromSkeleton(fmt->toSkeleton(status));
---- a/v8/src/objects/js-number-format.h
-+++ b/v8/src/objects/js-number-format.h
-@@ -54,6 +54,12 @@ class JSNumberFormat
-       Isolate* isolate, Handle<JSNumberFormat> number_format,
-       Handle<Object> numeric_obj);
- 
-+  // From chromium 74
-+  V8_WARN_UNUSED_RESULT static Maybe<int> FormatToParts(
-+      Isolate* isolate, Handle<JSArray> result, int start_index,
-+      const icu::number::LocalizedNumberFormatter& number_format,
-+      Handle<Object> numeric_obj, Handle<String> unit);
-+
-   V8_WARN_UNUSED_RESULT static MaybeHandle<String> FormatNumeric(
-       Isolate* isolate,
-       const icu::number::LocalizedNumberFormatter& number_format,
---- a/v8/src/objects/js-plural-rules.cc
-+++ b/v8/src/objects/js-plural-rules.cc
-@@ -195,9 +195,7 @@ MaybeHandle<String> JSPluralRules::Resol
-       fmt->formatDouble(number, status);
-   DCHECK(U_SUCCESS(status));
- 
--  icu::UnicodeString result =
--      icu_plural_rules->select(formatted_number, status);
--  DCHECK(U_SUCCESS(status));
-+  icu::UnicodeString result = icu_plural_rules->select(number);
- 
-   return Intl::ToString(isolate, result);
- }
---- a/v8/src/objects/js-display-names.cc
-+++ b/v8/src/objects/js-display-names.cc
-@@ -11,6 +11,7 @@
- 
- #include "src/objects/js-display-names-inl.h"
- #include "src/objects/js-display-names.h"
-+#include "src/objects/js-locale.h"
- 
- #include "src/execution/isolate.h"
- #include "src/heap/factory.h"
-@@ -20,7 +21,6 @@
- 
- #include "unicode/dtfmtsym.h"
- #include "unicode/dtptngen.h"
--#include "unicode/localebuilder.h"
- #include "unicode/locdspnm.h"
- #include "unicode/timezone.h"
- #include "unicode/tznames.h"
-@@ -48,20 +48,6 @@ enum class Type {
-   kDateTimeField
- };
- 
--bool IsUnicodeScriptSubtag(const std::string& value) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::LocaleBuilder builder;
--  builder.setScript(value).build(status);
--  return U_SUCCESS(status);
--}
--
--bool IsUnicodeRegionSubtag(const std::string& value) {
--  UErrorCode status = U_ZERO_ERROR;
--  icu::LocaleBuilder builder;
--  builder.setRegion(value).build(status);
--  return U_SUCCESS(status);
--}
--
- UDisplayContext ToUDisplayContext(JSDisplayNames::Style style) {
-   switch (style) {
-     case JSDisplayNames::Style::kLong:
-@@ -130,9 +116,7 @@ class LanguageNames : public LocaleDispl
-     // 1.b If IsStructurallyValidLanguageTag(code) is false, throw a RangeError
-     // exception.
-     icu::Locale l =
--        icu::Locale(icu::Locale::forLanguageTag(code, status).getBaseName());
--    // 1.c Set code to CanonicalizeUnicodeLocaleId(code).
--    l.canonicalize(status);
-+        icu::Locale::createCanonical(icu::Locale::forLanguageTag(code, status).getBaseName());
-     std::string checked = l.toLanguageTag<std::string>(status);
- 
-     if (U_FAILURE(status)) {
---- a/v8/src/objects/js-locale.h
-+++ b/v8/src/objects/js-locale.h
-@@ -25,6 +25,9 @@ class Locale;
- namespace v8 {
- namespace internal {
- 
-+bool IsUnicodeScriptSubtag(const std::string& value);
-+bool IsUnicodeRegionSubtag(const std::string& value);
-+
- #include "torque-generated/src/objects/js-locale-tq.inc"
- 
- class JSLocale : public TorqueGeneratedJSLocale<JSLocale, JSObject> {
---- a/base/i18n/icu_util.cc
-+++ b/base/i18n/icu_util.cc
-@@ -371,6 +371,8 @@ enum class ICUCreateInstance {
-   kMaxValue = kChineseJapaneseBreakEngine
- };
- 
-+#if 0
-+
- // Callback functions to report the opening of ICU Data File, and creation of
- // key objects to UMA. This help us to understand what built-in ICU data files
- // are rarely used in the user's machines and the distribution of ICU usage.
-@@ -482,6 +484,8 @@ static void U_CALLCONV TraceICUData(cons
-   }
- }
- 
-+#endif
-+
- // Common initialization to run regardless of how ICU is initialized.
- // There are multiple exposed InitializeIcu* functions. This should be called
- // as at the end of (the last functions in the sequence of) these functions.
-@@ -491,8 +495,6 @@ bool DoCommonInitialization() {
-   // when requested.
-   InitializeIcuTimeZone();
- 
--  const void* context = nullptr;
--  utrace_setFunctions(context, TraceICUEntry, nullptr, TraceICUData);
-   utrace_setLevel(UTRACE_VERBOSE);
-   return true;
- }
diff --git a/debian/patches/buster/re2.patch b/debian/patches/buster/re2.patch
deleted file mode 100644
index 6f561d0..0000000
--- a/debian/patches/buster/re2.patch
+++ /dev/null
@@ -1,31 +0,0 @@
-description: maintain compatibility with re2 on buster
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/extensions/browser/api/declarative_net_request/regex_rules_matcher.cc
-+++ b/extensions/browser/api/declarative_net_request/regex_rules_matcher.cc
-@@ -283,7 +283,12 @@ const std::vector<RegexRuleInfo>& RegexR
-     if (!DoesRuleMetadataMatchRequest(*rule->url_rule(), params))
-       continue;
- 
-+// Check this is getting built on buster (older re2), not a great way to do this
-+#if __clang_major__ == 7
-+    const RE2& regex = *filtered_re2_.GetRE2(re2_id);
-+#else
-     const RE2& regex = filtered_re2_.GetRE2(re2_id);
-+#endif
-     potential_matches.emplace_back(rule, &regex);
-   }
- 
---- a/extensions/browser/api/declarative_net_request/regex_rules_matcher.h
-+++ b/extensions/browser/api/declarative_net_request/regex_rules_matcher.h
-@@ -10,7 +10,10 @@
- #include "base/macros.h"
- #include "components/url_matcher/substring_set_matcher.h"
- #include "extensions/browser/api/declarative_net_request/ruleset_matcher_base.h"
-+
-+#define private public
- #include "third_party/re2/src/re2/filtered_re2.h"
-+#undef private
- 
- namespace extensions {
- namespace declarative_net_request {
diff --git a/debian/patches/buster/vpx17.patch b/debian/patches/buster/vpx17.patch
deleted file mode 100644
index ccbb18f..0000000
--- a/debian/patches/buster/vpx17.patch
+++ /dev/null
@@ -1,793 +0,0 @@
---- a/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.h
-+++ b/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.h
-@@ -84,9 +84,6 @@ class LibvpxInterface {
-   virtual vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
-                                         vp8e_enc_control_id ctrl_id,
-                                         vpx_svc_extra_cfg_t* param) const = 0;
--  virtual vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
--                                        vp8e_enc_control_id ctrl_id,
--                                        vpx_svc_frame_drop_t* param) const = 0;
-   virtual vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
-                                         vp8e_enc_control_id ctrl_id,
-                                         void* param) const = 0;
-@@ -97,10 +94,6 @@ class LibvpxInterface {
-       vpx_codec_ctx_t* ctx,
-       vp8e_enc_control_id ctrl_id,
-       vpx_svc_ref_frame_config_t* param) const = 0;
--  virtual vpx_codec_err_t codec_control(
--      vpx_codec_ctx_t* ctx,
--      vp8e_enc_control_id ctrl_id,
--      vpx_svc_spatial_layer_sync_t* param) const = 0;
-   virtual vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
-                                         vp8e_enc_control_id ctrl_id,
-                                         vpx_rc_funcs_t* param) const = 0;
---- a/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.cc
-+++ b/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.cc
-@@ -97,8 +97,6 @@ class LibvpxFacade : public LibvpxInterface {
-         return vpx_codec_control(ctx, VP8E_SET_CQ_LEVEL, param);
-       case VP8E_SET_MAX_INTRA_BITRATE_PCT:
-         return vpx_codec_control(ctx, VP8E_SET_MAX_INTRA_BITRATE_PCT, param);
--      case VP9E_SET_MAX_INTER_BITRATE_PCT:
--        return vpx_codec_control(ctx, VP9E_SET_MAX_INTER_BITRATE_PCT, param);
-       case VP8E_SET_GF_CBR_BOOST_PCT:
-         return vpx_codec_control(ctx, VP8E_SET_GF_CBR_BOOST_PCT, param);
-       case VP8E_SET_SCREEN_CONTENT_MODE:
-@@ -126,12 +124,6 @@ class LibvpxFacade : public LibvpxInterface {
-       case VP9E_ENABLE_MOTION_VECTOR_UNIT_TEST:
-         return vpx_codec_control(ctx, VP9E_ENABLE_MOTION_VECTOR_UNIT_TEST,
-                                  param);
--      case VP9E_SET_SVC_INTER_LAYER_PRED:
--        return vpx_codec_control(ctx, VP9E_SET_SVC_INTER_LAYER_PRED, param);
--      case VP9E_SET_SVC_GF_TEMPORAL_REF:
--        return vpx_codec_control(ctx, VP9E_SET_SVC_GF_TEMPORAL_REF, param);
--      case VP9E_SET_POSTENCODE_DROP:
--        return vpx_codec_control(ctx, VP9E_SET_POSTENCODE_DROP, param);
-       default:
-         RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
-     }
-@@ -146,8 +138,6 @@ class LibvpxFacade : public LibvpxInterface {
-         return vpx_codec_control(ctx, VP8E_SET_FRAME_FLAGS, param);
-       case VP8E_SET_TEMPORAL_LAYER_ID:
-         return vpx_codec_control(ctx, VP8E_SET_TEMPORAL_LAYER_ID, param);
--      case VP9E_SET_SVC:
--        return vpx_codec_control(ctx, VP9E_SET_SVC, param);
-       case VP8E_SET_CPUUSED:
-         return vpx_codec_control(ctx, VP8E_SET_CPUUSED, param);
-       case VP8E_SET_TOKEN_PARTITIONS:
-@@ -158,8 +148,6 @@ class LibvpxFacade : public LibvpxInterface {
-         return vpx_codec_control(ctx, VP9E_SET_TILE_COLUMNS, param);
-       case VP9E_SET_TILE_ROWS:
-         return vpx_codec_control(ctx, VP9E_SET_TILE_ROWS, param);
--      case VP9E_SET_TPL:
--        return vpx_codec_control(ctx, VP9E_SET_TPL, param);
-       case VP9E_SET_ALT_REF_AQ:
-         return vpx_codec_control(ctx, VP9E_SET_ALT_REF_AQ, param);
-       case VP9E_SET_TUNE_CONTENT:
-@@ -168,8 +156,6 @@ class LibvpxFacade : public LibvpxInterface {
-         return vpx_codec_control(ctx, VP9E_SET_COLOR_SPACE, param);
-       case VP9E_SET_COLOR_RANGE:
-         return vpx_codec_control(ctx, VP9E_SET_COLOR_RANGE, param);
--      case VP9E_SET_DELTA_Q_UV:
--        return vpx_codec_control(ctx, VP9E_SET_DELTA_Q_UV, param);
- 
-       default:
-         if (param >= 0) {
-@@ -203,10 +189,6 @@ class LibvpxFacade : public LibvpxInterface {
-                                 vp8e_enc_control_id ctrl_id,
-                                 vpx_roi_map* param) const override {
-     switch (ctrl_id) {
--      case VP8E_SET_ROI_MAP:
--        return vpx_codec_control(ctx, VP8E_SET_ROI_MAP, param);
--      case VP9E_SET_ROI_MAP:
--        return vpx_codec_control(ctx, VP9E_SET_ROI_MAP, param);
-       default:
-         RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
-     }
-@@ -251,18 +233,6 @@ class LibvpxFacade : public LibvpxInterface {
-     return VPX_CODEC_ERROR;
-   }
- 
--  vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
--                                vp8e_enc_control_id ctrl_id,
--                                vpx_svc_frame_drop_t* param) const override {
--    switch (ctrl_id) {
--      case VP9E_SET_SVC_FRAME_DROP_LAYER:
--        return vpx_codec_control_(ctx, VP9E_SET_SVC_FRAME_DROP_LAYER, param);
--      default:
--        RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
--    }
--    return VPX_CODEC_ERROR;
--  }
--
-   vpx_codec_err_t codec_control(vpx_codec_ctx_t* ctx,
-                                 vp8e_enc_control_id ctrl_id,
-                                 void* param) const override {
-@@ -298,21 +268,6 @@ class LibvpxFacade : public LibvpxInterface {
-     switch (ctrl_id) {
-       case VP9E_SET_SVC_REF_FRAME_CONFIG:
-         return vpx_codec_control_(ctx, VP9E_SET_SVC_REF_FRAME_CONFIG, param);
--      case VP9E_GET_SVC_REF_FRAME_CONFIG:
--        return vpx_codec_control_(ctx, VP9E_GET_SVC_REF_FRAME_CONFIG, param);
--      default:
--        RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
--    }
--    return VPX_CODEC_ERROR;
--  }
--
--  vpx_codec_err_t codec_control(
--      vpx_codec_ctx_t* ctx,
--      vp8e_enc_control_id ctrl_id,
--      vpx_svc_spatial_layer_sync_t* param) const override {
--    switch (ctrl_id) {
--      case VP9E_SET_SVC_SPATIAL_LAYER_SYNC:
--        return vpx_codec_control_(ctx, VP9E_SET_SVC_SPATIAL_LAYER_SYNC, param);
-       default:
-         RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
-     }
---- a/media/video/vpx_video_encoder.cc
-+++ b/media/video/vpx_video_encoder.cc
-@@ -319,28 +319,14 @@ void VpxVideoEncoder::Encode(scoped_refptr<VideoFrame> frame,
-       NOTREACHED();
-       break;
-     default:
--      vpx_img_fmt_t fmt = frame->format() == PIXEL_FORMAT_NV12
--                              ? VPX_IMG_FMT_NV12
--                              : VPX_IMG_FMT_I420;
-+      vpx_img_fmt_t fmt = VPX_IMG_FMT_I420;
-       Status status = ReallocateVpxImageIfNeeded(
-           &vpx_image_, fmt, codec_config_.g_w, codec_config_.g_h);
-       if (!status.is_ok()) {
-         std::move(done_cb).Run(status);
-         return;
-       }
--      if (fmt == VPX_IMG_FMT_NV12) {
--        vpx_image_.planes[VPX_PLANE_Y] =
--            const_cast<uint8_t*>(frame->visible_data(VideoFrame::kYPlane));
--        vpx_image_.planes[VPX_PLANE_U] =
--            const_cast<uint8_t*>(frame->visible_data(VideoFrame::kUVPlane));
--        // In NV12 Y and U samples are combined in one plane (bytes go YUYUYU),
--        // but libvpx treats them as two planes with the same stride but shifted
--        // by one byte.
--        vpx_image_.planes[VPX_PLANE_V] = vpx_image_.planes[VPX_PLANE_U] + 1;
--        vpx_image_.stride[VPX_PLANE_Y] = frame->stride(VideoFrame::kYPlane);
--        vpx_image_.stride[VPX_PLANE_U] = frame->stride(VideoFrame::kUVPlane);
--        vpx_image_.stride[VPX_PLANE_V] = frame->stride(VideoFrame::kUVPlane);
--      } else {
-+      {
-         vpx_image_.planes[VPX_PLANE_Y] =
-             const_cast<uint8_t*>(frame->visible_data(VideoFrame::kYPlane));
-         vpx_image_.planes[VPX_PLANE_U] =
---- a/third_party/webrtc/modules/video_coding/codecs/vp8/libvpx_vp8_encoder.cc
-+++ b/third_party/webrtc/modules/video_coding/codecs/vp8/libvpx_vp8_encoder.cc
-@@ -954,9 +954,6 @@ int LibvpxVp8Encoder::Encode(const Video
-     case VideoFrameBuffer::Type::kI420:
-       PrepareI420Image(input_image->GetI420());
-       break;
--    case VideoFrameBuffer::Type::kNV12:
--      PrepareNV12Image(input_image->GetNV12());
--      break;
-     default: {
-       rtc::scoped_refptr<I420BufferInterface> i420_image =
-           input_image->ToI420();
-@@ -1062,25 +1062,9 @@ void LibvpxVp8Encoder::PopulateCodecSpecific(CodecSpecificInfo* codec_specific,
- 
-   int qp = 0;
-   vpx_codec_control(&encoders_[encoder_idx], VP8E_GET_LAST_QUANTIZER_64, &qp);
--  bool is_keyframe = (pkt.data.frame.flags & VPX_FRAME_IS_KEY) != 0;
--  frame_buffer_controller_->OnEncodeDone(stream_idx, timestamp,
--                                         encoded_images_[encoder_idx].size(),
--                                         is_keyframe, qp, codec_specific);
--  if (is_keyframe && codec_specific->template_structure != absl::nullopt) {
--    // Number of resolutions must match number of spatial layers, VP8 structures
--    // expected to use single spatial layer. Templates must be ordered by
--    // spatial_id, so assumption there is exactly one spatial layer is same as
--    // assumption last template uses spatial_id = 0.
--    // This check catches potential scenario where template_structure is shared
--    // across multiple vp8 streams and they are distinguished using spatial_id.
--    // Assigning single resolution doesn't support such scenario, i.e. assumes
--    // vp8 simulcast is sent using multiple ssrcs.
--    RTC_DCHECK(!codec_specific->template_structure->templates.empty());
--    RTC_DCHECK_EQ(
--        codec_specific->template_structure->templates.back().spatial_id, 0);
--    codec_specific->template_structure->resolutions = {
--        RenderResolution(pkt.data.frame.width[0], pkt.data.frame.height[0])};
--  }
-+  frame_buffer_controller_->OnEncodeDone(
-+      stream_idx, timestamp, encoded_images_[encoder_idx].size(),
-+      (pkt.data.frame.flags & VPX_FRAME_IS_KEY) != 0, qp, codec_specific);
- }
- 
- int LibvpxVp8Encoder::GetEncodedPartitions(const VideoFrame& input_image,
-@@ -1240,8 +1237,6 @@ void LibvpxVp8Encoder::MaybeUpdatePixelF
-         << "Not all raw images had the right format!";
-     return;
-   }
--  RTC_LOG(INFO) << "Updating vp8 encoder pixel format to "
--                << (fmt == VPX_IMG_FMT_NV12 ? "NV12" : "I420");
-   for (size_t i = 0; i < raw_images_.size(); ++i) {
-     vpx_image_t& img = raw_images_[i];
-     auto d_w = img.d_w;
-@@ -1288,7 +1283,6 @@ void LibvpxVp8Encoder::PrepareI420Image(
- 
- void LibvpxVp8Encoder::PrepareNV12Image(const NV12BufferInterface* frame) {
-   RTC_DCHECK(!raw_images_.empty());
--  MaybeUpdatePixelFormat(VPX_IMG_FMT_NV12);
-   // Image in vpx_image_t format.
-   // Input image is const. VP8's raw image is not defined as const.
-   raw_images_[0].planes[VPX_PLANE_Y] = const_cast<uint8_t*>(frame->DataY());
---- a/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc
-+++ b/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc
-@@ -150,39 +150,6 @@ std::unique_ptr<ScalableVideoController> CreateVp9ScalabilityStructure(
-   return scalability_structure_controller;
- }
- 
--vpx_svc_ref_frame_config_t Vp9References(
--    rtc::ArrayView<const ScalableVideoController::LayerFrameConfig> layers) {
--  vpx_svc_ref_frame_config_t ref_config = {};
--  for (const ScalableVideoController::LayerFrameConfig& layer_frame : layers) {
--    const auto& buffers = layer_frame.Buffers();
--    RTC_DCHECK_LE(buffers.size(), 3);
--    int sid = layer_frame.SpatialId();
--    if (!buffers.empty()) {
--      ref_config.lst_fb_idx[sid] = buffers[0].id;
--      ref_config.reference_last[sid] = buffers[0].referenced;
--      if (buffers[0].updated) {
--        ref_config.update_buffer_slot[sid] |= (1 << buffers[0].id);
--      }
--    }
--    if (buffers.size() > 1) {
--      ref_config.gld_fb_idx[sid] = buffers[1].id;
--      ref_config.reference_golden[sid] = buffers[1].referenced;
--      if (buffers[1].updated) {
--        ref_config.update_buffer_slot[sid] |= (1 << buffers[1].id);
--      }
--    }
--    if (buffers.size() > 2) {
--      ref_config.alt_fb_idx[sid] = buffers[2].id;
--      ref_config.reference_alt_ref[sid] = buffers[2].referenced;
--      if (buffers[2].updated) {
--        ref_config.update_buffer_slot[sid] |= (1 << buffers[2].id);
--      }
--    }
--  }
--  // TODO(bugs.webrtc.org/11999): Fill ref_config.duration
--  return ref_config;
--}
--
- }  // namespace
- 
- void LibvpxVp9Encoder::EncoderOutputCodedPacketCallback(vpx_codec_cx_pkt* pkt,
-@@ -388,15 +355,6 @@ bool LibvpxVp9Encoder::SetSvcRates(
-     }
-   }
- 
--  if (higher_layers_enabled && !force_key_frame_) {
--    // Prohibit drop of all layers for the next frame, so newly enabled
--    // layer would have a valid spatial reference.
--    for (size_t i = 0; i < num_spatial_layers_; ++i) {
--      svc_drop_frame_.framedrop_thresh[i] = 0;
--    }
--    force_all_active_layers_ = true;
--  }
--
-   if (svc_controller_) {
-     VideoBitrateAllocation allocation;
-     for (int sid = 0; sid < num_spatial_layers_; ++sid) {
-@@ -743,8 +701,6 @@ int LibvpxVp9Encoder::InitAndSetControlSettings(const VideoCodec* inst) {
-     for (int si = 0; si < num_spatial_layers_; ++si) {
-       svc_params_.speed_per_layer[si] =
-           performance_flags_by_spatial_index_[si].base_layer_speed;
--      svc_params_.loopfilter_ctrl[si] =
--          performance_flags_by_spatial_index_[si].deblock_mode;
-     }
-   }
- 
-@@ -754,7 +710,6 @@ int LibvpxVp9Encoder::InitAndSetControlSettings(const VideoCodec* inst) {
-                          inst->VP9().adaptiveQpMode ? 3 : 0);
- 
-   libvpx_->codec_control(encoder_, VP9E_SET_FRAME_PARALLEL_DECODING, 0);
--  libvpx_->codec_control(encoder_, VP9E_SET_SVC_GF_TEMPORAL_REF, 0);
- 
-   if (is_svc_) {
-     libvpx_->codec_control(encoder_, VP9E_SET_SVC, 1);
-@@ -766,56 +721,6 @@ int LibvpxVp9Encoder::InitAndSetControlSettings(const VideoCodec* inst) {
-         performance_flags_by_spatial_index_.rbegin()->base_layer_speed);
-   }
- 
--  if (num_spatial_layers_ > 1) {
--    switch (inter_layer_pred_) {
--      case InterLayerPredMode::kOn:
--        libvpx_->codec_control(encoder_, VP9E_SET_SVC_INTER_LAYER_PRED, 0);
--        break;
--      case InterLayerPredMode::kOff:
--        libvpx_->codec_control(encoder_, VP9E_SET_SVC_INTER_LAYER_PRED, 1);
--        break;
--      case InterLayerPredMode::kOnKeyPic:
--        libvpx_->codec_control(encoder_, VP9E_SET_SVC_INTER_LAYER_PRED, 2);
--        break;
--      default:
--        RTC_NOTREACHED();
--    }
--
--    memset(&svc_drop_frame_, 0, sizeof(svc_drop_frame_));
--    const bool reverse_constrained_drop_mode =
--        inter_layer_pred_ == InterLayerPredMode::kOn &&
--        codec_.mode == VideoCodecMode::kScreensharing &&
--        num_spatial_layers_ > 1;
--    if (reverse_constrained_drop_mode) {
--      // Screenshare dropping mode: drop a layer only together with all lower
--      // layers. This ensures that drops on lower layers won't reduce frame-rate
--      // for higher layers and reference structure is RTP-compatible.
--      svc_drop_frame_.framedrop_mode = CONSTRAINED_FROM_ABOVE_DROP;
--      svc_drop_frame_.max_consec_drop = 5;
--      for (size_t i = 0; i < num_spatial_layers_; ++i) {
--        svc_drop_frame_.framedrop_thresh[i] = config_->rc_dropframe_thresh;
--      }
--      // No buffering is needed because the highest layer is always present in
--      // all frames in CONSTRAINED_FROM_ABOVE drop mode.
--      layer_buffering_ = false;
--    } else {
--      // Configure encoder to drop entire superframe whenever it needs to drop
--      // a layer. This mode is preferred over per-layer dropping which causes
--      // quality flickering and is not compatible with RTP non-flexible mode.
--      svc_drop_frame_.framedrop_mode =
--          full_superframe_drop_ ? FULL_SUPERFRAME_DROP : CONSTRAINED_LAYER_DROP;
--      // Buffering is needed only for constrained layer drop, as it's not clear
--      // which frame is the last.
--      layer_buffering_ = !full_superframe_drop_;
--      svc_drop_frame_.max_consec_drop = std::numeric_limits<int>::max();
--      for (size_t i = 0; i < num_spatial_layers_; ++i) {
--        svc_drop_frame_.framedrop_thresh[i] = config_->rc_dropframe_thresh;
--      }
--    }
--    libvpx_->codec_control(encoder_, VP9E_SET_SVC_FRAME_DROP_LAYER,
--                           &svc_drop_frame_);
--  }
--
-   // Register callback for getting each spatial layer.
-   vpx_codec_priv_output_cx_pkt_cb_pair_t cbp = {
-       LibvpxVp9Encoder::EncoderOutputCodedPacketCallback,
-@@ -959,52 +864,10 @@ int LibvpxVp9Encoder::Encode(const VideoFrame& input_image,
-     }
-   }
- 
--  // Need to set temporal layer id on ALL layers, even disabled ones.
--  // Otherwise libvpx might produce frames on a disabled layer:
--  // http://crbug.com/1051476
--  for (int sl_idx = 0; sl_idx < num_spatial_layers_; ++sl_idx) {
--    layer_id.temporal_layer_id_per_spatial[sl_idx] = layer_id.temporal_layer_id;
--  }
--
-   if (layer_id.spatial_layer_id < first_active_layer_) {
-     layer_id.spatial_layer_id = first_active_layer_;
-   }
- 
--  if (svc_controller_) {
--    layer_id.spatial_layer_id = layer_frames_.front().SpatialId();
--    layer_id.temporal_layer_id = layer_frames_.front().TemporalId();
--    for (const auto& layer : layer_frames_) {
--      layer_id.temporal_layer_id_per_spatial[layer.SpatialId()] =
--          layer.TemporalId();
--    }
--  }
--
--  if (is_svc_ && performance_flags_.use_per_layer_speed) {
--    // Update speed settings that might depend on temporal index.
--    bool speed_updated = false;
--    for (int sl_idx = 0; sl_idx < num_spatial_layers_; ++sl_idx) {
--      const int target_speed =
--          layer_id.temporal_layer_id_per_spatial[sl_idx] == 0
--              ? performance_flags_by_spatial_index_[sl_idx].base_layer_speed
--              : performance_flags_by_spatial_index_[sl_idx].high_layer_speed;
--      if (svc_params_.speed_per_layer[sl_idx] != target_speed) {
--        svc_params_.speed_per_layer[sl_idx] = target_speed;
--        speed_updated = true;
--      }
--    }
--    if (speed_updated) {
--      libvpx_->codec_control(encoder_, VP9E_SET_SVC_PARAMETERS, &svc_params_);
--    }
--  }
--
--  libvpx_->codec_control(encoder_, VP9E_SET_SVC_LAYER_ID, &layer_id);
--
--  if (num_spatial_layers_ > 1) {
--    // Update frame dropping settings as they may change on per-frame basis.
--    libvpx_->codec_control(encoder_, VP9E_SET_SVC_FRAME_DROP_LAYER,
--                           &svc_drop_frame_);
--  }
--
-   if (config_changed_) {
-     if (libvpx_->codec_enc_config_set(encoder_, config_)) {
-       return WEBRTC_VIDEO_CODEC_ERROR;
-@@ -1046,19 +909,7 @@ int LibvpxVp9Encoder::Encode(const VideoFrame& input_image,
-   rtc::scoped_refptr<const I010BufferInterface> i010_copy;
-   switch (profile_) {
-     case VP9Profile::kProfile0: {
--      if (input_image.video_frame_buffer()->type() ==
--          VideoFrameBuffer::Type::kNV12) {
--        const NV12BufferInterface* nv12_buffer =
--            input_image.video_frame_buffer()->GetNV12();
--        video_frame_buffer = nv12_buffer;
--        MaybeRewrapRawWithFormat(VPX_IMG_FMT_NV12);
--        raw_->planes[VPX_PLANE_Y] = const_cast<uint8_t*>(nv12_buffer->DataY());
--        raw_->planes[VPX_PLANE_U] = const_cast<uint8_t*>(nv12_buffer->DataUV());
--        raw_->planes[VPX_PLANE_V] = raw_->planes[VPX_PLANE_U] + 1;
--        raw_->stride[VPX_PLANE_Y] = nv12_buffer->StrideY();
--        raw_->stride[VPX_PLANE_U] = nv12_buffer->StrideUV();
--        raw_->stride[VPX_PLANE_V] = nv12_buffer->StrideUV();
--      } else {
-+      {
-         rtc::scoped_refptr<I420BufferInterface> i420_buffer =
-             input_image.video_frame_buffer()->ToI420();
-         video_frame_buffer = i420_buffer;
-@@ -1110,26 +961,6 @@ int LibvpxVp9Encoder::Encode(const VideoFrame& input_image,
-     flags = VPX_EFLAG_FORCE_KF;
-   }
- 
--  if (svc_controller_) {
--    vpx_svc_ref_frame_config_t ref_config = Vp9References(layer_frames_);
--    libvpx_->codec_control(encoder_, VP9E_SET_SVC_REF_FRAME_CONFIG,
--                           &ref_config);
--  } else if (external_ref_control_) {
--    vpx_svc_ref_frame_config_t ref_config =
--        SetReferences(force_key_frame_, layer_id.spatial_layer_id);
--
--    if (VideoCodecMode::kScreensharing == codec_.mode) {
--      for (uint8_t sl_idx = 0; sl_idx < num_active_spatial_layers_; ++sl_idx) {
--        ref_config.duration[sl_idx] = static_cast<int64_t>(
--            90000 / (std::min(static_cast<float>(codec_.maxFramerate),
--                              framerate_controller_[sl_idx].GetTargetRate())));
--      }
--    }
--
--    libvpx_->codec_control(encoder_, VP9E_SET_SVC_REF_FRAME_CONFIG,
--                           &ref_config);
--  }
--
-   first_frame_in_picture_ = true;
- 
-   // TODO(ssilkin): Frame duration should be specified per spatial layer
-@@ -1236,11 +1067,7 @@ void LibvpxVp9Encoder::PopulateCodecSpecific(CodecSpecificInfo* codec_specific,
-   vp9_info->first_active_layer = first_active_layer_;
- 
-   vp9_info->num_ref_pics = 0;
--  FillReferenceIndices(pkt, pics_since_key_, vp9_info->inter_layer_predicted,
--                       vp9_info);
--  if (vp9_info->flexible_mode) {
--    vp9_info->gof_idx = kNoGofIdx;
--  } else {
-+  {
-     vp9_info->gof_idx =
-         static_cast<uint8_t>(pics_since_key_ % gof_.num_frames_in_gof);
-     vp9_info->temporal_up_switch = gof_.temporal_up_switch[vp9_info->gof_idx];
-@@ -1314,261 +1314,6 @@ bool LibvpxVp9Encoder::PopulateCodecSpecific(CodecSpecificInfo* codec_specific,
-   return true;
- }
- 
--void LibvpxVp9Encoder::FillReferenceIndices(const vpx_codec_cx_pkt& pkt,
--                                            const size_t pic_num,
--                                            const bool inter_layer_predicted,
--                                            CodecSpecificInfoVP9* vp9_info) {
--  vpx_svc_layer_id_t layer_id = {0};
--  libvpx_->codec_control(encoder_, VP9E_GET_SVC_LAYER_ID, &layer_id);
--
--  const bool is_key_frame =
--      (pkt.data.frame.flags & VPX_FRAME_IS_KEY) ? true : false;
--
--  std::vector<RefFrameBuffer> ref_buf_list;
--
--  if (is_svc_) {
--    vpx_svc_ref_frame_config_t enc_layer_conf = {{0}};
--    libvpx_->codec_control(encoder_, VP9E_GET_SVC_REF_FRAME_CONFIG,
--                           &enc_layer_conf);
--    int ref_buf_flags = 0;
--
--    if (enc_layer_conf.reference_last[layer_id.spatial_layer_id]) {
--      const size_t fb_idx =
--          enc_layer_conf.lst_fb_idx[layer_id.spatial_layer_id];
--      RTC_DCHECK(ref_buf_.find(fb_idx) != ref_buf_.end());
--      if (std::find(ref_buf_list.begin(), ref_buf_list.end(),
--                    ref_buf_.at(fb_idx)) == ref_buf_list.end()) {
--        ref_buf_list.push_back(ref_buf_.at(fb_idx));
--        ref_buf_flags |= 1 << fb_idx;
--      }
--    }
--
--    if (enc_layer_conf.reference_alt_ref[layer_id.spatial_layer_id]) {
--      const size_t fb_idx =
--          enc_layer_conf.alt_fb_idx[layer_id.spatial_layer_id];
--      RTC_DCHECK(ref_buf_.find(fb_idx) != ref_buf_.end());
--      if (std::find(ref_buf_list.begin(), ref_buf_list.end(),
--                    ref_buf_.at(fb_idx)) == ref_buf_list.end()) {
--        ref_buf_list.push_back(ref_buf_.at(fb_idx));
--        ref_buf_flags |= 1 << fb_idx;
--      }
--    }
--
--    if (enc_layer_conf.reference_golden[layer_id.spatial_layer_id]) {
--      const size_t fb_idx =
--          enc_layer_conf.gld_fb_idx[layer_id.spatial_layer_id];
--      RTC_DCHECK(ref_buf_.find(fb_idx) != ref_buf_.end());
--      if (std::find(ref_buf_list.begin(), ref_buf_list.end(),
--                    ref_buf_.at(fb_idx)) == ref_buf_list.end()) {
--        ref_buf_list.push_back(ref_buf_.at(fb_idx));
--        ref_buf_flags |= 1 << fb_idx;
--      }
--    }
--
--    RTC_LOG(LS_VERBOSE) << "Frame " << pic_num << " sl "
--                        << layer_id.spatial_layer_id << " tl "
--                        << layer_id.temporal_layer_id << " refered buffers "
--                        << (ref_buf_flags & (1 << 0) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 1) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 2) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 3) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 4) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 5) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 6) ? 1 : 0)
--                        << (ref_buf_flags & (1 << 7) ? 1 : 0);
--
--  } else if (!is_key_frame) {
--    RTC_DCHECK_EQ(num_spatial_layers_, 1);
--    RTC_DCHECK_EQ(num_temporal_layers_, 1);
--    // In non-SVC mode encoder doesn't provide reference list. Assume each frame
--    // refers previous one, which is stored in buffer 0.
--    ref_buf_list.push_back(ref_buf_.at(0));
--  }
--
--  size_t max_ref_temporal_layer_id = 0;
--
--  std::vector<size_t> ref_pid_list;
--
--  vp9_info->num_ref_pics = 0;
--  for (const RefFrameBuffer& ref_buf : ref_buf_list) {
--    RTC_DCHECK_LE(ref_buf.pic_num, pic_num);
--    if (ref_buf.pic_num < pic_num) {
--      if (inter_layer_pred_ != InterLayerPredMode::kOn) {
--        // RTP spec limits temporal prediction to the same spatial layer.
--        // It is safe to ignore this requirement if inter-layer prediction is
--        // enabled for all frames when all base frames are relayed to receiver.
--        RTC_DCHECK_EQ(ref_buf.spatial_layer_id, layer_id.spatial_layer_id);
--      } else {
--        RTC_DCHECK_LE(ref_buf.spatial_layer_id, layer_id.spatial_layer_id);
--      }
--      RTC_DCHECK_LE(ref_buf.temporal_layer_id, layer_id.temporal_layer_id);
--
--      // Encoder may reference several spatial layers on the same previous
--      // frame in case if some spatial layers are skipped on the current frame.
--      // We shouldn't put duplicate references as it may break some old
--      // clients and isn't RTP compatible.
--      if (std::find(ref_pid_list.begin(), ref_pid_list.end(),
--                    ref_buf.pic_num) != ref_pid_list.end()) {
--        continue;
--      }
--      ref_pid_list.push_back(ref_buf.pic_num);
--
--      const size_t p_diff = pic_num - ref_buf.pic_num;
--      RTC_DCHECK_LE(p_diff, 127UL);
--
--      vp9_info->p_diff[vp9_info->num_ref_pics] = static_cast<uint8_t>(p_diff);
--      ++vp9_info->num_ref_pics;
--
--      max_ref_temporal_layer_id =
--          std::max(max_ref_temporal_layer_id, ref_buf.temporal_layer_id);
--    } else {
--      RTC_DCHECK(inter_layer_predicted);
--      // RTP spec only allows to use previous spatial layer for inter-layer
--      // prediction.
--      RTC_DCHECK_EQ(ref_buf.spatial_layer_id + 1, layer_id.spatial_layer_id);
--    }
--  }
--
--  vp9_info->temporal_up_switch =
--      (max_ref_temporal_layer_id <
--       static_cast<size_t>(layer_id.temporal_layer_id));
--}
--
--void LibvpxVp9Encoder::UpdateReferenceBuffers(const vpx_codec_cx_pkt& pkt,
--                                              const size_t pic_num) {
--  vpx_svc_layer_id_t layer_id = {0};
--  libvpx_->codec_control(encoder_, VP9E_GET_SVC_LAYER_ID, &layer_id);
--
--  RefFrameBuffer frame_buf(pic_num, layer_id.spatial_layer_id,
--                           layer_id.temporal_layer_id);
--
--  if (is_svc_) {
--    vpx_svc_ref_frame_config_t enc_layer_conf = {{0}};
--    libvpx_->codec_control(encoder_, VP9E_GET_SVC_REF_FRAME_CONFIG,
--                           &enc_layer_conf);
--    const int update_buffer_slot =
--        enc_layer_conf.update_buffer_slot[layer_id.spatial_layer_id];
--
--    for (size_t i = 0; i < kNumVp9Buffers; ++i) {
--      if (update_buffer_slot & (1 << i)) {
--        ref_buf_[i] = frame_buf;
--      }
--    }
--
--    RTC_LOG(LS_VERBOSE) << "Frame " << pic_num << " sl "
--                        << layer_id.spatial_layer_id << " tl "
--                        << layer_id.temporal_layer_id << " updated buffers "
--                        << (update_buffer_slot & (1 << 0) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 1) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 2) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 3) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 4) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 5) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 6) ? 1 : 0)
--                        << (update_buffer_slot & (1 << 7) ? 1 : 0);
--  } else {
--    RTC_DCHECK_EQ(num_spatial_layers_, 1);
--    RTC_DCHECK_EQ(num_temporal_layers_, 1);
--    // In non-svc mode encoder doesn't provide reference list. Assume each frame
--    // is reference and stored in buffer 0.
--    ref_buf_[0] = frame_buf;
--  }
--}
--
--vpx_svc_ref_frame_config_t LibvpxVp9Encoder::SetReferences(
--    bool is_key_pic,
--    size_t first_active_spatial_layer_id) {
--  // kRefBufIdx, kUpdBufIdx need to be updated to support longer GOFs.
--  RTC_DCHECK_LE(gof_.num_frames_in_gof, 4);
--
--  vpx_svc_ref_frame_config_t ref_config;
--  memset(&ref_config, 0, sizeof(ref_config));
--
--  const size_t num_temporal_refs = std::max(1, num_temporal_layers_ - 1);
--  const bool is_inter_layer_pred_allowed =
--      inter_layer_pred_ == InterLayerPredMode::kOn ||
--      (inter_layer_pred_ == InterLayerPredMode::kOnKeyPic && is_key_pic);
--  absl::optional<int> last_updated_buf_idx;
--
--  // Put temporal reference to LAST and spatial reference to GOLDEN. Update
--  // frame buffer (i.e. store encoded frame) if current frame is a temporal
--  // reference (i.e. it belongs to a low temporal layer) or it is a spatial
--  // reference. In later case, always store spatial reference in the last
--  // reference frame buffer.
--  // For the case of 3 temporal and 3 spatial layers we need 6 frame buffers
--  // for temporal references plus 1 buffer for spatial reference. 7 buffers
--  // in total.
--
--  for (size_t sl_idx = first_active_spatial_layer_id;
--       sl_idx < num_active_spatial_layers_; ++sl_idx) {
--    const size_t curr_pic_num = is_key_pic ? 0 : pics_since_key_ + 1;
--    const size_t gof_idx = curr_pic_num % gof_.num_frames_in_gof;
--
--    if (!is_key_pic) {
--      // Set up temporal reference.
--      const int buf_idx = sl_idx * num_temporal_refs + kRefBufIdx[gof_idx];
--
--      // Last reference frame buffer is reserved for spatial reference. It is
--      // not supposed to be used for temporal prediction.
--      RTC_DCHECK_LT(buf_idx, kNumVp9Buffers - 1);
--
--      const int pid_diff = curr_pic_num - ref_buf_[buf_idx].pic_num;
--      // Incorrect spatial layer may be in the buffer due to a key-frame.
--      const bool same_spatial_layer =
--          ref_buf_[buf_idx].spatial_layer_id == sl_idx;
--      bool correct_pid = false;
--      if (is_flexible_mode_) {
--        correct_pid = pid_diff > 0 && pid_diff < kMaxAllowedPidDiff;
--      } else {
--        // Below code assumes single temporal referecence.
--        RTC_DCHECK_EQ(gof_.num_ref_pics[gof_idx], 1);
--        correct_pid = pid_diff == gof_.pid_diff[gof_idx][0];
--      }
--
--      if (same_spatial_layer && correct_pid) {
--        ref_config.lst_fb_idx[sl_idx] = buf_idx;
--        ref_config.reference_last[sl_idx] = 1;
--      } else {
--        // This reference doesn't match with one specified by GOF. This can
--        // only happen if spatial layer is enabled dynamically without key
--        // frame. Spatial prediction is supposed to be enabled in this case.
--        RTC_DCHECK(is_inter_layer_pred_allowed &&
--                   sl_idx > first_active_spatial_layer_id);
--      }
--    }
--
--    if (is_inter_layer_pred_allowed && sl_idx > first_active_spatial_layer_id) {
--      // Set up spatial reference.
--      RTC_DCHECK(last_updated_buf_idx);
--      ref_config.gld_fb_idx[sl_idx] = *last_updated_buf_idx;
--      ref_config.reference_golden[sl_idx] = 1;
--    } else {
--      RTC_DCHECK(ref_config.reference_last[sl_idx] != 0 ||
--                 sl_idx == first_active_spatial_layer_id ||
--                 inter_layer_pred_ == InterLayerPredMode::kOff);
--    }
--
--    last_updated_buf_idx.reset();
--
--    if (gof_.temporal_idx[gof_idx] < num_temporal_layers_ - 1 ||
--        num_temporal_layers_ == 1) {
--      last_updated_buf_idx = sl_idx * num_temporal_refs + kUpdBufIdx[gof_idx];
--
--      // Ensure last frame buffer is not used for temporal prediction (it is
--      // reserved for spatial reference).
--      RTC_DCHECK_LT(*last_updated_buf_idx, kNumVp9Buffers - 1);
--    } else if (is_inter_layer_pred_allowed) {
--      last_updated_buf_idx = kNumVp9Buffers - 1;
--    }
--
--    if (last_updated_buf_idx) {
--      ref_config.update_buffer_slot[sl_idx] = 1 << *last_updated_buf_idx;
--    }
--  }
--
--  return ref_config;
--}
--
- void LibvpxVp9Encoder::GetEncodedLayerFrame(const vpx_codec_cx_pkt* pkt) {
-   RTC_DCHECK_EQ(pkt->kind, VPX_CODEC_CX_FRAME_PKT);
- 
-@@ -1613,14 +1358,10 @@ void LibvpxVp9Encoder::GetEncodedLayerFrame(const vpx_codec_cx_pkt* pkt) {
-   }
-   encoded_image_.SetSpatialIndex(spatial_index);
- 
--  UpdateReferenceBuffers(*pkt, pics_since_key_);
--
-   TRACE_COUNTER1("webrtc", "EncodedFrameSize", encoded_image_.size());
-   encoded_image_.SetTimestamp(input_image_->timestamp());
--  encoded_image_._encodedHeight =
--      pkt->data.frame.height[layer_id.spatial_layer_id];
--  encoded_image_._encodedWidth =
--      pkt->data.frame.width[layer_id.spatial_layer_id];
-+  encoded_image_._encodedHeight = raw_->d_h;
-+  encoded_image_._encodedWidth = raw_->d_w;
-   int qp = -1;
-   libvpx_->codec_control(encoder_, VP8E_GET_LAST_QUANTIZER, &qp);
-   encoded_image_.qp_ = qp;
-@@ -1626,14 +1194,6 @@ int LibvpxVp9Encoder::GetEncodedLayerFrame(const vpx_codec_cx_pkt* pkt) {
- 
- void LibvpxVp9Encoder::DeliverBufferedFrame(bool end_of_picture) {
-   if (encoded_image_.size() > 0) {
--    if (num_spatial_layers_ > 1) {
--      // Restore frame dropping settings, as dropping may be temporary forbidden
--      // due to dynamically enabled layers.
--      for (size_t i = 0; i < num_spatial_layers_; ++i) {
--        svc_drop_frame_.framedrop_thresh[i] = config_->rc_dropframe_thresh;
--      }
--    }
--
-     codec_specific_.end_of_picture = end_of_picture;
- 
-     encoded_complete_callback_->OnEncodedImage(encoded_image_,
-@@ -1871,8 +1431,6 @@ void LibvpxVp9Encoder::MaybeRewrapRawWithFormat(const vpx_img_fmt fmt) {
-     raw_ = libvpx_->img_wrap(nullptr, fmt, codec_.width, codec_.height, 1,
-                              nullptr);
-   } else if (raw_->fmt != fmt) {
--    RTC_LOG(INFO) << "Switching VP9 encoder pixel format to "
--                  << (fmt == VPX_IMG_FMT_NV12 ? "NV12" : "I420");
-     libvpx_->img_free(raw_);
-     raw_ = libvpx_->img_wrap(nullptr, fmt, codec_.width, codec_.height, 1,
-                              nullptr);
---- a/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_encoder.h
-+++ b/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_encoder.h
-@@ -133,7 +133,6 @@ class VP9EncoderImpl : public VP9Encoder
-   const bool trusted_rate_controller_;
-   bool layer_buffering_;
-   const bool full_superframe_drop_;
--  vpx_svc_frame_drop_t svc_drop_frame_;
-   bool first_frame_in_picture_;
-   VideoBitrateAllocation current_bitrate_allocation_;
-   bool ss_info_needed_;
---- a/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_decoder.cc
-+++ b/third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_decoder.cc
-@@ -185,14 +185,6 @@ int LibvpxVp9Decoder::InitDecode(const VideoCodec* inst, int number_of_cores) {
-     }
-   }
- 
--  vpx_codec_err_t status =
--      vpx_codec_control(decoder_, VP9D_SET_LOOP_FILTER_OPT, 1);
--  if (status != VPX_CODEC_OK) {
--    RTC_LOG(LS_ERROR) << "Failed to enable VP9D_SET_LOOP_FILTER_OPT. "
--                      << vpx_codec_error(decoder_);
--    return WEBRTC_VIDEO_CODEC_UNINITIALIZED;
--  }
--
-   return WEBRTC_VIDEO_CODEC_OK;
- }
- 
diff --git a/debian/patches/debianization/explicit-python2.patch b/debian/patches/debianization/explicit-python2.patch
deleted file mode 100644
index fabc61d..0000000
--- a/debian/patches/debianization/explicit-python2.patch
+++ /dev/null
@@ -1,10768 +0,0 @@
-diff --git a/PRESUBMIT_test.py b/PRESUBMIT_test.py
-index 14921ea..131a933 100755
---- a/PRESUBMIT_test.py
-+++ b/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/base/android/jni_generator/jni_generator.py b/base/android/jni_generator/jni_generator.py
-index 4df3649..b06ea77 100755
---- a/base/android/jni_generator/jni_generator.py
-+++ b/base/android/jni_generator/jni_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/base/android/jni_generator/jni_generator_tests.py b/base/android/jni_generator/jni_generator_tests.py
-index a590bf1..724da7a 100755
---- a/base/android/jni_generator/jni_generator_tests.py
-+++ b/base/android/jni_generator/jni_generator_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/base/android/jni_generator/jni_registration_generator.py b/base/android/jni_generator/jni_registration_generator.py
-index c6a9850..020567a 100755
---- a/base/android/jni_generator/jni_registration_generator.py
-+++ b/base/android/jni_generator/jni_registration_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/base/win/embedded_i18n/create_string_rc.py b/base/win/embedded_i18n/create_string_rc.py
-index 934131c..1b2896f 100755
---- a/base/win/embedded_i18n/create_string_rc.py
-+++ b/base/win/embedded_i18n/create_string_rc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/adb_command_line.py b/build/android/adb_command_line.py
-index 5d3e9ce..8bb256e 100755
---- a/build/android/adb_command_line.py
-+++ b/build/android/adb_command_line.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/adb_install_apk.py b/build/android/adb_install_apk.py
-index 94d9a04..b19b94b 100755
---- a/build/android/adb_install_apk.py
-+++ b/build/android/adb_install_apk.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/adb_logcat_monitor.py b/build/android/adb_logcat_monitor.py
-index a919722..1f327bb 100755
---- a/build/android/adb_logcat_monitor.py
-+++ b/build/android/adb_logcat_monitor.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/adb_logcat_printer.py b/build/android/adb_logcat_printer.py
-index a715170..27d5d6c 100755
---- a/build/android/adb_logcat_printer.py
-+++ b/build/android/adb_logcat_printer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/adb_reverse_forwarder.py b/build/android/adb_reverse_forwarder.py
-index 3da9c98..dca8831 100755
---- a/build/android/adb_reverse_forwarder.py
-+++ b/build/android/adb_reverse_forwarder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/apk_operations.py b/build/android/apk_operations.py
-index 9d2cd86..1cbd9cf 100755
---- a/build/android/apk_operations.py
-+++ b/build/android/apk_operations.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/apply_shared_preference_file.py b/build/android/apply_shared_preference_file.py
-index b224081..876d1c3 100755
---- a/build/android/apply_shared_preference_file.py
-+++ b/build/android/apply_shared_preference_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/asan_symbolize.py b/build/android/asan_symbolize.py
-index 6585089..028d674 100755
---- a/build/android/asan_symbolize.py
-+++ b/build/android/asan_symbolize.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/diff_resource_sizes.py b/build/android/diff_resource_sizes.py
-index eefb6cd..966eeff 100755
---- a/build/android/diff_resource_sizes.py
-+++ b/build/android/diff_resource_sizes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/download_doclava.py b/build/android/download_doclava.py
-index 1982fdb..31cf658 100755
---- a/build/android/download_doclava.py
-+++ b/build/android/download_doclava.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/dump_apk_resource_strings.py b/build/android/dump_apk_resource_strings.py
-index b57db50..ec57523 100755
---- a/build/android/dump_apk_resource_strings.py
-+++ b/build/android/dump_apk_resource_strings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # encoding: utf-8
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/emma_coverage_stats.py b/build/android/emma_coverage_stats.py
-index fe1775a..49191fb 100755
---- a/build/android/emma_coverage_stats.py
-+++ b/build/android/emma_coverage_stats.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/emma_coverage_stats_test.py b/build/android/emma_coverage_stats_test.py
-index d67f6be..7217c81 100755
---- a/build/android/emma_coverage_stats_test.py
-+++ b/build/android/emma_coverage_stats_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/generate_jacoco_report.py b/build/android/generate_jacoco_report.py
-index f325ee7..5901e1d 100755
---- a/build/android/generate_jacoco_report.py
-+++ b/build/android/generate_jacoco_report.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gradle/gn_to_cmake.py b/build/android/gradle/gn_to_cmake.py
-index d3e80ae..2bfdfab 100755
---- a/build/android/gradle/gn_to_cmake.py
-+++ b/build/android/gradle/gn_to_cmake.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/aar.py b/build/android/gyp/aar.py
-index 1a1e910..5a4a09b 100755
---- a/build/android/gyp/aar.py
-+++ b/build/android/gyp/aar.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/aidl.py b/build/android/gyp/aidl.py
-index 64ad290..3aa8fba 100755
---- a/build/android/gyp/aidl.py
-+++ b/build/android/gyp/aidl.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/allot_native_libraries.py b/build/android/gyp/allot_native_libraries.py
-index 585f19d..96c70f7 100755
---- a/build/android/gyp/allot_native_libraries.py
-+++ b/build/android/gyp/allot_native_libraries.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/apkbuilder.py b/build/android/gyp/apkbuilder.py
-index 15251da..196163a 100755
---- a/build/android/gyp/apkbuilder.py
-+++ b/build/android/gyp/apkbuilder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/assert_static_initializers.py b/build/android/gyp/assert_static_initializers.py
-index 3a2e7e3..fe2af5b 100755
---- a/build/android/gyp/assert_static_initializers.py
-+++ b/build/android/gyp/assert_static_initializers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/bundletool.py b/build/android/gyp/bundletool.py
-index e161c66..d2f1742 100755
---- a/build/android/gyp/bundletool.py
-+++ b/build/android/gyp/bundletool.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/bytecode_processor.py b/build/android/gyp/bytecode_processor.py
-index 89b05fc..dead8b6 100755
---- a/build/android/gyp/bytecode_processor.py
-+++ b/build/android/gyp/bytecode_processor.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/bytecode_rewriter.py b/build/android/gyp/bytecode_rewriter.py
-index b37ef6f..224b095 100755
---- a/build/android/gyp/bytecode_rewriter.py
-+++ b/build/android/gyp/bytecode_rewriter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/compile_java.py b/build/android/gyp/compile_java.py
-index 5d6616c..6ca7c82 100755
---- a/build/android/gyp/compile_java.py
-+++ b/build/android/gyp/compile_java.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/compile_resources.py b/build/android/gyp/compile_resources.py
-index 822427e..5436451 100755
---- a/build/android/gyp/compile_resources.py
-+++ b/build/android/gyp/compile_resources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # encoding: utf-8
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/copy_ex.py b/build/android/gyp/copy_ex.py
-index f93597f..2ff73b0 100755
---- a/build/android/gyp/copy_ex.py
-+++ b/build/android/gyp/copy_ex.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/create_apk_operations_script.py b/build/android/gyp/create_apk_operations_script.py
-index c5306dc..ca286be 100755
---- a/build/android/gyp/create_apk_operations_script.py
-+++ b/build/android/gyp/create_apk_operations_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-@@ -12,7 +12,7 @@ import sys
- from util import build_utils
- 
- SCRIPT_TEMPLATE = string.Template("""\
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # This file was generated by build/android/gyp/create_apk_operations_script.py
- 
-diff --git a/build/android/gyp/create_app_bundle.py b/build/android/gyp/create_app_bundle.py
-index afb5672..62aa400 100755
---- a/build/android/gyp/create_app_bundle.py
-+++ b/build/android/gyp/create_app_bundle.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/create_app_bundle_apks.py b/build/android/gyp/create_app_bundle_apks.py
-index d261996..065dd97 100755
---- a/build/android/gyp/create_app_bundle_apks.py
-+++ b/build/android/gyp/create_app_bundle_apks.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/create_bundle_wrapper_script.py b/build/android/gyp/create_bundle_wrapper_script.py
-index b28a6ab..e616773 100755
---- a/build/android/gyp/create_bundle_wrapper_script.py
-+++ b/build/android/gyp/create_bundle_wrapper_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-@@ -13,7 +13,7 @@ import sys
- from util import build_utils
- 
- SCRIPT_TEMPLATE = string.Template("""\
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # This file was generated by build/android/gyp/create_bundle_wrapper_script.py
- 
-diff --git a/build/android/gyp/create_java_binary_script.py b/build/android/gyp/create_java_binary_script.py
-index ef5a02e..1ef318b 100755
---- a/build/android/gyp/create_java_binary_script.py
-+++ b/build/android/gyp/create_java_binary_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-@@ -21,7 +21,7 @@ from util import build_utils
- # to the directory that the script is written in and then, when run, must
- # recalculate the paths relative to the current directory.
- script_template = """\
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # This file was generated by build/android/gyp/create_java_binary_script.py
- 
-diff --git a/build/android/gyp/create_size_info_files.py b/build/android/gyp/create_size_info_files.py
-index b446b7f..82d9495 100755
---- a/build/android/gyp/create_size_info_files.py
-+++ b/build/android/gyp/create_size_info_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/create_ui_locale_resources.py b/build/android/gyp/create_ui_locale_resources.py
-index 007afb3..f269f40 100755
---- a/build/android/gyp/create_ui_locale_resources.py
-+++ b/build/android/gyp/create_ui_locale_resources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/desugar.py b/build/android/gyp/desugar.py
-index 1df7bf7..01b1d44 100755
---- a/build/android/gyp/desugar.py
-+++ b/build/android/gyp/desugar.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/dex.py b/build/android/gyp/dex.py
-index 4618369..0a2f22c 100755
---- a/build/android/gyp/dex.py
-+++ b/build/android/gyp/dex.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/dex_jdk_libs.py b/build/android/gyp/dex_jdk_libs.py
-index d7a68df..a825aee 100755
---- a/build/android/gyp/dex_jdk_libs.py
-+++ b/build/android/gyp/dex_jdk_libs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/dexsplitter.py b/build/android/gyp/dexsplitter.py
-index 34aef03..c1b887b 100755
---- a/build/android/gyp/dexsplitter.py
-+++ b/build/android/gyp/dexsplitter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/dist_aar.py b/build/android/gyp/dist_aar.py
-index fed1983..c19e85f 100755
---- a/build/android/gyp/dist_aar.py
-+++ b/build/android/gyp/dist_aar.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/extract_unwind_tables.py b/build/android/gyp/extract_unwind_tables.py
-index b20f740..ca7904a 100755
---- a/build/android/gyp/extract_unwind_tables.py
-+++ b/build/android/gyp/extract_unwind_tables.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/extract_unwind_tables_tests.py b/build/android/gyp/extract_unwind_tables_tests.py
-index 7f9d0de..acbe3e0 100755
---- a/build/android/gyp/extract_unwind_tables_tests.py
-+++ b/build/android/gyp/extract_unwind_tables_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/filter_zip.py b/build/android/gyp/filter_zip.py
-index 9b52288..d07c9a0 100755
---- a/build/android/gyp/filter_zip.py
-+++ b/build/android/gyp/filter_zip.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/find.py b/build/android/gyp/find.py
-index a78bc83..8a09a49 100755
---- a/build/android/gyp/find.py
-+++ b/build/android/gyp/find.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/gcc_preprocess.py b/build/android/gyp/gcc_preprocess.py
-index 8f6ec8d..f3be9ac 100755
---- a/build/android/gyp/gcc_preprocess.py
-+++ b/build/android/gyp/gcc_preprocess.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/generate_android_wrapper.py b/build/android/gyp/generate_android_wrapper.py
-index f8e1815..c4aa2fd 100755
---- a/build/android/gyp/generate_android_wrapper.py
-+++ b/build/android/gyp/generate_android_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/ijar.py b/build/android/gyp/ijar.py
-index 1077334..f4eecd8 100755
---- a/build/android/gyp/ijar.py
-+++ b/build/android/gyp/ijar.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/jacoco_instr.py b/build/android/gyp/jacoco_instr.py
-index cb3880c..932514d 100755
---- a/build/android/gyp/jacoco_instr.py
-+++ b/build/android/gyp/jacoco_instr.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_cpp_enum.py b/build/android/gyp/java_cpp_enum.py
-index 21037d3..30f190a 100755
---- a/build/android/gyp/java_cpp_enum.py
-+++ b/build/android/gyp/java_cpp_enum.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_cpp_enum_tests.py b/build/android/gyp/java_cpp_enum_tests.py
-index 1acb57f..dc30812 100755
---- a/build/android/gyp/java_cpp_enum_tests.py
-+++ b/build/android/gyp/java_cpp_enum_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/java_cpp_features.py b/build/android/gyp/java_cpp_features.py
-index 9fe7cb9..49f57e0 100755
---- a/build/android/gyp/java_cpp_features.py
-+++ b/build/android/gyp/java_cpp_features.py
-@@ -1,4 +1,4 @@
--#!/user/bin/env python
-+#!/user/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_cpp_features_tests.py b/build/android/gyp/java_cpp_features_tests.py
-index b50f59a..246d4d8 100755
---- a/build/android/gyp/java_cpp_features_tests.py
-+++ b/build/android/gyp/java_cpp_features_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_cpp_strings.py b/build/android/gyp/java_cpp_strings.py
-index d73e4ce..4dbdb68 100755
---- a/build/android/gyp/java_cpp_strings.py
-+++ b/build/android/gyp/java_cpp_strings.py
-@@ -1,4 +1,4 @@
--#!/user/bin/env python
-+#!/user/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_cpp_strings_tests.py b/build/android/gyp/java_cpp_strings_tests.py
-index b2df08d..89a50a1 100755
---- a/build/android/gyp/java_cpp_strings_tests.py
-+++ b/build/android/gyp/java_cpp_strings_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_google_api_keys.py b/build/android/gyp/java_google_api_keys.py
-index 349821a..e160099 100755
---- a/build/android/gyp/java_google_api_keys.py
-+++ b/build/android/gyp/java_google_api_keys.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/java_google_api_keys_tests.py b/build/android/gyp/java_google_api_keys_tests.py
-index 6529a53..aac2ded 100755
---- a/build/android/gyp/java_google_api_keys_tests.py
-+++ b/build/android/gyp/java_google_api_keys_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/jetify_jar.py b/build/android/gyp/jetify_jar.py
-index 491efd4..1a3ab93 100755
---- a/build/android/gyp/jetify_jar.py
-+++ b/build/android/gyp/jetify_jar.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/jinja_template.py b/build/android/gyp/jinja_template.py
-index ba335a2..384b851 100755
---- a/build/android/gyp/jinja_template.py
-+++ b/build/android/gyp/jinja_template.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/lint.py b/build/android/gyp/lint.py
-index c193927..ba4b692 100755
---- a/build/android/gyp/lint.py
-+++ b/build/android/gyp/lint.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/merge_manifest.py b/build/android/gyp/merge_manifest.py
-index fdec8c3..656b983 100755
---- a/build/android/gyp/merge_manifest.py
-+++ b/build/android/gyp/merge_manifest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/prepare_resources.py b/build/android/gyp/prepare_resources.py
-index 6e3b1aa..421a328 100755
---- a/build/android/gyp/prepare_resources.py
-+++ b/build/android/gyp/prepare_resources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/process_native_prebuilt.py b/build/android/gyp/process_native_prebuilt.py
-index f05bc8c..8fd29fd 100755
---- a/build/android/gyp/process_native_prebuilt.py
-+++ b/build/android/gyp/process_native_prebuilt.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/proguard.py b/build/android/gyp/proguard.py
-index 9a257fd..e2cb324 100755
---- a/build/android/gyp/proguard.py
-+++ b/build/android/gyp/proguard.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/turbine.py b/build/android/gyp/turbine.py
-index 2983ac4..11d34ff 100755
---- a/build/android/gyp/turbine.py
-+++ b/build/android/gyp/turbine.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/util/build_utils_test.py b/build/android/gyp/util/build_utils_test.py
-index d462f0c..1e2dbc9 100755
---- a/build/android/gyp/util/build_utils_test.py
-+++ b/build/android/gyp/util/build_utils_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/util/diff_utils.py b/build/android/gyp/util/diff_utils.py
-index f746df3..a730786 100755
---- a/build/android/gyp/util/diff_utils.py
-+++ b/build/android/gyp/util/diff_utils.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/util/java_cpp_utils.py b/build/android/gyp/util/java_cpp_utils.py
-index f556768..ffa7306 100755
---- a/build/android/gyp/util/java_cpp_utils.py
-+++ b/build/android/gyp/util/java_cpp_utils.py
-@@ -1,4 +1,4 @@
--#!/user/bin/env python
-+#!/user/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/util/manifest_utils_test.py b/build/android/gyp/util/manifest_utils_test.py
-index fe25196..b69d4bc 100755
---- a/build/android/gyp/util/manifest_utils_test.py
-+++ b/build/android/gyp/util/manifest_utils_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/util/md5_check_test.py b/build/android/gyp/util/md5_check_test.py
-index 2169320..8938748 100755
---- a/build/android/gyp/util/md5_check_test.py
-+++ b/build/android/gyp/util/md5_check_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/util/resource_utils_test.py b/build/android/gyp/util/resource_utils_test.py
-index 3026889..2f139f5 100755
---- a/build/android/gyp/util/resource_utils_test.py
-+++ b/build/android/gyp/util/resource_utils_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # coding: utf-8
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/validate_static_library_dex_references.py b/build/android/gyp/validate_static_library_dex_references.py
-index 391c846..fb5c43f 100755
---- a/build/android/gyp/validate_static_library_dex_references.py
-+++ b/build/android/gyp/validate_static_library_dex_references.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/gyp/write_build_config.py b/build/android/gyp/write_build_config.py
-index 98ece1a..da562ba 100755
---- a/build/android/gyp/write_build_config.py
-+++ b/build/android/gyp/write_build_config.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/write_native_libraries_java.py b/build/android/gyp/write_native_libraries_java.py
-index cb0c5d3..4047b56 100755
---- a/build/android/gyp/write_native_libraries_java.py
-+++ b/build/android/gyp/write_native_libraries_java.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/gyp/zip.py b/build/android/gyp/zip.py
-index ed8f61a..28e5e70 100755
---- a/build/android/gyp/zip.py
-+++ b/build/android/gyp/zip.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/host_heartbeat.py b/build/android/host_heartbeat.py
-index 6779a7c..97b9f00 100755
---- a/build/android/host_heartbeat.py
-+++ b/build/android/host_heartbeat.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/incremental_install/generate_android_manifest.py b/build/android/incremental_install/generate_android_manifest.py
-index 48dcc99..32ec708 100755
---- a/build/android/incremental_install/generate_android_manifest.py
-+++ b/build/android/incremental_install/generate_android_manifest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/incremental_install/installer.py b/build/android/incremental_install/installer.py
-index 7329593..4145478 100755
---- a/build/android/incremental_install/installer.py
-+++ b/build/android/incremental_install/installer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/incremental_install/write_installer_json.py b/build/android/incremental_install/write_installer_json.py
-index 67a4e51..99da0e0 100755
---- a/build/android/incremental_install/write_installer_json.py
-+++ b/build/android/incremental_install/write_installer_json.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/lighttpd_server.py b/build/android/lighttpd_server.py
-index 42fbcdb..d6a00dd 100755
---- a/build/android/lighttpd_server.py
-+++ b/build/android/lighttpd_server.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/list_class_verification_failures.py b/build/android/list_class_verification_failures.py
-index ff02180..3a64c78 100755
---- a/build/android/list_class_verification_failures.py
-+++ b/build/android/list_class_verification_failures.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/method_count.py b/build/android/method_count.py
-index a39a390..c96f825 100755
---- a/build/android/method_count.py
-+++ b/build/android/method_count.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/play_services/preprocess.py b/build/android/play_services/preprocess.py
-index bb3424a..6e85d50 100755
---- a/build/android/play_services/preprocess.py
-+++ b/build/android/play_services/preprocess.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/provision_devices.py b/build/android/provision_devices.py
-index e03c664..8f78957 100755
---- a/build/android/provision_devices.py
-+++ b/build/android/provision_devices.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/pylib/constants/host_paths_unittest.py b/build/android/pylib/constants/host_paths_unittest.py
-index 658ed08..e88a41e 100755
---- a/build/android/pylib/constants/host_paths_unittest.py
-+++ b/build/android/pylib/constants/host_paths_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/dex/dex_parser.py b/build/android/pylib/dex/dex_parser.py
-index 3f2ed6f..7d5ae57 100755
---- a/build/android/pylib/dex/dex_parser.py
-+++ b/build/android/pylib/dex/dex_parser.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/gtest/gtest_test_instance_test.py b/build/android/pylib/gtest/gtest_test_instance_test.py
-index 77a5556..b9fb520 100755
---- a/build/android/pylib/gtest/gtest_test_instance_test.py
-+++ b/build/android/pylib/gtest/gtest_test_instance_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/instrumentation/instrumentation_parser_test.py b/build/android/pylib/instrumentation/instrumentation_parser_test.py
-index 092d10f..5d81344 100755
---- a/build/android/pylib/instrumentation/instrumentation_parser_test.py
-+++ b/build/android/pylib/instrumentation/instrumentation_parser_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/instrumentation/instrumentation_test_instance_test.py b/build/android/pylib/instrumentation/instrumentation_test_instance_test.py
-index fdb4114..84bc8b8 100755
---- a/build/android/pylib/instrumentation/instrumentation_test_instance_test.py
-+++ b/build/android/pylib/instrumentation/instrumentation_test_instance_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/local/emulator/ini_test.py b/build/android/pylib/local/emulator/ini_test.py
-index 4bc9ddb..4ff24e0 100755
---- a/build/android/pylib/local/emulator/ini_test.py
-+++ b/build/android/pylib/local/emulator/ini_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/output/local_output_manager_test.py b/build/android/pylib/output/local_output_manager_test.py
-index 12452a6..a388348 100755
---- a/build/android/pylib/output/local_output_manager_test.py
-+++ b/build/android/pylib/output/local_output_manager_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/output/noop_output_manager_test.py b/build/android/pylib/output/noop_output_manager_test.py
-index c735a04..d19d525 100755
---- a/build/android/pylib/output/noop_output_manager_test.py
-+++ b/build/android/pylib/output/noop_output_manager_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/output/remote_output_manager_test.py b/build/android/pylib/output/remote_output_manager_test.py
-index d87c6eb..60e1d45 100755
---- a/build/android/pylib/output/remote_output_manager_test.py
-+++ b/build/android/pylib/output/remote_output_manager_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/results/json_results_test.py b/build/android/pylib/results/json_results_test.py
-index f410ade..f7ac012 100755
---- a/build/android/pylib/results/json_results_test.py
-+++ b/build/android/pylib/results/json_results_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/results/presentation/standard_gtest_merge.py b/build/android/pylib/results/presentation/standard_gtest_merge.py
-index 58a2936..3821e89 100755
---- a/build/android/pylib/results/presentation/standard_gtest_merge.py
-+++ b/build/android/pylib/results/presentation/standard_gtest_merge.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/pylib/results/presentation/test_results_presentation.py b/build/android/pylib/results/presentation/test_results_presentation.py
-index 128eb04..8e3ce0f 100755
---- a/build/android/pylib/results/presentation/test_results_presentation.py
-+++ b/build/android/pylib/results/presentation/test_results_presentation.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/pylib/symbols/apk_lib_dump.py b/build/android/pylib/symbols/apk_lib_dump.py
-index ba87026..ca278d2 100755
---- a/build/android/pylib/symbols/apk_lib_dump.py
-+++ b/build/android/pylib/symbols/apk_lib_dump.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/pylib/symbols/elf_symbolizer_unittest.py b/build/android/pylib/symbols/elf_symbolizer_unittest.py
-index 765b598..0af02d4 100755
---- a/build/android/pylib/symbols/elf_symbolizer_unittest.py
-+++ b/build/android/pylib/symbols/elf_symbolizer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/symbols/mock_addr2line/mock_addr2line b/build/android/pylib/symbols/mock_addr2line/mock_addr2line
-index 8b2a723..0d07401 100755
---- a/build/android/pylib/symbols/mock_addr2line/mock_addr2line
-+++ b/build/android/pylib/symbols/mock_addr2line/mock_addr2line
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/utils/decorators_test.py b/build/android/pylib/utils/decorators_test.py
-index 60f4811..2a05ebc 100755
---- a/build/android/pylib/utils/decorators_test.py
-+++ b/build/android/pylib/utils/decorators_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/utils/device_dependencies_test.py b/build/android/pylib/utils/device_dependencies_test.py
-index aaa9ebf..85d6c0a 100755
---- a/build/android/pylib/utils/device_dependencies_test.py
-+++ b/build/android/pylib/utils/device_dependencies_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/utils/dexdump_test.py b/build/android/pylib/utils/dexdump_test.py
-index 6b2c454..3568a3e 100755
---- a/build/android/pylib/utils/dexdump_test.py
-+++ b/build/android/pylib/utils/dexdump_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/utils/maven_downloader.py b/build/android/pylib/utils/maven_downloader.py
-index c60b014..0dab3da 100755
---- a/build/android/pylib/utils/maven_downloader.py
-+++ b/build/android/pylib/utils/maven_downloader.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/pylib/utils/proguard_test.py b/build/android/pylib/utils/proguard_test.py
-index 7672476..bb4c6fe 100755
---- a/build/android/pylib/utils/proguard_test.py
-+++ b/build/android/pylib/utils/proguard_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/screenshot.py b/build/android/screenshot.py
-index 6ab9060..576028e 100755
---- a/build/android/screenshot.py
-+++ b/build/android/screenshot.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/stacktrace/crashpad_stackwalker.py b/build/android/stacktrace/crashpad_stackwalker.py
-index beeb6f4..7c94a84 100755
---- a/build/android/stacktrace/crashpad_stackwalker.py
-+++ b/build/android/stacktrace/crashpad_stackwalker.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/stacktrace/java_deobfuscate_test.py b/build/android/stacktrace/java_deobfuscate_test.py
-index 98b66dd..21dda2b 100755
---- a/build/android/stacktrace/java_deobfuscate_test.py
-+++ b/build/android/stacktrace/java_deobfuscate_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/stacktrace/stackwalker.py b/build/android/stacktrace/stackwalker.py
-index 5fbab33..3e3e75e 100755
---- a/build/android/stacktrace/stackwalker.py
-+++ b/build/android/stacktrace/stackwalker.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/test_wrapper/logdog_wrapper.py b/build/android/test_wrapper/logdog_wrapper.py
-index fdb3fd3..5f03d21 100755
---- a/build/android/test_wrapper/logdog_wrapper.py
-+++ b/build/android/test_wrapper/logdog_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/tombstones.py b/build/android/tombstones.py
-index 33fd681..acab45f 100755
---- a/build/android/tombstones.py
-+++ b/build/android/tombstones.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/update_deps/update_third_party_deps.py b/build/android/update_deps/update_third_party_deps.py
-index 3a869c4..60729db 100755
---- a/build/android/update_deps/update_third_party_deps.py
-+++ b/build/android/update_deps/update_third_party_deps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/android/update_verification.py b/build/android/update_verification.py
-index a6529cd..eb80178 100755
---- a/build/android/update_verification.py
-+++ b/build/android/update_verification.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/android/video_recorder.py b/build/android/video_recorder.py
-index b21759a..26b1ebf 100755
---- a/build/android/video_recorder.py
-+++ b/build/android/video_recorder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/apple/tweak_info_plist.py b/build/apple/tweak_info_plist.py
-index 305a53f..6dc6e45 100755
---- a/build/apple/tweak_info_plist.py
-+++ b/build/apple/tweak_info_plist.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/apply_locales.py b/build/apply_locales.py
-index fcd02eb..b401573 100755
---- a/build/apply_locales.py
-+++ b/build/apply_locales.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2009 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/check_gn_headers.py b/build/check_gn_headers.py
-index 9bdbba8..7b8233d 100755
---- a/build/check_gn_headers.py
-+++ b/build/check_gn_headers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/check_gn_headers_unittest.py b/build/check_gn_headers_unittest.py
-index 20c3b13..55c4a87 100755
---- a/build/check_gn_headers_unittest.py
-+++ b/build/check_gn_headers_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/check_return_value.py b/build/check_return_value.py
-index 9caa15f..13b76bb 100755
---- a/build/check_return_value.py
-+++ b/build/check_return_value.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/chromeos/create_test_runner_script.py b/build/chromeos/create_test_runner_script.py
-index 91f4096..da9ca5d 100755
---- a/build/chromeos/create_test_runner_script.py
-+++ b/build/chromeos/create_test_runner_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/cipd/clobber_cipd_root.py b/build/cipd/clobber_cipd_root.py
-index 5d36c72..20baced 100755
---- a/build/cipd/clobber_cipd_root.py
-+++ b/build/cipd/clobber_cipd_root.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/clobber.py b/build/clobber.py
-index 1de3212..00c8222 100755
---- a/build/clobber.py
-+++ b/build/clobber.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/compute_build_timestamp.py b/build/compute_build_timestamp.py
-index ceb507b..c2ec2eb 100755
---- a/build/compute_build_timestamp.py
-+++ b/build/compute_build_timestamp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/config/fuchsia/build_symbol_archive.py b/build/config/fuchsia/build_symbol_archive.py
-index d58a3b9..1959f10 100755
---- a/build/config/fuchsia/build_symbol_archive.py
-+++ b/build/config/fuchsia/build_symbol_archive.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/config/get_host_byteorder.py b/build/config/get_host_byteorder.py
-index fc01d85..6921f3d 100755
---- a/build/config/get_host_byteorder.py
-+++ b/build/config/get_host_byteorder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/config/linux/pkg-config.py b/build/config/linux/pkg-config.py
-index 5adf70c..b30136c 100755
---- a/build/config/linux/pkg-config.py
-+++ b/build/config/linux/pkg-config.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/copy_test_data_ios.py b/build/copy_test_data_ios.py
-index cd23fb2..96d7668 100755
---- a/build/copy_test_data_ios.py
-+++ b/build/copy_test_data_ios.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/cp.py b/build/cp.py
-index 0f32536..5f280b6 100755
---- a/build/cp.py
-+++ b/build/cp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/detect_host_arch.py b/build/detect_host_arch.py
-index cad0f4b..fd7c3a6 100755
---- a/build/detect_host_arch.py
-+++ b/build/detect_host_arch.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/dir_exists.py b/build/dir_exists.py
-index 70d367e..49c0a43 100755
---- a/build/dir_exists.py
-+++ b/build/dir_exists.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/download_nacl_toolchains.py b/build/download_nacl_toolchains.py
-index 286a92a..26b54f9 100755
---- a/build/download_nacl_toolchains.py
-+++ b/build/download_nacl_toolchains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/env_dump.py b/build/env_dump.py
-index 3f82173..e97dda9 100755
---- a/build/env_dump.py
-+++ b/build/env_dump.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/extract_from_cab.py b/build/extract_from_cab.py
-index 9695b96..d1f38d0 100755
---- a/build/extract_from_cab.py
-+++ b/build/extract_from_cab.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/extract_partition.py b/build/extract_partition.py
-index 4b2f064..077ed65 100755
---- a/build/extract_partition.py
-+++ b/build/extract_partition.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/find_depot_tools.py b/build/find_depot_tools.py
-index 49a9138..30097f1 100755
---- a/build/find_depot_tools.py
-+++ b/build/find_depot_tools.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/fix_gn_headers.py b/build/fix_gn_headers.py
-index 71fb332..e370efa 100755
---- a/build/fix_gn_headers.py
-+++ b/build/fix_gn_headers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/fuchsia/binary_sizes.py b/build/fuchsia/binary_sizes.py
-index 2387996..db0615b 100755
---- a/build/fuchsia/binary_sizes.py
-+++ b/build/fuchsia/binary_sizes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/fuchsia/binary_sizes_test.py b/build/fuchsia/binary_sizes_test.py
-index f1e8297..ca8a154 100755
---- a/build/fuchsia/binary_sizes_test.py
-+++ b/build/fuchsia/binary_sizes_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/fuchsia/deploy_to_amber_repo.py b/build/fuchsia/deploy_to_amber_repo.py
-index 80ac2fe..9b4f7ea 100755
---- a/build/fuchsia/deploy_to_amber_repo.py
-+++ b/build/fuchsia/deploy_to_amber_repo.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/fuchsia/qemu_target_test.py b/build/fuchsia/qemu_target_test.py
-index da596ee..8e1a94c 100755
---- a/build/fuchsia/qemu_target_test.py
-+++ b/build/fuchsia/qemu_target_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/fuchsia/test_runner.py b/build/fuchsia/test_runner.py
-index 0903f30..369f1ec 100755
---- a/build/fuchsia/test_runner.py
-+++ b/build/fuchsia/test_runner.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/fuchsia/update_images.py b/build/fuchsia/update_images.py
-index 79b8e49..57b7cf4 100755
---- a/build/fuchsia/update_images.py
-+++ b/build/fuchsia/update_images.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/fuchsia/update_sdk.py b/build/fuchsia/update_sdk.py
-index 086fac8..121c3b0 100755
---- a/build/fuchsia/update_sdk.py
-+++ b/build/fuchsia/update_sdk.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/get_landmines.py b/build/get_landmines.py
-index a32ab99..c5cc8cc 100755
---- a/build/get_landmines.py
-+++ b/build/get_landmines.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/get_symlink_targets.py b/build/get_symlink_targets.py
-index 3285ff1..a0a720d 100755
---- a/build/get_symlink_targets.py
-+++ b/build/get_symlink_targets.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/lacros/lacros_resource_sizes.py b/build/lacros/lacros_resource_sizes.py
-index bf791c6..92ac11d 100755
---- a/build/lacros/lacros_resource_sizes.py
-+++ b/build/lacros/lacros_resource_sizes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/landmines.py b/build/landmines.py
-index c8fc101..f50cfe8 100755
---- a/build/landmines.py
-+++ b/build/landmines.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/install-chromeos-fonts.py b/build/linux/install-chromeos-fonts.py
-index da8fb40..caaf9bf 100755
---- a/build/linux/install-chromeos-fonts.py
-+++ b/build/linux/install-chromeos-fonts.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/rewrite_dirs.py b/build/linux/rewrite_dirs.py
-index 17659c3..6eeb3f9 100755
---- a/build/linux/rewrite_dirs.py
-+++ b/build/linux/rewrite_dirs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/strip_binary.py b/build/linux/strip_binary.py
-index 00b4089..2dca524 100755
---- a/build/linux/strip_binary.py
-+++ b/build/linux/strip_binary.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2021 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/linux/sysroot_scripts/build_and_upload.py b/build/linux/sysroot_scripts/build_and_upload.py
-index 1a24da2..fef5605 100755
---- a/build/linux/sysroot_scripts/build_and_upload.py
-+++ b/build/linux/sysroot_scripts/build_and_upload.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/sysroot_scripts/find_incompatible_glibc_symbols.py b/build/linux/sysroot_scripts/find_incompatible_glibc_symbols.py
-index 1e0b5f6..dfd3a0d 100755
---- a/build/linux/sysroot_scripts/find_incompatible_glibc_symbols.py
-+++ b/build/linux/sysroot_scripts/find_incompatible_glibc_symbols.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/sysroot_scripts/find_incompatible_glibc_symbols_unittest.py b/build/linux/sysroot_scripts/find_incompatible_glibc_symbols_unittest.py
-index 7c66555..9b2b67a 100755
---- a/build/linux/sysroot_scripts/find_incompatible_glibc_symbols_unittest.py
-+++ b/build/linux/sysroot_scripts/find_incompatible_glibc_symbols_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/sysroot_scripts/install-sysroot.py b/build/linux/sysroot_scripts/install-sysroot.py
-index f8b7906..c6fa094 100755
---- a/build/linux/sysroot_scripts/install-sysroot.py
-+++ b/build/linux/sysroot_scripts/install-sysroot.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/sysroot_scripts/merge-package-lists.py b/build/linux/sysroot_scripts/merge-package-lists.py
-index 70b3d05..0c27c0f 100755
---- a/build/linux/sysroot_scripts/merge-package-lists.py
-+++ b/build/linux/sysroot_scripts/merge-package-lists.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/unbundle/remove_bundled_libraries.py b/build/linux/unbundle/remove_bundled_libraries.py
-index 899877a..abaf845 100755
---- a/build/linux/unbundle/remove_bundled_libraries.py
-+++ b/build/linux/unbundle/remove_bundled_libraries.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/linux/unbundle/replace_gn_files.py b/build/linux/unbundle/replace_gn_files.py
-index eba4bd1..3159762 100755
---- a/build/linux/unbundle/replace_gn_files.py
-+++ b/build/linux/unbundle/replace_gn_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/mac/find_sdk.py b/build/mac/find_sdk.py
-index d86f310..3d60359 100755
---- a/build/mac/find_sdk.py
-+++ b/build/mac/find_sdk.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/mac/should_use_hermetic_xcode.py b/build/mac/should_use_hermetic_xcode.py
-index 77b0e80..7fc8890 100755
---- a/build/mac/should_use_hermetic_xcode.py
-+++ b/build/mac/should_use_hermetic_xcode.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/mac_toolchain.py b/build/mac_toolchain.py
-index 537fd1c..28ffbf0 100755
---- a/build/mac_toolchain.py
-+++ b/build/mac_toolchain.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/print_python_deps.py b/build/print_python_deps.py
-index ab00d0c..12f70f8 100755
---- a/build/print_python_deps.py
-+++ b/build/print_python_deps.py
-@@ -81,7 +81,7 @@ def _GetTargetPythonVersion(module):
-   default_version = 2
-   if shebang.startswith('#!'):
-     # Examples:
--    # '#!/usr/bin/python'
-+    # '#!/usr/bin/python2'
-     # '#!/usr/bin/python2.7'
-     # '#!/usr/bin/python3'
-     # '#!/usr/bin/env python3'
-diff --git a/build/protoc_java.py b/build/protoc_java.py
-index fe602a9..399b27f 100755
---- a/build/protoc_java.py
-+++ b/build/protoc_java.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/rm.py b/build/rm.py
-index 43a663d..8f1b819 100755
---- a/build/rm.py
-+++ b/build/rm.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/symlink.py b/build/symlink.py
-index 6c0586b..3e8a7c5 100755
---- a/build/symlink.py
-+++ b/build/symlink.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/clang_code_coverage_wrapper.py b/build/toolchain/clang_code_coverage_wrapper.py
-index 7bd9222..464fef8 100755
---- a/build/toolchain/clang_code_coverage_wrapper.py
-+++ b/build/toolchain/clang_code_coverage_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/gcc_link_wrapper.py b/build/toolchain/gcc_link_wrapper.py
-index b70de8b..d004cb0 100755
---- a/build/toolchain/gcc_link_wrapper.py
-+++ b/build/toolchain/gcc_link_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/gcc_solink_wrapper.py b/build/toolchain/gcc_solink_wrapper.py
-index 32f3867..ff64f6b 100755
---- a/build/toolchain/gcc_solink_wrapper.py
-+++ b/build/toolchain/gcc_solink_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/get_concurrent_links.py b/build/toolchain/get_concurrent_links.py
-index d77bb43..cc105f4 100755
---- a/build/toolchain/get_concurrent_links.py
-+++ b/build/toolchain/get_concurrent_links.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/mac/linker_driver.py b/build/toolchain/mac/linker_driver.py
-index 66c97af..b22d47e 100755
---- a/build/toolchain/mac/linker_driver.py
-+++ b/build/toolchain/mac/linker_driver.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/build/toolchain/win/ml.py b/build/toolchain/win/ml.py
-index 6a1b6e5..a6183dc 100755
---- a/build/toolchain/win/ml.py
-+++ b/build/toolchain/win/ml.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/toolchain/win/rc/rc.py b/build/toolchain/win/rc/rc.py
-index 2ab4122..15932c4 100755
---- a/build/toolchain/win/rc/rc.py
-+++ b/build/toolchain/win/rc/rc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/util/java_action.py b/build/util/java_action.py
-index ed9bb60..bb0bccb 100755
---- a/build/util/java_action.py
-+++ b/build/util/java_action.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/util/lastchange.py b/build/util/lastchange.py
-index 874870a..236dcdb 100755
---- a/build/util/lastchange.py
-+++ b/build/util/lastchange.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/util/lib/common/unittest_util_test.py b/build/util/lib/common/unittest_util_test.py
-index 1514c9b..0f72365 100755
---- a/build/util/lib/common/unittest_util_test.py
-+++ b/build/util/lib/common/unittest_util_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/util/version.py b/build/util/version.py
-index 4f440c4..2e998f8 100755
---- a/build/util/version.py
-+++ b/build/util/version.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/vs_toolchain.py b/build/vs_toolchain.py
-index c3b1182..43d5b5b 100755
---- a/build/vs_toolchain.py
-+++ b/build/vs_toolchain.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/win/copy_cdb_to_output.py b/build/win/copy_cdb_to_output.py
-index a0b99bb..24d3fba 100755
---- a/build/win/copy_cdb_to_output.py
-+++ b/build/win/copy_cdb_to_output.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/win/reorder-imports.py b/build/win/reorder-imports.py
-index ee27ed1..4b1e7da 100755
---- a/build/win/reorder-imports.py
-+++ b/build/win/reorder-imports.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/win/use_ansi_codes.py b/build/win/use_ansi_codes.py
-index 5951c2a..eed2954 100755
---- a/build/win/use_ansi_codes.py
-+++ b/build/win/use_ansi_codes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/write_build_date_header.py b/build/write_build_date_header.py
-index 7738828..b498206 100755
---- a/build/write_build_date_header.py
-+++ b/build/write_build_date_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/build/write_buildflag_header.py b/build/write_buildflag_header.py
-index 47b9a03..f3843fe 100755
---- a/build/write_buildflag_header.py
-+++ b/build/write_buildflag_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/PRESUBMIT_test.py b/chrome/PRESUBMIT_test.py
-index 0ce9a76..a513294 100755
---- a/chrome/PRESUBMIT_test.py
-+++ b/chrome/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/PRESUBMIT_test.py b/chrome/browser/PRESUBMIT_test.py
-index 337e413..3586b3a 100755
---- a/chrome/browser/PRESUBMIT_test.py
-+++ b/chrome/browser/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/offline_pages/android/evaluation/run_offline_page_evaluation_test.py b/chrome/browser/offline_pages/android/evaluation/run_offline_page_evaluation_test.py
-index d17b454..676bb12 100755
---- a/chrome/browser/offline_pages/android/evaluation/run_offline_page_evaluation_test.py
-+++ b/chrome/browser/offline_pages/android/evaluation/run_offline_page_evaluation_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/browser/prefetch/no_state_prefetch/tools/prerender_test_server/prerender_test_server.py b/chrome/browser/prefetch/no_state_prefetch/tools/prerender_test_server/prerender_test_server.py
-index 91aada7..9528b55 100755
---- a/chrome/browser/prefetch/no_state_prefetch/tools/prerender_test_server/prerender_test_server.py
-+++ b/chrome/browser/prefetch/no_state_prefetch/tools/prerender_test_server/prerender_test_server.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/resources/PRESUBMIT_test.py b/chrome/browser/resources/PRESUBMIT_test.py
-index c741292..74f4694 100755
---- a/chrome/browser/resources/PRESUBMIT_test.py
-+++ b/chrome/browser/resources/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/resources/tools/optimize_webui.py b/chrome/browser/resources/tools/optimize_webui.py
-index ddada8e..0a3e583 100755
---- a/chrome/browser/resources/tools/optimize_webui.py
-+++ b/chrome/browser/resources/tools/optimize_webui.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/resources/tools/optimize_webui_test.py b/chrome/browser/resources/tools/optimize_webui_test.py
-index d6caab1..802783a 100755
---- a/chrome/browser/resources/tools/optimize_webui_test.py
-+++ b/chrome/browser/resources/tools/optimize_webui_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/resources/vr/assets/push_assets_component.py b/chrome/browser/resources/vr/assets/push_assets_component.py
-index b47f275..430da62 100755
---- a/chrome/browser/resources/vr/assets/push_assets_component.py
-+++ b/chrome/browser/resources/vr/assets/push_assets_component.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/search/tools/generate_integrity_header.py b/chrome/browser/search/tools/generate_integrity_header.py
-index 228aa13..45a11a9 100755
---- a/chrome/browser/search/tools/generate_integrity_header.py
-+++ b/chrome/browser/search/tools/generate_integrity_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/test_presubmit.py b/chrome/browser/test_presubmit.py
-index 796a90a..afc4395 100755
---- a/chrome/browser/test_presubmit.py
-+++ b/chrome/browser/test_presubmit.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/browser/vr/test/run_xr_browser_tests.py b/chrome/browser/vr/test/run_xr_browser_tests.py
-index a081817..ebfff69 100755
---- a/chrome/browser/vr/test/run_xr_browser_tests.py
-+++ b/chrome/browser/vr/test/run_xr_browser_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/credential_provider/build/make_setup.py b/chrome/credential_provider/build/make_setup.py
-index c825fb8..5d46a94 100755
---- a/chrome/credential_provider/build/make_setup.py
-+++ b/chrome/credential_provider/build/make_setup.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/installer/util/prebuild/create_installer_string_rc.py b/chrome/installer/util/prebuild/create_installer_string_rc.py
-index 7a019df..e2d893d 100755
---- a/chrome/installer/util/prebuild/create_installer_string_rc.py
-+++ b/chrome/installer/util/prebuild/create_installer_string_rc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/embed_js_in_cpp.py b/chrome/test/chromedriver/embed_js_in_cpp.py
-index 1425e4d..0859b32 100755
---- a/chrome/test/chromedriver/embed_js_in_cpp.py
-+++ b/chrome/test/chromedriver/embed_js_in_cpp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/embed_mobile_devices_in_cpp.py b/chrome/test/chromedriver/embed_mobile_devices_in_cpp.py
-index 0a706f7..2540bb4 100755
---- a/chrome/test/chromedriver/embed_mobile_devices_in_cpp.py
-+++ b/chrome/test/chromedriver/embed_mobile_devices_in_cpp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/embed_networks_in_cpp.py b/chrome/test/chromedriver/embed_networks_in_cpp.py
-index b258fa5..c76c21c 100755
---- a/chrome/test/chromedriver/embed_networks_in_cpp.py
-+++ b/chrome/test/chromedriver/embed_networks_in_cpp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/embed_user_data_dir_in_cpp.py b/chrome/test/chromedriver/embed_user_data_dir_in_cpp.py
-index 46b32f5..5af6bc5 100755
---- a/chrome/test/chromedriver/embed_user_data_dir_in_cpp.py
-+++ b/chrome/test/chromedriver/embed_user_data_dir_in_cpp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/log_replay/client_replay.py b/chrome/test/chromedriver/log_replay/client_replay.py
-index 687742b..55297aa 100755
---- a/chrome/test/chromedriver/log_replay/client_replay.py
-+++ b/chrome/test/chromedriver/log_replay/client_replay.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/log_replay/client_replay_test.py b/chrome/test/chromedriver/log_replay/client_replay_test.py
-index 8c83bf4..df576b0 100755
---- a/chrome/test/chromedriver/log_replay/client_replay_test.py
-+++ b/chrome/test/chromedriver/log_replay/client_replay_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/log_replay/client_replay_unittest.py b/chrome/test/chromedriver/log_replay/client_replay_unittest.py
-index 206c55f..a64a67f 100755
---- a/chrome/test/chromedriver/log_replay/client_replay_unittest.py
-+++ b/chrome/test/chromedriver/log_replay/client_replay_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/support/release/release_notes.py b/chrome/test/chromedriver/support/release/release_notes.py
-index bbfc35f..0b53708 100755
---- a/chrome/test/chromedriver/support/release/release_notes.py
-+++ b/chrome/test/chromedriver/support/release/release_notes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/test/run_java_tests.py b/chrome/test/chromedriver/test/run_java_tests.py
-index e630ccb..74349ff 100755
---- a/chrome/test/chromedriver/test/run_java_tests.py
-+++ b/chrome/test/chromedriver/test/run_java_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromedriver/test/run_py_tests.py b/chrome/test/chromedriver/test/run_py_tests.py
-index 9309290..d80c83b 100755
---- a/chrome/test/chromedriver/test/run_py_tests.py
-+++ b/chrome/test/chromedriver/test/run_py_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/test/chromeos/autotest/files/client/deps/chrome_test/chrome_test.py b/chrome/test/chromeos/autotest/files/client/deps/chrome_test/chrome_test.py
-index 752683d..e33ec1f 100755
---- a/chrome/test/chromeos/autotest/files/client/deps/chrome_test/chrome_test.py
-+++ b/chrome/test/chromeos/autotest/files/client/deps/chrome_test/chrome_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2010 The Chromium OS Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/test/chromeos/autotest/files/client/deps/page_cycler_dep/page_cycler_dep.py b/chrome/test/chromeos/autotest/files/client/deps/page_cycler_dep/page_cycler_dep.py
-index 5a93fa2..c276357 100755
---- a/chrome/test/chromeos/autotest/files/client/deps/page_cycler_dep/page_cycler_dep.py
-+++ b/chrome/test/chromeos/autotest/files/client/deps/page_cycler_dep/page_cycler_dep.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/test/chromeos/autotest/files/client/deps/perf_data_dep/perf_data_dep.py b/chrome/test/chromeos/autotest/files/client/deps/perf_data_dep/perf_data_dep.py
-index 4ea4f7a..93fc7ed 100755
---- a/chrome/test/chromeos/autotest/files/client/deps/perf_data_dep/perf_data_dep.py
-+++ b/chrome/test/chromeos/autotest/files/client/deps/perf_data_dep/perf_data_dep.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/test/chromeos/autotest/files/client/deps/pyauto_dep/pyauto_dep.py b/chrome/test/chromeos/autotest/files/client/deps/pyauto_dep/pyauto_dep.py
-index 444d395..196ca71 100755
---- a/chrome/test/chromeos/autotest/files/client/deps/pyauto_dep/pyauto_dep.py
-+++ b/chrome/test/chromeos/autotest/files/client/deps/pyauto_dep/pyauto_dep.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2011 The Chromium OS Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/test/chromeos/autotest/files/client/deps/telemetry_dep/telemetry_dep.py b/chrome/test/chromeos/autotest/files/client/deps/telemetry_dep/telemetry_dep.py
-index d04e6e7..9ae4c63 100755
---- a/chrome/test/chromeos/autotest/files/client/deps/telemetry_dep/telemetry_dep.py
-+++ b/chrome/test/chromeos/autotest/files/client/deps/telemetry_dep/telemetry_dep.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chrome/test/chromeos/utilities/vm_setup_state.py b/chrome/test/chromeos/utilities/vm_setup_state.py
-index e513a6a..9ec4889 100755
---- a/chrome/test/chromeos/utilities/vm_setup_state.py
-+++ b/chrome/test/chromeos/utilities/vm_setup_state.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/appid.py b/chrome/tools/build/appid.py
-index d052bc3..6127b6c 100755
---- a/chrome/tools/build/appid.py
-+++ b/chrome/tools/build/appid.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/mac/verify_dynamic_libraries.py b/chrome/tools/build/mac/verify_dynamic_libraries.py
-index 655151c..c389fd5 100755
---- a/chrome/tools/build/mac/verify_dynamic_libraries.py
-+++ b/chrome/tools/build/mac/verify_dynamic_libraries.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/make_zip.py b/chrome/tools/build/make_zip.py
-index 17c42da..ae33e3b 100755
---- a/chrome/tools/build/make_zip.py
-+++ b/chrome/tools/build/make_zip.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/win/create_installer_archive.py b/chrome/tools/build/win/create_installer_archive.py
-index 818e836..e1b47f6 100755
---- a/chrome/tools/build/win/create_installer_archive.py
-+++ b/chrome/tools/build/win/create_installer_archive.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/win/makecab.py b/chrome/tools/build/win/makecab.py
-index 9f59476..781067c 100755
---- a/chrome/tools/build/win/makecab.py
-+++ b/chrome/tools/build/win/makecab.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/win/makecab_test.py b/chrome/tools/build/win/makecab_test.py
-index 782efac..1e03776 100755
---- a/chrome/tools/build/win/makecab_test.py
-+++ b/chrome/tools/build/win/makecab_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/build/win/resedit.py b/chrome/tools/build/win/resedit.py
-index 723c4b0..299e7fb 100755
---- a/chrome/tools/build/win/resedit.py
-+++ b/chrome/tools/build/win/resedit.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/history-viz.py b/chrome/tools/history-viz.py
-index f99dee1..6388d61 100755
---- a/chrome/tools/history-viz.py
-+++ b/chrome/tools/history-viz.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/inconsistent-eol.py b/chrome/tools/inconsistent-eol.py
-index ef25245..6f14c08 100755
---- a/chrome/tools/inconsistent-eol.py
-+++ b/chrome/tools/inconsistent-eol.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/test/experiment_tool_win.py b/chrome/tools/test/experiment_tool_win.py
-index 6ba0b92..34be552 100755
---- a/chrome/tools/test/experiment_tool_win.py
-+++ b/chrome/tools/test/experiment_tool_win.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/webforms_aggregator.py b/chrome/tools/webforms_aggregator.py
-index 16e5273..244c751 100755
---- a/chrome/tools/webforms_aggregator.py
-+++ b/chrome/tools/webforms_aggregator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/webforms_aggregator_tests.py b/chrome/tools/webforms_aggregator_tests.py
-index 2eb26bb..62850ad 100755
---- a/chrome/tools/webforms_aggregator_tests.py
-+++ b/chrome/tools/webforms_aggregator_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/webforms_aggregator_unittests.py b/chrome/tools/webforms_aggregator_unittests.py
-index 00ea2bd..8740c38 100755
---- a/chrome/tools/webforms_aggregator_unittests.py
-+++ b/chrome/tools/webforms_aggregator_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chrome/tools/webforms_extractor.py b/chrome/tools/webforms_extractor.py
-index 1dd1d95..102386b 100755
---- a/chrome/tools/webforms_extractor.py
-+++ b/chrome/tools/webforms_extractor.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chromeos/components/file_manager/resources/gen_main_html.py b/chromeos/components/file_manager/resources/gen_main_html.py
-index 1ed9520..3a263aa 100755
---- a/chromeos/components/file_manager/resources/gen_main_html.py
-+++ b/chromeos/components/file_manager/resources/gen_main_html.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/chromeos/ime/gen_input_methods.py b/chromeos/ime/gen_input_methods.py
-index 93a14b8..e3ca145 100755
---- a/chromeos/ime/gen_input_methods.py
-+++ b/chromeos/ime/gen_input_methods.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/chromeos/tools/concat_dbus_conf_files.py b/chromeos/tools/concat_dbus_conf_files.py
-index 7bdbeac..a0318af 100755
---- a/chromeos/tools/concat_dbus_conf_files.py
-+++ b/chromeos/tools/concat_dbus_conf_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/autofill/core/browser/pattern_provider/transpile_default_regex_patterns.py b/components/autofill/core/browser/pattern_provider/transpile_default_regex_patterns.py
-index 4bd93d8..402b9f9 100755
---- a/components/autofill/core/browser/pattern_provider/transpile_default_regex_patterns.py
-+++ b/components/autofill/core/browser/pattern_provider/transpile_default_regex_patterns.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/certificate_transparency/tools/make_ct_known_logs_list.py b/components/certificate_transparency/tools/make_ct_known_logs_list.py
-index 861f110..0813b50 100755
---- a/components/certificate_transparency/tools/make_ct_known_logs_list.py
-+++ b/components/certificate_transparency/tools/make_ct_known_logs_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/certificate_transparency/tools/make_ct_known_logs_list_unittest.py b/components/certificate_transparency/tools/make_ct_known_logs_list_unittest.py
-index db94cf4..715c281 100755
---- a/components/certificate_transparency/tools/make_ct_known_logs_list_unittest.py
-+++ b/components/certificate_transparency/tools/make_ct_known_logs_list_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/crash/content/tools/dmp2minidump.py b/components/crash/content/tools/dmp2minidump.py
-index 7823d48..c2dc11c 100755
---- a/components/crash/content/tools/dmp2minidump.py
-+++ b/components/crash/content/tools/dmp2minidump.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/crash/content/tools/generate_breakpad_symbols.py b/components/crash/content/tools/generate_breakpad_symbols.py
-index dcf26b7..31790b5 100755
---- a/components/crash/content/tools/generate_breakpad_symbols.py
-+++ b/components/crash/content/tools/generate_breakpad_symbols.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/android/test/javaperftests/run.py b/components/cronet/android/test/javaperftests/run.py
-index eba6243..208fedc 100755
---- a/components/cronet/android/test/javaperftests/run.py
-+++ b/components/cronet/android/test/javaperftests/run.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/native/perftest/run.py b/components/cronet/native/perftest/run.py
-index 79f7849..435e836 100755
---- a/components/cronet/native/perftest/run.py
-+++ b/components/cronet/native/perftest/run.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/api_static_checks.py b/components/cronet/tools/api_static_checks.py
-index 0b0f987..174795d 100755
---- a/components/cronet/tools/api_static_checks.py
-+++ b/components/cronet/tools/api_static_checks.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/api_static_checks_unittest.py b/components/cronet/tools/api_static_checks_unittest.py
-index 8b50df2..a6eaec9 100755
---- a/components/cronet/tools/api_static_checks_unittest.py
-+++ b/components/cronet/tools/api_static_checks_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/check_no_neon.py b/components/cronet/tools/check_no_neon.py
-index 8913b0c..0afb63e 100755
---- a/components/cronet/tools/check_no_neon.py
-+++ b/components/cronet/tools/check_no_neon.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/cr_cronet.py b/components/cronet/tools/cr_cronet.py
-index d35cafc..4fb6b3b 100755
---- a/components/cronet/tools/cr_cronet.py
-+++ b/components/cronet/tools/cr_cronet.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/generate_idl_bindings.py b/components/cronet/tools/generate_idl_bindings.py
-index 4df9c7d..5a7e598 100755
---- a/components/cronet/tools/generate_idl_bindings.py
-+++ b/components/cronet/tools/generate_idl_bindings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/generate_javadoc.py b/components/cronet/tools/generate_javadoc.py
-index cc878ca..ae186dd 100755
---- a/components/cronet/tools/generate_javadoc.py
-+++ b/components/cronet/tools/generate_javadoc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/generate_proguard_file.py b/components/cronet/tools/generate_proguard_file.py
-index edaebb0..eccbab9 100755
---- a/components/cronet/tools/generate_proguard_file.py
-+++ b/components/cronet/tools/generate_proguard_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/generators/cronet_bindings_generator.py b/components/cronet/tools/generators/cronet_bindings_generator.py
-index 02cff01..5212bdf 100755
---- a/components/cronet/tools/generators/cronet_bindings_generator.py
-+++ b/components/cronet/tools/generators/cronet_bindings_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/hide_symbols.py b/components/cronet/tools/hide_symbols.py
-index 374982c..09de2cf 100755
---- a/components/cronet/tools/hide_symbols.py
-+++ b/components/cronet/tools/hide_symbols.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/jar_src.py b/components/cronet/tools/jar_src.py
-index 07fb926..10143ad 100755
---- a/components/cronet/tools/jar_src.py
-+++ b/components/cronet/tools/jar_src.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/link_dependencies.py b/components/cronet/tools/link_dependencies.py
-index 94e612e..f752730 100755
---- a/components/cronet/tools/link_dependencies.py
-+++ b/components/cronet/tools/link_dependencies.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/cronet/tools/package_ios.py b/components/cronet/tools/package_ios.py
-index 418b582..55190a1 100755
---- a/components/cronet/tools/package_ios.py
-+++ b/components/cronet/tools/package_ios.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/package_mac.py b/components/cronet/tools/package_mac.py
-index 31f6ca7..2854583 100755
---- a/components/cronet/tools/package_mac.py
-+++ b/components/cronet/tools/package_mac.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/perf_test_utils.py b/components/cronet/tools/perf_test_utils.py
-index b1b5d9b..c84c2fe 100755
---- a/components/cronet/tools/perf_test_utils.py
-+++ b/components/cronet/tools/perf_test_utils.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools/update_api.py b/components/cronet/tools/update_api.py
-index 2cbf593..44c762c 100755
---- a/components/cronet/tools/update_api.py
-+++ b/components/cronet/tools/update_api.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/cronet/tools_unittest.py b/components/cronet/tools_unittest.py
-index 1041406..45eb059 100755
---- a/components/cronet/tools_unittest.py
-+++ b/components/cronet/tools_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/domain_reliability/bake_in_configs.py b/components/domain_reliability/bake_in_configs.py
-index cf2e8b4..5c1feed 100755
---- a/components/domain_reliability/bake_in_configs.py
-+++ b/components/domain_reliability/bake_in_configs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/module_installer/android/module_desc_java.py b/components/module_installer/android/module_desc_java.py
-index 6c74bb4..c45deb8 100755
---- a/components/module_installer/android/module_desc_java.py
-+++ b/components/module_installer/android/module_desc_java.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/ntp_snippets/remote/fetch.py b/components/ntp_snippets/remote/fetch.py
-index d5624c0..304b827 100755
---- a/components/ntp_snippets/remote/fetch.py
-+++ b/components/ntp_snippets/remote/fetch.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # -*- coding: utf-8 -*-
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/components/policy/tools/generate_extension_admx.py b/components/policy/tools/generate_extension_admx.py
-index 48a0593..580b199 100755
---- a/components/policy/tools/generate_extension_admx.py
-+++ b/components/policy/tools/generate_extension_admx.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/generate_policy_source.py b/components/policy/tools/generate_policy_source.py
-index 154b624..4698031 100755
---- a/components/policy/tools/generate_policy_source.py
-+++ b/components/policy/tools/generate_policy_source.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/generate_policy_source_test.py b/components/policy/tools/generate_policy_source_test.py
-index ca2b1ec..f7edcd0 100755
---- a/components/policy/tools/generate_policy_source_test.py
-+++ b/components/policy/tools/generate_policy_source_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/make_policy_zip.py b/components/policy/tools/make_policy_zip.py
-index 3f34d62..793b7e4 100755
---- a/components/policy/tools/make_policy_zip.py
-+++ b/components/policy/tools/make_policy_zip.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/syntax_check_policy_template_json.py b/components/policy/tools/syntax_check_policy_template_json.py
-index 887ae6f..68813e2 100755
---- a/components/policy/tools/syntax_check_policy_template_json.py
-+++ b/components/policy/tools/syntax_check_policy_template_json.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/PRESUBMIT.py b/components/policy/tools/template_writers/PRESUBMIT.py
-index 66f6f82..5ec4675 100755
---- a/components/policy/tools/template_writers/PRESUBMIT.py
-+++ b/components/policy/tools/template_writers/PRESUBMIT.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/__init__.py b/components/policy/tools/template_writers/__init__.py
-index 14d138a..661b5bb 100755
---- a/components/policy/tools/template_writers/__init__.py
-+++ b/components/policy/tools/template_writers/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/policy_template_generator.py b/components/policy/tools/template_writers/policy_template_generator.py
-index eb2cba0..2f00fc0 100755
---- a/components/policy/tools/template_writers/policy_template_generator.py
-+++ b/components/policy/tools/template_writers/policy_template_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/policy_template_generator_unittest.py b/components/policy/tools/template_writers/policy_template_generator_unittest.py
-index 09d9cc5..b0a6a3a 100755
---- a/components/policy/tools/template_writers/policy_template_generator_unittest.py
-+++ b/components/policy/tools/template_writers/policy_template_generator_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/template_formatter.py b/components/policy/tools/template_writers/template_formatter.py
-index 56b63c5..fa8602c 100755
---- a/components/policy/tools/template_writers/template_formatter.py
-+++ b/components/policy/tools/template_writers/template_formatter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/test_suite_all.py b/components/policy/tools/template_writers/test_suite_all.py
-index 87b2317..2bceb1d 100755
---- a/components/policy/tools/template_writers/test_suite_all.py
-+++ b/components/policy/tools/template_writers/test_suite_all.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writer_configuration.py b/components/policy/tools/template_writers/writer_configuration.py
-index b3917d1..1b3e0cf 100755
---- a/components/policy/tools/template_writers/writer_configuration.py
-+++ b/components/policy/tools/template_writers/writer_configuration.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/__init__.py b/components/policy/tools/template_writers/writers/__init__.py
-index df56f5c..410b0e4 100755
---- a/components/policy/tools/template_writers/writers/__init__.py
-+++ b/components/policy/tools/template_writers/writers/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/adm_writer.py b/components/policy/tools/template_writers/writers/adm_writer.py
-index 4b480c4..ea145a2 100755
---- a/components/policy/tools/template_writers/writers/adm_writer.py
-+++ b/components/policy/tools/template_writers/writers/adm_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/adm_writer_unittest.py b/components/policy/tools/template_writers/writers/adm_writer_unittest.py
-index 38389e0..7e718f9 100755
---- a/components/policy/tools/template_writers/writers/adm_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/adm_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/adml_writer.py b/components/policy/tools/template_writers/writers/adml_writer.py
-index 96af4b6..ec0cc52 100755
---- a/components/policy/tools/template_writers/writers/adml_writer.py
-+++ b/components/policy/tools/template_writers/writers/adml_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/adml_writer_unittest.py b/components/policy/tools/template_writers/writers/adml_writer_unittest.py
-index 6a34ccc..4ac6f2f 100755
---- a/components/policy/tools/template_writers/writers/adml_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/adml_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/admx_writer.py b/components/policy/tools/template_writers/writers/admx_writer.py
-index 8da5024..50d0d54 100755
---- a/components/policy/tools/template_writers/writers/admx_writer.py
-+++ b/components/policy/tools/template_writers/writers/admx_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/admx_writer_unittest.py b/components/policy/tools/template_writers/writers/admx_writer_unittest.py
-index 0ba159d..9dba0d3 100755
---- a/components/policy/tools/template_writers/writers/admx_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/admx_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/android_policy_writer.py b/components/policy/tools/template_writers/writers/android_policy_writer.py
-index 593e04c..a282204 100755
---- a/components/policy/tools/template_writers/writers/android_policy_writer.py
-+++ b/components/policy/tools/template_writers/writers/android_policy_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/android_policy_writer_unittest.py b/components/policy/tools/template_writers/writers/android_policy_writer_unittest.py
-index b36a72a..342be22 100755
---- a/components/policy/tools/template_writers/writers/android_policy_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/android_policy_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/chromeos_adml_writer.py b/components/policy/tools/template_writers/writers/chromeos_adml_writer.py
-index 6ae5309..cb57e85 100755
---- a/components/policy/tools/template_writers/writers/chromeos_adml_writer.py
-+++ b/components/policy/tools/template_writers/writers/chromeos_adml_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/chromeos_adml_writer_unittest.py b/components/policy/tools/template_writers/writers/chromeos_adml_writer_unittest.py
-index 4cf97d3..71eb9b7 100755
---- a/components/policy/tools/template_writers/writers/chromeos_adml_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/chromeos_adml_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/chromeos_admx_writer.py b/components/policy/tools/template_writers/writers/chromeos_admx_writer.py
-index fa53e17..bb68361 100755
---- a/components/policy/tools/template_writers/writers/chromeos_admx_writer.py
-+++ b/components/policy/tools/template_writers/writers/chromeos_admx_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/chromeos_admx_writer_unittest.py b/components/policy/tools/template_writers/writers/chromeos_admx_writer_unittest.py
-index 6208f02..e2a2169 100755
---- a/components/policy/tools/template_writers/writers/chromeos_admx_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/chromeos_admx_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/doc_atomic_groups_writer.py b/components/policy/tools/template_writers/writers/doc_atomic_groups_writer.py
-index a98f1a6..e196a58 100755
---- a/components/policy/tools/template_writers/writers/doc_atomic_groups_writer.py
-+++ b/components/policy/tools/template_writers/writers/doc_atomic_groups_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/doc_writer.py b/components/policy/tools/template_writers/writers/doc_writer.py
-index 5f7d775..2039787 100755
---- a/components/policy/tools/template_writers/writers/doc_writer.py
-+++ b/components/policy/tools/template_writers/writers/doc_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/doc_writer_unittest.py b/components/policy/tools/template_writers/writers/doc_writer_unittest.py
-index ed8de5c..8e7ae99 100755
---- a/components/policy/tools/template_writers/writers/doc_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/doc_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/google_adml_writer.py b/components/policy/tools/template_writers/writers/google_adml_writer.py
-index 85d1f96..525f2ec 100755
---- a/components/policy/tools/template_writers/writers/google_adml_writer.py
-+++ b/components/policy/tools/template_writers/writers/google_adml_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/google_adml_writer_unittest.py b/components/policy/tools/template_writers/writers/google_adml_writer_unittest.py
-index 8ca5515..32250e7 100755
---- a/components/policy/tools/template_writers/writers/google_adml_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/google_adml_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/google_admx_writer.py b/components/policy/tools/template_writers/writers/google_admx_writer.py
-index 4e013a8..5f1e8aa 100755
---- a/components/policy/tools/template_writers/writers/google_admx_writer.py
-+++ b/components/policy/tools/template_writers/writers/google_admx_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/google_admx_writer_unittest.py b/components/policy/tools/template_writers/writers/google_admx_writer_unittest.py
-index f82e24c..cd3329a 100755
---- a/components/policy/tools/template_writers/writers/google_admx_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/google_admx_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/gpo_editor_writer.py b/components/policy/tools/template_writers/writers/gpo_editor_writer.py
-index b662eb0..77e975b 100755
---- a/components/policy/tools/template_writers/writers/gpo_editor_writer.py
-+++ b/components/policy/tools/template_writers/writers/gpo_editor_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/ios_app_config_writer.py b/components/policy/tools/template_writers/writers/ios_app_config_writer.py
-index 3626524..474bdd2 100755
---- a/components/policy/tools/template_writers/writers/ios_app_config_writer.py
-+++ b/components/policy/tools/template_writers/writers/ios_app_config_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/ios_app_config_writer_unittest.py b/components/policy/tools/template_writers/writers/ios_app_config_writer_unittest.py
-index bfc9624..7836aad 100755
---- a/components/policy/tools/template_writers/writers/ios_app_config_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/ios_app_config_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/jamf_writer.py b/components/policy/tools/template_writers/writers/jamf_writer.py
-index e87cd15..4c5eb1d 100755
---- a/components/policy/tools/template_writers/writers/jamf_writer.py
-+++ b/components/policy/tools/template_writers/writers/jamf_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/jamf_writer_unittest.py b/components/policy/tools/template_writers/writers/jamf_writer_unittest.py
-index 1ab69c4..b2ff4c0 100755
---- a/components/policy/tools/template_writers/writers/jamf_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/jamf_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/json_writer.py b/components/policy/tools/template_writers/writers/json_writer.py
-index 5943621..b91f27d 100755
---- a/components/policy/tools/template_writers/writers/json_writer.py
-+++ b/components/policy/tools/template_writers/writers/json_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/json_writer_unittest.py b/components/policy/tools/template_writers/writers/json_writer_unittest.py
-index 3dacf25..92e56cf 100755
---- a/components/policy/tools/template_writers/writers/json_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/json_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/mock_writer.py b/components/policy/tools/template_writers/writers/mock_writer.py
-index bcb43ad..55ef0b6 100755
---- a/components/policy/tools/template_writers/writers/mock_writer.py
-+++ b/components/policy/tools/template_writers/writers/mock_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/plist_helper.py b/components/policy/tools/template_writers/writers/plist_helper.py
-index 2f6d3d7..5942ab6 100755
---- a/components/policy/tools/template_writers/writers/plist_helper.py
-+++ b/components/policy/tools/template_writers/writers/plist_helper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/plist_strings_writer.py b/components/policy/tools/template_writers/writers/plist_strings_writer.py
-index cb4d848..62ad0a7 100755
---- a/components/policy/tools/template_writers/writers/plist_strings_writer.py
-+++ b/components/policy/tools/template_writers/writers/plist_strings_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/plist_strings_writer_unittest.py b/components/policy/tools/template_writers/writers/plist_strings_writer_unittest.py
-index 91c39f4..895f9b9 100755
---- a/components/policy/tools/template_writers/writers/plist_strings_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/plist_strings_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/plist_writer.py b/components/policy/tools/template_writers/writers/plist_writer.py
-index acac7e2..8f7021a 100755
---- a/components/policy/tools/template_writers/writers/plist_writer.py
-+++ b/components/policy/tools/template_writers/writers/plist_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/plist_writer_unittest.py b/components/policy/tools/template_writers/writers/plist_writer_unittest.py
-index 05f7f6c..60ee762 100755
---- a/components/policy/tools/template_writers/writers/plist_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/plist_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/reg_writer.py b/components/policy/tools/template_writers/writers/reg_writer.py
-index 2e27978..af587cf 100755
---- a/components/policy/tools/template_writers/writers/reg_writer.py
-+++ b/components/policy/tools/template_writers/writers/reg_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/reg_writer_unittest.py b/components/policy/tools/template_writers/writers/reg_writer_unittest.py
-index e59777f..3d0dd34 100755
---- a/components/policy/tools/template_writers/writers/reg_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/reg_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/template_writer.py b/components/policy/tools/template_writers/writers/template_writer.py
-index 0ce8ed2..a690c42 100755
---- a/components/policy/tools/template_writers/writers/template_writer.py
-+++ b/components/policy/tools/template_writers/writers/template_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/template_writer_unittest.py b/components/policy/tools/template_writers/writers/template_writer_unittest.py
-index 3d4988e..4ad7a4a 100755
---- a/components/policy/tools/template_writers/writers/template_writer_unittest.py
-+++ b/components/policy/tools/template_writers/writers/template_writer_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/writer_unittest_common.py b/components/policy/tools/template_writers/writers/writer_unittest_common.py
-index b0fdf67..116745b 100755
---- a/components/policy/tools/template_writers/writers/writer_unittest_common.py
-+++ b/components/policy/tools/template_writers/writers/writer_unittest_common.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/xml_formatted_writer.py b/components/policy/tools/template_writers/writers/xml_formatted_writer.py
-index e4813d6..75d04c9 100755
---- a/components/policy/tools/template_writers/writers/xml_formatted_writer.py
-+++ b/components/policy/tools/template_writers/writers/xml_formatted_writer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/policy/tools/template_writers/writers/xml_writer_base_unittest.py b/components/policy/tools/template_writers/writers/xml_writer_base_unittest.py
-index 2b5df21..cb49126 100755
---- a/components/policy/tools/template_writers/writers/xml_writer_base_unittest.py
-+++ b/components/policy/tools/template_writers/writers/xml_writer_base_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/resources/protobufs/binary_proto_generator.py b/components/resources/protobufs/binary_proto_generator.py
-index 1636551..669cd05 100755
---- a/components/resources/protobufs/binary_proto_generator.py
-+++ b/components/resources/protobufs/binary_proto_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/resources/ssl/ssl_error_assistant/gen_ssl_error_assistant_proto.py b/components/resources/ssl/ssl_error_assistant/gen_ssl_error_assistant_proto.py
-index 1418f33..3e44f03 100755
---- a/components/resources/ssl/ssl_error_assistant/gen_ssl_error_assistant_proto.py
-+++ b/components/resources/ssl/ssl_error_assistant/gen_ssl_error_assistant_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/resources/ssl/ssl_error_assistant/push_proto.py b/components/resources/ssl/ssl_error_assistant/push_proto.py
-index d2d3824..373f301 100755
---- a/components/resources/ssl/ssl_error_assistant/push_proto.py
-+++ b/components/resources/ssl/ssl_error_assistant/push_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/safe_browsing/core/resources/gen_file_type_proto.py b/components/safe_browsing/core/resources/gen_file_type_proto.py
-index 15de898..04dd077 100755
---- a/components/safe_browsing/core/resources/gen_file_type_proto.py
-+++ b/components/safe_browsing/core/resources/gen_file_type_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/safe_browsing/core/resources/push_file_type_proto.py b/components/safe_browsing/core/resources/push_file_type_proto.py
-index 4f9bf24..7aefaee 100755
---- a/components/safe_browsing/core/resources/push_file_type_proto.py
-+++ b/components/safe_browsing/core/resources/push_file_type_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/sync/PRESUBMIT_test.py b/components/sync/PRESUBMIT_test.py
-index abcb02e..62ca0fe 100755
---- a/components/sync/PRESUBMIT_test.py
-+++ b/components/sync/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/url_formatter/spoof_checks/top_domains/make_alexa_top_list.py b/components/url_formatter/spoof_checks/top_domains/make_alexa_top_list.py
-index 8f79fc7..126bb45 100755
---- a/components/url_formatter/spoof_checks/top_domains/make_alexa_top_list.py
-+++ b/components/url_formatter/spoof_checks/top_domains/make_alexa_top_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/variations/service/generate_ui_string_overrider.py b/components/variations/service/generate_ui_string_overrider.py
-index 859b758..98dac06 100755
---- a/components/variations/service/generate_ui_string_overrider.py
-+++ b/components/variations/service/generate_ui_string_overrider.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/variations/service/generate_ui_string_overrider_unittest.py b/components/variations/service/generate_ui_string_overrider_unittest.py
-index 55d55f3..7bd2d81 100755
---- a/components/variations/service/generate_ui_string_overrider_unittest.py
-+++ b/components/variations/service/generate_ui_string_overrider_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/viz/service/compositor_frame_fuzzer/generate_renderpass_binary.py b/components/viz/service/compositor_frame_fuzzer/generate_renderpass_binary.py
-index 5994fae..801be34 100755
---- a/components/viz/service/compositor_frame_fuzzer/generate_renderpass_binary.py
-+++ b/components/viz/service/compositor_frame_fuzzer/generate_renderpass_binary.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/viz/service/display/process_renderer_perftest_results.py b/components/viz/service/display/process_renderer_perftest_results.py
-index 588dece..ccc8882 100755
---- a/components/viz/service/display/process_renderer_perftest_results.py
-+++ b/components/viz/service/display/process_renderer_perftest_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/zucchini/fuzzers/create_seed_file_pair.py b/components/zucchini/fuzzers/create_seed_file_pair.py
-index 4394801..90e0ec8 100755
---- a/components/zucchini/fuzzers/create_seed_file_pair.py
-+++ b/components/zucchini/fuzzers/create_seed_file_pair.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/components/zucchini/fuzzers/generate_fuzzer_data.py b/components/zucchini/fuzzers/generate_fuzzer_data.py
-index 5f5867b..6f6ef4a 100755
---- a/components/zucchini/fuzzers/generate_fuzzer_data.py
-+++ b/components/zucchini/fuzzers/generate_fuzzer_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/content/public/android/generate_child_service.py b/content/public/android/generate_child_service.py
-index 6c2765b..43b4520 100755
---- a/content/public/android/generate_child_service.py
-+++ b/content/public/android/generate_child_service.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/content/renderer/PRESUBMIT_test.py b/content/renderer/PRESUBMIT_test.py
-index 691c024..229ec32 100755
---- a/content/renderer/PRESUBMIT_test.py
-+++ b/content/renderer/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/content/shell/tools/breakpad_integration_test.py b/content/shell/tools/breakpad_integration_test.py
-index f5dc88d..eba87b4 100755
---- a/content/shell/tools/breakpad_integration_test.py
-+++ b/content/shell/tools/breakpad_integration_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/content/test/gpu/gather_power_measurement_results.py b/content/test/gpu/gather_power_measurement_results.py
-index 65f48dc..ac2dcca 100755
---- a/content/test/gpu/gather_power_measurement_results.py
-+++ b/content/test/gpu/gather_power_measurement_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/content/test/gpu/gather_swarming_json_results.py b/content/test/gpu/gather_swarming_json_results.py
-index b9b6028..ac2d616 100755
---- a/content/test/gpu/gather_swarming_json_results.py
-+++ b/content/test/gpu/gather_swarming_json_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/content/test/gpu/power_measurement_results/analyze_power_measurement_results.py b/content/test/gpu/power_measurement_results/analyze_power_measurement_results.py
-index e6a6115..5aa9c44 100755
---- a/content/test/gpu/power_measurement_results/analyze_power_measurement_results.py
-+++ b/content/test/gpu/power_measurement_results/analyze_power_measurement_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/docs/cipd_and_3pp.md b/docs/cipd_and_3pp.md
-index 8a3b0de..f72e2f2 100644
---- a/docs/cipd_and_3pp.md
-+++ b/docs/cipd_and_3pp.md
-@@ -221,7 +221,7 @@ script to probe for the latest version and obtain the latest sources. A simple
- example can be like the following:
- 
- ```
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2021 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/docs/enterprise/extension_query.py b/docs/enterprise/extension_query.py
-index 41c9262..6020b5b 100755
---- a/docs/enterprise/extension_query.py
-+++ b/docs/enterprise/extension_query.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/docs/enterprise/extension_query_py2.py b/docs/enterprise/extension_query_py2.py
-index 597a564..df645c7 100755
---- a/docs/enterprise/extension_query_py2.py
-+++ b/docs/enterprise/extension_query_py2.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/docs/win_cross.md b/docs/win_cross.md
-index 4ca0c16..6a374b7 100644
---- a/docs/win_cross.md
-+++ b/docs/win_cross.md
-@@ -69,7 +69,7 @@ setting `DEPOT_TOOLS_WIN_TOOLCHAIN_BASE_URL` and running `gclient sync`:
-     gclient sync
-     ...
-     Running hooks:  17% (11/64) win_toolchain
--    ________ running '/usr/bin/python src/build/vs_toolchain.py update --force' in <chromium dir>
-+    ________ running '/usr/bin/python2 src/build/vs_toolchain.py update --force' in <chromium dir>
-     Windows toolchain out of date or doesn't exist, updating (Pro)...
-     current_hashes:
-     desired_hash: <toolchain hash>
-diff --git a/extensions/common/api/externs_checker_test.py b/extensions/common/api/externs_checker_test.py
-index a28deaf..c1f3f2a 100755
---- a/extensions/common/api/externs_checker_test.py
-+++ b/extensions/common/api/externs_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/google_apis/build/check_internal.py b/google_apis/build/check_internal.py
-index 89514c5..e721f6f 100755
---- a/google_apis/build/check_internal.py
-+++ b/google_apis/build/check_internal.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/google_apis/google_api_keys.py b/google_apis/google_api_keys.py
-index 8e528f2..f40bd70 100755
---- a/google_apis/google_api_keys.py
-+++ b/google_apis/google_api_keys.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/command_buffer/build_gles2_cmd_buffer.py b/gpu/command_buffer/build_gles2_cmd_buffer.py
-index 48e9e7a..92681a8 100755
---- a/gpu/command_buffer/build_gles2_cmd_buffer.py
-+++ b/gpu/command_buffer/build_gles2_cmd_buffer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/command_buffer/build_raster_cmd_buffer.py b/gpu/command_buffer/build_raster_cmd_buffer.py
-index 0690a12..7de022d 100755
---- a/gpu/command_buffer/build_raster_cmd_buffer.py
-+++ b/gpu/command_buffer/build_raster_cmd_buffer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/command_buffer/build_webgpu_cmd_buffer.py b/gpu/command_buffer/build_webgpu_cmd_buffer.py
-index 07b6c8e..f8bb073 100755
---- a/gpu/command_buffer/build_webgpu_cmd_buffer.py
-+++ b/gpu/command_buffer/build_webgpu_cmd_buffer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/config/build_workaround_header.py b/gpu/config/build_workaround_header.py
-index b855832..abb1e96 100755
---- a/gpu/config/build_workaround_header.py
-+++ b/gpu/config/build_workaround_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/config/process_json.py b/gpu/config/process_json.py
-index 6a609fe..3d83bf6 100755
---- a/gpu/config/process_json.py
-+++ b/gpu/config/process_json.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/gles2_conform_support/generate_gles2_conform_tests.py b/gpu/gles2_conform_support/generate_gles2_conform_tests.py
-index b6b49a1..b8d2644 100755
---- a/gpu/gles2_conform_support/generate_gles2_conform_tests.py
-+++ b/gpu/gles2_conform_support/generate_gles2_conform_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/gles2_conform_support/generate_gles2_embedded_data.py b/gpu/gles2_conform_support/generate_gles2_embedded_data.py
-index 809b24a..05fa1a5 100755
---- a/gpu/gles2_conform_support/generate_gles2_embedded_data.py
-+++ b/gpu/gles2_conform_support/generate_gles2_embedded_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/ipc/common/generate_vulkan_types.py b/gpu/ipc/common/generate_vulkan_types.py
-index 00b0b8b..65b4f4a 100755
---- a/gpu/ipc/common/generate_vulkan_types.py
-+++ b/gpu/ipc/common/generate_vulkan_types.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/gpu/khronos_glcts_support/generate_khronos_glcts_tests.py b/gpu/khronos_glcts_support/generate_khronos_glcts_tests.py
-index b553794..09e9358 100755
---- a/gpu/khronos_glcts_support/generate_khronos_glcts_tests.py
-+++ b/gpu/khronos_glcts_support/generate_khronos_glcts_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/headless/lib/browser/devtools_api/client_api_generator_unittest.py b/headless/lib/browser/devtools_api/client_api_generator_unittest.py
-index 9e1ca65..85e2a8c 100755
---- a/headless/lib/browser/devtools_api/client_api_generator_unittest.py
-+++ b/headless/lib/browser/devtools_api/client_api_generator_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/infra/config/lint-luci-milo.py b/infra/config/lint-luci-milo.py
-index a91c6f3..cea047f 100755
---- a/infra/config/lint-luci-milo.py
-+++ b/infra/config/lint-luci-milo.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/infra/scripts/sizes.py b/infra/scripts/sizes.py
-index 01180fa..e37c8b4 100755
---- a/infra/scripts/sizes.py
-+++ b/infra/scripts/sizes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/media/PRESUBMIT_test.py b/media/PRESUBMIT_test.py
-index 80eabff..fe2d76e 100755
---- a/media/PRESUBMIT_test.py
-+++ b/media/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/media/cast/test/utility/netload.py b/media/cast/test/utility/netload.py
-index 248eca2..4cdf72c 100755
---- a/media/cast/test/utility/netload.py
-+++ b/media/cast/test/utility/netload.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/media/tools/constrained_network_server/cn.py b/media/tools/constrained_network_server/cn.py
-index fe5781c..40306cc 100755
---- a/media/tools/constrained_network_server/cn.py
-+++ b/media/tools/constrained_network_server/cn.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/media/tools/constrained_network_server/cns.py b/media/tools/constrained_network_server/cns.py
-index d039d8e..a45b4e3 100755
---- a/media/tools/constrained_network_server/cns.py
-+++ b/media/tools/constrained_network_server/cns.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/media/tools/constrained_network_server/traffic_control_test.py b/media/tools/constrained_network_server/traffic_control_test.py
-index d641253..dc25433 100755
---- a/media/tools/constrained_network_server/traffic_control_test.py
-+++ b/media/tools/constrained_network_server/traffic_control_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/media/tools/constrained_network_server/traffic_control_unittest.py b/media/tools/constrained_network_server/traffic_control_unittest.py
-index a6781e9..8ed4a40 100755
---- a/media/tools/constrained_network_server/traffic_control_unittest.py
-+++ b/media/tools/constrained_network_server/traffic_control_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/mojo/public/cpp/bindings/tests/generate_test_mojom.py b/mojo/public/cpp/bindings/tests/generate_test_mojom.py
-index 22929f3..a93c077 100755
---- a/mojo/public/cpp/bindings/tests/generate_test_mojom.py
-+++ b/mojo/public/cpp/bindings/tests/generate_test_mojom.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/concatenate-files.py b/mojo/public/tools/bindings/concatenate-files.py
-index 48bc66f..f713548 100755
---- a/mojo/public/tools/bindings/concatenate-files.py
-+++ b/mojo/public/tools/bindings/concatenate-files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/concatenate_and_replace_closure_exports.py b/mojo/public/tools/bindings/concatenate_and_replace_closure_exports.py
-index be8985c..efe734e 100755
---- a/mojo/public/tools/bindings/concatenate_and_replace_closure_exports.py
-+++ b/mojo/public/tools/bindings/concatenate_and_replace_closure_exports.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/generate_type_mappings.py b/mojo/public/tools/bindings/generate_type_mappings.py
-index a009664..058d95a 100755
---- a/mojo/public/tools/bindings/generate_type_mappings.py
-+++ b/mojo/public/tools/bindings/generate_type_mappings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/mojom_bindings_generator.py b/mojo/public/tools/bindings/mojom_bindings_generator.py
-index da9efc7..8e27b33 100755
---- a/mojo/public/tools/bindings/mojom_bindings_generator.py
-+++ b/mojo/public/tools/bindings/mojom_bindings_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/mojom_types_downgrader.py b/mojo/public/tools/bindings/mojom_types_downgrader.py
-index 15f0e3b..87ea5f4 100755
---- a/mojo/public/tools/bindings/mojom_types_downgrader.py
-+++ b/mojo/public/tools/bindings/mojom_types_downgrader.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/bindings/validate_typemap_config.py b/mojo/public/tools/bindings/validate_typemap_config.py
-index f1783d5..a1c4670 100755
---- a/mojo/public/tools/bindings/validate_typemap_config.py
-+++ b/mojo/public/tools/bindings/validate_typemap_config.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/mojom/check_stable_mojom_compatibility.py b/mojo/public/tools/mojom/check_stable_mojom_compatibility.py
-index 08bd672..d8fd0f4 100755
---- a/mojo/public/tools/mojom/check_stable_mojom_compatibility.py
-+++ b/mojo/public/tools/mojom/check_stable_mojom_compatibility.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/mojom/check_stable_mojom_compatibility_unittest.py b/mojo/public/tools/mojom/check_stable_mojom_compatibility_unittest.py
-index 9f51ea7..e80a297 100755
---- a/mojo/public/tools/mojom/check_stable_mojom_compatibility_unittest.py
-+++ b/mojo/public/tools/mojom/check_stable_mojom_compatibility_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/mojom/mojom_parser.py b/mojo/public/tools/mojom/mojom_parser.py
-index 6c278a0..f979fd8 100755
---- a/mojo/public/tools/mojom/mojom_parser.py
-+++ b/mojo/public/tools/mojom/mojom_parser.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/mojo/public/tools/run_all_python_unittests.py b/mojo/public/tools/run_all_python_unittests.py
-index b201095..0cc9d9e 100755
---- a/mojo/public/tools/run_all_python_unittests.py
-+++ b/mojo/public/tools/run_all_python_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/android/tools/proxy_test_cases.py b/net/android/tools/proxy_test_cases.py
-index ab93f67..f201df6 100755
---- a/net/android/tools/proxy_test_cases.py
-+++ b/net/android/tools/proxy_test_cases.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/cert_issuer_source_aia_unittest/generate-certs.py b/net/data/cert_issuer_source_aia_unittest/generate-certs.py
-index 011e2d0..1ba0a6d 100755
---- a/net/data/cert_issuer_source_aia_unittest/generate-certs.py
-+++ b/net/data/cert_issuer_source_aia_unittest/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/cert_issuer_source_static_unittest/generate-certs.py b/net/data/cert_issuer_source_static_unittest/generate-certs.py
-index ebed89d..b4a2baf 100755
---- a/net/data/cert_issuer_source_static_unittest/generate-certs.py
-+++ b/net/data/cert_issuer_source_static_unittest/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/certificate_policies_unittest/generate_policies.py b/net/data/certificate_policies_unittest/generate_policies.py
-index 20232e4..8de11d8 100755
---- a/net/data/certificate_policies_unittest/generate_policies.py
-+++ b/net/data/certificate_policies_unittest/generate_policies.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/crl_unittest/generate_crl_test_data.py b/net/data/crl_unittest/generate_crl_test_data.py
-index a8463fa..296258b 100755
---- a/net/data/crl_unittest/generate_crl_test_data.py
-+++ b/net/data/crl_unittest/generate_crl_test_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/gencerts/__init__.py b/net/data/gencerts/__init__.py
-index 70445c8..27c23e6 100755
---- a/net/data/gencerts/__init__.py
-+++ b/net/data/gencerts/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/gencerts/openssl_conf.py b/net/data/gencerts/openssl_conf.py
-index c12771c..0e42f13 100755
---- a/net/data/gencerts/openssl_conf.py
-+++ b/net/data/gencerts/openssl_conf.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/name_constraints_unittest/generate_name_constraints.py b/net/data/name_constraints_unittest/generate_name_constraints.py
-index 5d231e4..10a0835 100755
---- a/net/data/name_constraints_unittest/generate_name_constraints.py
-+++ b/net/data/name_constraints_unittest/generate_name_constraints.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/ocsp_unittest/annotate_test_data.py b/net/data/ocsp_unittest/annotate_test_data.py
-index a84b6da..52aa074 100755
---- a/net/data/ocsp_unittest/annotate_test_data.py
-+++ b/net/data/ocsp_unittest/annotate_test_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/ocsp_unittest/make_ocsp.py b/net/data/ocsp_unittest/make_ocsp.py
-index a6163ef..db5018a 100755
---- a/net/data/ocsp_unittest/make_ocsp.py
-+++ b/net/data/ocsp_unittest/make_ocsp.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/ov_name_constraints/generate-certs.py b/net/data/ov_name_constraints/generate-certs.py
-index a015ced..3ea1ba3 100755
---- a/net/data/ov_name_constraints/generate-certs.py
-+++ b/net/data/ov_name_constraints/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/parse_certificate_unittest/authority_key_identifier/generate.py b/net/data/parse_certificate_unittest/authority_key_identifier/generate.py
-index 1dfa9c0..b2caf6b 100755
---- a/net/data/parse_certificate_unittest/authority_key_identifier/generate.py
-+++ b/net/data/parse_certificate_unittest/authority_key_identifier/generate.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/parse_certificate_unittest/rebase-errors.py b/net/data/parse_certificate_unittest/rebase-errors.py
-index 7e7dbf5..a1426bc 100755
---- a/net/data/parse_certificate_unittest/rebase-errors.py
-+++ b/net/data/parse_certificate_unittest/rebase-errors.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/parse_certificate_unittest/regenerate_pem_from_ascii.py b/net/data/parse_certificate_unittest/regenerate_pem_from_ascii.py
-index bc9fd37..b33f2db 100755
---- a/net/data/parse_certificate_unittest/regenerate_pem_from_ascii.py
-+++ b/net/data/parse_certificate_unittest/regenerate_pem_from_ascii.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/path_builder_unittest/key_id_name_and_serial_prioritization/generate-certs.py b/net/data/path_builder_unittest/key_id_name_and_serial_prioritization/generate-certs.py
-index c4ea4a1..a449a2d 100755
---- a/net/data/path_builder_unittest/key_id_name_and_serial_prioritization/generate-certs.py
-+++ b/net/data/path_builder_unittest/key_id_name_and_serial_prioritization/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/path_builder_unittest/key_id_prioritization/generate-certs.py b/net/data/path_builder_unittest/key_id_prioritization/generate-certs.py
-index 2914b30..3bff9be 100755
---- a/net/data/path_builder_unittest/key_id_prioritization/generate-certs.py
-+++ b/net/data/path_builder_unittest/key_id_prioritization/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/path_builder_unittest/validity_date_prioritization/generate-certs.py b/net/data/path_builder_unittest/validity_date_prioritization/generate-certs.py
-index 91db149..64e9983 100755
---- a/net/data/path_builder_unittest/validity_date_prioritization/generate-certs.py
-+++ b/net/data/path_builder_unittest/validity_date_prioritization/generate-certs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/ssl/root_stores/update_root_stores.py b/net/data/ssl/root_stores/update_root_stores.py
-index 8aca424..34d52f3 100755
---- a/net/data/ssl/root_stores/update_root_stores.py
-+++ b/net/data/ssl/root_stores/update_root_stores.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/ssl/scripts/crlsetutil.py b/net/data/ssl/scripts/crlsetutil.py
-index 815fa9c..855ab60 100755
---- a/net/data/ssl/scripts/crlsetutil.py
-+++ b/net/data/ssl/scripts/crlsetutil.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/trial_comparison_cert_verifier_unittest/target-multiple-policies/generate-chains.py b/net/data/trial_comparison_cert_verifier_unittest/target-multiple-policies/generate-chains.py
-index f64ad82..bb6b9b0 100755
---- a/net/data/trial_comparison_cert_verifier_unittest/target-multiple-policies/generate-chains.py
-+++ b/net/data/trial_comparison_cert_verifier_unittest/target-multiple-policies/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/basic-constraints-pathlen-0-self-issued/generate-chains.py b/net/data/verify_certificate_chain_unittest/basic-constraints-pathlen-0-self-issued/generate-chains.py
-index 80b1adc..d7454ad 100755
---- a/net/data/verify_certificate_chain_unittest/basic-constraints-pathlen-0-self-issued/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/basic-constraints-pathlen-0-self-issued/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/expired-intermediate/generate-chains.py b/net/data/verify_certificate_chain_unittest/expired-intermediate/generate-chains.py
-index cb57783..b642d4d 100755
---- a/net/data/verify_certificate_chain_unittest/expired-intermediate/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/expired-intermediate/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/expired-root/generate-chains.py b/net/data/verify_certificate_chain_unittest/expired-root/generate-chains.py
-index bf82aec..fe83f6f 100755
---- a/net/data/verify_certificate_chain_unittest/expired-root/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/expired-root/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/expired-target/generate-chains.py b/net/data/verify_certificate_chain_unittest/expired-target/generate-chains.py
-index 21f1262..b5db870 100755
---- a/net/data/verify_certificate_chain_unittest/expired-target/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/expired-target/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/incorrect-trust-anchor/generate-chains.py b/net/data/verify_certificate_chain_unittest/incorrect-trust-anchor/generate-chains.py
-index 9ef1006..abd2004 100755
---- a/net/data/verify_certificate_chain_unittest/incorrect-trust-anchor/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/incorrect-trust-anchor/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-and-target-wrong-signature/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-and-target-wrong-signature/generate-chains.py
-index b25ee5f..2ba609b 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-and-target-wrong-signature/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-and-target-wrong-signature/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-ca-false/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-ca-false/generate-chains.py
-index f22f67e..7cafd28 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-ca-false/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-ca-false/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-not-critical/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-not-critical/generate-chains.py
-index dc41309..d993dc5 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-not-critical/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-basic-constraints-not-critical/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-eku-any-and-clientauth/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-eku-any-and-clientauth/generate-chains.py
-index 7c899e1..7d1c574 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-eku-any-and-clientauth/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-eku-any-and-clientauth/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-eku-clientauth/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-eku-clientauth/generate-chains.py
-index 0ea231a..1ccf17c 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-eku-clientauth/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-eku-clientauth/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-eku-server-gated-crypto/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-eku-server-gated-crypto/generate-chains.py
-index 924f9a3..deca8cf 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-eku-server-gated-crypto/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-eku-server-gated-crypto/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-lacks-basic-constraints/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-lacks-basic-constraints/generate-chains.py
-index cdb714f..ed7b7b0 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-lacks-basic-constraints/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-lacks-basic-constraints/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-lacks-signing-key-usage/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-lacks-signing-key-usage/generate-chains.py
-index 141bdf6..fea4e24 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-lacks-signing-key-usage/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-lacks-signing-key-usage/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-signed-with-md5/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-signed-with-md5/generate-chains.py
-index 00386df..da53067 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-signed-with-md5/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-signed-with-md5/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-unknown-critical-extension/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-unknown-critical-extension/generate-chains.py
-index 373d830..f4e7401 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-unknown-critical-extension/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-unknown-critical-extension/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-unknown-non-critical-extension/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-unknown-non-critical-extension/generate-chains.py
-index a17adcb..6ace17c 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-unknown-non-critical-extension/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-unknown-non-critical-extension/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/intermediate-wrong-signature-no-authority-key-identifier/generate-chains.py b/net/data/verify_certificate_chain_unittest/intermediate-wrong-signature-no-authority-key-identifier/generate-chains.py
-index be31158..2c180d8 100755
---- a/net/data/verify_certificate_chain_unittest/intermediate-wrong-signature-no-authority-key-identifier/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/intermediate-wrong-signature-no-authority-key-identifier/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/key-rollover/generate-chains.py b/net/data/verify_certificate_chain_unittest/key-rollover/generate-chains.py
-index ad25c14..a5f36af 100755
---- a/net/data/verify_certificate_chain_unittest/key-rollover/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/key-rollover/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/many-names/generate-chains.py b/net/data/verify_certificate_chain_unittest/many-names/generate-chains.py
-index 7569278..22fcbf7 100755
---- a/net/data/verify_certificate_chain_unittest/many-names/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/many-names/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/non-self-signed-root/generate-chains.py b/net/data/verify_certificate_chain_unittest/non-self-signed-root/generate-chains.py
-index 1fd1e48..83ba2d5 100755
---- a/net/data/verify_certificate_chain_unittest/non-self-signed-root/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/non-self-signed-root/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/rebase-errors.py b/net/data/verify_certificate_chain_unittest/rebase-errors.py
-index ec3fa2b..bcbe186 100755
---- a/net/data/verify_certificate_chain_unittest/rebase-errors.py
-+++ b/net/data/verify_certificate_chain_unittest/rebase-errors.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/root-basic-constraints-ca-false/generate-chains.py b/net/data/verify_certificate_chain_unittest/root-basic-constraints-ca-false/generate-chains.py
-index ad5ad8c..52c932e 100755
---- a/net/data/verify_certificate_chain_unittest/root-basic-constraints-ca-false/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/root-basic-constraints-ca-false/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/root-eku-clientauth/generate-chains.py b/net/data/verify_certificate_chain_unittest/root-eku-clientauth/generate-chains.py
-index b211377..7717eab 100755
---- a/net/data/verify_certificate_chain_unittest/root-eku-clientauth/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/root-eku-clientauth/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/root-lacks-basic-constraints/generate-chains.py b/net/data/verify_certificate_chain_unittest/root-lacks-basic-constraints/generate-chains.py
-index bfba89a..50323e5 100755
---- a/net/data/verify_certificate_chain_unittest/root-lacks-basic-constraints/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/root-lacks-basic-constraints/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-and-intermediate/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-and-intermediate/generate-chains.py
-index 0430f2b..bfc1d1b 100755
---- a/net/data/verify_certificate_chain_unittest/target-and-intermediate/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-and-intermediate/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-eku-clientauth/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-eku-clientauth/generate-chains.py
-index f9cc43e..2067b5b 100755
---- a/net/data/verify_certificate_chain_unittest/target-eku-clientauth/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-eku-clientauth/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-eku-none/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-eku-none/generate-chains.py
-index 427268d..dbd7a1b 100755
---- a/net/data/verify_certificate_chain_unittest/target-eku-none/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-eku-none/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-has-512bit-rsa-key/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-has-512bit-rsa-key/generate-chains.py
-index 20eb22c..b45c454 100755
---- a/net/data/verify_certificate_chain_unittest/target-has-512bit-rsa-key/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-has-512bit-rsa-key/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-has-keycertsign-but-not-ca/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-has-keycertsign-but-not-ca/generate-chains.py
-index 983355c..07cbb25 100755
---- a/net/data/verify_certificate_chain_unittest/target-has-keycertsign-but-not-ca/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-has-keycertsign-but-not-ca/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-has-pathlen-but-not-ca/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-has-pathlen-but-not-ca/generate-chains.py
-index e680e54..b3e1ab9 100755
---- a/net/data/verify_certificate_chain_unittest/target-has-pathlen-but-not-ca/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-has-pathlen-but-not-ca/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-not-end-entity/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-not-end-entity/generate-chains.py
-index 5da823b..12a8a71 100755
---- a/net/data/verify_certificate_chain_unittest/target-not-end-entity/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-not-end-entity/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-serverauth-various-keyusages/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-serverauth-various-keyusages/generate-chains.py
-index 57a581d..77de46f 100755
---- a/net/data/verify_certificate_chain_unittest/target-serverauth-various-keyusages/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-serverauth-various-keyusages/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-signed-by-512bit-rsa/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-signed-by-512bit-rsa/generate-chains.py
-index 7a9771e..655a1ca 100755
---- a/net/data/verify_certificate_chain_unittest/target-signed-by-512bit-rsa/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-signed-by-512bit-rsa/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-signed-using-ecdsa/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-signed-using-ecdsa/generate-chains.py
-index adffebd..d44bd23 100755
---- a/net/data/verify_certificate_chain_unittest/target-signed-using-ecdsa/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-signed-using-ecdsa/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-signed-with-md5/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-signed-with-md5/generate-chains.py
-index 9c2ef2c..7fc8d2c 100755
---- a/net/data/verify_certificate_chain_unittest/target-signed-with-md5/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-signed-with-md5/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-unknown-critical-extension/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-unknown-critical-extension/generate-chains.py
-index caf6df4..02da3a4 100755
---- a/net/data/verify_certificate_chain_unittest/target-unknown-critical-extension/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-unknown-critical-extension/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-wrong-signature-no-authority-key-identifier/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-wrong-signature-no-authority-key-identifier/generate-chains.py
-index 4db1753..a8647fa 100755
---- a/net/data/verify_certificate_chain_unittest/target-wrong-signature-no-authority-key-identifier/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-wrong-signature-no-authority-key-identifier/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/target-wrong-signature/generate-chains.py b/net/data/verify_certificate_chain_unittest/target-wrong-signature/generate-chains.py
-index b8d932b..298ef06 100755
---- a/net/data/verify_certificate_chain_unittest/target-wrong-signature/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/target-wrong-signature/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/unknown-critical-policy-qualifier/generate-chains.py b/net/data/verify_certificate_chain_unittest/unknown-critical-policy-qualifier/generate-chains.py
-index 1319c94..dc0aa1b 100755
---- a/net/data/verify_certificate_chain_unittest/unknown-critical-policy-qualifier/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/unknown-critical-policy-qualifier/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/unknown-non-critical-policy-qualifier/generate-chains.py b/net/data/verify_certificate_chain_unittest/unknown-non-critical-policy-qualifier/generate-chains.py
-index c0d5082..e0e0cad 100755
---- a/net/data/verify_certificate_chain_unittest/unknown-non-critical-policy-qualifier/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/unknown-non-critical-policy-qualifier/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/violates-basic-constraints-pathlen-0/generate-chains.py b/net/data/verify_certificate_chain_unittest/violates-basic-constraints-pathlen-0/generate-chains.py
-index 42e84e5..a9babfc 100755
---- a/net/data/verify_certificate_chain_unittest/violates-basic-constraints-pathlen-0/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/violates-basic-constraints-pathlen-0/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_certificate_chain_unittest/violates-pathlen-1-from-root/generate-chains.py b/net/data/verify_certificate_chain_unittest/violates-pathlen-1-from-root/generate-chains.py
-index 50fa1e1..cf7e3c4 100755
---- a/net/data/verify_certificate_chain_unittest/violates-pathlen-1-from-root/generate-chains.py
-+++ b/net/data/verify_certificate_chain_unittest/violates-pathlen-1-from-root/generate-chains.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_name_match_unittest/scripts/generate_names.py b/net/data/verify_name_match_unittest/scripts/generate_names.py
-index ed509ce..aba6143 100755
---- a/net/data/verify_name_match_unittest/scripts/generate_names.py
-+++ b/net/data/verify_name_match_unittest/scripts/generate_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/data/verify_signed_data_unittest/annotate_test_data.py b/net/data/verify_signed_data_unittest/annotate_test_data.py
-index 733392e..f4c1a8c 100755
---- a/net/data/verify_signed_data_unittest/annotate_test_data.py
-+++ b/net/data/verify_signed_data_unittest/annotate_test_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/docs/generate-dot-to-png.py b/net/docs/generate-dot-to-png.py
-index 15447eb..bb9469e 100755
---- a/net/docs/generate-dot-to-png.py
-+++ b/net/docs/generate-dot-to-png.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/build_hpack_constants.py b/net/tools/build_hpack_constants.py
-index 3111078..e91eb88 100755
---- a/net/tools/build_hpack_constants.py
-+++ b/net/tools/build_hpack_constants.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/net/tools/dafsa/make_dafsa.py b/net/tools/dafsa/make_dafsa.py
-index 0461f09..f97056e 100755
---- a/net/tools/dafsa/make_dafsa.py
-+++ b/net/tools/dafsa/make_dafsa.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/dafsa/make_dafsa_unittest.py b/net/tools/dafsa/make_dafsa_unittest.py
-index b3519cf..911444d 100755
---- a/net/tools/dafsa/make_dafsa_unittest.py
-+++ b/net/tools/dafsa/make_dafsa_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/net_docs/net_docs.py b/net/tools/net_docs/net_docs.py
-index 2dd30de..7747651 100755
---- a/net/tools/net_docs/net_docs.py
-+++ b/net/tools/net_docs/net_docs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/print_certificates.py b/net/tools/print_certificates.py
-index 5a05187..8587db7 100755
---- a/net/tools/print_certificates.py
-+++ b/net/tools/print_certificates.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/quic/benchmark/run_client.py b/net/tools/quic/benchmark/run_client.py
-index 7df37ab..fe20e28 100755
---- a/net/tools/quic/benchmark/run_client.py
-+++ b/net/tools/quic/benchmark/run_client.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/net/tools/stitch_net_log_files.py b/net/tools/stitch_net_log_files.py
-index d81d792..1df4b26 100755
---- a/net/tools/stitch_net_log_files.py
-+++ b/net/tools/stitch_net_log_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/testserver/backoff_server.py b/net/tools/testserver/backoff_server.py
-index ca2c57c..f2f5769 100755
---- a/net/tools/testserver/backoff_server.py
-+++ b/net/tools/testserver/backoff_server.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/truncate_net_log.py b/net/tools/truncate_net_log.py
-index 1841b08..450a5a5 100755
---- a/net/tools/truncate_net_log.py
-+++ b/net/tools/truncate_net_log.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/net/tools/update_ios_bundle_data.py b/net/tools/update_ios_bundle_data.py
-index 32cf0fd..e9dd04d 100755
---- a/net/tools/update_ios_bundle_data.py
-+++ b/net/tools/update_ios_bundle_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/c/documentation/doxy_cleanup.py b/ppapi/c/documentation/doxy_cleanup.py
-index be94342..d28b201 100755
---- a/ppapi/c/documentation/doxy_cleanup.py
-+++ b/ppapi/c/documentation/doxy_cleanup.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/ppapi/cpp/documentation/doxy_cleanup.py b/ppapi/cpp/documentation/doxy_cleanup.py
-index fbbc2f6..4a22066 100755
---- a/ppapi/cpp/documentation/doxy_cleanup.py
-+++ b/ppapi/cpp/documentation/doxy_cleanup.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generate_ppapi_include_tests.py b/ppapi/generate_ppapi_include_tests.py
-index f690f3e..c26829c 100755
---- a/ppapi/generate_ppapi_include_tests.py
-+++ b/ppapi/generate_ppapi_include_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generate_ppapi_size_checks.py b/ppapi/generate_ppapi_size_checks.py
-index a2b8e7d..fd325dc 100755
---- a/ppapi/generate_ppapi_size_checks.py
-+++ b/ppapi/generate_ppapi_size_checks.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/generator.py b/ppapi/generators/generator.py
-index 702bc1b..33f3e70 100755
---- a/ppapi/generators/generator.py
-+++ b/ppapi/generators/generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_c_header.py b/ppapi/generators/idl_c_header.py
-index d597f71..484664a 100755
---- a/ppapi/generators/idl_c_header.py
-+++ b/ppapi/generators/idl_c_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_c_proto.py b/ppapi/generators/idl_c_proto.py
-index 8404b79..5847fa5 100755
---- a/ppapi/generators/idl_c_proto.py
-+++ b/ppapi/generators/idl_c_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_diff.py b/ppapi/generators/idl_diff.py
-index 7fd83cb..6ca4bd3 100755
---- a/ppapi/generators/idl_diff.py
-+++ b/ppapi/generators/idl_diff.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_gen_pnacl.py b/ppapi/generators/idl_gen_pnacl.py
-index dd1ce0c..c9edd48 100755
---- a/ppapi/generators/idl_gen_pnacl.py
-+++ b/ppapi/generators/idl_gen_pnacl.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_generator.py b/ppapi/generators/idl_generator.py
-index 0477100..eab096b 100755
---- a/ppapi/generators/idl_generator.py
-+++ b/ppapi/generators/idl_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_lexer.py b/ppapi/generators/idl_lexer.py
-index 1c9492e..ed73c36 100755
---- a/ppapi/generators/idl_lexer.py
-+++ b/ppapi/generators/idl_lexer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_namespace.py b/ppapi/generators/idl_namespace.py
-index 5630ae2..9fd0c5a 100755
---- a/ppapi/generators/idl_namespace.py
-+++ b/ppapi/generators/idl_namespace.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_node.py b/ppapi/generators/idl_node.py
-index feeb430..2c18605 100755
---- a/ppapi/generators/idl_node.py
-+++ b/ppapi/generators/idl_node.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_outfile.py b/ppapi/generators/idl_outfile.py
-index 9b830ad..69a719a 100755
---- a/ppapi/generators/idl_outfile.py
-+++ b/ppapi/generators/idl_outfile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_parser.py b/ppapi/generators/idl_parser.py
-index fdd5e88..ede83c6 100755
---- a/ppapi/generators/idl_parser.py
-+++ b/ppapi/generators/idl_parser.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_propertynode.py b/ppapi/generators/idl_propertynode.py
-index 9152ed7..39aa552 100755
---- a/ppapi/generators/idl_propertynode.py
-+++ b/ppapi/generators/idl_propertynode.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_release.py b/ppapi/generators/idl_release.py
-index ce95ec8..105b9e1 100755
---- a/ppapi/generators/idl_release.py
-+++ b/ppapi/generators/idl_release.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_tests.py b/ppapi/generators/idl_tests.py
-index 7b732bc..ad327d4 100755
---- a/ppapi/generators/idl_tests.py
-+++ b/ppapi/generators/idl_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/generators/idl_thunk.py b/ppapi/generators/idl_thunk.py
-index ff7bdfd..aacffda 100755
---- a/ppapi/generators/idl_thunk.py
-+++ b/ppapi/generators/idl_thunk.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/irt_debuglink.py b/ppapi/native_client/irt_debuglink.py
-index a68b67b..496d48e 100755
---- a/ppapi/native_client/irt_debuglink.py
-+++ b/ppapi/native_client/irt_debuglink.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/src/untrusted/pnacl_support_extension/pnacl_component_crx_gen.py b/ppapi/native_client/src/untrusted/pnacl_support_extension/pnacl_component_crx_gen.py
-index 9d2257c..7c143cb 100755
---- a/ppapi/native_client/src/untrusted/pnacl_support_extension/pnacl_component_crx_gen.py
-+++ b/ppapi/native_client/src/untrusted/pnacl_support_extension/pnacl_component_crx_gen.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/tests/breakpad_crash_test/crash_dump_tester.py b/ppapi/native_client/tests/breakpad_crash_test/crash_dump_tester.py
-index deb336f..ad14104 100755
---- a/ppapi/native_client/tests/breakpad_crash_test/crash_dump_tester.py
-+++ b/ppapi/native_client/tests/breakpad_crash_test/crash_dump_tester.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/tools/browser_tester/browser_tester.py b/ppapi/native_client/tools/browser_tester/browser_tester.py
-index c9b7ce6..adf5335 100755
---- a/ppapi/native_client/tools/browser_tester/browser_tester.py
-+++ b/ppapi/native_client/tools/browser_tester/browser_tester.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/tools/browser_tester/browsertester/browserlauncher.py b/ppapi/native_client/tools/browser_tester/browsertester/browserlauncher.py
-index dd94434..28681fd 100755
---- a/ppapi/native_client/tools/browser_tester/browsertester/browserlauncher.py
-+++ b/ppapi/native_client/tools/browser_tester/browsertester/browserlauncher.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/tools/browser_tester/browsertester/browserprocess.py b/ppapi/native_client/tools/browser_tester/browsertester/browserprocess.py
-index d012eb2..a541fd5 100755
---- a/ppapi/native_client/tools/browser_tester/browsertester/browserprocess.py
-+++ b/ppapi/native_client/tools/browser_tester/browsertester/browserprocess.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/native_client/tools/browser_tester/browsertester/rpclistener.py b/ppapi/native_client/tools/browser_tester/browsertester/rpclistener.py
-index 5003f1f..8050ea9 100755
---- a/ppapi/native_client/tools/browser_tester/browsertester/rpclistener.py
-+++ b/ppapi/native_client/tools/browser_tester/browsertester/rpclistener.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ppapi/tests/create_nonsfi_test_nmf.py b/ppapi/tests/create_nonsfi_test_nmf.py
-index a2a8f9f..aaf3cbe 100755
---- a/ppapi/tests/create_nonsfi_test_nmf.py
-+++ b/ppapi/tests/create_nonsfi_test_nmf.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/printing/backend/tools/code_generator.py b/printing/backend/tools/code_generator.py
-index 3951c6b..fde61eb 100755
---- a/printing/backend/tools/code_generator.py
-+++ b/printing/backend/tools/code_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/printing/cups_config_helper.py b/printing/cups_config_helper.py
-index 373c244..cca0367 100755
---- a/printing/cups_config_helper.py
-+++ b/printing/cups_config_helper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/host/installer/build-installer-archive.py b/remoting/host/installer/build-installer-archive.py
-index 90828eb..18f63dd 100755
---- a/remoting/host/installer/build-installer-archive.py
-+++ b/remoting/host/installer/build-installer-archive.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/build/remoting_copy_locales.py b/remoting/tools/build/remoting_copy_locales.py
-index 7a53251..2c3158a 100755
---- a/remoting/tools/build/remoting_copy_locales.py
-+++ b/remoting/tools/build/remoting_copy_locales.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/build/remoting_ios_localize.py b/remoting/tools/build/remoting_ios_localize.py
-index bc4ddc4..af21b31 100755
---- a/remoting/tools/build/remoting_ios_localize.py
-+++ b/remoting/tools/build/remoting_ios_localize.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/build/remoting_localize.py b/remoting/tools/build/remoting_localize.py
-index 0942fd1..904e0f3 100755
---- a/remoting/tools/build/remoting_localize.py
-+++ b/remoting/tools/build/remoting_localize.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/build/shader_to_header.py b/remoting/tools/build/shader_to_header.py
-index 309c58c..bc98fdb 100755
---- a/remoting/tools/build/shader_to_header.py
-+++ b/remoting/tools/build/shader_to_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/extract_android_native_lib.py b/remoting/tools/extract_android_native_lib.py
-index 6ef2023..685fa80 100755
---- a/remoting/tools/extract_android_native_lib.py
-+++ b/remoting/tools/extract_android_native_lib.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/remoting/tools/jscompile.py b/remoting/tools/jscompile.py
-index 0f06964..3d004bd 100755
---- a/remoting/tools/jscompile.py
-+++ b/remoting/tools/jscompile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/native_messaging_host_test.py b/remoting/tools/native_messaging_host_test.py
-index 5ed6777..7b04735 100755
---- a/remoting/tools/native_messaging_host_test.py
-+++ b/remoting/tools/native_messaging_host_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/remove_spaces.py b/remoting/tools/remove_spaces.py
-index 953ac17..e3b9de5 100755
---- a/remoting/tools/remove_spaces.py
-+++ b/remoting/tools/remove_spaces.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/remoting/tools/runclient.py b/remoting/tools/runclient.py
-index 76e1af2..2c96ea9 100755
---- a/remoting/tools/runclient.py
-+++ b/remoting/tools/runclient.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/verify_resources.py b/remoting/tools/verify_resources.py
-index 871c0fa..940f512 100755
---- a/remoting/tools/verify_resources.py
-+++ b/remoting/tools/verify_resources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/remoting/tools/zip2msi.py b/remoting/tools/zip2msi.py
-index e2e2537..58f755e 100755
---- a/remoting/tools/zip2msi.py
-+++ b/remoting/tools/zip2msi.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/sandbox/policy/mac/package_sb_file.py b/sandbox/policy/mac/package_sb_file.py
-index f5048b7..363cfb5 100755
---- a/sandbox/policy/mac/package_sb_file.py
-+++ b/sandbox/policy/mac/package_sb_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/styleguide/c++/chromium-cpp/main.py b/styleguide/c++/chromium-cpp/main.py
-index aef55ab..6c23c47 100755
---- a/styleguide/c++/chromium-cpp/main.py
-+++ b/styleguide/c++/chromium-cpp/main.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/testing/chromoting/browser_test_commands_linux.txt b/testing/chromoting/browser_test_commands_linux.txt
-index df1a6fd..6687b5e 100644
---- a/testing/chromoting/browser_test_commands_linux.txt
-+++ b/testing/chromoting/browser_test_commands_linux.txt
-@@ -1,3 +1,3 @@
--/usr/bin/python ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=RemoteDesktopBrowserTest.MANUAL_Launch:RemoteDesktopBrowserTest.MANUAL_Auth --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail
--/usr/bin/python ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=Me2MeBrowserTest.MANUAL_Me2Me_Connect_Remote_Host --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail --me2me-pin=123456 --override-user-data-dir=/tmp/chromoting_test_profile --remote-host-name=crd-precise.kir.corp.google.com
--/usr/bin/python ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=It2MeBrowserTest.MANUAL_CancelShare --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail --override-user-data-dir=/tmp/chromoting_test_profile
-+/usr/bin/python2 ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=RemoteDesktopBrowserTest.MANUAL_Launch:RemoteDesktopBrowserTest.MANUAL_Auth --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail
-+/usr/bin/python2 ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=Me2MeBrowserTest.MANUAL_Me2Me_Connect_Remote_Host --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail --me2me-pin=123456 --override-user-data-dir=/tmp/chromoting_test_profile --remote-host-name=crd-precise.kir.corp.google.com
-+/usr/bin/python2 ../xvfb.py #PROD_DIR#/browser_tests --gtest_filter=It2MeBrowserTest.MANUAL_CancelShare --run-manual --ui-test-action-timeout=100000 --webapp-unpacked=#PROD_DIR#/remoting/remoting.webapp.v2 --extension-name=Chromoting --accounts-file=../../remoting/tools/internal/test_accounts.json --account-type=gmail --override-user-data-dir=/tmp/chromoting_test_profile
-diff --git a/testing/libfuzzer/fuzzers/generate_javascript_parser_proto.py b/testing/libfuzzer/fuzzers/generate_javascript_parser_proto.py
-index a2bac4f..7f82bcc 100755
---- a/testing/libfuzzer/fuzzers/generate_javascript_parser_proto.py
-+++ b/testing/libfuzzer/fuzzers/generate_javascript_parser_proto.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/testing/libfuzzer/fuzzers/generate_v8_inspector_fuzzer_corpus.py b/testing/libfuzzer/fuzzers/generate_v8_inspector_fuzzer_corpus.py
-index e86eda8..3d31e14 100755
---- a/testing/libfuzzer/fuzzers/generate_v8_inspector_fuzzer_corpus.py
-+++ b/testing/libfuzzer/fuzzers/generate_v8_inspector_fuzzer_corpus.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/code_coverage/merge_results.py b/testing/merge_scripts/code_coverage/merge_results.py
-index bd5870a..0e2e2a9 100755
---- a/testing/merge_scripts/code_coverage/merge_results.py
-+++ b/testing/merge_scripts/code_coverage/merge_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/code_coverage/merge_steps.py b/testing/merge_scripts/code_coverage/merge_steps.py
-index d93736e..6ab6a09 100755
---- a/testing/merge_scripts/code_coverage/merge_steps.py
-+++ b/testing/merge_scripts/code_coverage/merge_steps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/noop_merge.py b/testing/merge_scripts/noop_merge.py
-index f7a93cd..e1a18da 100755
---- a/testing/merge_scripts/noop_merge.py
-+++ b/testing/merge_scripts/noop_merge.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/noop_merge_test.py b/testing/merge_scripts/noop_merge_test.py
-index 4cda1bf..6b29a47 100755
---- a/testing/merge_scripts/noop_merge_test.py
-+++ b/testing/merge_scripts/noop_merge_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/perf_results.py b/testing/merge_scripts/perf_results.py
-index ded9131..47ddc4c 100755
---- a/testing/merge_scripts/perf_results.py
-+++ b/testing/merge_scripts/perf_results.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/results_merger.py b/testing/merge_scripts/results_merger.py
-index 3b23d82..3c81363 100755
---- a/testing/merge_scripts/results_merger.py
-+++ b/testing/merge_scripts/results_merger.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/standard_gtest_merge.py b/testing/merge_scripts/standard_gtest_merge.py
-index 99adf7b..df6d0d8 100755
---- a/testing/merge_scripts/standard_gtest_merge.py
-+++ b/testing/merge_scripts/standard_gtest_merge.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/merge_scripts/standard_isolated_script_merge.py b/testing/merge_scripts/standard_isolated_script_merge.py
-index cd4829a..d46a7d2 100755
---- a/testing/merge_scripts/standard_isolated_script_merge.py
-+++ b/testing/merge_scripts/standard_isolated_script_merge.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/run_with_dummy_home.py b/testing/run_with_dummy_home.py
-index 3d28e06..3f9aa9c 100755
---- a/testing/run_with_dummy_home.py
-+++ b/testing/run_with_dummy_home.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/blink_lint_expectations.py b/testing/scripts/blink_lint_expectations.py
-index 9cdc5f7..0a7ccf3 100755
---- a/testing/scripts/blink_lint_expectations.py
-+++ b/testing/scripts/blink_lint_expectations.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/blink_python_tests.py b/testing/scripts/blink_python_tests.py
-index c7f14e6..4647c8b 100755
---- a/testing/scripts/blink_python_tests.py
-+++ b/testing/scripts/blink_python_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/check_gn_headers.py b/testing/scripts/check_gn_headers.py
-index 6530ada..a637971 100755
---- a/testing/scripts/check_gn_headers.py
-+++ b/testing/scripts/check_gn_headers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/check_network_annotations.py b/testing/scripts/check_network_annotations.py
-index 3d1e815..6b99016 100755
---- a/testing/scripts/check_network_annotations.py
-+++ b/testing/scripts/check_network_annotations.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/check_static_initializers.py b/testing/scripts/check_static_initializers.py
-index e8f3be4..77595d0 100755
---- a/testing/scripts/check_static_initializers.py
-+++ b/testing/scripts/check_static_initializers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/checkbins.py b/testing/scripts/checkbins.py
-index b5174c9..e17830b 100755
---- a/testing/scripts/checkbins.py
-+++ b/testing/scripts/checkbins.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/checkdeps.py b/testing/scripts/checkdeps.py
-index d6140da..900cfdb 100755
---- a/testing/scripts/checkdeps.py
-+++ b/testing/scripts/checkdeps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/checklicenses.py b/testing/scripts/checklicenses.py
-index 43342d0..c79f427 100755
---- a/testing/scripts/checklicenses.py
-+++ b/testing/scripts/checklicenses.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/checkperms.py b/testing/scripts/checkperms.py
-index 17e32c4..aa7f31a 100755
---- a/testing/scripts/checkperms.py
-+++ b/testing/scripts/checkperms.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/content_shell_crash_test.py b/testing/scripts/content_shell_crash_test.py
-index 70a5a0d..4d37dbd 100755
---- a/testing/scripts/content_shell_crash_test.py
-+++ b/testing/scripts/content_shell_crash_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/get_compile_targets.py b/testing/scripts/get_compile_targets.py
-index 8f3c6ae..6c0c0f9 100755
---- a/testing/scripts/get_compile_targets.py
-+++ b/testing/scripts/get_compile_targets.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/grit_python_unittests.py b/testing/scripts/grit_python_unittests.py
-index 532e4b1..bc7a32c 100755
---- a/testing/scripts/grit_python_unittests.py
-+++ b/testing/scripts/grit_python_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/headless_python_unittests.py b/testing/scripts/headless_python_unittests.py
-index 05a2f94..e392f8f 100755
---- a/testing/scripts/headless_python_unittests.py
-+++ b/testing/scripts/headless_python_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/host_info.py b/testing/scripts/host_info.py
-index 6aa9b8a..604e611 100755
---- a/testing/scripts/host_info.py
-+++ b/testing/scripts/host_info.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_chromedriver_tests.py b/testing/scripts/run_chromedriver_tests.py
-index 5abcf74..87ff78f 100755
---- a/testing/scripts/run_chromedriver_tests.py
-+++ b/testing/scripts/run_chromedriver_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_devtools_check.py b/testing/scripts/run_devtools_check.py
-index 5c1302c..920ac45 100755
---- a/testing/scripts/run_devtools_check.py
-+++ b/testing/scripts/run_devtools_check.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_flatbuffers_unittests.py b/testing/scripts/run_flatbuffers_unittests.py
-index 69436b4..186c35f 100755
---- a/testing/scripts/run_flatbuffers_unittests.py
-+++ b/testing/scripts/run_flatbuffers_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_gpu_integration_test_as_googletest.py b/testing/scripts/run_gpu_integration_test_as_googletest.py
-index fd48ec4..769bd78 100755
---- a/testing/scripts/run_gpu_integration_test_as_googletest.py
-+++ b/testing/scripts/run_gpu_integration_test_as_googletest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_isolated_script_test.py b/testing/scripts/run_isolated_script_test.py
-index 09b99d5..6c7d78f 100755
---- a/testing/scripts/run_isolated_script_test.py
-+++ b/testing/scripts/run_isolated_script_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_performance_tests.py b/testing/scripts/run_performance_tests.py
-index 4c23f81..185b109 100755
---- a/testing/scripts/run_performance_tests.py
-+++ b/testing/scripts/run_performance_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/run_rendering_benchmark_with_gated_performance.py b/testing/scripts/run_rendering_benchmark_with_gated_performance.py
-index 0721aeb..6e5bea6 100755
---- a/testing/scripts/run_rendering_benchmark_with_gated_performance.py
-+++ b/testing/scripts/run_rendering_benchmark_with_gated_performance.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/test_buildbucket_api_gpu_use_cases.py b/testing/scripts/test_buildbucket_api_gpu_use_cases.py
-index 648d8d4..5f44144 100755
---- a/testing/scripts/test_buildbucket_api_gpu_use_cases.py
-+++ b/testing/scripts/test_buildbucket_api_gpu_use_cases.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/scripts/test_traffic_annotation_auditor.py b/testing/scripts/test_traffic_annotation_auditor.py
-index 26b5e76..8b32f86 100755
---- a/testing/scripts/test_traffic_annotation_auditor.py
-+++ b/testing/scripts/test_traffic_annotation_auditor.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/test_env.py b/testing/test_env.py
-index 6991349..80a9fed 100755
---- a/testing/test_env.py
-+++ b/testing/test_env.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/test_env_test_script.py b/testing/test_env_test_script.py
-index 4957ee6..3d80c24 100755
---- a/testing/test_env_test_script.py
-+++ b/testing/test_env_test_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/test_env_unittest.py b/testing/test_env_unittest.py
-index 707c65e..25b5714 100755
---- a/testing/test_env_unittest.py
-+++ b/testing/test_env_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/test_env_user_script.py b/testing/test_env_user_script.py
-index 1d94387..68992c7 100755
---- a/testing/test_env_user_script.py
-+++ b/testing/test_env_user_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/trigger_scripts/base_test_triggerer.py b/testing/trigger_scripts/base_test_triggerer.py
-index 8b18452..c5fb434 100755
---- a/testing/trigger_scripts/base_test_triggerer.py
-+++ b/testing/trigger_scripts/base_test_triggerer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/trigger_scripts/chromeos_device_trigger.py b/testing/trigger_scripts/chromeos_device_trigger.py
-index a3b5fe4..e653244 100755
---- a/testing/trigger_scripts/chromeos_device_trigger.py
-+++ b/testing/trigger_scripts/chromeos_device_trigger.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/trigger_scripts/perf_device_trigger.py b/testing/trigger_scripts/perf_device_trigger.py
-index f0d3bc5..7876f22 100755
---- a/testing/trigger_scripts/perf_device_trigger.py
-+++ b/testing/trigger_scripts/perf_device_trigger.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/xvfb_test_script.py b/testing/xvfb_test_script.py
-index e1dcdae..07e8f73 100755
---- a/testing/xvfb_test_script.py
-+++ b/testing/xvfb_test_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/testing/xvfb_unittest.py b/testing/xvfb_unittest.py
-index b84196f..431577f 100755
---- a/testing/xvfb_unittest.py
-+++ b/testing/xvfb_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/abseil-cpp/absl/copts/generate_copts.py b/third_party/abseil-cpp/absl/copts/generate_copts.py
-index 0e5dc9f..d2ad5a0 100755
---- a/third_party/abseil-cpp/absl/copts/generate_copts.py
-+++ b/third_party/abseil-cpp/absl/copts/generate_copts.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- """Generate Abseil compile compile option configs.
- 
- Usage: <path_to_absl>/copts/generate_copts.py
-diff --git a/third_party/abseil-cpp/conanfile.py b/third_party/abseil-cpp/conanfile.py
-index 926ec5c..62d24d3 100755
---- a/third_party/abseil-cpp/conanfile.py
-+++ b/third_party/abseil-cpp/conanfile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # -*- coding: utf-8 -*-
- 
- # Note: Conan is supported on a best-effort basis. Abseil doesn't use Conan
-diff --git a/third_party/abseil-cpp/generate_def_files.py b/third_party/abseil-cpp/generate_def_files.py
-index e9fc781..f14745e 100755
---- a/third_party/abseil-cpp/generate_def_files.py
-+++ b/third_party/abseil-cpp/generate_def_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # NOTE: This script requires python 3.
- 
-diff --git a/third_party/abseil-cpp/roll_abseil.py b/third_party/abseil-cpp/roll_abseil.py
-index 779f8b5..921dbec 100755
---- a/third_party/abseil-cpp/roll_abseil.py
-+++ b/third_party/abseil-cpp/roll_abseil.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # NOTE: This script requires python 3.
- 
-diff --git a/third_party/afl/update.py b/third_party/afl/update.py
-index 186d946..7b4125e 100755
---- a/third_party/afl/update.py
-+++ b/third_party/afl/update.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/bindings/scripts/aggregate_generated_bindings.py b/third_party/blink/renderer/bindings/scripts/aggregate_generated_bindings.py
-index 7128300..1c1df91 100755
---- a/third_party/blink/renderer/bindings/scripts/aggregate_generated_bindings.py
-+++ b/third_party/blink/renderer/bindings/scripts/aggregate_generated_bindings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright (C) 2009 Google Inc. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/bindings/scripts/compute_global_objects.py b/third_party/blink/renderer/bindings/scripts/compute_global_objects.py
-index 7fa1c02..27791f9 100755
---- a/third_party/blink/renderer/bindings/scripts/compute_global_objects.py
-+++ b/third_party/blink/renderer/bindings/scripts/compute_global_objects.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_individual.py b/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_individual.py
-index 72523c1..d670af3 100755
---- a/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_individual.py
-+++ b/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_individual.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_overall.py b/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_overall.py
-index 235cf0f..a810411 100755
---- a/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_overall.py
-+++ b/third_party/blink/renderer/bindings/scripts/compute_interfaces_info_overall.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/bindings/scripts/generate_event_interfaces.py b/third_party/blink/renderer/bindings/scripts/generate_event_interfaces.py
-index 32120e1..9fba4ac 100755
---- a/third_party/blink/renderer/bindings/scripts/generate_event_interfaces.py
-+++ b/third_party/blink/renderer/bindings/scripts/generate_event_interfaces.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/bindings/scripts/generate_global_constructors.py b/third_party/blink/renderer/bindings/scripts/generate_global_constructors.py
-index 87e6cbb..5c19e26 100755
---- a/third_party/blink/renderer/bindings/scripts/generate_global_constructors.py
-+++ b/third_party/blink/renderer/bindings/scripts/generate_global_constructors.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/bindings/scripts/generate_init_partial_interfaces.py b/third_party/blink/renderer/bindings/scripts/generate_init_partial_interfaces.py
-index fca4d56..427184a 100755
---- a/third_party/blink/renderer/bindings/scripts/generate_init_partial_interfaces.py
-+++ b/third_party/blink/renderer/bindings/scripts/generate_init_partial_interfaces.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/bindings/scripts/generate_origin_trial_features.py b/third_party/blink/renderer/bindings/scripts/generate_origin_trial_features.py
-index 04c0fab..b1e1ef5 100755
---- a/third_party/blink/renderer/bindings/scripts/generate_origin_trial_features.py
-+++ b/third_party/blink/renderer/bindings/scripts/generate_origin_trial_features.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/bindings/scripts/idl_compiler.py b/third_party/blink/renderer/bindings/scripts/idl_compiler.py
-index b11b89e..99fe544 100755
---- a/third_party/blink/renderer/bindings/scripts/idl_compiler.py
-+++ b/third_party/blink/renderer/bindings/scripts/idl_compiler.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/core/css/css_properties.py b/third_party/blink/renderer/build/scripts/core/css/css_properties.py
-index b779e07..5372524 100755
---- a/third_party/blink/renderer/build/scripts/core/css/css_properties.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/css_properties.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_css_primitive_value_unit_trie.py b/third_party/blink/renderer/build/scripts/core/css/make_css_primitive_value_unit_trie.py
-index 16edce1..f5c01f2 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_css_primitive_value_unit_trie.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_css_primitive_value_unit_trie.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_css_property_names.py b/third_party/blink/renderer/build/scripts/core/css/make_css_property_names.py
-index c6044f4..4b8ae11 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_css_property_names.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_css_property_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- from core.css import css_properties
- import gperf
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_css_tokenizer_codepoints.py b/third_party/blink/renderer/build/scripts/core/css/make_css_tokenizer_codepoints.py
-index 3c76325..c3b5492 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_css_tokenizer_codepoints.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_css_tokenizer_codepoints.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_css_value_id_mappings.py b/third_party/blink/renderer/build/scripts/core/css/make_css_value_id_mappings.py
-index 996b82d..e741f57 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_css_value_id_mappings.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_css_value_id_mappings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_css_value_keywords.py b/third_party/blink/renderer/build/scripts/core/css/make_css_value_keywords.py
-index eabb6ae..2a4558f 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_css_value_keywords.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_css_value_keywords.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- import subprocess
- from name_utilities import enum_key_for_css_keyword
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_cssom_types.py b/third_party/blink/renderer/build/scripts/core/css/make_cssom_types.py
-index ef5c5f5..4b3bb6a 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_cssom_types.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_cssom_types.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_media_feature_names.py b/third_party/blink/renderer/build/scripts/core/css/make_media_feature_names.py
-index 6ae5b44..987b80a 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_media_feature_names.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_media_feature_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_media_features.py b/third_party/blink/renderer/build/scripts/core/css/make_media_features.py
-index 5ea622f..2c88519 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_media_features.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_media_features.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/blink/renderer/build/scripts/core/css/make_style_shorthands.py b/third_party/blink/renderer/build/scripts/core/css/make_style_shorthands.py
-index 5f43ffa..edc3831 100755
---- a/third_party/blink/renderer/build/scripts/core/css/make_style_shorthands.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/make_style_shorthands.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Intel Corporation. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/core/css/parser/make_atrule_names.py b/third_party/blink/renderer/build/scripts/core/css/parser/make_atrule_names.py
-index 8ef5239..e556df9 100755
---- a/third_party/blink/renderer/build/scripts/core/css/parser/make_atrule_names.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/parser/make_atrule_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_instances.py b/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_instances.py
-index f72aade..c40610d 100755
---- a/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_instances.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_instances.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_subclasses.py b/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_subclasses.py
-index 2730c96..ebf6062 100755
---- a/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_subclasses.py
-+++ b/third_party/blink/renderer/build/scripts/core/css/properties/make_css_property_subclasses.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/style/make_computed_style_base.py b/third_party/blink/renderer/build/scripts/core/style/make_computed_style_base.py
-index 8956cc6..c74c329 100755
---- a/third_party/blink/renderer/build/scripts/core/style/make_computed_style_base.py
-+++ b/third_party/blink/renderer/build/scripts/core/style/make_computed_style_base.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/core/style/make_computed_style_initial_values.py b/third_party/blink/renderer/build/scripts/core/style/make_computed_style_initial_values.py
-index c596a09..365ae02 100755
---- a/third_party/blink/renderer/build/scripts/core/style/make_computed_style_initial_values.py
-+++ b/third_party/blink/renderer/build/scripts/core/style/make_computed_style_initial_values.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/in_file_unittest.py b/third_party/blink/renderer/build/scripts/in_file_unittest.py
-index eb93ee5..40e062a 100755
---- a/third_party/blink/renderer/build/scripts/in_file_unittest.py
-+++ b/third_party/blink/renderer/build/scripts/in_file_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_element_factory.py b/third_party/blink/renderer/build/scripts/make_element_factory.py
-index bb3e5f4..3442d69 100755
---- a/third_party/blink/renderer/build/scripts/make_element_factory.py
-+++ b/third_party/blink/renderer/build/scripts/make_element_factory.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_element_lookup_trie.py b/third_party/blink/renderer/build/scripts/make_element_lookup_trie.py
-index 8ae7e67..1acb1e4 100755
---- a/third_party/blink/renderer/build/scripts/make_element_lookup_trie.py
-+++ b/third_party/blink/renderer/build/scripts/make_element_lookup_trie.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_element_type_helpers.py b/third_party/blink/renderer/build/scripts/make_element_type_helpers.py
-index 29a43f3..b4f64d4 100755
---- a/third_party/blink/renderer/build/scripts/make_element_type_helpers.py
-+++ b/third_party/blink/renderer/build/scripts/make_element_type_helpers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/make_event_factory.py b/third_party/blink/renderer/build/scripts/make_event_factory.py
-index a7ceb45..5a5ae23 100755
---- a/third_party/blink/renderer/build/scripts/make_event_factory.py
-+++ b/third_party/blink/renderer/build/scripts/make_event_factory.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_html_entity_table.py b/third_party/blink/renderer/build/scripts/make_html_entity_table.py
-index f02bb2a..3a37d62 100755
---- a/third_party/blink/renderer/build/scripts/make_html_entity_table.py
-+++ b/third_party/blink/renderer/build/scripts/make_html_entity_table.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2010 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_internal_runtime_flags.py b/third_party/blink/renderer/build/scripts/make_internal_runtime_flags.py
-index 3ea26d7..6e69b0b 100755
---- a/third_party/blink/renderer/build/scripts/make_internal_runtime_flags.py
-+++ b/third_party/blink/renderer/build/scripts/make_internal_runtime_flags.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_internal_settings.py b/third_party/blink/renderer/build/scripts/make_internal_settings.py
-index 148fe6d..0d79341 100755
---- a/third_party/blink/renderer/build/scripts/make_internal_settings.py
-+++ b/third_party/blink/renderer/build/scripts/make_internal_settings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- # Copyright (C) 2013 Igalia S.L. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/build/scripts/make_names.py b/third_party/blink/renderer/build/scripts/make_names.py
-index 3f7520a..f893d72 100755
---- a/third_party/blink/renderer/build/scripts/make_names.py
-+++ b/third_party/blink/renderer/build/scripts/make_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_origin_trials.py b/third_party/blink/renderer/build/scripts/make_origin_trials.py
-index db5b93a..ce8cffc 100755
---- a/third_party/blink/renderer/build/scripts/make_origin_trials.py
-+++ b/third_party/blink/renderer/build/scripts/make_origin_trials.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2015 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_qualified_names.py b/third_party/blink/renderer/build/scripts/make_qualified_names.py
-index bb5c73e..20b2682 100755
---- a/third_party/blink/renderer/build/scripts/make_qualified_names.py
-+++ b/third_party/blink/renderer/build/scripts/make_qualified_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_runtime_features.py b/third_party/blink/renderer/build/scripts/make_runtime_features.py
-index 6925a4f..0ed90da 100755
---- a/third_party/blink/renderer/build/scripts/make_runtime_features.py
-+++ b/third_party/blink/renderer/build/scripts/make_runtime_features.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_settings.py b/third_party/blink/renderer/build/scripts/make_settings.py
-index 59e0a2b..d3e264a 100755
---- a/third_party/blink/renderer/build/scripts/make_settings.py
-+++ b/third_party/blink/renderer/build/scripts/make_settings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- # Copyright (C) 2013 Igalia S.L. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/build/scripts/make_style_builder.py b/third_party/blink/renderer/build/scripts/make_style_builder.py
-index bf88ea5..c1ed0d7 100755
---- a/third_party/blink/renderer/build/scripts/make_style_builder.py
-+++ b/third_party/blink/renderer/build/scripts/make_style_builder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (C) 2013 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/blink/renderer/build/scripts/make_web_origin_trials.py b/third_party/blink/renderer/build/scripts/make_web_origin_trials.py
-index d698f9c..35b7eff 100755
---- a/third_party/blink/renderer/build/scripts/make_web_origin_trials.py
-+++ b/third_party/blink/renderer/build/scripts/make_web_origin_trials.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/build/scripts/rule_bison.py b/third_party/blink/renderer/build/scripts/rule_bison.py
-index 26a7bb3..a782a84 100755
---- a/third_party/blink/renderer/build/scripts/rule_bison.py
-+++ b/third_party/blink/renderer/build/scripts/rule_bison.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright (C) 2009 Google Inc. All rights reserved.
- #
-diff --git a/third_party/blink/renderer/build/scripts/run_with_pythonpath.py b/third_party/blink/renderer/build/scripts/run_with_pythonpath.py
-index c6ea8aa..3fcf560 100755
---- a/third_party/blink/renderer/build/scripts/run_with_pythonpath.py
-+++ b/third_party/blink/renderer/build/scripts/run_with_pythonpath.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/blink/renderer/modules/sanitizer_api/build_corpus.py b/third_party/blink/renderer/modules/sanitizer_api/build_corpus.py
-index a62afe5..f9b00ab 100755
---- a/third_party/blink/renderer/modules/sanitizer_api/build_corpus.py
-+++ b/third_party/blink/renderer/modules/sanitizer_api/build_corpus.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2021 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/boringssl/roll_boringssl.py b/third_party/boringssl/roll_boringssl.py
-index 8de2eb1..261becd 100755
---- a/third_party/boringssl/roll_boringssl.py
-+++ b/third_party/boringssl/roll_boringssl.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/chromevox/third_party/closure-library/closure/bin/build/treescan.py b/third_party/chromevox/third_party/closure-library/closure/bin/build/treescan.py
-index 6694593..7676fc2 100755
---- a/third_party/chromevox/third_party/closure-library/closure/bin/build/treescan.py
-+++ b/third_party/chromevox/third_party/closure-library/closure/bin/build/treescan.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/gyp_crashpad.py b/third_party/crashpad/crashpad/build/gyp_crashpad.py
-index 41ab4b9..30e645c 100755
---- a/third_party/crashpad/crashpad/build/gyp_crashpad.py
-+++ b/third_party/crashpad/crashpad/build/gyp_crashpad.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/gyp_crashpad_android.py b/third_party/crashpad/crashpad/build/gyp_crashpad_android.py
-index baeadf9..2038922 100755
---- a/third_party/crashpad/crashpad/build/gyp_crashpad_android.py
-+++ b/third_party/crashpad/crashpad/build/gyp_crashpad_android.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/install_linux_sysroot.py b/third_party/crashpad/crashpad/build/install_linux_sysroot.py
-index 97f2c14..9d75fc0 100755
---- a/third_party/crashpad/crashpad/build/install_linux_sysroot.py
-+++ b/third_party/crashpad/crashpad/build/install_linux_sysroot.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/ios/convert_gn_xcodeproj.py b/third_party/crashpad/crashpad/build/ios/convert_gn_xcodeproj.py
-index d546279..3a245ad 100755
---- a/third_party/crashpad/crashpad/build/ios/convert_gn_xcodeproj.py
-+++ b/third_party/crashpad/crashpad/build/ios/convert_gn_xcodeproj.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/ios/setup_ios_gn.py b/third_party/crashpad/crashpad/build/ios/setup_ios_gn.py
-index 9522ce6..4765436 100755
---- a/third_party/crashpad/crashpad/build/ios/setup_ios_gn.py
-+++ b/third_party/crashpad/crashpad/build/ios/setup_ios_gn.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/build/run_tests.py b/third_party/crashpad/crashpad/build/run_tests.py
-index f48652f..017b729 100755
---- a/third_party/crashpad/crashpad/build/run_tests.py
-+++ b/third_party/crashpad/crashpad/build/run_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # coding: utf-8
- 
- # Copyright 2014 The Crashpad Authors. All rights reserved.
-diff --git a/third_party/crashpad/crashpad/doc/support/generate_doxygen.py b/third_party/crashpad/crashpad/doc/support/generate_doxygen.py
-index 577b51e..34f97a5 100755
---- a/third_party/crashpad/crashpad/doc/support/generate_doxygen.py
-+++ b/third_party/crashpad/crashpad/doc/support/generate_doxygen.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/snapshot/win/end_to_end_test.py b/third_party/crashpad/crashpad/snapshot/win/end_to_end_test.py
-index b1919ad..35b8121 100755
---- a/third_party/crashpad/crashpad/snapshot/win/end_to_end_test.py
-+++ b/third_party/crashpad/crashpad/snapshot/win/end_to_end_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2015 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/third_party/fuchsia/runner.py b/third_party/crashpad/crashpad/third_party/fuchsia/runner.py
-index 229d8a4..660b745 100755
---- a/third_party/crashpad/crashpad/third_party/fuchsia/runner.py
-+++ b/third_party/crashpad/crashpad/third_party/fuchsia/runner.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/util/mach/mig.py b/third_party/crashpad/crashpad/util/mach/mig.py
-index 53a7a5b..d43840f 100755
---- a/third_party/crashpad/crashpad/util/mach/mig.py
-+++ b/third_party/crashpad/crashpad/util/mach/mig.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2019 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/util/mach/mig_fix.py b/third_party/crashpad/crashpad/util/mach/mig_fix.py
-index 037746f..dd20bd7 100755
---- a/third_party/crashpad/crashpad/util/mach/mig_fix.py
-+++ b/third_party/crashpad/crashpad/util/mach/mig_fix.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # coding: utf-8
- 
- # Copyright 2019 The Crashpad Authors. All rights reserved.
-diff --git a/third_party/crashpad/crashpad/util/mach/mig_gen.py b/third_party/crashpad/crashpad/util/mach/mig_gen.py
-index 99b4f7e..5373158 100755
---- a/third_party/crashpad/crashpad/util/mach/mig_gen.py
-+++ b/third_party/crashpad/crashpad/util/mach/mig_gen.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2019 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/crashpad/util/net/generate_test_server_key.py b/third_party/crashpad/crashpad/util/net/generate_test_server_key.py
-index 3db08ad..6610073 100755
---- a/third_party/crashpad/crashpad/util/net/generate_test_server_key.py
-+++ b/third_party/crashpad/crashpad/util/net/generate_test_server_key.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Crashpad Authors. All rights reserved.
- #
-diff --git a/third_party/crashpad/update.py b/third_party/crashpad/update.py
-index f99640f..8dda0b7 100755
---- a/third_party/crashpad/update.py
-+++ b/third_party/crashpad/update.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # coding: utf-8
- 
- # Copyright 2015 The Chromium Authors. All rights reserved.
-diff --git a/third_party/dav1d/generate_configs.py b/third_party/dav1d/generate_configs.py
-index d34d29b..a044ec8 100755
---- a/third_party/dav1d/generate_configs.py
-+++ b/third_party/dav1d/generate_configs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/dav1d/generate_source.py b/third_party/dav1d/generate_source.py
-index 833dc00..db8bd66 100755
---- a/third_party/dav1d/generate_source.py
-+++ b/third_party/dav1d/generate_source.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/dom_distiller_js/protoc_plugins/json_values_converter.py b/third_party/dom_distiller_js/protoc_plugins/json_values_converter.py
-index e86a88c..12de53c 100755
---- a/third_party/dom_distiller_js/protoc_plugins/json_values_converter.py
-+++ b/third_party/dom_distiller_js/protoc_plugins/json_values_converter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/dom_distiller_js/protoc_plugins/json_values_converter_tests.py b/third_party/dom_distiller_js/protoc_plugins/json_values_converter_tests.py
-index 53d428c..67cde0d 100755
---- a/third_party/dom_distiller_js/protoc_plugins/json_values_converter_tests.py
-+++ b/third_party/dom_distiller_js/protoc_plugins/json_values_converter_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/google-closure-library/closure/bin/build/closurebuilder.py b/third_party/google-closure-library/closure/bin/build/closurebuilder.py
-index b542bd0..f242138 100755
---- a/third_party/google-closure-library/closure/bin/build/closurebuilder.py
-+++ b/third_party/google-closure-library/closure/bin/build/closurebuilder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/depstree_test.py b/third_party/google-closure-library/closure/bin/build/depstree_test.py
-index eb4c999..85765fb 100755
---- a/third_party/google-closure-library/closure/bin/build/depstree_test.py
-+++ b/third_party/google-closure-library/closure/bin/build/depstree_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/depswriter.py b/third_party/google-closure-library/closure/bin/build/depswriter.py
-index dc5a101..d6e3daf 100755
---- a/third_party/google-closure-library/closure/bin/build/depswriter.py
-+++ b/third_party/google-closure-library/closure/bin/build/depswriter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/depswriter_test.py b/third_party/google-closure-library/closure/bin/build/depswriter_test.py
-index 30b840c..c67a1a0 100755
---- a/third_party/google-closure-library/closure/bin/build/depswriter_test.py
-+++ b/third_party/google-closure-library/closure/bin/build/depswriter_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/jscompiler_test.py b/third_party/google-closure-library/closure/bin/build/jscompiler_test.py
-index 38a98eb..511906f 100755
---- a/third_party/google-closure-library/closure/bin/build/jscompiler_test.py
-+++ b/third_party/google-closure-library/closure/bin/build/jscompiler_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/source_test.py b/third_party/google-closure-library/closure/bin/build/source_test.py
-index 063cb3a..47e3987 100755
---- a/third_party/google-closure-library/closure/bin/build/source_test.py
-+++ b/third_party/google-closure-library/closure/bin/build/source_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/build/treescan.py b/third_party/google-closure-library/closure/bin/build/treescan.py
-index 6694593..7676fc2 100755
---- a/third_party/google-closure-library/closure/bin/build/treescan.py
-+++ b/third_party/google-closure-library/closure/bin/build/treescan.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/calcdeps.py b/third_party/google-closure-library/closure/bin/calcdeps.py
-index 0f80ea7..9ec3375 100755
---- a/third_party/google-closure-library/closure/bin/calcdeps.py
-+++ b/third_party/google-closure-library/closure/bin/calcdeps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2006 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc.py b/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc.py
-index fc5ca45..0809bce 100755
---- a/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc.py
-+++ b/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc_test.py b/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc_test.py
-index 470bab4..bd2c25d 100755
---- a/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc_test.py
-+++ b/third_party/google-closure-library/closure/bin/labs/code/generate_jsdoc_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2013 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google-closure-library/scripts/http/simple_http_server.py b/third_party/google-closure-library/scripts/http/simple_http_server.py
-index 1ed16da..e07be79 100755
---- a/third_party/google-closure-library/scripts/http/simple_http_server.py
-+++ b/third_party/google-closure-library/scripts/http/simple_http_server.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/builder.py b/third_party/google_input_tools/builder.py
-index cffcb6b..72739f1 100755
---- a/third_party/google_input_tools/builder.py
-+++ b/third_party/google_input_tools/builder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/closurebuilder.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/closurebuilder.py
-index 1ea8120..2490658 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/closurebuilder.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/closurebuilder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree.py
-index 418f601..4376f35 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
- # Licensed under the Apache License, Version 2.0 (the "License");
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree_test.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree_test.py
-index eb4c999..85765fb 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree_test.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depstree_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depswriter.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depswriter.py
-index dfecc4b..9b5e82d 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depswriter.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/depswriter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/jscompiler.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/jscompiler.py
-index 783b5d7..3ccc4f7 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/jscompiler.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/jscompiler.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
- # Licensed under the Apache License, Version 2.0 (the "License");
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source.py
-index d4d1dbab..703b16c 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2009 The Closure Library Authors. All Rights Reserved.
- #
- # Licensed under the Apache License, Version 2.0 (the "License");
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source_test.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source_test.py
-index c9e4d12..a66d299 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source_test.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/source_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/treescan.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/treescan.py
-index 6694593..7676fc2 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/build/treescan.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/build/treescan.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/calcdeps.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/calcdeps.py
-index 9cb1a6d..7b11cc2 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/calcdeps.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/calcdeps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2006 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/third_party/closure_library/closure/bin/scopify.py b/third_party/google_input_tools/third_party/closure_library/closure/bin/scopify.py
-index d8057ef..ffb04cb 100755
---- a/third_party/google_input_tools/third_party/closure_library/closure/bin/scopify.py
-+++ b/third_party/google_input_tools/third_party/closure_library/closure/bin/scopify.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2010 The Closure Library Authors. All Rights Reserved.
- #
-diff --git a/third_party/google_input_tools/update.py b/third_party/google_input_tools/update.py
-index a9341ab..2dacf1f 100755
---- a/third_party/google_input_tools/update.py
-+++ b/third_party/google_input_tools/update.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/hyphenation-patterns/src/de/create_chr.py b/third_party/hyphenation-patterns/src/de/create_chr.py
-index eed4d66..0991a28 100755
---- a/third_party/hyphenation-patterns/src/de/create_chr.py
-+++ b/third_party/hyphenation-patterns/src/de/create_chr.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (C) 2015 The Android Open Source Project
- #
-diff --git a/third_party/inspector_protocol/check_protocol_compatibility.py b/third_party/inspector_protocol/check_protocol_compatibility.py
-index d2df244..87896cb 100755
---- a/third_party/inspector_protocol/check_protocol_compatibility.py
-+++ b/third_party/inspector_protocol/check_protocol_compatibility.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 Google Inc. All rights reserved.
- #
- # Redistribution and use in source and binary forms, with or without
-diff --git a/third_party/inspector_protocol/code_generator.py b/third_party/inspector_protocol/code_generator.py
-index 92ca530..c53c47c 100755
---- a/third_party/inspector_protocol/code_generator.py
-+++ b/third_party/inspector_protocol/code_generator.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/inspector_protocol/concatenate_protocols.py b/third_party/inspector_protocol/concatenate_protocols.py
-index 42ecc7f..ef4a503 100755
---- a/third_party/inspector_protocol/concatenate_protocols.py
-+++ b/third_party/inspector_protocol/concatenate_protocols.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/inspector_protocol/convert_protocol_to_json.py b/third_party/inspector_protocol/convert_protocol_to_json.py
-index f98bebc..8984036 100755
---- a/third_party/inspector_protocol/convert_protocol_to_json.py
-+++ b/third_party/inspector_protocol/convert_protocol_to_json.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/inspector_protocol/roll.py b/third_party/inspector_protocol/roll.py
-index 3d6096b..5e63ed1 100755
---- a/third_party/inspector_protocol/roll.py
-+++ b/third_party/inspector_protocol/roll.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/jstemplate/compile.py b/third_party/jstemplate/compile.py
-index 26fc928..971dcd6 100755
---- a/third_party/jstemplate/compile.py
-+++ b/third_party/jstemplate/compile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/libaddressinput/chromium/tools/require_fields.py b/third_party/libaddressinput/chromium/tools/require_fields.py
-index b82afa2..8ed3e20 100755
---- a/third_party/libaddressinput/chromium/tools/require_fields.py
-+++ b/third_party/libaddressinput/chromium/tools/require_fields.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/libaddressinput/chromium/tools/update-strings.py b/third_party/libaddressinput/chromium/tools/update-strings.py
-index 0373fb0..5a044be 100755
---- a/third_party/libaddressinput/chromium/tools/update-strings.py
-+++ b/third_party/libaddressinput/chromium/tools/update-strings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/liblouis/liblouis_list_tables.py b/third_party/liblouis/liblouis_list_tables.py
-index 6b2b300..1b4b0f1 100755
---- a/third_party/liblouis/liblouis_list_tables.py
-+++ b/third_party/liblouis/liblouis_list_tables.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/libxml/chromium/roll.py b/third_party/libxml/chromium/roll.py
-index 90928be..da8ccde 100755
---- a/third_party/libxml/chromium/roll.py
-+++ b/third_party/libxml/chromium/roll.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/mako/examples/wsgi/run_wsgi.py b/third_party/mako/examples/wsgi/run_wsgi.py
-index 270022d..5324558 100755
---- a/third_party/mako/examples/wsgi/run_wsgi.py
-+++ b/third_party/mako/examples/wsgi/run_wsgi.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from __future__ import absolute_import
- from __future__ import division
-diff --git a/third_party/mako/test/templates/internationalization.html b/third_party/mako/test/templates/internationalization.html
-index da5b61c..42cbc9e 100644
---- a/third_party/mako/test/templates/internationalization.html
-+++ b/third_party/mako/test/templates/internationalization.html
-@@ -282,7 +282,7 @@ but Python 2.4 and above support writing Unicode literals in any encoding as
- long as you declare the encoding being used by including a special comment as
- either the first or second line of the source file:</p>
- <textarea name="code" class="python">
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # -*- coding: latin-1 -*-
- 
- u = u'abcdÈ'
-@@ -293,7 +293,7 @@ default encoding for string literals; in Python 2.4, characters greater than
- 127 still work but result in a warning. For example, the following program has
- no encoding declaration:</p>
- <textarea name="code" class="python">
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- u = u'abcdÈ'
- print ord(u[-1])
- </textarea><p>When you run it with Python 2.4, it will output the following warning:</p>
-diff --git a/third_party/metrics_proto/PRESUBMIT_test.py b/third_party/metrics_proto/PRESUBMIT_test.py
-index c5f7c05..b9ce6d1 100755
---- a/third_party/metrics_proto/PRESUBMIT_test.py
-+++ b/third_party/metrics_proto/PRESUBMIT_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/pexpect/FSM.py b/third_party/pexpect/FSM.py
-index c9085dc..18c09e0 100755
---- a/third_party/pexpect/FSM.py
-+++ b/third_party/pexpect/FSM.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- """This module implements a Finite State Machine (FSM). In addition to state
- this FSM also maintains a user defined "memory". So this FSM can be used as a
-diff --git a/third_party/pffft/generate_seed_corpus.py b/third_party/pffft/generate_seed_corpus.py
-index 18c9d31..a05b332 100755
---- a/third_party/pffft/generate_seed_corpus.py
-+++ b/third_party/pffft/generate_seed_corpus.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/polymer/v1_0/css_strip_prefixes_test.py b/third_party/polymer/v1_0/css_strip_prefixes_test.py
-index e23e8df..abe2008 100755
---- a/third_party/polymer/v1_0/css_strip_prefixes_test.py
-+++ b/third_party/polymer/v1_0/css_strip_prefixes_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/polymer/v1_0/rgbify_hex_vars_test.py b/third_party/polymer/v1_0/rgbify_hex_vars_test.py
-index d815c4b..daaa35b 100755
---- a/third_party/polymer/v1_0/rgbify_hex_vars_test.py
-+++ b/third_party/polymer/v1_0/rgbify_hex_vars_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/protobuf/conformance/conformance_python.py b/third_party/protobuf/conformance/conformance_python.py
-index 37ee36e..fad08fb 100755
---- a/third_party/protobuf/conformance/conformance_python.py
-+++ b/third_party/protobuf/conformance/conformance_python.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
- # https://developers.google.com/protocol-buffers/
-diff --git a/third_party/protobuf/conformance/update_failure_list.py b/third_party/protobuf/conformance/update_failure_list.py
-index ad42ed3..8d70e2c 100755
---- a/third_party/protobuf/conformance/update_failure_list.py
-+++ b/third_party/protobuf/conformance/update_failure_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
- # https://developers.google.com/protocol-buffers/
-diff --git a/third_party/protobuf/examples/add_person.py b/third_party/protobuf/examples/add_person.py
-index aa0fbca..c0eafd6 100755
---- a/third_party/protobuf/examples/add_person.py
-+++ b/third_party/protobuf/examples/add_person.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- 
- # See README.txt for information and build instructions.
- 
-diff --git a/third_party/protobuf/examples/list_people.py b/third_party/protobuf/examples/list_people.py
-index d2c294c..c170a70 100755
---- a/third_party/protobuf/examples/list_people.py
-+++ b/third_party/protobuf/examples/list_people.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- 
- # See README.txt for information and build instructions.
- 
-diff --git a/third_party/protobuf/gen_extra_chromium_files b/third_party/protobuf/gen_extra_chromium_files
-index a32f2b9..5cc1dcb 100755
---- a/third_party/protobuf/gen_extra_chromium_files
-+++ b/third_party/protobuf/gen_extra_chromium_files
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # This script expects your out/Debug directory to be compiling for linux on
- # a linux machine. If this is not your case just compile protoc and run the
-diff --git a/third_party/protobuf/generate_changelog.py b/third_party/protobuf/generate_changelog.py
-index 60803c5..ea87fb7 100755
---- a/third_party/protobuf/generate_changelog.py
-+++ b/third_party/protobuf/generate_changelog.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- """Generates a friendly list of changes per language since the last release."""
- 
-diff --git a/third_party/protobuf/objectivec/DevTools/pddm.py b/third_party/protobuf/objectivec/DevTools/pddm.py
-index b572cc7..507c33a 100755
---- a/third_party/protobuf/objectivec/DevTools/pddm.py
-+++ b/third_party/protobuf/objectivec/DevTools/pddm.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2015 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/objectivec/DevTools/pddm_tests.py b/third_party/protobuf/objectivec/DevTools/pddm_tests.py
-index 8184209..f4ddc98 100755
---- a/third_party/protobuf/objectivec/DevTools/pddm_tests.py
-+++ b/third_party/protobuf/objectivec/DevTools/pddm_tests.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2015 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/setup.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/setup.py
-index bf67536..341ca51 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/setup.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/setup.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- import glob
- import os
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/descriptor_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/descriptor_test.py
-index c74f882..3c4f69e 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/descriptor_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/descriptor_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/generator_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/generator_test.py
-index feb7752..1c5bcca 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/generator_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/generator_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/message_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/message_test.py
-index e71b295..f909c55 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/message_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/message_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/service_reflection_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/service_reflection_test.py
-index 9b7356f..9645925 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/service_reflection_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/service_reflection_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/text_format_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/text_format_test.py
-index 0bee668..7971707 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/text_format_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/text_format_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/wire_format_test.py b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/wire_format_test.py
-index 7600778..bcfaa0f 100755
---- a/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/wire_format_test.py
-+++ b/third_party/protobuf/python/compatibility_tests/v2.5.0/tests/google/protobuf/internal/wire_format_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/python
-+#! /usr/bin/python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/docs/generate_docs.py b/third_party/protobuf/python/docs/generate_docs.py
-index e024aaa..c08cc6d 100755
---- a/third_party/protobuf/python/docs/generate_docs.py
-+++ b/third_party/protobuf/python/docs/generate_docs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
- # https://developers.google.com/protocol-buffers/
-diff --git a/third_party/protobuf/python/google/protobuf/internal/_parameterized.py b/third_party/protobuf/python/google/protobuf/internal/_parameterized.py
-index 4cba1d4..41c7e20 100755
---- a/third_party/protobuf/python/google/protobuf/internal/_parameterized.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/_parameterized.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/descriptor_database_test.py b/third_party/protobuf/python/google/protobuf/internal/descriptor_database_test.py
-index 619779a..64e2738 100755
---- a/third_party/protobuf/python/google/protobuf/internal/descriptor_database_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/descriptor_database_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/descriptor_pool_test.py b/third_party/protobuf/python/google/protobuf/internal/descriptor_pool_test.py
-index fed82bf..e86aabe 100755
---- a/third_party/protobuf/python/google/protobuf/internal/descriptor_pool_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/descriptor_pool_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/descriptor_test.py b/third_party/protobuf/python/google/protobuf/internal/descriptor_test.py
-index 5e3b0a9..f9cf515 100755
---- a/third_party/protobuf/python/google/protobuf/internal/descriptor_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/descriptor_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/generator_test.py b/third_party/protobuf/python/google/protobuf/internal/generator_test.py
-index ab16d17..b3692b5 100755
---- a/third_party/protobuf/python/google/protobuf/internal/generator_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/generator_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/json_format_test.py b/third_party/protobuf/python/google/protobuf/internal/json_format_test.py
-index 4310115..d554395 100755
---- a/third_party/protobuf/python/google/protobuf/internal/json_format_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/json_format_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/keywords_test.py b/third_party/protobuf/python/google/protobuf/internal/keywords_test.py
-index 8744928..7438824 100755
---- a/third_party/protobuf/python/google/protobuf/internal/keywords_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/keywords_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/message_factory_test.py b/third_party/protobuf/python/google/protobuf/internal/message_factory_test.py
-index 24b79ec..0fa3dd5 100755
---- a/third_party/protobuf/python/google/protobuf/internal/message_factory_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/message_factory_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/message_test.py b/third_party/protobuf/python/google/protobuf/internal/message_test.py
-index a4d62a8..277e4c1 100755
---- a/third_party/protobuf/python/google/protobuf/internal/message_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/message_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # -*- coding: utf-8 -*-
- #
- # Protocol Buffers - Google's data interchange format
-diff --git a/third_party/protobuf/python/google/protobuf/internal/proto_builder_test.py b/third_party/protobuf/python/google/protobuf/internal/proto_builder_test.py
-index 36dfbfd..ae27697 100755
---- a/third_party/protobuf/python/google/protobuf/internal/proto_builder_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/proto_builder_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/reflection_test.py b/third_party/protobuf/python/google/protobuf/internal/reflection_test.py
-index e052776..5f67126 100755
---- a/third_party/protobuf/python/google/protobuf/internal/reflection_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/reflection_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # -*- coding: utf-8 -*-
- #
- # Protocol Buffers - Google's data interchange format
-diff --git a/third_party/protobuf/python/google/protobuf/internal/service_reflection_test.py b/third_party/protobuf/python/google/protobuf/internal/service_reflection_test.py
-index 77239f4..0560855 100755
---- a/third_party/protobuf/python/google/protobuf/internal/service_reflection_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/service_reflection_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/symbol_database_test.py b/third_party/protobuf/python/google/protobuf/internal/symbol_database_test.py
-index af42681..c3fa787 100755
---- a/third_party/protobuf/python/google/protobuf/internal/symbol_database_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/symbol_database_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/text_encoding_test.py b/third_party/protobuf/python/google/protobuf/internal/text_encoding_test.py
-index c7d182c..dd87a83 100755
---- a/third_party/protobuf/python/google/protobuf/internal/text_encoding_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/text_encoding_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/text_format_test.py b/third_party/protobuf/python/google/protobuf/internal/text_format_test.py
-index 987116a..902f52f 100755
---- a/third_party/protobuf/python/google/protobuf/internal/text_format_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/text_format_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # -*- coding: utf-8 -*-
- #
- # Protocol Buffers - Google's data interchange format
-diff --git a/third_party/protobuf/python/google/protobuf/internal/unknown_fields_test.py b/third_party/protobuf/python/google/protobuf/internal/unknown_fields_test.py
-index 277603d..d3662ba 100755
---- a/third_party/protobuf/python/google/protobuf/internal/unknown_fields_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/unknown_fields_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # -*- coding: utf-8 -*-
- #
- # Protocol Buffers - Google's data interchange format
-diff --git a/third_party/protobuf/python/google/protobuf/internal/well_known_types_test.py b/third_party/protobuf/python/google/protobuf/internal/well_known_types_test.py
-index 8089f03..aa0bcb9 100755
---- a/third_party/protobuf/python/google/protobuf/internal/well_known_types_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/well_known_types_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/google/protobuf/internal/wire_format_test.py b/third_party/protobuf/python/google/protobuf/internal/wire_format_test.py
-index da120f3..39a49a6 100755
---- a/third_party/protobuf/python/google/protobuf/internal/wire_format_test.py
-+++ b/third_party/protobuf/python/google/protobuf/internal/wire_format_test.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # Protocol Buffers - Google's data interchange format
- # Copyright 2008 Google Inc.  All rights reserved.
-diff --git a/third_party/protobuf/python/setup.py b/third_party/protobuf/python/setup.py
-index d003c96..2789fe1 100755
---- a/third_party/protobuf/python/setup.py
-+++ b/third_party/protobuf/python/setup.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- #
- # See README for usage instructions.
- from distutils import util
-diff --git a/third_party/protobuf/update_compatibility_version.py b/third_party/protobuf/update_compatibility_version.py
-index f93479b..883c257 100755
---- a/third_party/protobuf/update_compatibility_version.py
-+++ b/third_party/protobuf/update_compatibility_version.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- """Compatibility tests between last released and the current version.
- 
- Usage: ./update_compatibility_version.py <MAJOR>.<MINOR>.<MICRO> [<RC version>]
-diff --git a/third_party/protobuf/update_version.py b/third_party/protobuf/update_version.py
-index 470e425..9424b5a 100755
---- a/third_party/protobuf/update_version.py
-+++ b/third_party/protobuf/update_version.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Usage: ./update_version.py <MAJOR>.<MINOR>.<MICRO> [<RC version>]
- #
- # Example:
-diff --git a/third_party/pyjson5/src/benchmarks/run.py b/third_party/pyjson5/src/benchmarks/run.py
-index 63eb296..e0b4c20 100755
---- a/third_party/pyjson5/src/benchmarks/run.py
-+++ b/third_party/pyjson5/src/benchmarks/run.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 Google Inc. All rights reserved.
- #
- # Licensed under the Apache License, Version 2.0 (the "License");
-diff --git a/third_party/pyjson5/src/run b/third_party/pyjson5/src/run
-index c28ba07..4b75ad0 100755
---- a/third_party/pyjson5/src/run
-+++ b/third_party/pyjson5/src/run
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- from __future__ import print_function
- 
-diff --git a/third_party/pylint/pylint/__main__.py b/third_party/pylint/pylint/__main__.py
-index 7716361..dae7041 100755
---- a/third_party/pylint/pylint/__main__.py
-+++ b/third_party/pylint/pylint/__main__.py
-@@ -1,3 +1,3 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- import pylint
- pylint.run_pylint()
-diff --git a/third_party/quic_trace/append_lite_runtime.py b/third_party/quic_trace/append_lite_runtime.py
-index 7d1aeb0..d9e3f20 100755
---- a/third_party/quic_trace/append_lite_runtime.py
-+++ b/third_party/quic_trace/append_lite_runtime.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/tlslite/scripts/tls.py b/third_party/tlslite/scripts/tls.py
-index 48035ce..9729bb3 100755
---- a/third_party/tlslite/scripts/tls.py
-+++ b/third_party/tlslite/scripts/tls.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Authors: 
- #   Trevor Perrin
-diff --git a/third_party/tlslite/scripts/tlsdb.py b/third_party/tlslite/scripts/tlsdb.py
-index 476d618..5c03476 100755
---- a/third_party/tlslite/scripts/tlsdb.py
-+++ b/third_party/tlslite/scripts/tlsdb.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Authors: 
- #   Trevor Perrin
-diff --git a/third_party/tlslite/setup.py b/third_party/tlslite/setup.py
-index 3ce281a..79970e9 100755
---- a/third_party/tlslite/setup.py
-+++ b/third_party/tlslite/setup.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Author: Trevor Perrin
- # See the LICENSE file for legal information regarding use of this file.
-diff --git a/third_party/tlslite/tests/httpsclient.py b/third_party/tlslite/tests/httpsclient.py
-index 1a764d7..f466200 100755
---- a/third_party/tlslite/tests/httpsclient.py
-+++ b/third_party/tlslite/tests/httpsclient.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- from __future__ import print_function
- from tlslite import HTTPTLSConnection, HandshakeSettings
- 
-diff --git a/third_party/tlslite/tests/tlstest.py b/third_party/tlslite/tests/tlstest.py
-index 7985d23..816668a 100755
---- a/third_party/tlslite/tests/tlstest.py
-+++ b/third_party/tlslite/tests/tlstest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Authors: 
- #   Trevor Perrin
-diff --git a/third_party/wayland/wayland_scanner_wrapper.py b/third_party/wayland/wayland_scanner_wrapper.py
-index 7f4d44d..cdf5e02 100755
---- a/third_party/wayland/wayland_scanner_wrapper.py
-+++ b/third_party/wayland/wayland_scanner_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/webxr_test_pages/make_ot_samples_folder.py b/third_party/webxr_test_pages/make_ot_samples_folder.py
-index 93ad0c9..bae2227 100755
---- a/third_party/webxr_test_pages/make_ot_samples_folder.py
-+++ b/third_party/webxr_test_pages/make_ot_samples_folder.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/webxr_test_pages/update_bucket.py b/third_party/webxr_test_pages/update_bucket.py
-index 1e2f133..09e2751 100755
---- a/third_party/webxr_test_pages/update_bucket.py
-+++ b/third_party/webxr_test_pages/update_bucket.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/third_party/weston/generate_configs.py b/third_party/weston/generate_configs.py
-index b611ffc..33226ae 100755
---- a/third_party/weston/generate_configs.py
-+++ b/third_party/weston/generate_configs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/third_party/wpt_tools/wpt/tools/manifest/update.py b/third_party/wpt_tools/wpt/tools/manifest/update.py
-index a86ef7c..3869dd4 100755
---- a/third_party/wpt_tools/wpt/tools/manifest/update.py
-+++ b/third_party/wpt_tools/wpt/tools/manifest/update.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- import argparse
- import os
- 
-diff --git a/third_party/wpt_tools/wpt/tools/third_party/html5lib/parse.py b/third_party/wpt_tools/wpt/tools/third_party/html5lib/parse.py
-index e6806b4..66be980 100755
---- a/third_party/wpt_tools/wpt/tools/third_party/html5lib/parse.py
-+++ b/third_party/wpt_tools/wpt/tools/third_party/html5lib/parse.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- """
- Parse a document to a tree, with optional profiling
- """
-diff --git a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/memorizingfile.py b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/memorizingfile.py
-index d353967..2433bf4 100644
---- a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/memorizingfile.py
-+++ b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/memorizingfile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2011, Google Inc.
- # All rights reserved.
-diff --git a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/standalone.py b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/standalone.py
-index b075d98..d2823d5 100755
---- a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/standalone.py
-+++ b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/mod_pywebsocket/standalone.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2012, Google Inc.
- # All rights reserved.
-diff --git a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/setup.py b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/setup.py
-index 57e9428..aa39be1 100755
---- a/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/setup.py
-+++ b/third_party/wpt_tools/wpt/tools/third_party/pywebsocket3/setup.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2012, Google Inc.
- # All rights reserved.
-diff --git a/third_party/wpt_tools/wpt/tools/wptserve/wptserve/wptserve.py b/third_party/wpt_tools/wpt/tools/wptserve/wptserve/wptserve.py
-index 816c8a5..8cef4f6 100755
---- a/third_party/wpt_tools/wpt/tools/wptserve/wptserve/wptserve.py
-+++ b/third_party/wpt_tools/wpt/tools/wptserve/wptserve/wptserve.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- import argparse
- import os
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/basic_auth_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/basic_auth_wsh.py
-index 1bfa45b..1317d71 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/basic_auth_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/basic_auth_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- """A WebSocket handler that enforces basic HTTP authentication. Username is
- 'foo' and password is 'bar'."""
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/delayed-passive-close_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/delayed-passive-close_wsh.py
-index 7d55b88..6bd7fa4 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/delayed-passive-close_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/delayed-passive-close_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- from mod_pywebsocket import common
- import time
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo-cookie_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo-cookie_wsh.py
-index 367d031..e7e1501 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo-cookie_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo-cookie_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo-query_v13_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo-query_v13_wsh.py
-index 4083c49..76db5fe 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo-query_v13_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo-query_v13_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil, util
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo-query_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo-query_wsh.py
-index 8fd7ac3..b0d0a9c 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo-query_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo-query_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil, util
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo_close_data_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo_close_data_wsh.py
-index e820568..aa28452 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo_close_data_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo_close_data_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- import six
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo_exit_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo_exit_wsh.py
-index 4496918..dedd1dc 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo_exit_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo_exit_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- import six
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo_raw_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo_raw_wsh.py
-index e1fc266..8b4a6a9 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo_raw_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo_raw_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/echo_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/echo_wsh.py
-index df1fdfa..04fedd7 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/echo_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/echo_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- import six
- from mod_pywebsocket import msgutil
- from mod_pywebsocket import common
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/empty-message_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/empty-message_wsh.py
-index 0eb107f..23ed66c 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/empty-message_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/empty-message_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_extensions_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_extensions_wsh.py
-index 0d0f0a8..9b3bca3 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_extensions_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_extensions_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- 
- def web_socket_do_extra_handshake(request):
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_protocol_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_protocol_wsh.py
-index ffc2ae8..2f59982 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_protocol_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/handshake_no_protocol_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- def web_socket_do_extra_handshake(request):
-     # Trick pywebsocket into believing no subprotocol was requested.
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/handshake_protocol_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/handshake_protocol_wsh.py
-index 2ca20c0..fba7b7a 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/handshake_protocol_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/handshake_protocol_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- def web_socket_do_extra_handshake(request):
-     request.ws_protocol = 'foobar'
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/handshake_sleep_2_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/handshake_sleep_2_wsh.py
-index 3367ed8..528db72 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/handshake_sleep_2_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/handshake_sleep_2_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- import time
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/invalid_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/invalid_wsh.py
-index 1095047..f12c4ac 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/invalid_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/invalid_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/origin_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/origin_wsh.py
-index ce5f3a7..d2777d5 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/origin_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/origin_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/protocol_array_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/protocol_array_wsh.py
-index 5d46c58..d19f876 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/protocol_array_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/protocol_array_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil, util
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/protocol_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/protocol_wsh.py
-index 96a4525..ef47c7b 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/protocol_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/protocol_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil, util
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/receive-backpressure_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/receive-backpressure_wsh.py
-index 9c2e470..5e1c923 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/receive-backpressure_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/receive-backpressure_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import time
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/referrer_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/referrer_wsh.py
-index 3418ceb..408889d 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/referrer_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/referrer_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import msgutil
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/send-backpressure_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/send-backpressure_wsh.py
-index e59070c..d0668b9 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/send-backpressure_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/send-backpressure_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import six
- import time
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie-secure_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie-secure_wsh.py
-index 4db321f..c70afa9 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie-secure_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie-secure_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- from six.moves import urllib
- 
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_http_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_http_wsh.py
-index 2fa0ded..235238f 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_http_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_http_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from six.moves import urllib
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_wsh.py
-index 3cec1c0..59e9a81 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/set-cookie_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- from six.moves import urllib
- 
- 
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/simple_handshake_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/simple_handshake_wsh.py
-index ad46687..a4c2a04 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/simple_handshake_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/simple_handshake_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- from mod_pywebsocket import common, stream
- from mod_pywebsocket.handshake import AbortedByUserException, hybi
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/sleep_10_v13_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/sleep_10_v13_wsh.py
-index f081910..5d35c2a 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/sleep_10_v13_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/sleep_10_v13_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import sys, urllib, time
- from mod_pywebsocket import common, msgutil, util
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_blocking_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_blocking_wsh.py
-index 10ecdfe..0d0080c 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_blocking_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_blocking_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- import json
- import threading
- import wptserve.stash
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_wsh.py
-index fd6eabc..8806b90 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/stash_responder_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- from six.moves import urllib
- import json
- from mod_pywebsocket import common, msgutil, util
-diff --git a/third_party/wpt_tools/wpt/websockets/handlers/wrong_accept_key_wsh.py b/third_party/wpt_tools/wpt/websockets/handlers/wrong_accept_key_wsh.py
-index 77f703a..497e9c0 100755
---- a/third_party/wpt_tools/wpt/websockets/handlers/wrong_accept_key_wsh.py
-+++ b/third_party/wpt_tools/wpt/websockets/handlers/wrong_accept_key_wsh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import sys, urllib, time
- from mod_pywebsocket import common, msgutil, util
-diff --git a/third_party/wpt_tools/wpt/wpt b/third_party/wpt_tools/wpt/wpt
-index 36d0bed..4b47e84 100755
---- a/third_party/wpt_tools/wpt/wpt
-+++ b/third_party/wpt_tools/wpt/wpt
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- if __name__ == "__main__":
-     import sys
-diff --git a/third_party/zxcvbn-cpp/data-scripts/build_frequency_lists.py b/third_party/zxcvbn-cpp/data-scripts/build_frequency_lists.py
-index 9be1391..a9bbe33 100755
---- a/third_party/zxcvbn-cpp/data-scripts/build_frequency_lists.py
-+++ b/third_party/zxcvbn-cpp/data-scripts/build_frequency_lists.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- import itertools
- import os
- import sys
-diff --git a/third_party/zxcvbn-cpp/data-scripts/build_keyboard_adjacency_graphs.py b/third_party/zxcvbn-cpp/data-scripts/build_keyboard_adjacency_graphs.py
-index 605f2d6..7b0d27e 100755
---- a/third_party/zxcvbn-cpp/data-scripts/build_keyboard_adjacency_graphs.py
-+++ b/third_party/zxcvbn-cpp/data-scripts/build_keyboard_adjacency_graphs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- import os
- import sys
- import json
-diff --git a/third_party/zxcvbn-cpp/data-scripts/count_us_census.py b/third_party/zxcvbn-cpp/data-scripts/count_us_census.py
-index 1830ed9..43e40c2 100755
---- a/third_party/zxcvbn-cpp/data-scripts/count_us_census.py
-+++ b/third_party/zxcvbn-cpp/data-scripts/count_us_census.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- import sys
- import codecs
- 
-diff --git a/third_party/zxcvbn-cpp/data-scripts/count_wikipedia.py b/third_party/zxcvbn-cpp/data-scripts/count_wikipedia.py
-index aacf8d0..aad0492 100755
---- a/third_party/zxcvbn-cpp/data-scripts/count_wikipedia.py
-+++ b/third_party/zxcvbn-cpp/data-scripts/count_wikipedia.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import sys
- import os
-diff --git a/third_party/zxcvbn-cpp/data-scripts/count_wiktionary.py b/third_party/zxcvbn-cpp/data-scripts/count_wiktionary.py
-index b538d76..414358b 100755
---- a/third_party/zxcvbn-cpp/data-scripts/count_wiktionary.py
-+++ b/third_party/zxcvbn-cpp/data-scripts/count_wiktionary.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- 
- import os
- import sys
-diff --git a/tools/accessibility/dump_accessibility_tree_auralinux.py b/tools/accessibility/dump_accessibility_tree_auralinux.py
-index 2a1ca15..d2ccfcd 100755
---- a/tools/accessibility/dump_accessibility_tree_auralinux.py
-+++ b/tools/accessibility/dump_accessibility_tree_auralinux.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/accessibility/nvda/nvda_chrome_tests.py b/tools/accessibility/nvda/nvda_chrome_tests.py
-index 3e0cb3a..af0c4be 100755
---- a/tools/accessibility/nvda/nvda_chrome_tests.py
-+++ b/tools/accessibility/nvda/nvda_chrome_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/accessibility/rebase_dump_accessibility_tree_test.py b/tools/accessibility/rebase_dump_accessibility_tree_test.py
-index b19660e..1488923 100755
---- a/tools/accessibility/rebase_dump_accessibility_tree_test.py
-+++ b/tools/accessibility/rebase_dump_accessibility_tree_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/binary_size/sizes.py b/tools/binary_size/sizes.py
-index cbc1e32..55a024e 100755
---- a/tools/binary_size/sizes.py
-+++ b/tools/binary_size/sizes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/bisect-builds.py b/tools/bisect-builds.py
-index 1f4fad5..38b011c 100755
---- a/tools/bisect-builds.py
-+++ b/tools/bisect-builds.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/boilerplate.py b/tools/boilerplate.py
-index 70bbbac..468acfb 100755
---- a/tools/boilerplate.py
-+++ b/tools/boilerplate.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/check_ecs_deps/check_ecs_deps.py b/tools/check_ecs_deps/check_ecs_deps.py
-index cad8116..5ddf4c4 100755
---- a/tools/check_ecs_deps/check_ecs_deps.py
-+++ b/tools/check_ecs_deps/check_ecs_deps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/check_git_config.py b/tools/check_git_config.py
-index 4907d85..eb23258 100755
---- a/tools/check_git_config.py
-+++ b/tools/check_git_config.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/check_grd_for_unused_strings.py b/tools/check_grd_for_unused_strings.py
-index d11c3e1..ad1007b 100755
---- a/tools/check_grd_for_unused_strings.py
-+++ b/tools/check_grd_for_unused_strings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/checkbins/checkbins.py b/tools/checkbins/checkbins.py
-index e8d93e9..cbea644 100755
---- a/tools/checkbins/checkbins.py
-+++ b/tools/checkbins/checkbins.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/checklicenses/checklicenses.py b/tools/checklicenses/checklicenses.py
-index c7b60f2..2ce2ea2 100755
---- a/tools/checklicenses/checklicenses.py
-+++ b/tools/checklicenses/checklicenses.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/checkperms/checkperms.py b/tools/checkperms/checkperms.py
-index 854fd2c..ba3d524 100755
---- a/tools/checkperms/checkperms.py
-+++ b/tools/checkperms/checkperms.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/checkteamtags/checkteamtags.py b/tools/checkteamtags/checkteamtags.py
-index f168a4f..8c49543 100755
---- a/tools/checkteamtags/checkteamtags.py
-+++ b/tools/checkteamtags/checkteamtags.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/checkteamtags/extract_components.py b/tools/checkteamtags/extract_components.py
-index 73f4586..6ee2fdd 100755
---- a/tools/checkteamtags/extract_components.py
-+++ b/tools/checkteamtags/extract_components.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/chrome_extensions/open_my_editor/myeditor-example/qtcreator-example.py b/tools/chrome_extensions/open_my_editor/myeditor-example/qtcreator-example.py
-index d9a5aa1..2af6a07 100755
---- a/tools/chrome_extensions/open_my_editor/myeditor-example/qtcreator-example.py
-+++ b/tools/chrome_extensions/open_my_editor/myeditor-example/qtcreator-example.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/chrome_extensions/open_my_editor/myeditor-example/vscode-example.py b/tools/chrome_extensions/open_my_editor/myeditor-example/vscode-example.py
-index ecd8250..bd49331 100755
---- a/tools/chrome_extensions/open_my_editor/myeditor-example/vscode-example.py
-+++ b/tools/chrome_extensions/open_my_editor/myeditor-example/vscode-example.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/chrome_extensions/open_my_editor/omed.py b/tools/chrome_extensions/open_my_editor/omed.py
-index 2998c68..788af3e 100755
---- a/tools/chrome_extensions/open_my_editor/omed.py
-+++ b/tools/chrome_extensions/open_my_editor/omed.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/clang/blink_gc_plugin/process-graph.py b/tools/clang/blink_gc_plugin/process-graph.py
-index eac8f36..7182059 100755
---- a/tools/clang/blink_gc_plugin/process-graph.py
-+++ b/tools/clang/blink_gc_plugin/process-graph.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/blink_gc_plugin/tests/test.py b/tools/clang/blink_gc_plugin/tests/test.py
-index a90f549..b8ff295 100755
---- a/tools/clang/blink_gc_plugin/tests/test.py
-+++ b/tools/clang/blink_gc_plugin/tests/test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/plugins/tests/test.py b/tools/clang/plugins/tests/test.py
-index 3439148..0102e7d 100755
---- a/tools/clang/plugins/tests/test.py
-+++ b/tools/clang/plugins/tests/test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/pylib/clang/plugin_testing.py b/tools/clang/pylib/clang/plugin_testing.py
-index 6b2e606..a0e155f 100755
---- a/tools/clang/pylib/clang/plugin_testing.py
-+++ b/tools/clang/pylib/clang/plugin_testing.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/apply_edits.py b/tools/clang/scripts/apply_edits.py
-index abf95df..4e1e340 100755
---- a/tools/clang/scripts/apply_edits.py
-+++ b/tools/clang/scripts/apply_edits.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/apply_edits_test.py b/tools/clang/scripts/apply_edits_test.py
-index a2bc63b..402eed0 100755
---- a/tools/clang/scripts/apply_edits_test.py
-+++ b/tools/clang/scripts/apply_edits_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/apply_fixits.py b/tools/clang/scripts/apply_fixits.py
-index b299711..9d9bdbf 100755
---- a/tools/clang/scripts/apply_fixits.py
-+++ b/tools/clang/scripts/apply_fixits.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/build.py b/tools/clang/scripts/build.py
-index ba3cc0f..9bb7037 100755
---- a/tools/clang/scripts/build.py
-+++ b/tools/clang/scripts/build.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/build_clang_tools_extra.py b/tools/clang/scripts/build_clang_tools_extra.py
-index 7c49391..d725a7c 100755
---- a/tools/clang/scripts/build_clang_tools_extra.py
-+++ b/tools/clang/scripts/build_clang_tools_extra.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/build_file.py b/tools/clang/scripts/build_file.py
-index 878203f..e7020de 100755
---- a/tools/clang/scripts/build_file.py
-+++ b/tools/clang/scripts/build_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/clang_tidy_tool.py b/tools/clang/scripts/clang_tidy_tool.py
-index afbe12b..32e5b04 100755
---- a/tools/clang/scripts/clang_tidy_tool.py
-+++ b/tools/clang/scripts/clang_tidy_tool.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/download_objdump.py b/tools/clang/scripts/download_objdump.py
-index 9ecae96..d210883 100755
---- a/tools/clang/scripts/download_objdump.py
-+++ b/tools/clang/scripts/download_objdump.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/expand_thin_archives.py b/tools/clang/scripts/expand_thin_archives.py
-index b513935..db7b6b0 100755
---- a/tools/clang/scripts/expand_thin_archives.py
-+++ b/tools/clang/scripts/expand_thin_archives.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/extract_edits.py b/tools/clang/scripts/extract_edits.py
-index 31167fc..3dffcba 100755
---- a/tools/clang/scripts/extract_edits.py
-+++ b/tools/clang/scripts/extract_edits.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/goma_ld.py b/tools/clang/scripts/goma_ld.py
-index 21a7dd2..3beb259 100755
---- a/tools/clang/scripts/goma_ld.py
-+++ b/tools/clang/scripts/goma_ld.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright (c) 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/goma_link.py b/tools/clang/scripts/goma_link.py
-index 9beecb3..8981964 100755
---- a/tools/clang/scripts/goma_link.py
-+++ b/tools/clang/scripts/goma_link.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright (c) 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/package.py b/tools/clang/scripts/package.py
-index 4ea0b63..b02d23a 100755
---- a/tools/clang/scripts/package.py
-+++ b/tools/clang/scripts/package.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/process_crashreports.py b/tools/clang/scripts/process_crashreports.py
-index d6d7cd9..38aec96 100755
---- a/tools/clang/scripts/process_crashreports.py
-+++ b/tools/clang/scripts/process_crashreports.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/run_tool.py b/tools/clang/scripts/run_tool.py
-index 3cd2873..6bdb3cf 100755
---- a/tools/clang/scripts/run_tool.py
-+++ b/tools/clang/scripts/run_tool.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/test_tool.py b/tools/clang/scripts/test_tool.py
-index 1980441..737a86a 100755
---- a/tools/clang/scripts/test_tool.py
-+++ b/tools/clang/scripts/test_tool.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/update.py b/tools/clang/scripts/update.py
-index a9c0af0..bcb8706 100755
---- a/tools/clang/scripts/update.py
-+++ b/tools/clang/scripts/update.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/scripts/upload_revision.py b/tools/clang/scripts/upload_revision.py
-index 2fb1aaa..966e889 100755
---- a/tools/clang/scripts/upload_revision.py
-+++ b/tools/clang/scripts/upload_revision.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/stack_maps/tests/test.py b/tools/clang/stack_maps/tests/test.py
-index 90b8d8b..26b8691 100755
---- a/tools/clang/stack_maps/tests/test.py
-+++ b/tools/clang/stack_maps/tests/test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/clang/translation_unit/test_translation_unit.py b/tools/clang/translation_unit/test_translation_unit.py
-index 92d7be8..3a675fe 100755
---- a/tools/clang/translation_unit/test_translation_unit.py
-+++ b/tools/clang/translation_unit/test_translation_unit.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/code_coverage/coverage.py b/tools/code_coverage/coverage.py
-index f574812..03aac7e 100755
---- a/tools/code_coverage/coverage.py
-+++ b/tools/code_coverage/coverage.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/code_coverage/coverage_test.py b/tools/code_coverage/coverage_test.py
-index df944cf..c625cb4 100755
---- a/tools/code_coverage/coverage_test.py
-+++ b/tools/code_coverage/coverage_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/code_coverage/run_fuzz_target.py b/tools/code_coverage/run_fuzz_target.py
-index 07ccb5c..901a4ed 100755
---- a/tools/code_coverage/run_fuzz_target.py
-+++ b/tools/code_coverage/run_fuzz_target.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/compile_test/compile_test.py b/tools/compile_test/compile_test.py
-index 77f1ce2..e632c04 100755
---- a/tools/compile_test/compile_test.py
-+++ b/tools/compile_test/compile_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/coverity/coverity.py b/tools/coverity/coverity.py
-index 7091a85..0575e52 100755
---- a/tools/coverity/coverity.py
-+++ b/tools/coverity/coverity.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/determinism/compare_build_artifacts.py b/tools/determinism/compare_build_artifacts.py
-index 82ec95f..c520332 100755
---- a/tools/determinism/compare_build_artifacts.py
-+++ b/tools/determinism/compare_build_artifacts.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/determinism/create_diffs_tarball.py b/tools/determinism/create_diffs_tarball.py
-index fdb7d63..0a68353 100755
---- a/tools/determinism/create_diffs_tarball.py
-+++ b/tools/determinism/create_diffs_tarball.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/diagnose-me.py b/tools/diagnose-me.py
-index 08e74fb..97da50b 100755
---- a/tools/diagnose-me.py
-+++ b/tools/diagnose-me.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/download_optimization_profile.py b/tools/download_optimization_profile.py
-index 6995587..7d1a6a3 100755
---- a/tools/download_optimization_profile.py
-+++ b/tools/download_optimization_profile.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/dromaeo_benchmark_runner/dromaeo_benchmark_runner.py b/tools/dromaeo_benchmark_runner/dromaeo_benchmark_runner.py
-index 45f70cb..9f59cb0 100755
---- a/tools/dromaeo_benchmark_runner/dromaeo_benchmark_runner.py
-+++ b/tools/dromaeo_benchmark_runner/dromaeo_benchmark_runner.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/dump_process_memory/analyze_dumps.py b/tools/dump_process_memory/analyze_dumps.py
-index 6067c06..ee83132 100755
---- a/tools/dump_process_memory/analyze_dumps.py
-+++ b/tools/dump_process_memory/analyze_dumps.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/dump_process_memory/collect_process_dump.py b/tools/dump_process_memory/collect_process_dump.py
-index acd37c5..df0b4a6 100755
---- a/tools/dump_process_memory/collect_process_dump.py
-+++ b/tools/dump_process_memory/collect_process_dump.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- #
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/find_runtime_symbols/find_runtime_symbols.py b/tools/find_runtime_symbols/find_runtime_symbols.py
-index 51d129e..29862d2 100755
---- a/tools/find_runtime_symbols/find_runtime_symbols.py
-+++ b/tools/find_runtime_symbols/find_runtime_symbols.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/find_runtime_symbols/prepare_symbol_info.py b/tools/find_runtime_symbols/prepare_symbol_info.py
-index befe314..31efa21 100755
---- a/tools/find_runtime_symbols/prepare_symbol_info.py
-+++ b/tools/find_runtime_symbols/prepare_symbol_info.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/find_runtime_symbols/reduce_debugline.py b/tools/find_runtime_symbols/reduce_debugline.py
-index 6e67294..fab3647 100755
---- a/tools/find_runtime_symbols/reduce_debugline.py
-+++ b/tools/find_runtime_symbols/reduce_debugline.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/find_runtime_symbols/tests/reduce_debugline_test.py b/tools/find_runtime_symbols/tests/reduce_debugline_test.py
-index 1e3a21a..58f8778 100755
---- a/tools/find_runtime_symbols/tests/reduce_debugline_test.py
-+++ b/tools/find_runtime_symbols/tests/reduce_debugline_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flags/generate_expired_list.py b/tools/flags/generate_expired_list.py
-index 33d7edc..650a011 100755
---- a/tools/flags/generate_expired_list.py
-+++ b/tools/flags/generate_expired_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flags/generate_unexpire_flags.py b/tools/flags/generate_unexpire_flags.py
-index a5565d5..569d47a 100755
---- a/tools/flags/generate_unexpire_flags.py
-+++ b/tools/flags/generate_unexpire_flags.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flags/generate_unexpire_flags_unittests.py b/tools/flags/generate_unexpire_flags_unittests.py
-index 2d9236a..f274e9f 100755
---- a/tools/flags/generate_unexpire_flags_unittests.py
-+++ b/tools/flags/generate_unexpire_flags_unittests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flags/list_flags.py b/tools/flags/list_flags.py
-index ad693b7..61fb8c6 100755
---- a/tools/flags/list_flags.py
-+++ b/tools/flags/list_flags.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flakiness/find_flakiness.py b/tools/flakiness/find_flakiness.py
-index 52734c9..23e5567 100755
---- a/tools/flakiness/find_flakiness.py
-+++ b/tools/flakiness/find_flakiness.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/flakiness/is_flaky.py b/tools/flakiness/is_flaky.py
-index 896a2b9..7b0e8fe 100755
---- a/tools/flakiness/is_flaky.py
-+++ b/tools/flakiness/is_flaky.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/fuchsia/local-sdk.py b/tools/fuchsia/local-sdk.py
-index 1572575..ea973fd 100755
---- a/tools/fuchsia/local-sdk.py
-+++ b/tools/fuchsia/local-sdk.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/generate_library_loader/generate_library_loader.py b/tools/generate_library_loader/generate_library_loader.py
-index 50fea93..5f0f7ee 100755
---- a/tools/generate_library_loader/generate_library_loader.py
-+++ b/tools/generate_library_loader/generate_library_loader.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/generate_shim_headers/generate_shim_headers.py b/tools/generate_shim_headers/generate_shim_headers.py
-index 1b8e27f..7f8cfc0 100755
---- a/tools/generate_shim_headers/generate_shim_headers.py
-+++ b/tools/generate_shim_headers/generate_shim_headers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/generate_stubs/generate_stubs.py b/tools/generate_stubs/generate_stubs.py
-index ed3b89c..da8714e 100755
---- a/tools/generate_stubs/generate_stubs.py
-+++ b/tools/generate_stubs/generate_stubs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/generate_stubs/generate_stubs_unittest.py b/tools/generate_stubs/generate_stubs_unittest.py
-index fe4878e..68f5b4e 100755
---- a/tools/generate_stubs/generate_stubs_unittest.py
-+++ b/tools/generate_stubs/generate_stubs_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/for-all-touched-files.py b/tools/git/for-all-touched-files.py
-index a3d347f..6fc62a7 100755
---- a/tools/git/for-all-touched-files.py
-+++ b/tools/git/for-all-touched-files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/git-diff-ide.py b/tools/git/git-diff-ide.py
-index 95a7af3..faeba9f 100755
---- a/tools/git/git-diff-ide.py
-+++ b/tools/git/git-diff-ide.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/mass-rename.py b/tools/git/mass-rename.py
-index 3f05bbb..f21b555 100755
---- a/tools/git/mass-rename.py
-+++ b/tools/git/mass-rename.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/mffr.py b/tools/git/mffr.py
-index 563eb40..9df05be 100755
---- a/tools/git/mffr.py
-+++ b/tools/git/mffr.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/move_source_file.py b/tools/git/move_source_file.py
-index f7a2a20..6c48342 100755
---- a/tools/git/move_source_file.py
-+++ b/tools/git/move_source_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/git/suggest_owners.py b/tools/git/suggest_owners.py
-index 4e2181c..272ee6b 100755
---- a/tools/git/suggest_owners.py
-+++ b/tools/git/suggest_owners.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/bootstrap/bootstrap.py b/tools/gn/bootstrap/bootstrap.py
-index 8955e05..46144da 100755
---- a/tools/gn/bootstrap/bootstrap.py
-+++ b/tools/gn/bootstrap/bootstrap.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/build/full_test.py b/tools/gn/build/full_test.py
-index 2095ddd..72a0746 100755
---- a/tools/gn/build/full_test.py
-+++ b/tools/gn/build/full_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/build/gen.py b/tools/gn/build/gen.py
-index 922bf46..96dbafa 100755
---- a/tools/gn/build/gen.py
-+++ b/tools/gn/build/gen.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/infra/recipes.py b/tools/gn/infra/recipes.py
-index 2fe0086..4653185 100755
---- a/tools/gn/infra/recipes.py
-+++ b/tools/gn/infra/recipes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The LUCI Authors. All rights reserved.
- # Use of this source code is governed under the Apache License, Version 2.0
-diff --git a/tools/gn/misc/help_as_html.py b/tools/gn/misc/help_as_html.py
-index f8f1c1b..3e419fe 100755
---- a/tools/gn/misc/help_as_html.py
-+++ b/tools/gn/misc/help_as_html.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/roll_gn.py b/tools/gn/roll_gn.py
-index e284dbf..9648b8b 100755
---- a/tools/gn/roll_gn.py
-+++ b/tools/gn/roll_gn.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gn/src/gn/json_project_writer_unittest.cc b/tools/gn/src/gn/json_project_writer_unittest.cc
-index a22511b..335a30f 100644
---- a/tools/gn/src/gn/json_project_writer_unittest.cc
-+++ b/tools/gn/src/gn/json_project_writer_unittest.cc
-@@ -37,7 +37,7 @@ TEST_F(JSONWriter, ActionWithResponseFile) {
-       SubstitutionList::MakeForTest("//out/Debug/output1.out");
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
-   std::vector<const Target*> targets;
-   targets.push_back(&target);
- #if defined(OS_WIN)
-@@ -498,7 +498,7 @@ TEST_F(JSONWriter, ForEachWithResponseFile) {
-       SubstitutionList::MakeForTest("//out/Debug/{{source_name_part}}.out");
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
-   std::vector<const Target*> targets;
-   targets.push_back(&target);
- #if defined(OS_WIN)
-diff --git a/tools/gn/src/gn/ninja_action_target_writer_unittest.cc b/tools/gn/src/gn/ninja_action_target_writer_unittest.cc
-index 80b125b..b371c76 100644
---- a/tools/gn/src/gn/ninja_action_target_writer_unittest.cc
-+++ b/tools/gn/src/gn/ninja_action_target_writer_unittest.cc
-@@ -54,14 +54,14 @@ TEST(NinjaActionTargetWriter, ActionNoSources) {
-   ASSERT_TRUE(target.OnResolved(&err));
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-   writer.Run();
- 
-   const char* expected = R"(rule __foo_bar___rule
--  command = /usr/bin/python ../../foo/script.py
-+  command = /usr/bin/python2 ../../foo/script.py
-   description = ACTION //foo:bar()
-   restat = 1
- 
-@@ -96,7 +96,7 @@ TEST(NinjaActionTargetWriter, ActionNoSourcesConsole) {
-   ASSERT_TRUE(target.OnResolved(&err));
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-@@ -105,7 +105,7 @@ TEST(NinjaActionTargetWriter, ActionNoSourcesConsole) {
-   // The console pool's name must be mapped exactly to the string "console"
-   // which is a special pre-defined pool name in ninja.
-   const char* expected = R"(rule __foo_bar___rule
--  command = /usr/bin/python ../../foo/script.py
-+  command = /usr/bin/python2 ../../foo/script.py
-   description = ACTION //foo:bar()
-   restat = 1
- 
-@@ -138,7 +138,7 @@ TEST(NinjaActionTargetWriter, ActionWithSources) {
-   ASSERT_TRUE(target.OnResolved(&err));
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-@@ -146,7 +146,7 @@ TEST(NinjaActionTargetWriter, ActionWithSources) {
- 
-   const char expected_linux[] =
-       "rule __foo_bar___rule\n"
--      "  command = /usr/bin/python ../../foo/script.py\n"
-+      "  command = /usr/bin/python2 ../../foo/script.py\n"
-       "  description = ACTION //foo:bar()\n"
-       "  restat = 1\n"
-       "\n"
-@@ -207,7 +207,7 @@ TEST(NinjaActionTargetWriter, ForEach) {
-   ASSERT_TRUE(target.OnResolved(&err));
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-@@ -215,7 +215,7 @@ TEST(NinjaActionTargetWriter, ForEach) {
- 
-   const char expected_linux[] =
-       "rule __foo_bar___rule\n"
--      "  command = /usr/bin/python ../../foo/script.py -i ${in} "
-+      "  command = /usr/bin/python2 ../../foo/script.py -i ${in} "
- // Escaping is different between Windows and Posix.
- #if defined(OS_WIN)
-       "\"--out=foo$ bar${source_name_part}.o\"\n"
-@@ -273,7 +273,7 @@ TEST(NinjaActionTargetWriter, ForEachWithDepfile) {
-   target.config_values().inputs().push_back(SourceFile("//foo/included.txt"));
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
-   setup.build_settings()->set_ninja_required_version(Version{1, 9, 0});
- 
-   std::ostringstream out;
-@@ -282,7 +282,7 @@ TEST(NinjaActionTargetWriter, ForEachWithDepfile) {
- 
-   const char expected_linux[] =
-       "rule __foo_bar___rule\n"
--      "  command = /usr/bin/python ../../foo/script.py -i ${in} "
-+      "  command = /usr/bin/python2 ../../foo/script.py -i ${in} "
- #if defined(OS_WIN)
-       "\"--out=foo$ bar${source_name_part}.o\"\n"
- #else
-@@ -331,7 +331,7 @@ TEST(NinjaActionTargetWriter, ForEachWithResponseFile) {
-       SubstitutionList::MakeForTest("//out/Debug/{{source_name_part}}.out");
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-@@ -344,7 +344,7 @@ TEST(NinjaActionTargetWriter, ForEachWithResponseFile) {
-       // These come from rsp_file_contents above.
-       "  rspfile_content = -j ${source_name_part}\n"
-       // These come from the args.
--      "  command = /usr/bin/python ../../foo/script.py ${in} "
-+      "  command = /usr/bin/python2 ../../foo/script.py ${in} "
-       "${source_file_part} ${rspfile}\n"
-       "  description = ACTION //foo:bar()\n"
-       "  restat = 1\n"
-@@ -389,7 +389,7 @@ TEST(NinjaActionTargetWriter, ForEachWithPool) {
-       SubstitutionList::MakeForTest("//out/Debug/{{source_name_part}}.out");
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   std::ostringstream out;
-   NinjaActionTargetWriter writer(&target, out);
-@@ -398,7 +398,7 @@ TEST(NinjaActionTargetWriter, ForEachWithPool) {
-   const char expected_linux[] =
-       "rule __foo_bar___rule\n"
-       // These come from the args.
--      "  command = /usr/bin/python ../../foo/script.py ${in} "
-+      "  command = /usr/bin/python2 ../../foo/script.py ${in} "
-       "${source_file_part}\n"
-       "  description = ACTION //foo:bar()\n"
-       "  restat = 1\n"
-@@ -418,7 +418,7 @@ TEST(NinjaActionTargetWriter, NoTransitiveHardDeps) {
-   TestWithScope setup;
- 
-   setup.build_settings()->set_python_path(
--      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python")));
-+      base::FilePath(FILE_PATH_LITERAL("/usr/bin/python2")));
- 
-   Target dep(setup.settings(), Label(SourceDir("//foo/"), "dep"));
-   dep.set_output_type(Target::ACTION);
-@@ -445,7 +445,7 @@ TEST(NinjaActionTargetWriter, NoTransitiveHardDeps) {
-     const char expected_linux[] =
-         "rule __foo_foo___rule\n"
-         // These come from the args.
--        "  command = /usr/bin/python ../../foo/script.py\n"
-+        "  command = /usr/bin/python2 ../../foo/script.py\n"
-         "  description = ACTION //foo:foo()\n"
-         "  restat = 1\n"
-         "\n"
-@@ -474,7 +474,7 @@ TEST(NinjaActionTargetWriter, NoTransitiveHardDeps) {
-     const char expected_linux[] =
-         "rule __bar_bar___rule\n"
-         // These come from the args.
--        "  command = /usr/bin/python ../../bar/script.py\n"
-+        "  command = /usr/bin/python2 ../../bar/script.py\n"
-         "  description = ACTION //bar:bar()\n"
-         "  restat = 1\n"
-         "\n"
-diff --git a/tools/gn/tools/find_unreachable.py b/tools/gn/tools/find_unreachable.py
-index 406a312..df81838 100755
---- a/tools/gn/tools/find_unreachable.py
-+++ b/tools/gn/tools/find_unreachable.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit.py b/tools/grit/grit.py
-index abd1ab6..3e1ea69 100755
---- a/tools/grit/grit.py
-+++ b/tools/grit/grit.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/clique_unittest.py b/tools/grit/grit/clique_unittest.py
-index 7d2d731..b561fe8 100755
---- a/tools/grit/grit/clique_unittest.py
-+++ b/tools/grit/grit/clique_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/android_xml_unittest.py b/tools/grit/grit/format/android_xml_unittest.py
-index d9f476f..e3793e9 100755
---- a/tools/grit/grit/format/android_xml_unittest.py
-+++ b/tools/grit/grit/format/android_xml_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/c_format_unittest.py b/tools/grit/grit/format/c_format_unittest.py
-index 380120c..60051ea 100755
---- a/tools/grit/grit/format/c_format_unittest.py
-+++ b/tools/grit/grit/format/c_format_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/chrome_messages_json_unittest.py b/tools/grit/grit/format/chrome_messages_json_unittest.py
-index a54e6bd..e36fd81 100755
---- a/tools/grit/grit/format/chrome_messages_json_unittest.py
-+++ b/tools/grit/grit/format/chrome_messages_json_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/data_pack.py b/tools/grit/grit/format/data_pack.py
-index cfb0156..68f6ef5 100755
---- a/tools/grit/grit/format/data_pack.py
-+++ b/tools/grit/grit/format/data_pack.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/data_pack_unittest.py b/tools/grit/grit/format/data_pack_unittest.py
-index b61155f..b597810 100755
---- a/tools/grit/grit/format/data_pack_unittest.py
-+++ b/tools/grit/grit/format/data_pack_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/gen_predetermined_ids.py b/tools/grit/grit/format/gen_predetermined_ids.py
-index 3b4109d..0461359 100755
---- a/tools/grit/grit/format/gen_predetermined_ids.py
-+++ b/tools/grit/grit/format/gen_predetermined_ids.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/gen_predetermined_ids_unittest.py b/tools/grit/grit/format/gen_predetermined_ids_unittest.py
-index aabaa1e..bea8c40 100755
---- a/tools/grit/grit/format/gen_predetermined_ids_unittest.py
-+++ b/tools/grit/grit/format/gen_predetermined_ids_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/gzip_string_unittest.py b/tools/grit/grit/format/gzip_string_unittest.py
-index c0cfbe1..0104891 100755
---- a/tools/grit/grit/format/gzip_string_unittest.py
-+++ b/tools/grit/grit/format/gzip_string_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/html_inline.py b/tools/grit/grit/format/html_inline.py
-index cd1fe1f..c1a02b3 100755
---- a/tools/grit/grit/format/html_inline.py
-+++ b/tools/grit/grit/format/html_inline.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/html_inline_unittest.py b/tools/grit/grit/format/html_inline_unittest.py
-index 1b11e9e..602a7d3 100755
---- a/tools/grit/grit/format/html_inline_unittest.py
-+++ b/tools/grit/grit/format/html_inline_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/policy_templates_json_unittest.py b/tools/grit/grit/format/policy_templates_json_unittest.py
-index e252c94..7b2f1be 100755
---- a/tools/grit/grit/format/policy_templates_json_unittest.py
-+++ b/tools/grit/grit/format/policy_templates_json_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # coding: utf-8
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/grit/grit/format/rc_header_unittest.py b/tools/grit/grit/format/rc_header_unittest.py
-index 9e47912..aacc7c7 100755
---- a/tools/grit/grit/format/rc_header_unittest.py
-+++ b/tools/grit/grit/format/rc_header_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/rc_unittest.py b/tools/grit/grit/format/rc_unittest.py
-index d23f063..ea43c92 100755
---- a/tools/grit/grit/format/rc_unittest.py
-+++ b/tools/grit/grit/format/rc_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/format/resource_map_unittest.py b/tools/grit/grit/format/resource_map_unittest.py
-index 4b2c2d2..7fc6af4 100755
---- a/tools/grit/grit/format/resource_map_unittest.py
-+++ b/tools/grit/grit/format/resource_map_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/admin_template_unittest.py b/tools/grit/grit/gather/admin_template_unittest.py
-index c637af3..24e1581 100755
---- a/tools/grit/grit/gather/admin_template_unittest.py
-+++ b/tools/grit/grit/gather/admin_template_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/chrome_html_unittest.py b/tools/grit/grit/gather/chrome_html_unittest.py
-index 8c75ee5..eb0f553 100755
---- a/tools/grit/grit/gather/chrome_html_unittest.py
-+++ b/tools/grit/grit/gather/chrome_html_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/chrome_scaled_image_unittest.py b/tools/grit/grit/gather/chrome_scaled_image_unittest.py
-index 1cebfc6..4b7f784 100755
---- a/tools/grit/grit/gather/chrome_scaled_image_unittest.py
-+++ b/tools/grit/grit/gather/chrome_scaled_image_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/policy_json_unittest.py b/tools/grit/grit/gather/policy_json_unittest.py
-index 214cd27..0d7a9d0 100755
---- a/tools/grit/grit/gather/policy_json_unittest.py
-+++ b/tools/grit/grit/gather/policy_json_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/rc_unittest.py b/tools/grit/grit/gather/rc_unittest.py
-index 3c26a43..bda0486 100755
---- a/tools/grit/grit/gather/rc_unittest.py
-+++ b/tools/grit/grit/gather/rc_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/tr_html_unittest.py b/tools/grit/grit/gather/tr_html_unittest.py
-index 1194853..f82fde0 100755
---- a/tools/grit/grit/gather/tr_html_unittest.py
-+++ b/tools/grit/grit/gather/tr_html_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/gather/txt_unittest.py b/tools/grit/grit/gather/txt_unittest.py
-index abb9ed9..ac5a4ce 100755
---- a/tools/grit/grit/gather/txt_unittest.py
-+++ b/tools/grit/grit/gather/txt_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/grd_reader.py b/tools/grit/grit/grd_reader.py
-index b7bb782..37e9453 100755
---- a/tools/grit/grit/grd_reader.py
-+++ b/tools/grit/grit/grd_reader.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/grd_reader_unittest.py b/tools/grit/grit/grd_reader_unittest.py
-index 920a92f..80c2691 100755
---- a/tools/grit/grit/grd_reader_unittest.py
-+++ b/tools/grit/grit/grd_reader_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/grit_runner.py b/tools/grit/grit/grit_runner.py
-index 26aa0d5..3caa3c3 100755
---- a/tools/grit/grit/grit_runner.py
-+++ b/tools/grit/grit/grit_runner.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/grit_runner_unittest.py b/tools/grit/grit/grit_runner_unittest.py
-index 1487001..8c885c9 100755
---- a/tools/grit/grit/grit_runner_unittest.py
-+++ b/tools/grit/grit/grit_runner_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/lazy_re_unittest.py b/tools/grit/grit/lazy_re_unittest.py
-index 8488b45..329a91b 100755
---- a/tools/grit/grit/lazy_re_unittest.py
-+++ b/tools/grit/grit/lazy_re_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/base_unittest.py b/tools/grit/grit/node/base_unittest.py
-index 32a5a0c..bdafdab 100755
---- a/tools/grit/grit/node/base_unittest.py
-+++ b/tools/grit/grit/node/base_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/custom/filename_unittest.py b/tools/grit/grit/node/custom/filename_unittest.py
-index 8e2a6dd..fd1de48 100755
---- a/tools/grit/grit/node/custom/filename_unittest.py
-+++ b/tools/grit/grit/node/custom/filename_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/include_unittest.py b/tools/grit/grit/node/include_unittest.py
-index cc68177..ed98f7a 100755
---- a/tools/grit/grit/node/include_unittest.py
-+++ b/tools/grit/grit/node/include_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/message_unittest.py b/tools/grit/grit/node/message_unittest.py
-index 7a4cbbe..417b9a2 100755
---- a/tools/grit/grit/node/message_unittest.py
-+++ b/tools/grit/grit/node/message_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/misc_unittest.py b/tools/grit/grit/node/misc_unittest.py
-index 684d3ac..cae2362 100755
---- a/tools/grit/grit/node/misc_unittest.py
-+++ b/tools/grit/grit/node/misc_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/mock_brotli.py b/tools/grit/grit/node/mock_brotli.py
-index 14237aa..5ea208d 100755
---- a/tools/grit/grit/node/mock_brotli.py
-+++ b/tools/grit/grit/node/mock_brotli.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/node_io_unittest.py b/tools/grit/grit/node/node_io_unittest.py
-index 1f45e51..16b89be 100755
---- a/tools/grit/grit/node/node_io_unittest.py
-+++ b/tools/grit/grit/node/node_io_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/node/structure_unittest.py b/tools/grit/grit/node/structure_unittest.py
-index 0e66dce..6cdc6b9 100755
---- a/tools/grit/grit/node/structure_unittest.py
-+++ b/tools/grit/grit/node/structure_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/pseudo_unittest.py b/tools/grit/grit/pseudo_unittest.py
-index b1d53ff..e1db0c8 100755
---- a/tools/grit/grit/pseudo_unittest.py
-+++ b/tools/grit/grit/pseudo_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/pseudolocales_unittest.py b/tools/grit/grit/pseudolocales_unittest.py
-index bc449af..97390eb 100755
---- a/tools/grit/grit/pseudolocales_unittest.py
-+++ b/tools/grit/grit/pseudolocales_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2021 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tclib_unittest.py b/tools/grit/grit/tclib_unittest.py
-index 7a08654..ddddb5f 100755
---- a/tools/grit/grit/tclib_unittest.py
-+++ b/tools/grit/grit/tclib_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/android2grd_unittest.py b/tools/grit/grit/tool/android2grd_unittest.py
-index a6934a7..5054325 100755
---- a/tools/grit/grit/tool/android2grd_unittest.py
-+++ b/tools/grit/grit/tool/android2grd_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/build_unittest.py b/tools/grit/grit/tool/build_unittest.py
-index 969f571..365fc4f 100755
---- a/tools/grit/grit/tool/build_unittest.py
-+++ b/tools/grit/grit/tool/build_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/buildinfo_unittest.py b/tools/grit/grit/tool/buildinfo_unittest.py
-index 24e9ddf..86f91e7 100755
---- a/tools/grit/grit/tool/buildinfo_unittest.py
-+++ b/tools/grit/grit/tool/buildinfo_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/diff_structures_unittest.py b/tools/grit/grit/tool/diff_structures_unittest.py
-index a6d7585..0c882ac 100755
---- a/tools/grit/grit/tool/diff_structures_unittest.py
-+++ b/tools/grit/grit/tool/diff_structures_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/newgrd_unittest.py b/tools/grit/grit/tool/newgrd_unittest.py
-index f7c8831..79a07ac 100755
---- a/tools/grit/grit/tool/newgrd_unittest.py
-+++ b/tools/grit/grit/tool/newgrd_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/postprocess_unittest.py b/tools/grit/grit/tool/postprocess_unittest.py
-index 77fe228..921091c 100755
---- a/tools/grit/grit/tool/postprocess_unittest.py
-+++ b/tools/grit/grit/tool/postprocess_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/preprocess_unittest.py b/tools/grit/grit/tool/preprocess_unittest.py
-index 40b95cd..87409e8 100755
---- a/tools/grit/grit/tool/preprocess_unittest.py
-+++ b/tools/grit/grit/tool/preprocess_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/rc2grd_unittest.py b/tools/grit/grit/tool/rc2grd_unittest.py
-index 6d53794..4d0788e 100755
---- a/tools/grit/grit/tool/rc2grd_unittest.py
-+++ b/tools/grit/grit/tool/rc2grd_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/transl2tc_unittest.py b/tools/grit/grit/tool/transl2tc_unittest.py
-index 22e937f..9a8ca1c 100755
---- a/tools/grit/grit/tool/transl2tc_unittest.py
-+++ b/tools/grit/grit/tool/transl2tc_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/update_resource_ids/assigner_unittest.py b/tools/grit/grit/tool/update_resource_ids/assigner_unittest.py
-index 164d820..2b5af89 100755
---- a/tools/grit/grit/tool/update_resource_ids/assigner_unittest.py
-+++ b/tools/grit/grit/tool/update_resource_ids/assigner_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/tool/xmb_unittest.py b/tools/grit/grit/tool/xmb_unittest.py
-index 3c7e92c..0dedac6 100755
---- a/tools/grit/grit/tool/xmb_unittest.py
-+++ b/tools/grit/grit/tool/xmb_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/util_unittest.py b/tools/grit/grit/util_unittest.py
-index 7d6efaf..6f15ec9 100755
---- a/tools/grit/grit/util_unittest.py
-+++ b/tools/grit/grit/util_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit/xtb_reader_unittest.py b/tools/grit/grit/xtb_reader_unittest.py
-index 79c0ac9..d52b012 100755
---- a/tools/grit/grit/xtb_reader_unittest.py
-+++ b/tools/grit/grit/xtb_reader_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/grit_info.py b/tools/grit/grit_info.py
-index 6752e86..0571a6e 100755
---- a/tools/grit/grit_info.py
-+++ b/tools/grit/grit_info.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/minify_with_uglify.py b/tools/grit/minify_with_uglify.py
-index 1c12140..5a03d92 100755
---- a/tools/grit/minify_with_uglify.py
-+++ b/tools/grit/minify_with_uglify.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/minimize_css.py b/tools/grit/minimize_css.py
-index 2c3b8ae..14ab161 100755
---- a/tools/grit/minimize_css.py
-+++ b/tools/grit/minimize_css.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/minimize_css_unittest.py b/tools/grit/minimize_css_unittest.py
-index cddc313..3a26956 100755
---- a/tools/grit/minimize_css_unittest.py
-+++ b/tools/grit/minimize_css_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/grit/pak_util.py b/tools/grit/pak_util.py
-index 62931f9..b1830b5 100755
---- a/tools/grit/pak_util.py
-+++ b/tools/grit/pak_util.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/gypv8sh.py b/tools/gypv8sh.py
-index c14eebd..5b86bcc 100755
---- a/tools/gypv8sh.py
-+++ b/tools/gypv8sh.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/idl_lexer.py b/tools/idl_parser/idl_lexer.py
-index 7fde1ff..6efa99b 100755
---- a/tools/idl_parser/idl_lexer.py
-+++ b/tools/idl_parser/idl_lexer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/idl_lexer_test.py b/tools/idl_parser/idl_lexer_test.py
-index f9e8a36..be87738 100755
---- a/tools/idl_parser/idl_lexer_test.py
-+++ b/tools/idl_parser/idl_lexer_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/idl_node.py b/tools/idl_parser/idl_node.py
-index 266a526..3beda7d 100755
---- a/tools/idl_parser/idl_node.py
-+++ b/tools/idl_parser/idl_node.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/idl_parser.py b/tools/idl_parser/idl_parser.py
-index 7954edb..82813ee 100755
---- a/tools/idl_parser/idl_parser.py
-+++ b/tools/idl_parser/idl_parser.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/idl_parser_test.py b/tools/idl_parser/idl_parser_test.py
-index d7c8a5d..17b32fa 100755
---- a/tools/idl_parser/idl_parser_test.py
-+++ b/tools/idl_parser/idl_parser_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/idl_parser/run_tests.py b/tools/idl_parser/run_tests.py
-index 187181c..be98f62 100755
---- a/tools/idl_parser/run_tests.py
-+++ b/tools/idl_parser/run_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/include_tracer.py b/tools/include_tracer.py
-index 98fadb1..dc9f0f2 100755
---- a/tools/include_tracer.py
-+++ b/tools/include_tracer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/infra/builder-cache-clobber.py b/tools/infra/builder-cache-clobber.py
-index b50c690..83fc826 100755
---- a/tools/infra/builder-cache-clobber.py
-+++ b/tools/infra/builder-cache-clobber.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/infra/named-cache-clobber.py b/tools/infra/named-cache-clobber.py
-index ad5b66e..8b6e1cc 100755
---- a/tools/infra/named-cache-clobber.py
-+++ b/tools/infra/named-cache-clobber.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/ipc_messages_log.py b/tools/ipc_messages_log.py
-index ff27487..bce0be5 100755
---- a/tools/ipc_messages_log.py
-+++ b/tools/ipc_messages_log.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_comment_eater/json_comment_eater.py b/tools/json_comment_eater/json_comment_eater.py
-index 17a1525..19492cf 100755
---- a/tools/json_comment_eater/json_comment_eater.py
-+++ b/tools/json_comment_eater/json_comment_eater.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_comment_eater/json_comment_eater_test.py b/tools/json_comment_eater/json_comment_eater_test.py
-index ae03474..1a31588 100755
---- a/tools/json_comment_eater/json_comment_eater_test.py
-+++ b/tools/json_comment_eater/json_comment_eater_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/code_test.py b/tools/json_schema_compiler/code_test.py
-index 6d54ecc..d5b21fd 100755
---- a/tools/json_schema_compiler/code_test.py
-+++ b/tools/json_schema_compiler/code_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/compiler.py b/tools/json_schema_compiler/compiler.py
-index 216146b..a464d50 100755
---- a/tools/json_schema_compiler/compiler.py
-+++ b/tools/json_schema_compiler/compiler.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/cpp_bundle_generator_test.py b/tools/json_schema_compiler/cpp_bundle_generator_test.py
-index 172feca..f3e3dd4 100755
---- a/tools/json_schema_compiler/cpp_bundle_generator_test.py
-+++ b/tools/json_schema_compiler/cpp_bundle_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/cpp_type_generator_test.py b/tools/json_schema_compiler/cpp_type_generator_test.py
-index 3aaa575..737d6ad 100755
---- a/tools/json_schema_compiler/cpp_type_generator_test.py
-+++ b/tools/json_schema_compiler/cpp_type_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/cpp_util_test.py b/tools/json_schema_compiler/cpp_util_test.py
-index eef4c55..696a2a0 100755
---- a/tools/json_schema_compiler/cpp_util_test.py
-+++ b/tools/json_schema_compiler/cpp_util_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/feature_compiler_test.py b/tools/json_schema_compiler/feature_compiler_test.py
-index ff7231d..4c0d5d2 100755
---- a/tools/json_schema_compiler/feature_compiler_test.py
-+++ b/tools/json_schema_compiler/feature_compiler_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/features_compiler.py b/tools/json_schema_compiler/features_compiler.py
-index 1b744e2..b75c533 100755
---- a/tools/json_schema_compiler/features_compiler.py
-+++ b/tools/json_schema_compiler/features_compiler.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/idl_schema.py b/tools/json_schema_compiler/idl_schema.py
-index a07853f..6882e69 100755
---- a/tools/json_schema_compiler/idl_schema.py
-+++ b/tools/json_schema_compiler/idl_schema.py
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#! /usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/idl_schema_test.py b/tools/json_schema_compiler/idl_schema_test.py
-index d20074b..150bee8 100755
---- a/tools/json_schema_compiler/idl_schema_test.py
-+++ b/tools/json_schema_compiler/idl_schema_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/js_externs_generator_test.py b/tools/json_schema_compiler/js_externs_generator_test.py
-index 612650d..ece0536 100755
---- a/tools/json_schema_compiler/js_externs_generator_test.py
-+++ b/tools/json_schema_compiler/js_externs_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/js_interface_generator_test.py b/tools/json_schema_compiler/js_interface_generator_test.py
-index a108bf5..c16f228 100755
---- a/tools/json_schema_compiler/js_interface_generator_test.py
-+++ b/tools/json_schema_compiler/js_interface_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/json_schema_test.py b/tools/json_schema_compiler/json_schema_test.py
-index edbb06e..8837537 100755
---- a/tools/json_schema_compiler/json_schema_test.py
-+++ b/tools/json_schema_compiler/json_schema_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/model_test.py b/tools/json_schema_compiler/model_test.py
-index 170abbe..4622a3f 100755
---- a/tools/json_schema_compiler/model_test.py
-+++ b/tools/json_schema_compiler/model_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_schema_compiler/preview.py b/tools/json_schema_compiler/preview.py
-index 208e7fa..0226173 100755
---- a/tools/json_schema_compiler/preview.py
-+++ b/tools/json_schema_compiler/preview.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/json_schema_compiler/schema_util_test.py b/tools/json_schema_compiler/schema_util_test.py
-index 154da01..e03f572 100755
---- a/tools/json_schema_compiler/schema_util_test.py
-+++ b/tools/json_schema_compiler/schema_util_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_to_struct/element_generator_test.py b/tools/json_to_struct/element_generator_test.py
-index 08592f4..a4e4a9f 100755
---- a/tools/json_to_struct/element_generator_test.py
-+++ b/tools/json_to_struct/element_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_to_struct/json_to_struct.py b/tools/json_to_struct/json_to_struct.py
-index f3668d0..f9ac3a7 100755
---- a/tools/json_to_struct/json_to_struct.py
-+++ b/tools/json_to_struct/json_to_struct.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/json_to_struct/struct_generator_test.py b/tools/json_to_struct/struct_generator_test.py
-index 485a93e..1ff75a1 100755
---- a/tools/json_to_struct/struct_generator_test.py
-+++ b/tools/json_to_struct/struct_generator_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/l10n/generate_locales_list.py b/tools/l10n/generate_locales_list.py
-index 18229e2..dda9ac5 100755
---- a/tools/l10n/generate_locales_list.py
-+++ b/tools/l10n/generate_locales_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2021 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/licenses.py b/tools/licenses.py
-index c548ac8..c1bf2ff 100755
---- a/tools/licenses.py
-+++ b/tools/licenses.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/linux/dump-static-initializers.py b/tools/linux/dump-static-initializers.py
-index c448b26..88a57c3 100755
---- a/tools/linux/dump-static-initializers.py
-+++ b/tools/linux/dump-static-initializers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/linux/procfs.py b/tools/linux/procfs.py
-index 7211b98..ff7e50d 100755
---- a/tools/linux/procfs.py
-+++ b/tools/linux/procfs.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/linux/tests/procfs_tests.py b/tools/linux/tests/procfs_tests.py
-index c829199..517b9f4 100755
---- a/tools/linux/tests/procfs_tests.py
-+++ b/tools/linux/tests/procfs_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/mac/dump-static-initializers.py b/tools/mac/dump-static-initializers.py
-index 3a389ca..0f9e8e1 100755
---- a/tools/mac/dump-static-initializers.py
-+++ b/tools/mac/dump-static-initializers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/mac/icons/additional_tools/maketoc.py b/tools/mac/icons/additional_tools/maketoc.py
-index 86e2e07..8c687a5 100755
---- a/tools/mac/icons/additional_tools/maketoc.py
-+++ b/tools/mac/icons/additional_tools/maketoc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/mac/icons/png_check.py b/tools/mac/icons/png_check.py
-index 12ec506..aedd5a1 100755
---- a/tools/mac/icons/png_check.py
-+++ b/tools/mac/icons/png_check.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/mac/icons/png_make_srgb.py b/tools/mac/icons/png_make_srgb.py
-index 386f6a0..f00c91d 100755
---- a/tools/mac/icons/png_make_srgb.py
-+++ b/tools/mac/icons/png_make_srgb.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/mac/rewrite_modern_objc.py b/tools/mac/rewrite_modern_objc.py
-index 75efd74..aa08c13 100755
---- a/tools/mac/rewrite_modern_objc.py
-+++ b/tools/mac/rewrite_modern_objc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/mac/show_mod_init_func.py b/tools/mac/show_mod_init_func.py
-index 1dea351..c278d06 100755
---- a/tools/mac/show_mod_init_func.py
-+++ b/tools/mac/show_mod_init_func.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/mac/symbolicate_crash.py b/tools/mac/symbolicate_crash.py
-index 2dabce4..4c0c92b 100755
---- a/tools/mac/symbolicate_crash.py
-+++ b/tools/mac/symbolicate_crash.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/make-gtest-filter.py b/tools/make-gtest-filter.py
-index 4a6b320..6981502 100755
---- a/tools/make-gtest-filter.py
-+++ b/tools/make-gtest-filter.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/mb/mb.py b/tools/mb/mb.py
-index 60520e8..2acd40b 100755
---- a/tools/mb/mb.py
-+++ b/tools/mb/mb.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/mb/mb_unittest.py b/tools/mb/mb_unittest.py
-index 824df7c..4364281 100755
---- a/tools/mb/mb_unittest.py
-+++ b/tools/mb/mb_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-@@ -47,7 +47,7 @@ class FakeMBW(mb.MetaBuildWrapper):
-       self.chromium_src_dir = '/fake_src'
-       self.default_config = '/fake_src/tools/mb/mb_config.pyl'
-       self.default_isolate_map = '/fake_src/testing/buildbot/gn_isolate_map.pyl'
--      self.executable = '/usr/bin/python'
-+      self.executable = '/usr/bin/python2'
-       self.platform = 'linux2'
-       self.sep = '/'
-       self.cwd = '/fake_src/out/Default'
-diff --git a/tools/mb/mb_validation_unittest.py b/tools/mb/mb_validation_unittest.py
-index 9ae766e..7f2dc88 100755
---- a/tools/mb/mb_validation_unittest.py
-+++ b/tools/mb/mb_validation_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/md_browser/md_browser.py b/tools/md_browser/md_browser.py
-index 74259f2..60fee4b 100755
---- a/tools/md_browser/md_browser.py
-+++ b/tools/md_browser/md_browser.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/media_engagement_preload/make_dafsa.py b/tools/media_engagement_preload/make_dafsa.py
-index 72cbf7d..3ba257e 100755
---- a/tools/media_engagement_preload/make_dafsa.py
-+++ b/tools/media_engagement_preload/make_dafsa.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/media_engagement_preload/make_dafsa_unittest.py b/tools/media_engagement_preload/make_dafsa_unittest.py
-index cdf7965..1b9fdf0 100755
---- a/tools/media_engagement_preload/make_dafsa_unittest.py
-+++ b/tools/media_engagement_preload/make_dafsa_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/memory_inspector/memory_inspector_cli b/tools/memory_inspector/memory_inspector_cli
-index 774a50f..29b26a5 100755
---- a/tools/memory_inspector/memory_inspector_cli
-+++ b/tools/memory_inspector/memory_inspector_cli
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/memory_inspector/run_tests b/tools/memory_inspector/run_tests
-index 522ce80..4ae2b8f 100755
---- a/tools/memory_inspector/run_tests
-+++ b/tools/memory_inspector/run_tests
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/memory_inspector/start_web_ui b/tools/memory_inspector/start_web_ui
-index 4146351..4320df7 100755
---- a/tools/memory_inspector/start_web_ui
-+++ b/tools/memory_inspector/start_web_ui
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/actions/extract_actions.py b/tools/metrics/actions/extract_actions.py
-index d94bcbc..f77ace2 100755
---- a/tools/metrics/actions/extract_actions.py
-+++ b/tools/metrics/actions/extract_actions.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/metrics/actions/extract_actions_test.py b/tools/metrics/actions/extract_actions_test.py
-index e07d7e1..902bf4e 100755
---- a/tools/metrics/actions/extract_actions_test.py
-+++ b/tools/metrics/actions/extract_actions_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/actions/pretty_print.py b/tools/metrics/actions/pretty_print.py
-index 06cb036..71d95bf 100755
---- a/tools/metrics/actions/pretty_print.py
-+++ b/tools/metrics/actions/pretty_print.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/generate_expired_histograms_array.py b/tools/metrics/histograms/generate_expired_histograms_array.py
-index baae460..abc0caa 100755
---- a/tools/metrics/histograms/generate_expired_histograms_array.py
-+++ b/tools/metrics/histograms/generate_expired_histograms_array.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/generate_expired_histograms_array_unittest.py b/tools/metrics/histograms/generate_expired_histograms_array_unittest.py
-index 1dd7ec1..e0cd679 100755
---- a/tools/metrics/histograms/generate_expired_histograms_array_unittest.py
-+++ b/tools/metrics/histograms/generate_expired_histograms_array_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/histogram_ownership.py b/tools/metrics/histograms/histogram_ownership.py
-index bc615de..e8bba00 100755
---- a/tools/metrics/histograms/histogram_ownership.py
-+++ b/tools/metrics/histograms/histogram_ownership.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/histogram_paths.py b/tools/metrics/histograms/histogram_paths.py
-index d57faae..6191a25 100755
---- a/tools/metrics/histograms/histogram_paths.py
-+++ b/tools/metrics/histograms/histogram_paths.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/merge_xml.py b/tools/metrics/histograms/merge_xml.py
-index d522fae..c0e472d 100755
---- a/tools/metrics/histograms/merge_xml.py
-+++ b/tools/metrics/histograms/merge_xml.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/pretty_print.py b/tools/metrics/histograms/pretty_print.py
-index 9459622..f6d2934 100755
---- a/tools/metrics/histograms/pretty_print.py
-+++ b/tools/metrics/histograms/pretty_print.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/pretty_print_test.py b/tools/metrics/histograms/pretty_print_test.py
-index 25f6537..149ad05 100755
---- a/tools/metrics/histograms/pretty_print_test.py
-+++ b/tools/metrics/histograms/pretty_print_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/print_expanded_histograms.py b/tools/metrics/histograms/print_expanded_histograms.py
-index 3afb8a2..6b77f0f 100755
---- a/tools/metrics/histograms/print_expanded_histograms.py
-+++ b/tools/metrics/histograms/print_expanded_histograms.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/print_histogram_names.py b/tools/metrics/histograms/print_histogram_names.py
-index 99819e4..6596022 100755
---- a/tools/metrics/histograms/print_histogram_names.py
-+++ b/tools/metrics/histograms/print_histogram_names.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_document_policy_enum.py b/tools/metrics/histograms/update_document_policy_enum.py
-index 18fe3c3..7c86c3e 100755
---- a/tools/metrics/histograms/update_document_policy_enum.py
-+++ b/tools/metrics/histograms/update_document_policy_enum.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_feature_policy_enum.py b/tools/metrics/histograms/update_feature_policy_enum.py
-index 23dedce..a739736 100755
---- a/tools/metrics/histograms/update_feature_policy_enum.py
-+++ b/tools/metrics/histograms/update_feature_policy_enum.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_gpu_driver_bug_workaround_entries.py b/tools/metrics/histograms/update_gpu_driver_bug_workaround_entries.py
-index 6f9cd16..f1a9650 100755
---- a/tools/metrics/histograms/update_gpu_driver_bug_workaround_entries.py
-+++ b/tools/metrics/histograms/update_gpu_driver_bug_workaround_entries.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_net_error_codes.py b/tools/metrics/histograms/update_net_error_codes.py
-index c676a24..4a0d095 100755
---- a/tools/metrics/histograms/update_net_error_codes.py
-+++ b/tools/metrics/histograms/update_net_error_codes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_net_trust_anchors.py b/tools/metrics/histograms/update_net_trust_anchors.py
-index d34a018..92c6320 100755
---- a/tools/metrics/histograms/update_net_trust_anchors.py
-+++ b/tools/metrics/histograms/update_net_trust_anchors.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_scheduler_enums.py b/tools/metrics/histograms/update_scheduler_enums.py
-index 890f21c..0006d13 100755
---- a/tools/metrics/histograms/update_scheduler_enums.py
-+++ b/tools/metrics/histograms/update_scheduler_enums.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_use_counter_css.py b/tools/metrics/histograms/update_use_counter_css.py
-index 5b1b78e..95390ab 100755
---- a/tools/metrics/histograms/update_use_counter_css.py
-+++ b/tools/metrics/histograms/update_use_counter_css.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/update_use_counter_feature_enum.py b/tools/metrics/histograms/update_use_counter_feature_enum.py
-index eadcab8..cd8b887 100755
---- a/tools/metrics/histograms/update_use_counter_feature_enum.py
-+++ b/tools/metrics/histograms/update_use_counter_feature_enum.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/validate_format.py b/tools/metrics/histograms/validate_format.py
-index 8934ecb..8b86392 100755
---- a/tools/metrics/histograms/validate_format.py
-+++ b/tools/metrics/histograms/validate_format.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/validate_histograms_index.py b/tools/metrics/histograms/validate_histograms_index.py
-index 4c87002..2681770 100755
---- a/tools/metrics/histograms/validate_histograms_index.py
-+++ b/tools/metrics/histograms/validate_histograms_index.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/validate_obsolete_histograms.py b/tools/metrics/histograms/validate_obsolete_histograms.py
-index 91eb902..00ab955 100755
---- a/tools/metrics/histograms/validate_obsolete_histograms.py
-+++ b/tools/metrics/histograms/validate_obsolete_histograms.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/histograms/validate_prefix.py b/tools/metrics/histograms/validate_prefix.py
-index 9c24c8b..9fbd02d 100755
---- a/tools/metrics/histograms/validate_prefix.py
-+++ b/tools/metrics/histograms/validate_prefix.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/md2xml.py b/tools/metrics/md2xml.py
-index 6033a57..4554662 100755
---- a/tools/metrics/md2xml.py
-+++ b/tools/metrics/md2xml.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/metrics_python_tests.py b/tools/metrics/metrics_python_tests.py
-index ddd3eb6..287ad1b 100755
---- a/tools/metrics/metrics_python_tests.py
-+++ b/tools/metrics/metrics_python_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/structured/pretty_print.py b/tools/metrics/structured/pretty_print.py
-index 749695f..89b6e90 100755
---- a/tools/metrics/structured/pretty_print.py
-+++ b/tools/metrics/structured/pretty_print.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/codegen_test.py b/tools/metrics/ukm/codegen_test.py
-index 97748de..20c4d0f 100755
---- a/tools/metrics/ukm/codegen_test.py
-+++ b/tools/metrics/ukm/codegen_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/gen_builders.py b/tools/metrics/ukm/gen_builders.py
-index 44e46fa..4d14a6c 100755
---- a/tools/metrics/ukm/gen_builders.py
-+++ b/tools/metrics/ukm/gen_builders.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/gen_builders_test.py b/tools/metrics/ukm/gen_builders_test.py
-index 8c37676..e023fb0 100755
---- a/tools/metrics/ukm/gen_builders_test.py
-+++ b/tools/metrics/ukm/gen_builders_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/pretty_print.py b/tools/metrics/ukm/pretty_print.py
-index 075e746..cd6e185 100755
---- a/tools/metrics/ukm/pretty_print.py
-+++ b/tools/metrics/ukm/pretty_print.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/ukm_model_test.py b/tools/metrics/ukm/ukm_model_test.py
-index f3ab1b5..812675f 100755
---- a/tools/metrics/ukm/ukm_model_test.py
-+++ b/tools/metrics/ukm/ukm_model_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/metrics/ukm/validate_format.py b/tools/metrics/ukm/validate_format.py
-index 921d9ff..70caa01 100755
---- a/tools/metrics/ukm/validate_format.py
-+++ b/tools/metrics/ukm/validate_format.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/multi_process_rss.py b/tools/multi_process_rss.py
-index 733428d..57f7508 100755
---- a/tools/multi_process_rss.py
-+++ b/tools/multi_process_rss.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/nocompile_driver.py b/tools/nocompile_driver.py
-index 8f98325..7c9f0ea 100755
---- a/tools/nocompile_driver.py
-+++ b/tools/nocompile_driver.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/omahaproxy.py b/tools/omahaproxy.py
-index 13dc5d3..5982b6a 100755
---- a/tools/omahaproxy.py
-+++ b/tools/omahaproxy.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/origin_trials/check_token.py b/tools/origin_trials/check_token.py
-index a18a4ba..aba28e3 100755
---- a/tools/origin_trials/check_token.py
-+++ b/tools/origin_trials/check_token.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/origin_trials/generate_token.py b/tools/origin_trials/generate_token.py
-index 6e49fbf..d3864b8 100755
---- a/tools/origin_trials/generate_token.py
-+++ b/tools/origin_trials/generate_token.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/origin_trials/generate_token_unittest.py b/tools/origin_trials/generate_token_unittest.py
-index 06a2cc9..c16d73f 100755
---- a/tools/origin_trials/generate_token_unittest.py
-+++ b/tools/origin_trials/generate_token_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/perf/update_wpr b/tools/perf/update_wpr
-index 74d12e1..34b8d57 100755
---- a/tools/perf/update_wpr
-+++ b/tools/perf/update_wpr
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 the V8 project authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/perry.py b/tools/perry.py
-index 4a0ed00..4acbaa7 100755
---- a/tools/perry.py
-+++ b/tools/perry.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/generate_gn.py b/tools/polymer/generate_gn.py
-index 96413fa..119be3e 100755
---- a/tools/polymer/generate_gn.py
-+++ b/tools/polymer/generate_gn.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/generate_gn_v3.py b/tools/polymer/generate_gn_v3.py
-index 74546b3..ca98a7b 100755
---- a/tools/polymer/generate_gn_v3.py
-+++ b/tools/polymer/generate_gn_v3.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/html_to_js_test.py b/tools/polymer/html_to_js_test.py
-index c5f77d2..5dd0d6a 100755
---- a/tools/polymer/html_to_js_test.py
-+++ b/tools/polymer/html_to_js_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/polymer_grdp_to_txt.py b/tools/polymer/polymer_grdp_to_txt.py
-index 0080261..aaa10fe 100755
---- a/tools/polymer/polymer_grdp_to_txt.py
-+++ b/tools/polymer/polymer_grdp_to_txt.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/polymer_test.py b/tools/polymer/polymer_test.py
-index 7df0970..733f604 100755
---- a/tools/polymer/polymer_test.py
-+++ b/tools/polymer/polymer_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/polymer/run_polymer_tools_tests.py b/tools/polymer/run_polymer_tools_tests.py
-index 6a258b0..936bddf 100755
---- a/tools/polymer/run_polymer_tools_tests.py
-+++ b/tools/polymer/run_polymer_tools_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/protoc_wrapper/protoc_wrapper.py b/tools/protoc_wrapper/protoc_wrapper.py
-index f7f18a8..078fd17 100755
---- a/tools/protoc_wrapper/protoc_wrapper.py
-+++ b/tools/protoc_wrapper/protoc_wrapper.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/protoc_wrapper/protoc_wrapper_test.py b/tools/protoc_wrapper/protoc_wrapper_test.py
-index ef89a95..b884025 100755
---- a/tools/protoc_wrapper/protoc_wrapper_test.py
-+++ b/tools/protoc_wrapper/protoc_wrapper_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/python/google/gethash_timer.py b/tools/python/google/gethash_timer.py
-index 7d0fb24..226dc34 100755
---- a/tools/python/google/gethash_timer.py
-+++ b/tools/python/google/gethash_timer.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/python/google/httpd_utils.py b/tools/python/google/httpd_utils.py
-index b157197..0c65cdb 100755
---- a/tools/python/google/httpd_utils.py
-+++ b/tools/python/google/httpd_utils.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/real_world_impact/real_world_impact.py b/tools/real_world_impact/real_world_impact.py
-index a1af6a2..c9828f0 100755
---- a/tools/real_world_impact/real_world_impact.py
-+++ b/tools/real_world_impact/real_world_impact.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/remove_duplicate_includes.py b/tools/remove_duplicate_includes.py
-index f09d8cc..2f9dc91 100755
---- a/tools/remove_duplicate_includes.py
-+++ b/tools/remove_duplicate_includes.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/remove_stale_pyc_files.py b/tools/remove_stale_pyc_files.py
-index ff2b87b..37aeeb6 100755
---- a/tools/remove_stale_pyc_files.py
-+++ b/tools/remove_stale_pyc_files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/filter_resource_allowlist.py b/tools/resources/filter_resource_allowlist.py
-index 4052d4c..fa340a0 100755
---- a/tools/resources/filter_resource_allowlist.py
-+++ b/tools/resources/filter_resource_allowlist.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/find_unused_resources.py b/tools/resources/find_unused_resources.py
-index 8bf838a..e57e019 100755
---- a/tools/resources/find_unused_resources.py
-+++ b/tools/resources/find_unused_resources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/generate_resource_allowlist.py b/tools/resources/generate_resource_allowlist.py
-index bafa4a0..800984c 100755
---- a/tools/resources/generate_resource_allowlist.py
-+++ b/tools/resources/generate_resource_allowlist.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/list_resources_removed_by_repack.py b/tools/resources/list_resources_removed_by_repack.py
-index fb38531..7066273 100755
---- a/tools/resources/list_resources_removed_by_repack.py
-+++ b/tools/resources/list_resources_removed_by_repack.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/list_unused_grit_header.py b/tools/resources/list_unused_grit_header.py
-index a24fb44..62736c8 100755
---- a/tools/resources/list_unused_grit_header.py
-+++ b/tools/resources/list_unused_grit_header.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/optimize-ico-files.py b/tools/resources/optimize-ico-files.py
-index 5f0f716..ae2682a 100755
---- a/tools/resources/optimize-ico-files.py
-+++ b/tools/resources/optimize-ico-files.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/svgo.py b/tools/resources/svgo.py
-index 0c02ef2..249652f 100755
---- a/tools/resources/svgo.py
-+++ b/tools/resources/svgo.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/resources/svgo_presubmit_test.py b/tools/resources/svgo_presubmit_test.py
-index 6484e43..6070bd6 100755
---- a/tools/resources/svgo_presubmit_test.py
-+++ b/tools/resources/svgo_presubmit_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/roll_webgl_conformance.py b/tools/roll_webgl_conformance.py
-index 3344619..4fed620 100755
---- a/tools/roll_webgl_conformance.py
-+++ b/tools/roll_webgl_conformance.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/run-swarmed.py b/tools/run-swarmed.py
-index 371f368..472d39c 100755
---- a/tools/run-swarmed.py
-+++ b/tools/run-swarmed.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/security/check_message_owners.py b/tools/security/check_message_owners.py
-index 251c0bc..ce72a67 100755
---- a/tools/security/check_message_owners.py
-+++ b/tools/security/check_message_owners.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/command_line.py b/tools/site_compare/command_line.py
-index d2a54e5..4302207 100755
---- a/tools/site_compare/command_line.py
-+++ b/tools/site_compare/command_line.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/drivers/win32/keyboard.py b/tools/site_compare/drivers/win32/keyboard.py
-index 0135c9b..b20d7a1 100755
---- a/tools/site_compare/drivers/win32/keyboard.py
-+++ b/tools/site_compare/drivers/win32/keyboard.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/drivers/win32/mouse.py b/tools/site_compare/drivers/win32/mouse.py
-index 0096af9..b194020 100755
---- a/tools/site_compare/drivers/win32/mouse.py
-+++ b/tools/site_compare/drivers/win32/mouse.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/drivers/win32/windowing.py b/tools/site_compare/drivers/win32/windowing.py
-index 47d63f0..0345eef 100755
---- a/tools/site_compare/drivers/win32/windowing.py
-+++ b/tools/site_compare/drivers/win32/windowing.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/__init__.py b/tools/site_compare/scrapers/__init__.py
-index 35763b3..4b79f3a 100755
---- a/tools/site_compare/scrapers/__init__.py
-+++ b/tools/site_compare/scrapers/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/chrome/__init__.py b/tools/site_compare/scrapers/chrome/__init__.py
-index c5f01c8..bb143d1 100755
---- a/tools/site_compare/scrapers/chrome/__init__.py
-+++ b/tools/site_compare/scrapers/chrome/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/chrome/chromebase.py b/tools/site_compare/scrapers/chrome/chromebase.py
-index 2b8f177..e3bbb88 100755
---- a/tools/site_compare/scrapers/chrome/chromebase.py
-+++ b/tools/site_compare/scrapers/chrome/chromebase.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/firefox/__init__.py b/tools/site_compare/scrapers/firefox/__init__.py
-index d2decca..a51f19c 100755
---- a/tools/site_compare/scrapers/firefox/__init__.py
-+++ b/tools/site_compare/scrapers/firefox/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/firefox/firefox2.py b/tools/site_compare/scrapers/firefox/firefox2.py
-index 2181f58..c86ff72 100755
---- a/tools/site_compare/scrapers/firefox/firefox2.py
-+++ b/tools/site_compare/scrapers/firefox/firefox2.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/ie/__init__.py b/tools/site_compare/scrapers/ie/__init__.py
-index a130490..43c784a 100755
---- a/tools/site_compare/scrapers/ie/__init__.py
-+++ b/tools/site_compare/scrapers/ie/__init__.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/scrapers/ie/ie7.py b/tools/site_compare/scrapers/ie/ie7.py
-index dcb83ca..05767a4 100755
---- a/tools/site_compare/scrapers/ie/ie7.py
-+++ b/tools/site_compare/scrapers/ie/ie7.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/site_compare/site_compare.py b/tools/site_compare/site_compare.py
-index 322c2b7..ecca9a0 100755
---- a/tools/site_compare/site_compare.py
-+++ b/tools/site_compare/site_compare.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/sort-headers.py b/tools/sort-headers.py
-index 09427ae..d41bd44 100755
---- a/tools/sort-headers.py
-+++ b/tools/sort-headers.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/sort_sources.py b/tools/sort_sources.py
-index 87d89ba..51adcfb 100755
---- a/tools/sort_sources.py
-+++ b/tools/sort_sources.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/strict_enum_value_checker/strict_enum_value_checker_test.py b/tools/strict_enum_value_checker/strict_enum_value_checker_test.py
-index 4f95efe..efadba4 100755
---- a/tools/strict_enum_value_checker/strict_enum_value_checker_test.py
-+++ b/tools/strict_enum_value_checker/strict_enum_value_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/sublime/compile_current_file.py b/tools/sublime/compile_current_file.py
-index dd43e03..6d7b39f 100755
---- a/tools/sublime/compile_current_file.py
-+++ b/tools/sublime/compile_current_file.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/sublime/ninja_options_script.py b/tools/sublime/ninja_options_script.py
-index 8c876f7..2cbfdbf 100755
---- a/tools/sublime/ninja_options_script.py
-+++ b/tools/sublime/ninja_options_script.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/symsrc/img_fingerprint.py b/tools/symsrc/img_fingerprint.py
-index 6b5cffa..527c142 100755
---- a/tools/symsrc/img_fingerprint.py
-+++ b/tools/symsrc/img_fingerprint.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/symsrc/pdb_fingerprint_from_img.py b/tools/symsrc/pdb_fingerprint_from_img.py
-index 837c4e7..9393c92 100755
---- a/tools/symsrc/pdb_fingerprint_from_img.py
-+++ b/tools/symsrc/pdb_fingerprint_from_img.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/symsrc/source_index.py b/tools/symsrc/source_index.py
-index f6079b0..ad298d2 100755
---- a/tools/symsrc/source_index.py
-+++ b/tools/symsrc/source_index.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/tcmalloc/print-live-objects.py b/tools/tcmalloc/print-live-objects.py
-index 836a56b..502e563 100755
---- a/tools/tcmalloc/print-live-objects.py
-+++ b/tools/tcmalloc/print-live-objects.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/tests/licenses_test.py b/tools/tests/licenses_test.py
-index a52b938..e030043 100755
---- a/tools/tests/licenses_test.py
-+++ b/tools/tests/licenses_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traceline/traceline/scripts/alloc.py b/tools/traceline/traceline/scripts/alloc.py
-index c8d7d73..3423e44 100755
---- a/tools/traceline/traceline/scripts/alloc.py
-+++ b/tools/traceline/traceline/scripts/alloc.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traceline/traceline/scripts/crit_sec.py b/tools/traceline/traceline/scripts/crit_sec.py
-index 9715d71..ad83c4d 100755
---- a/tools/traceline/traceline/scripts/crit_sec.py
-+++ b/tools/traceline/traceline/scripts/crit_sec.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traceline/traceline/scripts/filter_short.py b/tools/traceline/traceline/scripts/filter_short.py
-index 00d9835..ad528ef 100755
---- a/tools/traceline/traceline/scripts/filter_short.py
-+++ b/tools/traceline/traceline/scripts/filter_short.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traceline/traceline/scripts/scstats.py b/tools/traceline/traceline/scripts/scstats.py
-index 78263ac..c9ead2f 100755
---- a/tools/traceline/traceline/scripts/scstats.py
-+++ b/tools/traceline/traceline/scripts/scstats.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traceline/traceline/scripts/split.py b/tools/traceline/traceline/scripts/split.py
-index 6f20e04..99039ed 100755
---- a/tools/traceline/traceline/scripts/split.py
-+++ b/tools/traceline/traceline/scripts/split.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/annotation_tokenizer_test.py b/tools/traffic_annotation/scripts/annotation_tokenizer_test.py
-index d417b23..8ba28df 100755
---- a/tools/traffic_annotation/scripts/annotation_tokenizer_test.py
-+++ b/tools/traffic_annotation/scripts/annotation_tokenizer_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/auditor_tests.py b/tools/traffic_annotation/scripts/auditor_tests.py
-index 7b0fd61..a71323e 100755
---- a/tools/traffic_annotation/scripts/auditor_tests.py
-+++ b/tools/traffic_annotation/scripts/auditor_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/check_annotations.py b/tools/traffic_annotation/scripts/check_annotations.py
-index 98476c5..e6d14ef 100755
---- a/tools/traffic_annotation/scripts/check_annotations.py
-+++ b/tools/traffic_annotation/scripts/check_annotations.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/extractor.py b/tools/traffic_annotation/scripts/extractor.py
-index b239ffc..6bf0b59 100755
---- a/tools/traffic_annotation/scripts/extractor.py
-+++ b/tools/traffic_annotation/scripts/extractor.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/extractor_test.py b/tools/traffic_annotation/scripts/extractor_test.py
-index 35c5409..c8bcb0c 100755
---- a/tools/traffic_annotation/scripts/extractor_test.py
-+++ b/tools/traffic_annotation/scripts/extractor_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/generator_utils_tests.py b/tools/traffic_annotation/scripts/generator_utils_tests.py
-index 06dff93..42752fc 100755
---- a/tools/traffic_annotation/scripts/generator_utils_tests.py
-+++ b/tools/traffic_annotation/scripts/generator_utils_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/traffic_annotation_auditor_tests.py b/tools/traffic_annotation/scripts/traffic_annotation_auditor_tests.py
-index 4a3d171..26af858 100755
---- a/tools/traffic_annotation/scripts/traffic_annotation_auditor_tests.py
-+++ b/tools/traffic_annotation/scripts/traffic_annotation_auditor_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/traffic_annotation/scripts/update_annotations_doc_tests.py b/tools/traffic_annotation/scripts/update_annotations_doc_tests.py
-index a6d69bc..88c1c11 100755
---- a/tools/traffic_annotation/scripts/update_annotations_doc_tests.py
-+++ b/tools/traffic_annotation/scripts/update_annotations_doc_tests.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/translation/upload_screenshots.py b/tools/translation/upload_screenshots.py
-index 268be01..18317bd 100755
---- a/tools/translation/upload_screenshots.py
-+++ b/tools/translation/upload_screenshots.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/translation/upload_screenshots_unittest.py b/tools/translation/upload_screenshots_unittest.py
-index 99b9695..100d18d 100755
---- a/tools/translation/upload_screenshots_unittest.py
-+++ b/tools/translation/upload_screenshots_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/uberblame.py b/tools/uberblame.py
-index 89b6d88..64e18d6 100755
---- a/tools/uberblame.py
-+++ b/tools/uberblame.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/unused-symbols-report.py b/tools/unused-symbols-report.py
-index 4376a5b..3bcfc44 100755
---- a/tools/unused-symbols-report.py
-+++ b/tools/unused-symbols-report.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2011 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/update_pgo_profiles.py b/tools/update_pgo_profiles.py
-index f48dbcf..bdece16 100755
---- a/tools/update_pgo_profiles.py
-+++ b/tools/update_pgo_profiles.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/echo_gadget_test.py b/tools/usb_gadget/echo_gadget_test.py
-index a25d68c..a0053a4 100755
---- a/tools/usb_gadget/echo_gadget_test.py
-+++ b/tools/usb_gadget/echo_gadget_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/gadget_test.py b/tools/usb_gadget/gadget_test.py
-index 2440983..25e9c0c 100755
---- a/tools/usb_gadget/gadget_test.py
-+++ b/tools/usb_gadget/gadget_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/hid_descriptors_test.py b/tools/usb_gadget/hid_descriptors_test.py
-index 62d51d4..77e1151 100755
---- a/tools/usb_gadget/hid_descriptors_test.py
-+++ b/tools/usb_gadget/hid_descriptors_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/hid_gadget_test.py b/tools/usb_gadget/hid_gadget_test.py
-index f0a6a29..aa27a11 100755
---- a/tools/usb_gadget/hid_gadget_test.py
-+++ b/tools/usb_gadget/hid_gadget_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/keyboard_gadget_test.py b/tools/usb_gadget/keyboard_gadget_test.py
-index cac3e31..dcb8510 100755
---- a/tools/usb_gadget/keyboard_gadget_test.py
-+++ b/tools/usb_gadget/keyboard_gadget_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/mouse_gadget_test.py b/tools/usb_gadget/mouse_gadget_test.py
-index 5216798..5930e29 100755
---- a/tools/usb_gadget/mouse_gadget_test.py
-+++ b/tools/usb_gadget/mouse_gadget_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/package.py b/tools/usb_gadget/package.py
-index 1c50033..b254dec 100755
---- a/tools/usb_gadget/package.py
-+++ b/tools/usb_gadget/package.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/usb_gadget/server.py b/tools/usb_gadget/server.py
-index 9160172..5490994 100644
---- a/tools/usb_gadget/server.py
-+++ b/tools/usb_gadget/server.py
-@@ -78,7 +78,7 @@ class UpdateHandler(web.RequestHandler):
-     with open(filename, 'wb') as f:
-       f.write(content)
- 
--    args = ['/usr/bin/python', filename,
-+    args = ['/usr/bin/python2', filename,
-             '--interface', interface,
-             '--port', str(port),
-             '--hardware', hardware]
-diff --git a/tools/usb_gadget/usb_descriptors_test.py b/tools/usb_gadget/usb_descriptors_test.py
-index 79f7d79..0840851 100755
---- a/tools/usb_gadget/usb_descriptors_test.py
-+++ b/tools/usb_gadget/usb_descriptors_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/valgrind/asan/asan_symbolize.py b/tools/valgrind/asan/asan_symbolize.py
-index 0d1c880..b94915c 100755
---- a/tools/valgrind/asan/asan_symbolize.py
-+++ b/tools/valgrind/asan/asan_symbolize.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/valgrind/asan/third_party/asan_symbolize.py b/tools/valgrind/asan/third_party/asan_symbolize.py
-index f662a8b..52afd38 100755
---- a/tools/valgrind/asan/third_party/asan_symbolize.py
-+++ b/tools/valgrind/asan/third_party/asan_symbolize.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #===- lib/asan/scripts/asan_symbolize.py -----------------------------------===#
- #
- #                     The LLVM Compiler Infrastructure
-diff --git a/tools/variations/fieldtrial_to_struct.py b/tools/variations/fieldtrial_to_struct.py
-index 9ecf389..3dc18f5 100755
---- a/tools/variations/fieldtrial_to_struct.py
-+++ b/tools/variations/fieldtrial_to_struct.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/vim/tests/chromium.ycm_extra_conf_unittest.py b/tools/vim/tests/chromium.ycm_extra_conf_unittest.py
-index 3662fee..7ff54d8 100755
---- a/tools/vim/tests/chromium.ycm_extra_conf_unittest.py
-+++ b/tools/vim/tests/chromium.ycm_extra_conf_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/tools/web_bluetooth/compact_blocklist.py b/tools/web_bluetooth/compact_blocklist.py
-index 05b31a9..91b864f 100755
---- a/tools/web_bluetooth/compact_blocklist.py
-+++ b/tools/web_bluetooth/compact_blocklist.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_bluetooth/compact_blocklist_unittest.py b/tools/web_bluetooth/compact_blocklist_unittest.py
-index a3696ef..19cd731 100755
---- a/tools/web_bluetooth/compact_blocklist_unittest.py
-+++ b/tools/web_bluetooth/compact_blocklist_unittest.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2016 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/css_checker_test.py b/tools/web_dev_style/css_checker_test.py
-index ae628fb..21a9b6d 100755
---- a/tools/web_dev_style/css_checker_test.py
-+++ b/tools/web_dev_style/css_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/eslint.py b/tools/web_dev_style/eslint.py
-index 2567d0d..d9aff13 100755
---- a/tools/web_dev_style/eslint.py
-+++ b/tools/web_dev_style/eslint.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/html_checker_test.py b/tools/web_dev_style/html_checker_test.py
-index ec34405..b4f3086 100755
---- a/tools/web_dev_style/html_checker_test.py
-+++ b/tools/web_dev_style/html_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/js_checker_eslint_test.py b/tools/web_dev_style/js_checker_eslint_test.py
-index 9493c3e..3bf85b6 100755
---- a/tools/web_dev_style/js_checker_eslint_test.py
-+++ b/tools/web_dev_style/js_checker_eslint_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/js_checker_test.py b/tools/web_dev_style/js_checker_test.py
-index 00aef42..e99f656 100755
---- a/tools/web_dev_style/js_checker_test.py
-+++ b/tools/web_dev_style/js_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/tools/web_dev_style/resource_checker_test.py b/tools/web_dev_style/resource_checker_test.py
-index 9f8ebaa..955d9b9 100755
---- a/tools/web_dev_style/resource_checker_test.py
-+++ b/tools/web_dev_style/resource_checker_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/base/ime/generate_character_composer_data.py b/ui/base/ime/generate_character_composer_data.py
-index a0becd2..4ffa795 100755
---- a/ui/base/ime/generate_character_composer_data.py
-+++ b/ui/base/ime/generate_character_composer_data.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/events/ozone/evdev/capture_device_capabilities.py b/ui/events/ozone/evdev/capture_device_capabilities.py
-index fea4508..aa5cb89 100755
---- a/ui/events/ozone/evdev/capture_device_capabilities.py
-+++ b/ui/events/ozone/evdev/capture_device_capabilities.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/events/ozone/evdev/capture_test_events.py b/ui/events/ozone/evdev/capture_test_events.py
-index 4fc4815..90cd7ec 100755
---- a/ui/events/ozone/evdev/capture_test_events.py
-+++ b/ui/events/ozone/evdev/capture_test_events.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2017 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/events/ozone/evdev/explain_proc_bus_input_devices.py b/ui/events/ozone/evdev/explain_proc_bus_input_devices.py
-index e4c860e..7237461 100755
---- a/ui/events/ozone/evdev/explain_proc_bus_input_devices.py
-+++ b/ui/events/ozone/evdev/explain_proc_bus_input_devices.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/python
-+#!/usr/bin/python2
- # Copyright 2015 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/file_manager/base/tools/modules.py b/ui/file_manager/base/tools/modules.py
-index 8851aac..590896d 100755
---- a/ui/file_manager/base/tools/modules.py
-+++ b/ui/file_manager/base/tools/modules.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright (c) 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/ui/file_manager/base/tools/modules_test.py b/ui/file_manager/base/tools/modules_test.py
-index 014ea0f..acedbfd 100755
---- a/ui/file_manager/base/tools/modules_test.py
-+++ b/ui/file_manager/base/tools/modules_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/file_manager/file_manager/test/scripts/create_test_main.py b/ui/file_manager/file_manager/test/scripts/create_test_main.py
-index 24b7057..37c9cd1 100755
---- a/ui/file_manager/file_manager/test/scripts/create_test_main.py
-+++ b/ui/file_manager/file_manager/test/scripts/create_test_main.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- 
- # Copyright 2018 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/ui/gl/generate_bindings.py b/ui/gl/generate_bindings.py
-index 0713478..84ecd12 100755
---- a/ui/gl/generate_bindings.py
-+++ b/ui/gl/generate_bindings.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright (c) 2012 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/ozone/generate_constructor_list.py b/ui/ozone/generate_constructor_list.py
-index 04fa18e..e678729 100755
---- a/ui/ozone/generate_constructor_list.py
-+++ b/ui/ozone/generate_constructor_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2014 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/ozone/generate_ozone_platform_list.py b/ui/ozone/generate_ozone_platform_list.py
-index 2702b68..0b85341 100755
---- a/ui/ozone/generate_ozone_platform_list.py
-+++ b/ui/ozone/generate_ozone_platform_list.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2013 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/webui/resources/tools/generate_grd_test.py b/ui/webui/resources/tools/generate_grd_test.py
-index 70b0c5b..64ade24 100755
---- a/ui/webui/resources/tools/generate_grd_test.py
-+++ b/ui/webui/resources/tools/generate_grd_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/ui/webui/resources/tools/js_modulizer_test.py b/ui/webui/resources/tools/js_modulizer_test.py
-index 0eac180..581c111 100755
---- a/ui/webui/resources/tools/js_modulizer_test.py
-+++ b/ui/webui/resources/tools/js_modulizer_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
-diff --git a/weblayer/browser/android/javatests/weblayer_instrumentation_test_versions_test.py b/weblayer/browser/android/javatests/weblayer_instrumentation_test_versions_test.py
-index de71c81..c3a08ae 100755
---- a/weblayer/browser/android/javatests/weblayer_instrumentation_test_versions_test.py
-+++ b/weblayer/browser/android/javatests/weblayer_instrumentation_test_versions_test.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- #
- # Copyright 2020 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
-diff --git a/weblayer/tools/run_weblayer_shell.py b/weblayer/tools/run_weblayer_shell.py
-index 7ae95f4..e461c1a 100755
---- a/weblayer/tools/run_weblayer_shell.py
-+++ b/weblayer/tools/run_weblayer_shell.py
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/env python2
- # Copyright 2019 The Chromium Authors. All rights reserved.
- # Use of this source code is governed by a BSD-style license that can be
- # found in the LICENSE file.
diff --git a/debian/patches/debianization/manpage.patch b/debian/patches/debianization/manpage.patch
index 2e6ba87..9f548f0 100644
--- a/debian/patches/debianization/manpage.patch
+++ b/debian/patches/debianization/manpage.patch
@@ -43,7 +43,7 @@ forwarded: http://code.google.com/p/chromium/issues/detail?id=73591
 -Bug tracker:
 +Debian bug tracker:
 +.IP
-+http://bugs.debian.org/chromium-browser
++https://bugs.debian.org/chromium
 +.PP
 +Upstream bug tracker:
  .IP
@@ -55,7 +55,7 @@ forwarded: http://code.google.com/p/chromium/issues/detail?id=73591
 +If your bug is specific to Debian, please submit it only to the Debian bug
 +tracker.
 +.IP
-+http://www.debian.org/Bugs/Reporting
++https://www.debian.org/Bugs/Reporting
  
  .SH AUTHOR
  The Chromium team \- <http://www.chromium.org>
diff --git a/debian/patches/debianization/master-preferences.patch b/debian/patches/debianization/master-preferences.patch
index d43f208..3a95e27 100644
--- a/debian/patches/debianization/master-preferences.patch
+++ b/debian/patches/debianization/master-preferences.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/chrome/browser/first_run/first_run_internal_linux.cc
 +++ b/chrome/browser/first_run/first_run_internal_linux.cc
-@@ -18,11 +18,7 @@ bool IsOrganicFirstRun() {
+@@ -19,16 +19,7 @@ bool IsOrganicFirstRun() {
  }
  
  base::FilePath InitialPrefsPath() {
@@ -11,6 +11,11 @@ author: Michael Gilbert <mgilbert@debian.org>
 -  base::FilePath initial_prefs;
 -  if (!base::PathService::Get(base::DIR_EXE, &initial_prefs))
 -    return base::FilePath();
+-
+-  base::FilePath new_path = initial_prefs.AppendASCII(installer::kInitialPrefs);
+-  if (base::PathIsReadable(new_path))
+-    return new_path;
+-
 -  return initial_prefs.AppendASCII(installer::kLegacyInitialPrefs);
 +  return base::FilePath("/etc/chromium/master_preferences");
  }
diff --git a/debian/patches/debianization/optimization.patch b/debian/patches/debianization/optimization.patch
index 28b86d0..c415a37 100644
--- a/debian/patches/debianization/optimization.patch
+++ b/debian/patches/debianization/optimization.patch
@@ -3,43 +3,30 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/build/config/compiler/BUILD.gn
 +++ b/build/config/compiler/BUILD.gn
-@@ -2035,7 +2035,7 @@ config("optimize") {
+@@ -1990,7 +1990,7 @@ config("optimize") {
      # - Investigate -Oz here, maybe just for ARM?
      cflags = [ "-Os" ] + common_optimize_on_cflags
    } else {
 -    cflags = [ "-O2" ] + common_optimize_on_cflags
 +    cflags = common_optimize_on_cflags
    }
-   ldflags = common_optimize_on_ldflags
- }
-@@ -2101,7 +2101,7 @@ config("optimize_max") {
+   if (optimize_for_size) {
+     rustflags = [ "-Copt-level=s" ]
+@@ -2061,7 +2061,7 @@ config("optimize_max") {
      } else if (optimize_for_fuzzing) {
        cflags = [ "-O1" ] + common_optimize_on_cflags
      } else {
 -      cflags = [ "-O2" ] + common_optimize_on_cflags
 +      cflags = common_optimize_on_cflags
      }
+     rustflags = [ "-Copt-level=3" ]
    }
- }
-@@ -2133,7 +2133,7 @@ config("optimize_speed") {
+@@ -2094,7 +2094,7 @@ config("optimize_speed") {
      } else if (optimize_for_fuzzing) {
        cflags = [ "-O1" ] + common_optimize_on_cflags
      } else {
 -      cflags = [ "-O3" ] + common_optimize_on_cflags
 +      cflags = common_optimize_on_cflags
      }
+     rustflags = [ "-Copt-level=3" ]
    }
- }
---- a/tools/gn/build/gen.py
-+++ b/tools/gn/build/gen.py
-@@ -326,10 +326,8 @@ def WriteGNNinja(path, platform, host, o
-       cflags.extend(['-O0', '-g'])
-     else:
-       cflags.append('-DNDEBUG')
--      cflags.append('-O3')
-       if options.no_strip:
-         cflags.append('-g')
--      ldflags.append('-O3')
-       # Use -fdata-sections and -ffunction-sections to place each function
-       # or data item into its own section so --gc-sections can eliminate any
-       # unused functions and data items.
diff --git a/debian/patches/debianization/sandbox.patch b/debian/patches/debianization/sandbox.patch
index d0b1c71..b4a9cdc 100644
--- a/debian/patches/debianization/sandbox.patch
+++ b/debian/patches/debianization/sandbox.patch
@@ -9,7 +9,7 @@ author: Michael Gilbert <mgilbert@debian.org>
    } else {
 -    LOG(FATAL)
 -        << "No usable sandbox! Update your kernel or see "
--           "https://chromium.googlesource.com/chromium/src/+/master/"
+-           "https://chromium.googlesource.com/chromium/src/+/main/"
 -           "docs/linux/suid_sandbox_development.md for more information on "
 -           "developing with the SUID sandbox. "
 +    LOG(ERROR)
diff --git a/debian/patches/disable/android.patch b/debian/patches/disable/android.patch
index 61bcdb9..ec31701 100644
--- a/debian/patches/disable/android.patch
+++ b/debian/patches/disable/android.patch
@@ -29,6 +29,6 @@ author: Michael Gilbert <mgilbert@debian.org>
  
 -import("//chrome/android/channel.gni")
 -
- # Chrome can be built with any combination of v1/v2 enabled.
- # When both are enabled, we use the InterestFeedV2 feature to select which
- # one is used at runtime.
+ declare_args() {
+   # Whether Feed is enabled in the build.
+   enable_feed_v2 = is_android
diff --git a/debian/patches/disable/angle-perftests.patch b/debian/patches/disable/angle-perftests.patch
index 83bd452..5132ea9 100644
--- a/debian/patches/disable/angle-perftests.patch
+++ b/debian/patches/disable/angle-perftests.patch
@@ -3,7 +3,7 @@ author: Michel Le Bihan <michel@lebihan.pl>
 
 --- a/chrome/test/BUILD.gn
 +++ b/chrome/test/BUILD.gn
-@@ -3391,10 +3391,6 @@ template("performance_test_suite_template") {
+@@ -4275,10 +4275,6 @@ template("performance_test_suite_templat
        data_deps += [ "//third_party/dawn/src/tests:dawn_perf_tests" ]
      }
  
@@ -25,8 +25,16 @@ author: Michel Le Bihan <michel@lebihan.pl>
 +  build_angle_perftests = false
  }
  
- angle_test("test_utils_unittest_helper") {
-@@ -262,47 +262,7 @@ config("angle_maybe_has_histograms") {
+ if (is_android) {
+@@ -178,7 +177,6 @@ angle_test("angle_unittests") {
+ 
+   deps = [
+     ":angle_test_expectations",
+-    "$angle_root:angle_json_serializer",
+     "$angle_root:libANGLE",
+     "$angle_root:libEGL_static",
+     "$angle_root:libGLESv2_static",
+@@ -337,48 +335,7 @@ config("angle_maybe_has_histograms") {
    }
  }
  
@@ -55,6 +63,7 @@ author: Michel Le Bihan <michel@lebihan.pl>
 -      "test_utils/runner/TestSuite.h",
 -    ]
 -    public_deps = [
+-      "$angle_root/src/tests:angle_test_expectations",
 -      "$angle_root/third_party/rapidjson:rapidjson",
 -      "${invoker.test_utils}",
 -    ]
@@ -75,7 +84,7 @@ author: Michel Le Bihan <michel@lebihan.pl>
    import("angle_perftests.gni")
  
    # This test suite is for perf tests that use ANGLE's internals in some direct way.
-@@ -1443,12 +1406,11 @@ group("angle_tests") {
+@@ -1562,12 +1519,11 @@ group("angle_tests") {
    testonly = true
    deps = [
      ":angle_end2end_tests",
@@ -91,9 +100,9 @@ author: Michel Le Bihan <michel@lebihan.pl>
        ":angle_white_box_tests",
 --- a/third_party/angle/gni/angle.gni
 +++ b/third_party/angle/gni/angle.gni
-@@ -173,7 +173,7 @@ declare_args() {
-   # TODO(jdarpinian): Support enabling CGL and EAGL at the same time using the soft linking code. Also support disabling both for Metal-only builds.
-   angle_enable_cgl = angle_enable_gl && !angle_enable_eagl && is_apple
+@@ -227,7 +227,7 @@ declare_args() {
+       is_apple &&
+       (angle_enable_glsl || angle_enable_metal || use_fuzzing_engine)
  
 -  angle_has_histograms = angle_has_build
 +  angle_has_histograms = false
diff --git a/debian/patches/disable/buildbot.patch b/debian/patches/disable/buildbot.patch
deleted file mode 100644
index c3e6e95..0000000
--- a/debian/patches/disable/buildbot.patch
+++ /dev/null
@@ -1,174 +0,0 @@
-description: remove dependencies on buildbot directory
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/BUILD.gn
-+++ b/BUILD.gn
-@@ -1063,7 +1063,6 @@ if (!is_ios) {
-       "//services/device/public/mojom:usb_js_data_deps",
-       "//services/shape_detection/public/mojom:mojom_js_data_deps",
-       "//skia/public/mojom:mojom_js_data_deps",
--      "//testing/buildbot/filters:blink_web_tests_filter",
-       "//third_party/blink/public:blink_devtools_frontend_resources_files",
-       "//third_party/blink/public:blink_devtools_inspector_resources",
-       "//third_party/blink/public/mojom:mojom_platform_js_data_deps",
---- a/chrome/test/BUILD.gn
-+++ b/chrome/test/BUILD.gn
-@@ -879,8 +879,6 @@ if (!is_android) {
-       "//ppapi:copy_test_files",
-       "//ppapi:copy_test_files2",
-       "//ppapi:ppapi_tests",
--      "//testing/buildbot/filters:browser_tests_filters",
--      "//testing/buildbot/filters:linux_trusty_rel_browser_tests_filters",
-       "//third_party/mesa_headers",
-       "//third_party/widevine/cdm:widevine_test_license_server",
-       "//tools/media_engagement_preload:generator",
-@@ -1674,7 +1672,6 @@ if (!is_android) {
-       data_deps += [
-         "//ash/keyboard/ui:resources",
-         "//chrome",
--        "//testing/buildbot/filters:chromeos_filters",
-         "//ui/file_manager:unit_test_data",
-       ]
- 
-@@ -4048,7 +4045,6 @@ test("unit_tests") {
-   data_deps = [
-     "//chrome/test/data/media/engagement/preload:generate_preload_list",
-     "//chrome/test/data/media/engagement/preload:test_data",
--    "//testing/buildbot/filters:unit_tests_filters",
-   ]
- 
-   data = [
-@@ -5768,7 +5764,6 @@ test("unit_tests") {
-       "//chrome/browser/chromeos:unit_tests",
-       "//chromeos/ime:gencode",
-     ]
--    data_deps += [ "//testing/buildbot/filters:chromeos_filters" ]
-     sources -=
-         [ "../browser/policy/cloud/user_policy_signin_service_unittest.cc" ]
-   }
-@@ -6544,7 +6539,6 @@ if (!is_android) {
-     data_deps = [
-       "//chrome:browser_tests_pak",
-       "//ppapi:ppapi_tests",
--      "//testing/buildbot/filters:interactive_ui_tests_filters",
-       "//third_party/mesa_headers",
-       "//ui/resources:ui_test_pak_data",
-     ]
-@@ -7104,7 +7098,6 @@ if (!is_fuchsia && !is_android) {
-     ]
- 
-     data_deps = [
--      "//testing/buildbot/filters:e2e_sync_integration_tests_filters",
-       "//third_party/mesa_headers",
-     ]
- 
---- a/third_party/breakpad/BUILD.gn
-+++ b/third_party/breakpad/BUILD.gn
-@@ -711,7 +711,6 @@ if (is_linux || is_chromeos || is_androi
- 
-     data_deps = [
-       ":linux_dumper_unittest_helper",
--      "//testing/buildbot/filters:breakpad_unittests_filters",
-     ]
- 
-     include_dirs = [
---- a/content/test/BUILD.gn
-+++ b/content/test/BUILD.gn
-@@ -1351,7 +1351,6 @@ test("content_browsertests") {
- 
-   data_deps = [
-     "//content/shell:pak",
--    "//testing/buildbot/filters:content_browsertests_filters",
-     "//third_party/mesa_headers",
-   ]
- 
-@@ -2296,7 +2295,6 @@ test("content_unittests") {
-   ]
- 
-   data_deps = [
--    "//testing/buildbot/filters:content_unittests_filters",
-     "//third_party/mesa_headers",
-   ]
- 
---- a/media/BUILD.gn
-+++ b/media/BUILD.gn
-@@ -175,7 +175,6 @@ test("media_unittests") {
-     "formats/mp4/h264_annex_b_fuzz_corpus/",
-   ]
- 
--  data_deps = [ "//testing/buildbot/filters:media_unittests_filters" ]
- 
-   if (media_use_ffmpeg) {
-     deps += [ "//media/ffmpeg:unit_tests" ]
---- a/net/BUILD.gn
-+++ b/net/BUILD.gn
-@@ -4579,7 +4579,6 @@ test("net_unittests") {
-   data = []
-   data_deps = [
-     "third_party/nist-pkits/",
--    "//testing/buildbot/filters:net_unittests_filters",
-   ]
- 
-   if (is_linux || is_chromeos || is_mac || is_win || is_fuchsia) {
---- a/cc/BUILD.gn
-+++ b/cc/BUILD.gn
-@@ -831,7 +831,6 @@ cc_test("cc_unittests") {
-     "//ui/gl:test_support",
-   ]
-   data_deps = [
--    "//testing/buildbot/filters:cc_unittests_filters",
-     "//third_party/mesa_headers",
-   ]
- 
---- a/components/BUILD.gn
-+++ b/components/BUILD.gn
-@@ -185,7 +185,7 @@ test("components_unittests") {
-     "//components/webdata_services:unit_tests",
-   ]
- 
--  data_deps = [ "//testing/buildbot/filters:components_unittests_filters" ]
-+  data_deps = []
- 
-   if (toolkit_views) {
-     deps += [
---- a/components/viz/BUILD.gn
-+++ b/components/viz/BUILD.gn
-@@ -26,7 +26,6 @@ viz_test("viz_unittests") {
-   data = [ "test/data/" ]
- 
-   data_deps = [
--    "//testing/buildbot/filters:viz_unittests_filters",
-     "//third_party/mesa_headers",
-   ]
- 
---- a/gpu/BUILD.gn
-+++ b/gpu/BUILD.gn
-@@ -445,7 +445,6 @@ test("gl_tests") {
-     ]
-   }
- 
--  data_deps = [ "//testing/buildbot/filters:gl_tests_filters" ]
- }
- 
- test("gpu_unittests") {
---- a/sandbox/linux/BUILD.gn
-+++ b/sandbox/linux/BUILD.gn
-@@ -199,7 +199,6 @@ test("sandbox_linux_unittests") {
-     ":sandbox_linux_unittests_sources",
-     "//sandbox/policy:tests",
-   ]
--  data_deps = [ "//testing/buildbot/filters:sandbox_linux_unittests_filters" ]
-   if (is_android) {
-     use_raw_android_executable = true
-   }
---- a/ui/base/BUILD.gn
-+++ b/ui/base/BUILD.gn
-@@ -924,7 +924,7 @@ test("ui_base_unittests") {
-   }
- 
-   data = []
--  data_deps = [ "//testing/buildbot/filters:ui_base_unittests_filters" ]
-+  data_deps = []
-   deps = [
-     ":ui_base_test_resources_grit",
-     ":ui_base_unittests_bundle_data",
diff --git a/debian/patches/disable/catapult.patch b/debian/patches/disable/catapult.patch
index a49c958..cf12130 100644
--- a/debian/patches/disable/catapult.patch
+++ b/debian/patches/disable/catapult.patch
@@ -3,23 +3,23 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/BUILD.gn
 +++ b/BUILD.gn
-@@ -245,7 +245,6 @@ group("gn_all") {
+@@ -257,7 +257,6 @@ group("gn_all") {
+     deps += [
        "//google_apis/gcm:mcs_probe",
-       "//media/capture:capture_unittests",
        "//media/cast:cast_unittests",
 -      "//third_party/catapult/telemetry:bitmaptools($host_toolchain)",
      ]
-   } else if (is_ios) {
-     deps += [
-@@ -355,7 +354,6 @@ group("gn_all") {
+     if (!is_android) {
+       deps += [ "//chrome/test:telemetry_perf_unittests" ]
+@@ -385,7 +384,6 @@ group("gn_all") {
        "//net/android:net_junit_tests",
        "//services:services_junit_tests",
        "//testing/android/junit:junit_unit_tests",
 -      "//third_party/catapult/devil",
        "//third_party/r8:custom_d8_java",
-       "//third_party/smhasher:murmurhash3",
        "//tools/android:android_tools",
-@@ -950,7 +948,6 @@ if (is_chromeos) {
+       "//tools/android:memconsumer",
+@@ -989,7 +987,6 @@ if (is_chromeos_ash) {
        "//third_party/dawn/src/tests:dawn_unittests",
  
        # Blocked on https://github.com/catapult-project/catapult/issues/2297
@@ -27,15 +27,15 @@ author: Michael Gilbert <mgilbert@debian.org>
        "//tools/perf/clear_system_cache",
        "//ui/ozone/gl:ozone_gl_unittests",
      ]
-@@ -1028,7 +1025,6 @@ if (!is_ios) {
-       data_deps = [
+@@ -1074,7 +1071,6 @@ if (!is_ios) {
          "//chrome:chrome",
          "//chrome/test/chromedriver",
+         "//testing:test_scripts_shared",
 -        "//third_party/catapult/third_party/typ",
        ]
        if (is_win) {
          data_deps += [ "//build/win:copy_cdb_to_output" ]
-@@ -1067,7 +1063,6 @@ if (!is_ios) {
+@@ -1113,7 +1109,6 @@ if (!is_ios) {
        "//third_party/blink/public:blink_devtools_inspector_resources",
        "//third_party/blink/public/mojom:mojom_platform_js_data_deps",
        "//third_party/blink/renderer/core:js_files_for_form_controls_web_tests",
@@ -43,7 +43,7 @@ author: Michael Gilbert <mgilbert@debian.org>
        "//third_party/hyphenation-patterns:test_data",
        "//third_party/mesa_headers",
        "//tools/imagediff",
-@@ -1133,7 +1128,6 @@ if (!is_ios) {
+@@ -1179,7 +1174,6 @@ if (!is_ios) {
  
      if (is_android) {
        data += [
@@ -51,28 +51,27 @@ author: Michael Gilbert <mgilbert@debian.org>
          "//build/android/",
        ]
      }
-@@ -1267,11 +1261,6 @@ if (!is_ios) {
+@@ -1466,10 +1460,6 @@ if (!is_ios) {
        "//third_party/blink/web_tests/StaleTestExpectations",
        "//third_party/blink/web_tests/TestExpectations",
        "//third_party/blink/web_tests/VirtualTestSuites",
 -      "//third_party/catapult/common/py_utils/",
 -      "//third_party/catapult/devil/",
 -      "//third_party/catapult/dependency_manager/",
--      "//third_party/catapult/third_party/zipfile/",
 -      "//third_party/catapult/third_party/typ/",
        "//third_party/depot_tools/pylint",
        "//third_party/depot_tools/pylint-1.5",
        "//third_party/depot_tools/pylint_main.py",
 --- a/tools/binary_size/BUILD.gn
 +++ b/tools/binary_size/BUILD.gn
-@@ -18,7 +18,6 @@ python_library("binary_size_trybot_py") {
- python_library("sizes_py") {
-   testonly = true
+@@ -20,7 +20,6 @@ python_library("sizes_py") {
    pydeps_file = "sizes.pydeps"
--  data_deps = [ "//third_party/catapult/tracing:convert_chart_json" ]
+   data_deps = [
+     "//build/util:test_results",
+-    "//third_party/catapult/tracing:convert_chart_json",
+   ]
  }
  
- if (is_linux) {
 --- a/v8/tools/BUILD.gn
 +++ b/v8/tools/BUILD.gn
 @@ -30,10 +30,6 @@ group("v8_android_test_runner_deps") {
@@ -88,7 +87,7 @@ author: Michael Gilbert <mgilbert@debian.org>
  
 --- a/chrome/test/BUILD.gn
 +++ b/chrome/test/BUILD.gn
-@@ -7295,8 +7295,6 @@ if (!is_fuchsia && !is_android) {
+@@ -9332,8 +9332,6 @@ if (!is_android && !is_fuchsia) {
        "//chrome/test/data/password/captured_sites/",
        "//chrome/test/data/web_page_replay_go_helper_scripts/automation_helper.js",
        "//components/test/data/autofill/web_page_replay_support_files/",
@@ -97,61 +96,53 @@ author: Michael Gilbert <mgilbert@debian.org>
      ]
  
      if (is_linux || is_chromeos || is_win) {
-@@ -7333,7 +7331,6 @@ if (!is_fuchsia && !is_android) {
- 
-       # TODO(uwyiming@chromium.org) create a gn target for Web Page Replay Go (WPR Go) and only WPR Go.
-       # So that test targets requiring WPR Go does not pull down the whole telemetry tool chain.
--      "//third_party/catapult:telemetry_chrome_test_support",
-       "//third_party/hunspell",
-       "//third_party/icu",
-       "//third_party/libpng",
-@@ -7362,7 +7359,6 @@ if (!is_fuchsia && !is_android) {
+@@ -9525,7 +9523,6 @@ if (!is_android && !is_fuchsia) {
      deps = [ "//tools/perf/chrome_telemetry_build:telemetry_chrome_test" ]
  
      data = [
 -      "//third_party/catapult/telemetry/telemetry/internal/bin/",
        "//tools/perf/run_telemetry_tests",
- 
-       # For isolate contract.
-@@ -7504,7 +7499,6 @@ if (is_mac || is_win || is_android) {
+       "//testing/scripts/run_telemetry_as_googletest.py",
+     ]
+@@ -9657,7 +9654,6 @@ if (is_mac || is_win || is_android) {
+       "//chrome/test/data/perf",
+       "//components/variations/service/generate_ui_string_overrider.py",
        "//testing/scripts",
-       "//testing/test_env.py",
-       "//testing/xvfb.py",
 -      "//third_party/catapult",
-       "//tools",
+       "//tools/perf",
      ]
-   }
+     data_deps = [ "//testing:test_scripts_shared" ]
 --- a/tools/grit/BUILD.gn
 +++ b/tools/grit/BUILD.gn
 @@ -33,7 +33,6 @@ group("grit_python_unittests") {
+   data = [
      "//testing/scripts/run_isolated_script_test.py",
-     "//testing/xvfb.py",
      "//tools/grit/",
 -    "//third_party/catapult/third_party/typ/",
+     "//third_party/node/",
+     "//third_party/six/src/six.py",
    ]
- }
- 
 --- a/tools/metrics/BUILD.gn
 +++ b/tools/metrics/BUILD.gn
-@@ -56,7 +56,6 @@ group("metrics_python_tests") {
+@@ -45,7 +45,6 @@ group("metrics_python_tests") {
+     # The run_isolated_script_test.py script and its dependencies.
+     "//testing/scripts/run_isolated_script_test.py",
      "//testing/scripts/common.py",
-     "//testing/xvfb.py",
-     "//testing/test_env.py",
 -    "//third_party/catapult/third_party/typ/",
  
      # Scripts we depend on. Their unit tests are also included.
      "//tools/json_comment_eater/json_comment_eater.py",
 --- a/tools/perf/chrome_telemetry_build/BUILD.gn
 +++ b/tools/perf/chrome_telemetry_build/BUILD.gn
-@@ -107,7 +107,6 @@ group("telemetry_chrome_test_without_chr
-     "//tools/perf/core/",  # chrome_telemetry_build/ depends on core/
+@@ -207,7 +207,6 @@ group("telemetry_chrome_test_without_chr
    ]
    data_deps = [
+     "//testing:test_scripts_shared",
 -    "//third_party/catapult:telemetry_chrome_test_support",
      "//tools/metrics:metrics_python_tests",
    ]
  
-@@ -151,7 +150,5 @@ group("telemetry_chrome_test_without_chr
+@@ -251,7 +250,5 @@ group("telemetry_chrome_test_without_chr
        "//build/android:devil_chromium_py",
        "//build/android:stack_tools",
      ]
@@ -161,41 +152,42 @@ author: Michael Gilbert <mgilbert@debian.org>
  }
 --- a/tools/polymer/BUILD.gn
 +++ b/tools/polymer/BUILD.gn
-@@ -10,6 +10,5 @@ group("polymer_tools_python_unittests")
+@@ -8,7 +8,6 @@ group("polymer_tools_python_unittests")
+   data = [
      "//testing/scripts/run_isolated_script_test.py",
-     "//testing/xvfb.py",
      "//tools/polymer/",
 -    "//third_party/catapult/third_party/typ/",
    ]
+   data_deps = [ "//testing:test_scripts_shared" ]
  }
 --- a/tools/gritsettings/resource_ids.spec
 +++ b/tools/gritsettings/resource_ids.spec
-@@ -491,12 +491,6 @@
+@@ -697,12 +697,6 @@
    "content/test/web_ui_mojo_test_resources.grd": {
-     "includes": [2950],
+     "includes": [3860],
    },
 -
 -  # This file is generated during the build.
 -  "<(SHARED_INTERMEDIATE_DIR)/content/browser/tracing/tracing_resources.grd": {
 -    "META": {"sizes": {"includes": [20],}},
--    "includes": [2960],
+-    "includes": [3880],
 -  },
    # END content/ section.
  
    # START ios/web/ section.
 --- a/content/browser/BUILD.gn
 +++ b/content/browser/BUILD.gn
-@@ -2213,7 +2213,6 @@ source_set("browser") {
+@@ -2437,7 +2437,6 @@ source_set("browser") {
    if (!is_android) {
      deps += [
        "//components/vector_icons",
 -      "//content/browser/tracing:resources",
      ]
-   }
- 
+     sources += [
+       # Non-Android platforms that don't presently support
 --- a/fuchsia/engine/BUILD.gn
 +++ b/fuchsia/engine/BUILD.gn
-@@ -32,7 +32,6 @@ repack("web_engine_pak") {
+@@ -27,7 +27,6 @@ repack("web_engine_pak") {
    sources = [
      "$root_gen_dir/components/components_resources.pak",
      "$root_gen_dir/content/app/resources/content_resources_100_percent.pak",
@@ -203,7 +195,7 @@ author: Michael Gilbert <mgilbert@debian.org>
      "$root_gen_dir/content/content_resources.pak",
      "$root_gen_dir/content/dev_ui_content_resources.pak",
      "$root_gen_dir/mojo/public/js/mojo_bindings_resources.pak",
-@@ -47,7 +46,6 @@ repack("web_engine_pak") {
+@@ -42,7 +41,6 @@ repack("web_engine_pak") {
      "//content:content_resources",
      "//content:dev_ui_content_resources",
      "//content/app/resources",
@@ -213,7 +205,7 @@ author: Michael Gilbert <mgilbert@debian.org>
      "//net:net_resources",
 --- a/headless/BUILD.gn
 +++ b/headless/BUILD.gn
-@@ -31,7 +31,6 @@ repack("pak") {
+@@ -49,7 +49,6 @@ repack("pak") {
      "$root_gen_dir/components/components_resources.pak",
      "$root_gen_dir/components/strings/components_strings_en-US.pak",
      "$root_gen_dir/content/app/resources/content_resources_100_percent.pak",
@@ -221,7 +213,7 @@ author: Michael Gilbert <mgilbert@debian.org>
      "$root_gen_dir/content/content_resources.pak",
      "$root_gen_dir/content/dev_ui_content_resources.pak",
      "$root_gen_dir/headless/headless_lib_resources.pak",
-@@ -60,7 +59,6 @@ repack("pak") {
+@@ -79,7 +78,6 @@ repack("pak") {
      "//content:content_resources",
      "//content:dev_ui_content_resources",
      "//content/app/resources",
@@ -231,17 +223,17 @@ author: Michael Gilbert <mgilbert@debian.org>
      "//third_party/blink/public:resources",
 --- a/chrome/chrome_paks.gni
 +++ b/chrome/chrome_paks.gni
-@@ -146,7 +146,6 @@ template("chrome_extra_paks") {
-         "$root_gen_dir/chrome/tab_search_resources.pak",
+@@ -159,7 +159,6 @@ template("chrome_extra_paks") {
          "$root_gen_dir/chrome/webid_resources_100_percent.pak",
+         "$root_gen_dir/chrome/whats_new_resources.pak",
          "$root_gen_dir/content/browser/devtools/devtools_resources.pak",
 -        "$root_gen_dir/content/browser/tracing/tracing_resources.pak",
          "$root_gen_dir/headless/headless_lib_resources.pak",
        ]
        deps += [
-@@ -166,7 +165,6 @@ template("chrome_extra_paks") {
-         "//chrome/browser/resources/settings:resources",
+@@ -186,7 +185,6 @@ template("chrome_extra_paks") {
          "//chrome/browser/resources/tab_search:resources",
+         "//chrome/browser/resources/whats_new:resources",
          "//content/browser/devtools:devtools_resources",
 -        "//content/browser/tracing:resources",
          "//headless:resources",
@@ -249,7 +241,7 @@ author: Michael Gilbert <mgilbert@debian.org>
        if (is_chrome_branded) {
 --- a/content/shell/BUILD.gn
 +++ b/content/shell/BUILD.gn
-@@ -436,11 +436,6 @@ repack("pak") {
+@@ -452,11 +452,6 @@ repack("pak") {
      "//ui/strings",
    ]
  
@@ -258,7 +250,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 -    sources += [ "$root_gen_dir/content/browser/tracing/tracing_resources.pak" ]
 -  }
 -
-   if (toolkit_views && !is_chromecast) {
+   if (shell_use_toolkit_views) {
      deps += [ "//ui/views/resources" ]
      sources +=
 --- a/content/browser/tracing/BUILD.gn
@@ -305,15 +297,15 @@ author: Michael Gilbert <mgilbert@debian.org>
 -}
 --- a/content/browser/tracing/tracing_ui.cc
 +++ b/content/browser/tracing/tracing_ui.cc
-@@ -26,7 +26,6 @@
- #include "base/strings/stringprintf.h"
+@@ -25,7 +25,6 @@
+ #include "base/strings/string_util.h"
  #include "base/trace_event/trace_event.h"
  #include "base/values.h"
 -#include "content/browser/tracing/grit/tracing_resources.h"
  #include "content/browser/tracing/tracing_controller_impl.h"
  #include "content/public/browser/browser_context.h"
  #include "content/public/browser/browser_thread.h"
-@@ -241,8 +241,6 @@ TracingUI::TracingUI(WebUI* web_ui)
+@@ -242,8 +241,6 @@ TracingUI::TracingUI(WebUI* web_ui)
    WebUIDataSource* source = WebUIDataSource::Create(kChromeUITracingHost);
    source->DisableTrustedTypesCSP();
    source->UseStringsJs();
@@ -324,7 +316,7 @@ author: Michael Gilbert <mgilbert@debian.org>
                             base::BindRepeating(OnTracingRequest));
 --- a/testing/BUILD.gn
 +++ b/testing/BUILD.gn
-@@ -29,7 +29,6 @@ group("run_perf_test") {
+@@ -35,7 +35,6 @@ group("run_perf_test") {
  
    data_deps = [
      ":test_scripts_shared",
@@ -334,15 +326,16 @@ author: Michael Gilbert <mgilbert@debian.org>
    if (is_android) {
 --- a/mojo/public/tools/BUILD.gn
 +++ b/mojo/public/tools/BUILD.gn
-@@ -14,5 +14,4 @@ group("mojo_python_unittests") {
-     "//testing/xvfb.py",
-   ]
+@@ -13,6 +13,5 @@ group("mojo_python_unittests") {
    deps = [ "//mojo/public/tools/mojom/mojom:tests" ]
--  data_deps = [ "//third_party/catapult/third_party/typ/" ]
+   data_deps = [
+     "//testing:test_scripts_shared",
+-    "//third_party/catapult/third_party/typ/",
+   ]
  }
 --- a/third_party/webrtc/test/BUILD.gn
 +++ b/third_party/webrtc/test/BUILD.gn
-@@ -262,10 +262,6 @@ rtc_library("perf_test") {
+@@ -268,10 +268,6 @@ rtc_library("perf_test") {
    ]
    if (rtc_enable_protobuf) {
      sources += [ "testsupport/perf_test_histogram_writer.cc" ]
@@ -353,7 +346,7 @@ author: Michael Gilbert <mgilbert@debian.org>
    } else {
      sources += [ "testsupport/perf_test_histogram_writer_no_protobuf.cc" ]
    }
-@@ -560,7 +556,6 @@ if (rtc_include_tests) {
+@@ -580,7 +576,6 @@ if (rtc_include_tests && !build_with_chr
  
      if (rtc_enable_protobuf) {
        sources += [ "testsupport/perf_test_histogram_writer_unittest.cc" ]
@@ -373,7 +366,7 @@ author: Michael Gilbert <mgilbert@debian.org>
    data = [
 --- a/weblayer/shell/BUILD.gn
 +++ b/weblayer/shell/BUILD.gn
-@@ -195,9 +195,6 @@ repack("support_pak") {
+@@ -186,9 +186,6 @@ repack("support_pak") {
    }
    if (is_android) {
      deps += [ "//ui/android:ui_java_resources" ]
diff --git a/debian/patches/disable/devtools-unittests.patch b/debian/patches/disable/devtools-unittests.patch
index 8b72a66..0b06c7c 100644
--- a/debian/patches/disable/devtools-unittests.patch
+++ b/debian/patches/disable/devtools-unittests.patch
@@ -1,110 +1,280 @@
---- a/third_party/devtools-frontend/src/front_end/component_docs/computed_style_property/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/computed_style_property/BUILD.gn
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/color_swatch/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/color_swatch/BUILD.gn
+@@ -13,7 +13,6 @@ ts_library("ts") {
+   ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/legacy/components/inline_editor:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/computed_style_property/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/computed_style_property/BUILD.gn
 @@ -14,7 +14,6 @@ ts_library("ts") {
    ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../elements:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/elements/components:bundle",
    ]
  }
---- a/third_party/devtools-frontend/src/front_end/component_docs/data_grid/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/data_grid/BUILD.gn
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/data_grid/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/data_grid/BUILD.gn
 @@ -18,7 +18,6 @@ ts_library("ts") {
    ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../ui/components:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/data_grid:bundle",
+     "../../../../ui/components/helpers:bundle",
    ]
---- a/third_party/devtools-frontend/src/front_end/component_docs/data_grid_controller/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/data_grid_controller/BUILD.gn
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/data_grid_controller/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/data_grid_controller/BUILD.gn
 @@ -14,7 +14,6 @@ ts_library("ts") {
    ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../text_utils:bundle",
-     "../../ui/components:bundle",
---- a/third_party/devtools-frontend/src/front_end/component_docs/flexbox_editor/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/flexbox_editor/BUILD.gn
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../models/text_utils:bundle",
+     "../../../../ui/components/data_grid:bundle",
+     "../../../../ui/components/helpers:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/expandable_list/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/expandable_list/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../expandable_list:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/icon_button/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/icon_button/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/icon_button:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/issue_counter/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/issue_counter/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../models/issues_manager:bundle",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/issue_counter:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/issue_link_icon/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/issue_link_icon/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/issue_counter:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/layout_pane/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/layout_pane/BUILD.gn
 @@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../elements:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/elements/components:bundle",
    ]
---- a/third_party/devtools-frontend/src/front_end/component_docs/icon_button/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/icon_button/BUILD.gn
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/legacy_color_invert/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/legacy_color_invert/BUILD.gn
 @@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../ui/components:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../core/common:bundle",
+     "../../../../core/platform:bundle",
+     "../../helpers:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/linear_memory_inspector/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/linear_memory_inspector/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/linear_memory_inspector:bundle",
    ]
---- a/third_party/devtools-frontend/src/front_end/component_docs/markdown_image/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/markdown_image/BUILD.gn
-@@ -6,7 +6,6 @@ ts_library("ts") {
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_image/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_image/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../issues:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/markdown_view:bundle",
    ]
---- a/third_party/devtools-frontend/src/front_end/component_docs/markdown_link/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/markdown_link/BUILD.gn
-@@ -6,7 +6,6 @@ ts_library("ts") {
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_link/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_link/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../issues:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/markdown_view:bundle",
    ]
---- a/third_party/devtools-frontend/src/front_end/component_docs/markdown_view/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/markdown_view/BUILD.gn
-@@ -6,7 +6,6 @@ ts_library("ts") {
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_view/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/markdown_view/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../issues:bundle",
-     "../../third_party/marked:bundle",
---- a/third_party/devtools-frontend/src/front_end/component_docs/survey_link/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/survey_link/BUILD.gn
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../third_party/marked:bundle",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/markdown_view:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/perf_piechart/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/perf_piechart/BUILD.gn
+@@ -12,7 +12,6 @@ ts_library("ts") {
+     "basic-without-legend.ts",
+   ]
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/legacy/components/perf_ui:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/request_link_icon/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/request_link_icon/BUILD.gn
 @@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "basic.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../common:bundle",
-     "../../component_helpers:bundle",
-     "../../ui/components:bundle",
---- a/third_party/devtools-frontend/src/front_end/component_docs/tree_outline/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/tree_outline/BUILD.gn
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/request_link_icon:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/style_property_editor/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/style_property_editor/BUILD.gn
+@@ -13,7 +13,6 @@ ts_library("ts") {
+   ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/elements/components:bundle",
+     "../../../../ui/components/helpers:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/survey_link/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/survey_link/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../core/common:bundle",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/survey_link:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/tree_outline/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/tree_outline/BUILD.gn
 @@ -15,7 +15,6 @@ ts_library("ts") {
    ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../third_party/lit-html:bundle",
-     "../../ui/components:bundle",
---- a/third_party/devtools-frontend/src/front_end/component_docs/webvitals/BUILD.gn
-+++ b/third_party/devtools-frontend/src/front_end/component_docs/webvitals/BUILD.gn
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/tree_outline:bundle",
+     "../../../../ui/lit-html:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/trust_tokens_view/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/trust_tokens_view/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../generated:protocol",
+     "../../../../panels/application/components:bundle",
+     "../../../../ui/components/helpers:bundle",
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/user_agent_client_hints/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/user_agent_client_hints/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/settings/emulation/components:bundle",
+     "../../../../ui/components/helpers:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/webvitals/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/webvitals/BUILD.gn
 @@ -10,7 +10,6 @@ ts_library("ts") {
    sources = [ "webvitals.ts" ]
  
    deps = [
--    "../../../test/unittests/front_end/helpers",
-     "../../component_helpers:bundle",
-     "../../timeline:bundle",
-     "../../ui:bundle",
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/timeline/components:bundle",
+     "../../../../ui/components/helpers:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/text_editor/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/text_editor/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../../ui/components/text_editor:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/text_prompt/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/text_prompt/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/text_prompt:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/button/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/button/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../buttons:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/input/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/input/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "basic.ts" ]
+
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../input:bundle",
+   ]
+ }
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/css_overview/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/css_overview/BUILD.gn
+@@ -10,7 +10,6 @@ ts_library("ts") {
+   sources = [ "start_view.ts" ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../panels/css_overview/components:bundle",
+     "../../../../ui/components/helpers:bundle",
+   ]
+--- a/third_party/devtools-frontend/src/front_end/ui/components/docs/panel_feedback/BUILD.gn
++++ b/third_party/devtools-frontend/src/front_end/ui/components/docs/panel_feedback/BUILD.gn
+@@ -13,7 +13,6 @@ ts_library("ts") {
+   ]
+ 
+   deps = [
+-    "../../../../../test/unittests/front_end/helpers",
+     "../../../../ui/components/helpers:bundle",
+     "../../../components/panel_feedback:bundle",
+   ]
diff --git a/debian/patches/disable/font-tests.patch b/debian/patches/disable/font-tests.patch
index 8e7f834..3e093f2 100644
--- a/debian/patches/disable/font-tests.patch
+++ b/debian/patches/disable/font-tests.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/skia/BUILD.gn
 +++ b/skia/BUILD.gn
-@@ -873,7 +873,7 @@ group("test_fonts_resources") {
+@@ -863,7 +863,7 @@ group("test_fonts_resources") {
    if (is_apple) {
      deps += [ ":test_fonts_bundle_data" ]
      data_deps += [ ":test_fonts_bundle_data" ]
@@ -12,26 +12,15 @@ author: Michael Gilbert <mgilbert@debian.org>
      deps += [ "//third_party/test_fonts" ]
      data_deps += [ "//third_party/test_fonts" ]
    }
---- a/base/test/BUILD.gn
-+++ b/base/test/BUILD.gn
-@@ -183,10 +183,6 @@ static_library("test_support") {
-   if (is_linux || is_chromeos) {
-     sources += [ "test_file_util_linux.cc" ]
-     public_deps += [ ":fontconfig_util_linux" ]
+--- a/third_party/test_fonts/fontconfig/BUILD.gn
++++ b/third_party/test_fonts/fontconfig/BUILD.gn
+@@ -8,9 +8,7 @@ if (is_linux || is_chromeos) {
+   group("test_support") {
+     testonly = true
+     public_deps = [ ":fontconfig_util_linux" ]
 -    data_deps = [ "//third_party/test_fonts" ]
--    if (current_toolchain == host_toolchain) {
+     if (current_toolchain == host_toolchain) {
 -      data_deps += [ ":do_generate_fontconfig_caches" ]
--    }
+     }
    }
  
-   if (is_mac) {
-@@ -433,9 +429,6 @@ if (is_linux || is_chromeos) {
-       testonly = true
-       tool = ":generate_fontconfig_caches"
- 
--      # The copied test fonts are inputs to generate_fontconfig_caches, so must
--      # be listed in deps, not data_deps (https://crbug.com/919422).
--      deps = [ "//third_party/test_fonts" ]
-       args = []
-       outputs = [ "$root_out_dir/fontconfig_caches/fb5c91b2895aa445d23aebf7f9e2189c-le64.cache-7" ]
-     }
diff --git a/debian/patches/disable/fuzzers.patch b/debian/patches/disable/fuzzers.patch
index 9f3476c..0766dbe 100644
--- a/debian/patches/disable/fuzzers.patch
+++ b/debian/patches/disable/fuzzers.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/BUILD.gn
 +++ b/BUILD.gn
-@@ -765,8 +765,7 @@ group("gn_all") {
+@@ -788,8 +788,7 @@ group("gn_all") {
      }
    }
  
@@ -11,8 +11,8 @@ author: Michael Gilbert <mgilbert@debian.org>
 -      (is_win && use_libfuzzer) || (use_libfuzzer && is_mac)) {
 +  if (false) {
      deps += [
-       "//chrome/services/ipp_parser/public/cpp:fuzzers",
        "//testing/libfuzzer/fuzzers",
+       "//third_party/freetype-testing:fuzzers",
 --- a/v8/tools/BUILD.gn
 +++ b/v8/tools/BUILD.gn
 @@ -12,7 +12,6 @@ group("gn_all") {
diff --git a/debian/patches/disable/glmark.patch b/debian/patches/disable/glmark.patch
deleted file mode 100644
index 6930254..0000000
--- a/debian/patches/disable/glmark.patch
+++ /dev/null
@@ -1,21 +0,0 @@
-description: disable dependencies on glmark directory
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/angle/src/tests/BUILD.gn
-+++ b/third_party/angle/src/tests/BUILD.gn
-@@ -339,13 +339,13 @@ if (build_angle_perftests) {
-       data_deps += [ "//testing:run_perf_test" ]
-     }
- 
--    if (is_win || is_linux || is_chromeos) {
-+    if (false) {
-       data_deps += [ "${angle_root}/third_party/glmark2:glmark2_angle" ]
-     }
-     if (is_win && target_cpu != "arm64") {
-       data_deps += [ "${angle_root}/third_party/glmark2:glmark2_wgl" ]
-     }
--    if (is_linux || is_chromeos) {
-+    if (false) {
-       data_deps += [ "${angle_root}/third_party/glmark2:glmark2_glx" ]
-     }
- 
diff --git a/debian/patches/disable/google-api-warning.patch b/debian/patches/disable/google-api-warning.patch
index 4e55f60..2153524 100644
--- a/debian/patches/disable/google-api-warning.patch
+++ b/debian/patches/disable/google-api-warning.patch
@@ -1,15 +1,14 @@
 description: disable the google api key warning when those aren't found
 author: Michael Gilbert <mgilbert@debian.org>
 
---- a/chrome/browser/ui/startup/startup_browser_creator_impl.cc
-+++ b/chrome/browser/ui/startup/startup_browser_creator_impl.cc
-@@ -696,9 +696,6 @@ void StartupBrowserCreatorImpl::AddInfoB
-     }
- #endif
+--- a/chrome/browser/ui/startup/infobar_utils.cc
++++ b/chrome/browser/ui/startup/infobar_utils.cc
+@@ -113,8 +113,6 @@ void AddInfoBarsIfNecessary(Browser* bro
+     infobars::ContentInfoBarManager* infobar_manager =
+         infobars::ContentInfoBarManager::FromWebContents(web_contents);
  
 -    if (!google_apis::HasAPIKeyConfigured())
--      GoogleApiKeysInfoBarDelegate::Create(infobar_service);
--
+-      GoogleApiKeysInfoBarDelegate::Create(infobar_manager);
+ 
      if (ObsoleteSystem::IsObsoleteNowOrSoon()) {
        PrefService* local_state = g_browser_process->local_state();
-       if (!local_state ||
diff --git a/debian/patches/disable/installer.patch b/debian/patches/disable/installer.patch
index 3e249d4..a862d23 100644
--- a/debian/patches/disable/installer.patch
+++ b/debian/patches/disable/installer.patch
@@ -3,10 +3,10 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/BUILD.gn
 +++ b/BUILD.gn
-@@ -72,8 +72,6 @@ group("gn_all") {
+@@ -79,8 +79,6 @@ group("gn_all") {
+     ":gn_visibility",
      "//base:base_perftests",
      "//base:base_unittests",
-     "//base/util:base_util_unittests",
 -    "//chrome/installer",
 -    "//chrome/updater",
      "//codelabs",
@@ -14,7 +14,7 @@ author: Michael Gilbert <mgilbert@debian.org>
      "//components/gwp_asan:gwp_asan_unittests",
 --- a/chrome/browser/BUILD.gn
 +++ b/chrome/browser/BUILD.gn
-@@ -6329,7 +6329,6 @@ source_set("active_use_util") {
+@@ -7074,7 +7074,6 @@ source_set("active_use_util") {
    deps = [
      "//base",
      "//chrome/common:constants",
@@ -31,8 +31,8 @@ author: Michael Gilbert <mgilbert@debian.org>
 -#include "chrome/install_static/buildflags.h"
  
  bool ShouldRecordActiveUse(const base::CommandLine& command_line) {
--#if defined(OS_WIN) && !BUILDFLAG(USE_GOOGLE_UPDATE_INTEGRATION)
-+#if defined(OS_WIN)
+-#if BUILDFLAG(IS_WIN) && !BUILDFLAG(USE_GOOGLE_UPDATE_INTEGRATION)
++#if BUILDFLAG(IS_WIN)
    return false;
  #else
    return command_line.GetSwitchValueNative(switches::kTryChromeAgain).empty();
diff --git a/debian/patches/disable/ios.patch b/debian/patches/disable/ios.patch
deleted file mode 100644
index 4d9754e..0000000
--- a/debian/patches/disable/ios.patch
+++ /dev/null
@@ -1,10 +0,0 @@
---- a/components/crash/core/common/BUILD.gn
-+++ b/components/crash/core/common/BUILD.gn
-@@ -4,7 +4,6 @@
- 
- import("//build/buildflag_header.gni")
- import("//components/gwp_asan/buildflags/buildflags.gni")
--import("//ios/features.gni")
- 
- declare_args() {
-   # If set to true, this will stub out and disable the entire crash key system.
diff --git a/debian/patches/disable/libaom-arm.patch b/debian/patches/disable/libaom-arm.patch
index fec0396..47c417f 100644
--- a/debian/patches/disable/libaom-arm.patch
+++ b/debian/patches/disable/libaom-arm.patch
@@ -1,11 +1,11 @@
 --- a/third_party/libaom/options.gni
 +++ b/third_party/libaom/options.gni
-@@ -4,7 +4,7 @@ import("//build/config/gclient_args.gni")
+@@ -4,7 +4,7 @@ import("//build/config/gclient_args.gni"
  
  declare_args() {
    # Enable encoding and decoding AV1 video files.
--  enable_libaom =
-+  enable_libaom = current_cpu != "arm" &&
-       !is_chromeos_lacros && !is_chromeos_ash && !is_android && !is_chromecast
+-  enable_libaom = !is_chromeos_lacros && !is_android && !is_chromecast
++  enable_libaom = current_cpu != "arm" && !is_chromeos_lacros && !is_android && !is_chromecast
  
    # To be deprecated soon.
+   enable_libaom_decoder = false
diff --git a/debian/patches/disable/mojo.patch b/debian/patches/disable/mojo.patch
deleted file mode 100644
index 41a9630..0000000
--- a/debian/patches/disable/mojo.patch
+++ /dev/null
@@ -1,489 +0,0 @@
-description: fix mojo layout test build error
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/BUILD.gn
-+++ b/BUILD.gn
-@@ -1052,7 +1052,5 @@ if (!is_ios) {
-       ":layout_test_data_mojo_bindings_lite",
-       "//content/shell:content_shell",
--      "//content/test:mojo_bindings_web_test_mojom_js_data_deps",
--      "//content/test:mojo_web_test_bindings_js_data_deps",
-       "//device/bluetooth/public/mojom:fake_bluetooth_interfaces_js_data_deps",
-       "//device/vr/public/mojom:vr_service_js_data_deps",
-       "//media/capture/mojom:image_capture_js_data_deps",
-@@ -1077,8 +1077,6 @@ if (!is_ios) {
-         "//third_party/breakpad:symupload",
-         "//tools/android/forwarder2",
-       ]
--    } else {
--      data_deps += [ "//content/web_test:web_test_common_mojom_js_data_deps" ]
-     }
- 
-     if (!is_win && !is_android) {
---- a/content/browser/BUILD.gn
-+++ b/content/browser/BUILD.gn
-@@ -2865,7 +2865,6 @@ group("for_content_tests") {
-   visibility = [
-     "//content/public/test/android/*",
-     "//content/test/*",
--    "//content/web_test:web_test_browser",
-   ]
-   if (!is_component_build) {
-     public_deps = [ ":browser" ]
---- a/content/renderer/BUILD.gn
-+++ b/content/renderer/BUILD.gn
-@@ -571,7 +571,6 @@ target(link_target_type, "renderer") {
- group("for_content_tests") {
-   visibility = [
-     "//content/test/*",
--    "//content/web_test:web_test_renderer",
-   ]
- 
-   if (!is_component_build) {
---- a/content/shell/BUILD.gn
-+++ b/content/shell/BUILD.gn
-@@ -43,7 +43,7 @@ config("content_shell_lib_warnings") {
- }
- 
- # Web test support not built on android, but is everywhere else.
--support_web_tests = !is_android
-+support_web_tests = false
- 
- source_set("android_shell_descriptors") {
-   testonly = true
---- a/content/shell/app/shell_main_delegate.h
-+++ b/content/shell/app/shell_main_delegate.h
-@@ -19,10 +19,6 @@ class ShellContentGpuClient;
- class ShellContentRendererClient;
- class ShellContentUtilityClient;
- 
--#if !defined(OS_ANDROID)
--class WebTestBrowserMainRunner;
--#endif
--
- class ShellMainDelegate : public ContentMainDelegate {
-  public:
-   explicit ShellMainDelegate(bool is_content_browsertests = false);
-@@ -52,13 +48,6 @@ class ShellMainDelegate : public ContentMainDelegate {
-   // content_browsertests should not set the kRunWebTests command line flag, so
-   // |is_content_browsertests_| and |web_test_runner_| are mututally exclusive.
-   bool is_content_browsertests_;
--#if !defined(OS_ANDROID)
--  // Only present when running web tests, which run inside Content Shell.
--  //
--  // Web tests are not browser tests, so |is_content_browsertests_| and
--  // |web_test_runner_| are mututally exclusive.
--  std::unique_ptr<WebTestBrowserMainRunner> web_test_runner_;
--#endif
- 
-   std::unique_ptr<ShellContentBrowserClient> browser_client_;
-   std::unique_ptr<ShellContentGpuClient> gpu_client_;
---- a/content/shell/app/shell_main_delegate.cc
-+++ b/content/shell/app/shell_main_delegate.cc
-@@ -40,12 +40,6 @@
-     content::RegisterIPCLogger(msg_id, logger)
- #endif
- 
--#if !defined(OS_ANDROID)
--#include "content/web_test/browser/web_test_browser_main_runner.h"  // nogncheck
--#include "content/web_test/browser/web_test_content_browser_client.h"  // nogncheck
--#include "content/web_test/renderer/web_test_content_renderer_client.h"  // nogncheck
--#endif
--
- #if defined(OS_ANDROID)
- #include "base/android/apk_assets.h"
- #include "base/posix/global_descriptors.h"
-@@ -170,17 +164,6 @@ bool ShellMainDelegate::BasicStartupComplete(int* exit_code) {
- 
-   InitLogging(command_line);
- 
--#if !defined(OS_ANDROID)
--  if (switches::IsRunWebTestsSwitchPresent()) {
--    const bool browser_process =
--        command_line.GetSwitchValueASCII(switches::kProcessType).empty();
--    if (browser_process) {
--      web_test_runner_ = std::make_unique<WebTestBrowserMainRunner>();
--      web_test_runner_->Initialize();
--    }
--  }
--#endif
--
-   return false;
- }
- 
-@@ -230,16 +213,6 @@ int ShellMainDelegate::RunProcess(
-       kTraceEventBrowserProcessSortIndex);
- 
- #if !defined(OS_ANDROID)
--  if (switches::IsRunWebTestsSwitchPresent()) {
--    // Web tests implement their own BrowserMain() replacement.
--    web_test_runner_->RunBrowserMain(main_function_params);
--    web_test_runner_.reset();
--    // Returning 0 to indicate that we have replaced BrowserMain() and the
--    // caller should not call BrowserMain() itself. Web tests do not ever
--    // return an error.
--    return 0;
--  }
--
-   // On non-Android, we can return -1 and have the caller run BrowserMain()
-   // normally.
-   return -1;
-@@ -331,12 +304,6 @@ ContentClient* ShellMainDelegate::CreateContentClient() {
- }
- 
- ContentBrowserClient* ShellMainDelegate::CreateContentBrowserClient() {
--#if !defined(OS_ANDROID)
--  if (switches::IsRunWebTestsSwitchPresent()) {
--    browser_client_ = std::make_unique<WebTestContentBrowserClient>();
--    return browser_client_.get();
--  }
--#endif
-   browser_client_ = std::make_unique<ShellContentBrowserClient>();
-   return browser_client_.get();
- }
-@@ -347,12 +314,6 @@ ContentGpuClient* ShellMainDelegate::CreateContentGpuClient() {
- }
- 
- ContentRendererClient* ShellMainDelegate::CreateContentRendererClient() {
--#if !defined(OS_ANDROID)
--  if (switches::IsRunWebTestsSwitchPresent()) {
--    renderer_client_ = std::make_unique<WebTestContentRendererClient>();
--    return renderer_client_.get();
--  }
--#endif
-   renderer_client_ = std::make_unique<ShellContentRendererClient>();
-   return renderer_client_.get();
- }
---- a/content/web_test/BUILD.gn
-+++ /dev/null
-@@ -1,319 +0,0 @@
--# Copyright 2020 The Chromium Authors. All rights reserved.
--# Use of this source code is governed by a BSD-style license that can be
--# found in the LICENSE file.
--
--import("//build/config/chromecast_build.gni")
--import("//build/config/ui.gni")  # For the use_x11 and toolkit_views variables.
--import("//mojo/public/tools/bindings/mojom.gni")
--import("//ppapi/buildflags/buildflags.gni")  # For the enable_plugins variable.
--
--if (is_android) {
--  import("//build/config/android/config.gni")
--} else if (is_mac) {
--  import("//build/apple/tweak_info_plist.gni")
--  import("//build/config/mac/rules.gni")
--  import("//content/public/app/mac_helpers.gni")
--  import("//third_party/icu/config.gni")
--  import("//ui/gl/features.gni")
--  import("//v8/gni/v8.gni")
--}
--
--mojom("web_test_common_mojom") {
--  sources = [
--    "common/fake_bluetooth_chooser.mojom",
--    "common/mojo_echo.mojom",
--    "common/web_test.mojom",
--    "common/web_test_bluetooth_fake_adapter_setter.mojom",
--  ]
--  public_deps = [
--    "//mojo/public/mojom/base",
--    "//skia/public/mojom",
--    "//third_party/blink/public/mojom:mojom_platform",
--    "//ui/accessibility:ax_enums_mojo",
--    "//ui/gfx/geometry/mojom",
--    "//url/mojom:url_mojom_gurl",
--    "//url/mojom:url_mojom_origin",
--  ]
--
--  overridden_deps = [ "//third_party/blink/public/mojom:mojom_platform" ]
--  component_deps = [ "//third_party/blink/public/common" ]
--}
--
--static_library("web_test_common") {
--  testonly = true
--  sources = [
--    "common/tracked_dictionary.cc",
--    "common/tracked_dictionary.h",
--    "common/web_test_constants.cc",
--    "common/web_test_constants.h",
--    "common/web_test_runtime_flags.cc",
--    "common/web_test_runtime_flags.h",
--    "common/web_test_string_util.cc",
--    "common/web_test_string_util.h",
--    "common/web_test_switches.cc",
--    "common/web_test_switches.h",
--  ]
--  public_deps = [
--    # The mojoms used to support communication between browser and renderer
--    # for the web test harness.
--    ":web_test_common_mojom",
--
--    # The generated mojom JS bindings are used by web tests.
--    ":web_test_common_mojom_js",
--  ]
--  deps = [
--    "//base",
--    "//third_party/blink/public:blink_headers",
--    "//url",
--    "//v8",
--  ]
--}
--
--static_library("web_test_browser") {
--  testonly = true
--
--  # This is to support our dependency on //content/browser.
--  # See comment at the top of //content/BUILD.gn for why this is disabled in
--  # component builds.
--  if (is_component_build) {
--    check_includes = false
--  }
--
--  sources = [
--    "browser/devtools_protocol_test_bindings.cc",
--    "browser/devtools_protocol_test_bindings.h",
--    "browser/fake_bluetooth_chooser.cc",
--    "browser/fake_bluetooth_chooser.h",
--    "browser/fake_bluetooth_chooser_factory.cc",
--    "browser/fake_bluetooth_chooser_factory.h",
--    "browser/fake_bluetooth_delegate.cc",
--    "browser/fake_bluetooth_delegate.h",
--    "browser/leak_detector.cc",
--    "browser/leak_detector.h",
--    "browser/mojo_echo.cc",
--    "browser/mojo_echo.h",
--    "browser/mojo_web_test_helper.cc",
--    "browser/mojo_web_test_helper.h",
--    "browser/test_info_extractor.cc",
--    "browser/test_info_extractor.h",
--    "browser/web_test_background_fetch_delegate.cc",
--    "browser/web_test_background_fetch_delegate.h",
--    "browser/web_test_bluetooth_adapter_provider.cc",
--    "browser/web_test_bluetooth_adapter_provider.h",
--    "browser/web_test_bluetooth_chooser_factory.cc",
--    "browser/web_test_bluetooth_chooser_factory.h",
--    "browser/web_test_bluetooth_fake_adapter_setter_impl.cc",
--    "browser/web_test_bluetooth_fake_adapter_setter_impl.h",
--    "browser/web_test_browser_context.cc",
--    "browser/web_test_browser_context.h",
--    "browser/web_test_browser_main_parts.cc",
--    "browser/web_test_browser_main_parts.h",
--    "browser/web_test_browser_main_platform_support.h",
--    "browser/web_test_browser_main_runner.cc",
--    "browser/web_test_browser_main_runner.h",
--    "browser/web_test_content_browser_client.cc",
--    "browser/web_test_content_browser_client.h",
--    "browser/web_test_control_host.cc",
--    "browser/web_test_control_host.h",
--    "browser/web_test_devtools_bindings.cc",
--    "browser/web_test_devtools_bindings.h",
--    "browser/web_test_download_manager_delegate.cc",
--    "browser/web_test_download_manager_delegate.h",
--    "browser/web_test_first_device_bluetooth_chooser.cc",
--    "browser/web_test_first_device_bluetooth_chooser.h",
--    "browser/web_test_javascript_dialog_manager.cc",
--    "browser/web_test_javascript_dialog_manager.h",
--    "browser/web_test_permission_manager.cc",
--    "browser/web_test_permission_manager.h",
--    "browser/web_test_push_messaging_service.cc",
--    "browser/web_test_push_messaging_service.h",
--    "browser/web_test_shell_platform_delegate.cc",
--    "browser/web_test_shell_platform_delegate.h",
--    "browser/web_test_storage_access_manager.cc",
--    "browser/web_test_storage_access_manager.h",
--    "browser/web_test_tts_platform.cc",
--    "browser/web_test_tts_platform.h",
--  ]
--
--  if (is_mac) {
--    sources += [
--      "browser/web_test_browser_main_platform_support_mac.mm",
--      "browser/web_test_shell_platform_delegate_mac.mm",
--    ]
--  } else if (toolkit_views && !is_chromecast) {
--    sources += [ "browser/web_test_shell_platform_delegate_views.cc" ]
--  } else {
--    sources += [ "browser/web_test_shell_platform_delegate_aura.cc" ]
--  }
--
--  if (is_win) {
--    sources += [ "browser/web_test_browser_main_platform_support_win.cc" ]
--  }
--
--  if (is_linux || is_chromeos) {
--    sources += [ "browser/web_test_browser_main_platform_support_linux.cc" ]
--  }
--
--  deps = [
--    ":web_test_common",
--    "//base",
--    "//build:chromeos_buildflags",
--    "//cc/base",
--    "//cc/paint",
--    "//components/download/content/factory",
--    "//components/download/public/background_service:public",
--    "//components/download/public/common:public",
--    "//components/network_session_configurator/common",
--    "//content/browser:for_content_tests",  # For non-component builds.
--    "//content/public/browser",  # For component builds.
--    "//content/shell:content_shell_lib",
--    "//content/test:blink_test_browser_support",
--    "//content/test:mojo_bindings_web_test_mojom",
--    "//content/test:mojo_web_test_bindings",
--    "//content/test:test_support",
--    "//device/bluetooth:fake_bluetooth",
--    "//device/bluetooth:mocks",
--    "//device/bluetooth/public/mojom:fake_bluetooth_interfaces",
--    "//gpu",
--    "//media",
--    "//net",
--    "//net:net_resources",
--    "//net:test_support",
--    "//ppapi/buildflags",
--    "//sandbox",
--    "//services/device/public/cpp:test_support",
--    "//services/network/public/cpp",
--    "//services/service_manager/public/cpp",
--    "//storage/browser",
--    "//testing/gmock",
--    "//testing/gtest",
--    "//third_party/blink/public:blink",
--    "//ui/base",
--    "//ui/base/ime/init",
--    "//ui/display",
--    "//ui/gfx",
--    "//ui/gfx/geometry",
--    "//ui/gl",
--    "//ui/shell_dialogs:shell_dialogs",
--    "//url",
--  ]
--
--  if (enable_plugins) {
--    deps += [
--      "//content/ppapi_plugin",
--      "//ppapi:blink_deprecated_test_plugin",
--      "//ppapi:blink_test_plugin",
--    ]
--  }
--
--  if (use_x11) {
--    deps += [ "//ui/events/devices/x11" ]
--  }
--}
--
--static_library("web_test_renderer") {
--  testonly = true
--
--  # This is to support our dependency on //content/renderer.
--  # See comment at the top of //content/BUILD.gn for why this is disabled in
--  # component builds.
--  if (is_component_build) {
--    check_includes = false
--  }
--
--  # We allow a circular include from blink's web_test implementation. This
--  # is an incremental step to moving the renderer web_test implementation
--  # into blink.
--  allow_circular_includes_from =
--      [ "//third_party/blink/renderer/core/web_test" ]
--
--  sources = [
--    "renderer/accessibility_controller.cc",
--    "renderer/accessibility_controller.h",
--    "renderer/app_banner_service.cc",
--    "renderer/app_banner_service.h",
--    "renderer/blink_test_helpers.cc",
--    "renderer/blink_test_helpers.h",
--    "renderer/event_sender.cc",
--    "renderer/event_sender.h",
--    "renderer/fake_screen_orientation_impl.cc",
--    "renderer/fake_screen_orientation_impl.h",
--    "renderer/fake_subresource_filter.cc",
--    "renderer/fake_subresource_filter.h",
--    "renderer/gamepad_controller.cc",
--    "renderer/gamepad_controller.h",
--    "renderer/gc_controller.cc",
--    "renderer/gc_controller.h",
--    "renderer/layout_dump.cc",
--    "renderer/layout_dump.h",
--    "renderer/pixel_dump.cc",
--    "renderer/pixel_dump.h",
--    "renderer/spell_check_client.cc",
--    "renderer/spell_check_client.h",
--    "renderer/test_plugin.cc",
--    "renderer/test_plugin.h",
--    "renderer/test_preferences.cc",
--    "renderer/test_preferences.h",
--    "renderer/test_runner.cc",
--    "renderer/test_runner.h",
--    "renderer/test_websocket_handshake_throttle_provider.cc",
--    "renderer/test_websocket_handshake_throttle_provider.h",
--    "renderer/text_input_controller.cc",
--    "renderer/text_input_controller.h",
--    "renderer/web_ax_object_proxy.cc",
--    "renderer/web_ax_object_proxy.h",
--    "renderer/web_frame_test_proxy.cc",
--    "renderer/web_frame_test_proxy.h",
--    "renderer/web_test_content_renderer_client.cc",
--    "renderer/web_test_content_renderer_client.h",
--    "renderer/web_test_content_settings_client.cc",
--    "renderer/web_test_content_settings_client.h",
--    "renderer/web_test_grammar_checker.cc",
--    "renderer/web_test_grammar_checker.h",
--    "renderer/web_test_render_thread_observer.cc",
--    "renderer/web_test_render_thread_observer.h",
--    "renderer/web_test_spell_checker.cc",
--    "renderer/web_test_spell_checker.h",
--  ]
--  deps = [
--    ":web_test_common",
--    "//base",
--    "//cc",
--    "//cc/paint",
--    "//components/plugins/renderer",
--    "//components/viz/common",
--    "//components/web_cache/renderer",
--    "//content/public/common",
--    "//content/public/renderer",  # For component builds.
--    "//content/renderer:for_content_tests",  # For non-component builds.
--    "//content/shell:content_shell_lib",
--    "//content/test:test_support",
--    "//device/gamepad/public/cpp:shared_with_blink",
--    "//device/gamepad/public/mojom",
--    "//gin",
--    "//gpu",
--    "//gpu/command_buffer/client:gles2_interface",
--    "//media/capture",
--    "//printing",
--    "//printing/mojom",
--    "//services/device/public/mojom",
--    "//services/service_manager/public/cpp",
--    "//skia",
--    "//skia:test_fonts",
--    "//third_party/blink/public:blink_headers",
--    "//third_party/blink/public:test_headers",
--    "//third_party/blink/renderer/core/web_test",
--    "//ui/accessibility:ax_base",
--    "//ui/base/dragdrop/mojom",
--    "//ui/base/ime:ime_types",
--    "//ui/display",
--    "//ui/events:dom_keycode_converter",
--    "//ui/events:events_base",
--    "//ui/events/blink",
--    "//ui/gfx",
--    "//ui/gfx:test_support",
--    "//ui/gfx/geometry",
--    "//url",
--    "//v8",
--  ]
--}
---- a/third_party/blink/tools/BUILD.gn
-+++ b/third_party/blink/tools/BUILD.gn
-@@ -63,8 +63,6 @@ group("wpt_tests_base_mojo_bindings") {
-   data_deps = [
-     "//:layout_test_data_mojo_bindings",
-     "//:layout_test_data_mojo_bindings_lite",
--    "//content/test:mojo_bindings_web_test_mojom_js_data_deps",
--    "//content/test:mojo_web_test_bindings_js_data_deps",
-     "//mojo/public/interfaces/bindings/tests:test_data_deps",
-     "//mojo/public/js/ts/bindings/tests:test_interfaces_js_data_deps",
-     "//mojo/public/mojom/base:base_js_data_deps",
diff --git a/debian/patches/disable/openh264.patch b/debian/patches/disable/openh264.patch
index 0bf2454..d380808 100644
--- a/debian/patches/disable/openh264.patch
+++ b/debian/patches/disable/openh264.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/third_party/webrtc/webrtc.gni
 +++ b/third_party/webrtc/webrtc.gni
-@@ -151,8 +151,7 @@ declare_args() {
+@@ -169,8 +169,7 @@ declare_args() {
    #
    # Enabling H264 when building with MSVC is currently not supported, see
    # bugs.webrtc.org/9213#c13 for more info.
@@ -15,7 +15,7 @@ author: Michael Gilbert <mgilbert@debian.org>
    rtc_use_absl_mutex = false
 --- a/media/media_options.gni
 +++ b/media/media_options.gni
-@@ -59,12 +59,9 @@ declare_args() {
+@@ -32,12 +32,9 @@ declare_args() {
      media_use_libvpx = false
    }
  
diff --git a/debian/patches/disable/ozone-unittests.patch b/debian/patches/disable/ozone-unittests.patch
deleted file mode 100644
index 9e559ff..0000000
--- a/debian/patches/disable/ozone-unittests.patch
+++ /dev/null
@@ -1,44 +0,0 @@
---- a/ui/ozone/BUILD.gn
-+++ b/ui/ozone/BUILD.gn
-@@ -340,19 +340,6 @@ action("generate_test_support_constructo
-   deps = [ ":generate_ozone_platform_list" ]
- }
- 
--test("ozone_unittests") {
--  deps = [ ":test_support" ]
--
--  # Add tests of platform internals.
--  deps += ozone_platform_test_deps
--
--  # Platform tests link ozone statically. Make sure we're not getting a
--  # 2nd copy of any code via the component.
--  assert_no_deps = [ "//ui/ozone" ]
--
--  data_deps = [ "//testing/buildbot/filters:ozone_unittests_filters" ]
--}
--
- # X11 backend has its own test suite only built when we are using the x11
- # backend.
- if (ozone_platform_x11) {
-@@ -381,7 +368,6 @@ group("unittests") {
-   visibility += [ "*" ]
- 
-   deps = [
--    ":ozone_unittests",
-     "//ui/ozone/gl:ozone_gl_unittests",
-   ]
- 
---- a/ui/views/BUILD.gn
-+++ b/ui/views/BUILD.gn
-@@ -1352,11 +1352,6 @@ test("views_unittests") {
-     }
-   }
- 
--  if ((is_linux || is_chromeos_lacros) && use_ozone) {
--    data_deps +=
--        [ "//testing/buildbot/filters:linux_ozone_views_unittests_filters" ]
--  }
--
-   if (use_atk) {
-     sources +=
-         [ "accessibility/view_ax_platform_node_delegate_auralinux_unittest.cc" ]
diff --git a/debian/patches/disable/signin.patch b/debian/patches/disable/signin.patch
index dbc39ef..94b5415 100644
--- a/debian/patches/disable/signin.patch
+++ b/debian/patches/disable/signin.patch
@@ -1,9 +1,29 @@
 description: disable browser sign-in
 origin: https://raw.githubusercontent.com/Eloston/ungoogled-chromium/master/resources/patches/ungoogled-chromium/disable-signin.patch
 
+--- a/chrome/browser/ui/webui/signin/inline_login_handler_impl.cc
++++ b/chrome/browser/ui/webui/signin/inline_login_handler_impl.cc
+@@ -421,17 +421,6 @@ void InlineSigninHelper::OnClientOAuthSu
+ 
+     signin_metrics::LogSigninReason(signin_metrics::Reason::kReauthentication);
+   } else {
+-    if (confirm_untrusted_signin_) {
+-      // Display a confirmation dialog to the user.
+-      base::RecordAction(
+-          base::UserMetricsAction("Signin_Show_UntrustedSigninPrompt"));
+-      Browser* browser = chrome::FindLastActiveWithProfile(profile_);
+-      browser->window()->ShowOneClickSigninConfirmation(
+-          base::UTF8ToUTF16(email_),
+-          base::BindOnce(&InlineSigninHelper::UntrustedSigninConfirmed,
+-                         base::Unretained(this), result.refresh_token));
+-      return;
+-    }
+     CreateSyncStarter(result.refresh_token);
+   }
+ 
 --- a/components/signin/internal/identity_manager/primary_account_manager.cc
 +++ b/components/signin/internal/identity_manager/primary_account_manager.cc
-@@ -55,9 +55,9 @@ void PrimaryAccountManager::RegisterProf
+@@ -53,9 +53,9 @@ void PrimaryAccountManager::RegisterProf
                                 std::string());
    registry->RegisterStringPref(prefs::kGoogleServicesAccountId, std::string());
    registry->RegisterBooleanPref(prefs::kGoogleServicesConsentedToSync, false);
@@ -15,60 +35,3 @@ origin: https://raw.githubusercontent.com/Eloston/ungoogled-chromium/master/reso
    registry->RegisterBooleanPref(prefs::kSignedInWithCredentialProvider, false);
  }
  
---- a/chrome/browser/ui/chrome_pages.cc
-+++ b/chrome/browser/ui/chrome_pages.cc
-@@ -493,6 +493,7 @@ GURL GetOSSettingsUrl(const std::string& sub_page) {
- void ShowBrowserSignin(Browser* browser,
-                        signin_metrics::AccessPoint access_point,
-                        signin::ConsentLevel consent_level) {
-+#if BUILDFLAG(ENABLE_ONE_CLICK_SIGNIN)
-   Profile* original_profile = browser->profile()->GetOriginalProfile();
-   DCHECK(original_profile->GetPrefs()->GetBoolean(prefs::kSigninAllowed));
- 
-@@ -519,6 +520,7 @@ void ShowBrowserSignin(Browser* browser,
-   }
- 
-   browser->signin_view_controller()->ShowSignin(bubble_view_mode, access_point);
-+#endif
- }
- 
- void ShowBrowserSigninOrSettings(Browser* browser,
---- a/chrome/browser/ui/BUILD.gn
-+++ b/chrome/browser/ui/BUILD.gn
-@@ -2916,9 +2916,6 @@ static_library("ui") {
-       "startup/default_browser_infobar_delegate.h",
-       "startup/default_browser_prompt.cc",
-       "startup/default_browser_prompt.h",
--      "sync/one_click_signin_links_delegate.h",
--      "sync/one_click_signin_links_delegate_impl.cc",
--      "sync/one_click_signin_links_delegate_impl.h",
-       "views/profiles/badged_profile_photo.cc",
-       "views/profiles/badged_profile_photo.h",
-       "views/profiles/profile_picker_force_signin_dialog_delegate.cc",
-@@ -4255,8 +4252,6 @@ static_library("ui") {
-         "views/sync/dice_bubble_sync_promo_view.h",
-         "views/sync/dice_signin_button_view.cc",
-         "views/sync/dice_signin_button_view.h",
--        "views/sync/one_click_signin_dialog_view.cc",
--        "views/sync/one_click_signin_dialog_view.h",
-       ]
-       deps += [ "//ui/views/window/vector_icons" ]
-     }
---- a/chrome/browser/ui/webui/signin/inline_login_handler_impl.cc
-+++ b/chrome/browser/ui/webui/signin/inline_login_handler_impl.cc
-@@ -400,6 +400,7 @@ void InlineSigninHelper::OnClientOAuthSu
-     signin_metrics::LogSigninReason(
-         GetSigninReasonFromHandlerSigninReason(reason));
-   } else {
-+#if BUILDFLAG(ENABLE_ONE_CLICK_SIGNIN)
-     if (confirm_untrusted_signin_) {
-       // Display a confirmation dialog to the user.
-       base::RecordAction(
-@@ -411,6 +412,7 @@ void InlineSigninHelper::OnClientOAuthSu
-                          base::Unretained(this), result.refresh_token));
-       return;
-     }
-+#endif
-     CreateSyncStarter(result.refresh_token);
-   }
-   base::ThreadTaskRunnerHandle::Get()->DeleteSoon(FROM_HERE, this);
diff --git a/debian/patches/disable/swiftshader-2.patch b/debian/patches/disable/swiftshader-2.patch
new file mode 100644
index 0000000..6ffd080
--- /dev/null
+++ b/debian/patches/disable/swiftshader-2.patch
@@ -0,0 +1,120 @@
+description: additional swiftshader stuff exposed by official builds
+author: Andres Salomon <dilinger@debian.org>
+
+--- a/chrome/BUILD.gn
++++ b/chrome/BUILD.gn
+@@ -958,6 +958,7 @@ if (is_win) {
+       public_deps = [ "//ui/gl:angle_library_copy" ]
+     }
+ 
++if (false) {
+     # Add the SwiftShader .dylibs in the MODULE_DIR of Chromium.app
+     bundle_data("swiftshader_binaries") {
+       sources = [
+@@ -972,6 +973,7 @@ if (is_win) {
+         "//ui/gl:swiftshader_vk_library_copy",
+       ]
+     }
++}
+   }
+ 
+   group("angle_library") {
+@@ -980,12 +982,6 @@ if (is_win) {
+     }
+   }
+ 
+-  group("swiftshader_library") {
+-    if (bundle_egl_libraries) {
+-      deps = [ ":swiftshader_binaries" ]
+-    }
+-  }
+-
+   if (bundle_widevine_cdm) {
+     bundle_data("widevine_cdm_library_binaries") {
+       sources = [ "$root_out_dir/$widevine_cdm_path/libwidevinecdm.dylib" ]
+@@ -1169,7 +1165,6 @@ if (is_win) {
+       ":chrome_framework_resources",
+       ":keystone_registration_framework",
+       ":optimization_guide_library",
+-      ":swiftshader_library",
+       ":widevine_cdm_library",
+       "//chrome/browser/resources/media/mei_preload:component_bundle",
+     ]
+@@ -1257,9 +1252,6 @@ if (is_win) {
+       "$root_out_dir/chrome_crashpad_handler",
+       "$root_out_dir/libEGL.dylib",
+       "$root_out_dir/libGLESv2.dylib",
+-      "$root_out_dir/libswiftshader_libEGL.dylib",
+-      "$root_out_dir/libswiftshader_libGLESv2.dylib",
+-      "$root_out_dir/libvk_swiftshader.dylib",
+       _framework_binary_path,
+     ]
+     if (build_with_internal_optimization_guide) {
+@@ -1296,9 +1288,6 @@ if (is_win) {
+         "//third_party/angle:libEGL",
+         "//third_party/angle:libGLESv2",
+         "//third_party/breakpad:dump_syms",
+-        "//third_party/swiftshader/src/OpenGL/libEGL:swiftshader_libEGL",
+-        "//third_party/swiftshader/src/OpenGL/libGLESv2:swiftshader_libGLESv2",
+-        "//third_party/swiftshader/src/Vulkan:swiftshader_libvulkan",
+       ]
+       if (build_with_internal_optimization_guide) {
+         deps += [ "//components/optimization_guide/internal:optimization_guide_internal" ]
+@@ -1322,9 +1311,6 @@ if (is_win) {
+         "$root_out_dir/chrome_crashpad_handler.dSYM",
+         "$root_out_dir/libEGL.dylib.dSYM",
+         "$root_out_dir/libGLESv2.dylib.dSYM",
+-        "$root_out_dir/libswiftshader_libEGL.dylib.dSYM",
+-        "$root_out_dir/libswiftshader_libGLESv2.dylib.dSYM",
+-        "$root_out_dir/libvk_swiftshader.dylib.dSYM",
+       ]
+       if (build_with_internal_optimization_guide) {
+         _dsyms += [ "$root_out_dir/liboptimization_guide_internal.dylib.dSYM" ]
+@@ -1336,9 +1322,6 @@ if (is_win) {
+         "//components/crash/core/app:chrome_crashpad_handler",
+         "//third_party/angle:libEGL",
+         "//third_party/angle:libGLESv2",
+-        "//third_party/swiftshader/src/OpenGL/libEGL:swiftshader_libEGL",
+-        "//third_party/swiftshader/src/OpenGL/libGLESv2:swiftshader_libGLESv2",
+-        "//third_party/swiftshader/src/Vulkan:swiftshader_libvulkan",
+       ]
+       if (build_with_internal_optimization_guide) {
+         deps += [ "//components/optimization_guide/internal:optimization_guide_internal" ]
+@@ -1752,12 +1735,7 @@ if (is_linux || is_chromeos) {
+         ":angle_gles_symbols",
+         ":chrome_crashpad_symbols",
+         ":chrome_symbols",
+-        ":swiftshader_egl_symbols",
+-        ":swiftshader_gles_symbols",
+       ]
+-      if (is_linux) {
+-        deps += [ ":swiftshader_vk_symbols" ]
+-      }
+       if (!is_chromeos) {
+         deps += [ ":angle_libvulkan_symbols" ]
+       }
+@@ -1789,6 +1767,7 @@ if (is_linux || is_chromeos) {
+ 
+       deps = [ "//components/crash/core/app:chrome_crashpad_handler" ]
+     }
++if (false) {
+     extract_symbols("swiftshader_egl_symbols") {
+       binary = "$root_out_dir/swiftshader/libEGL.so"
+ 
+@@ -1799,8 +1778,6 @@ if (is_linux || is_chromeos) {
+         symbol_file = "$root_out_dir/swiftshader_libegl.breakpad.$current_cpu"
+       }
+ 
+-      deps =
+-          [ "//third_party/swiftshader/src/OpenGL/libEGL:swiftshader_libEGL" ]
+     }
+     extract_symbols("swiftshader_gles_symbols") {
+       binary = "$root_out_dir/swiftshader/libGLESv2.so"
+@@ -1828,6 +1805,7 @@ if (is_linux || is_chromeos) {
+ 
+       deps = [ "//third_party/swiftshader/src/Vulkan:swiftshader_libvulkan" ]
+     }
++}
+     extract_symbols("angle_egl_symbols") {
+       binary = "$root_out_dir/libEGL.so"
+ 
diff --git a/debian/patches/disable/swiftshader.patch b/debian/patches/disable/swiftshader.patch
index 61c9735..4d1ccd4 100644
--- a/debian/patches/disable/swiftshader.patch
+++ b/debian/patches/disable/swiftshader.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/BUILD.gn
 +++ b/BUILD.gn
-@@ -488,7 +488,7 @@ group("gn_all") {
+@@ -521,7 +521,7 @@ group("gn_all") {
      ]
    }
  
@@ -14,23 +14,15 @@ author: Michael Gilbert <mgilbert@debian.org>
    }
 --- a/third_party/angle/gni/angle.gni
 +++ b/third_party/angle/gni/angle.gni
-@@ -111,7 +111,7 @@ declare_args() {
-                      (angle_use_x11 && !is_chromeos)) && !is_fuchsia &&
-                     !angle_is_winuwp && !is_ggp && !is_win_arm64
+@@ -133,7 +133,7 @@ declare_args() {
+                      !is_linux || (angle_use_x11 && !is_chromeos)) &&
+                     !is_fuchsia && !angle_is_winuwp && !is_ggp && !is_win_arm64
  
 -  angle_enable_vulkan =
 +  angle_enable_vulkan = false &&
        angle_has_build &&
+       !(is_android && build_with_chromium && is_official_build) &&
        ((is_win && !angle_is_winuwp) ||
-        (is_linux && (angle_use_x11 || angle_use_vulkan_display) &&
-@@ -360,7 +360,6 @@ if (angle_standalone || build_with_chromium) {
-                       "$angle_root:angle_common",
-                       "$angle_root:includes",
-                       "$angle_root/util:angle_test_utils",
--                      "$angle_root/third_party/rapidjson:rapidjson",
-                       "//testing/gmock",
-                       "//testing/gtest",
-                       "//third_party/googletest:gmock",
 --- a/gpu/vulkan/features.gni
 +++ b/gpu/vulkan/features.gni
 @@ -13,5 +13,5 @@ declare_args() {
diff --git a/debian/patches/disable/tests.patch b/debian/patches/disable/tests.patch
index 5db6b54..cf016fd 100644
--- a/debian/patches/disable/tests.patch
+++ b/debian/patches/disable/tests.patch
@@ -1,6 +1,6 @@
 --- a/media/BUILD.gn
 +++ b/media/BUILD.gn
-@@ -159,7 +159,6 @@ test("media_unittests") {
+@@ -166,7 +166,6 @@ test("media_unittests") {
      "//media/device_monitors:unit_tests",
      "//media/filters:unit_tests",
      "//media/formats:unit_tests",
@@ -8,80 +8,11 @@
      "//media/learning:unit_tests",
      "//media/mojo:unit_tests",
      "//media/muxers:unit_tests",
---- a/media/gpu/BUILD.gn
-+++ b/media/gpu/BUILD.gn
-@@ -470,66 +470,6 @@ static_library("test_support") {
-   ]
- }
- 
--source_set("unit_tests") {
--  testonly = true
--  deps = [
--    "//base",
--    "//base/test:test_support",
--    "//media:test_support",
--    "//media/gpu",
--    "//media/gpu:test_support",
--    "//media/gpu/ipc/service:unit_tests",
--    "//testing/gmock",
--    "//testing/gtest",
--    "//ui/gl:test_support",
--  ]
--  sources = [ "h264_decoder_unittest.cc" ]
--  if (proprietary_codecs && enable_platform_hevc) {
--    sources += [ "h265_decoder_unittest.cc" ]
--  }
--  if (is_chromeos_ash && (use_v4l2_codec || use_vaapi)) {
--    deps += [ "//media/gpu/chromeos:unit_tests" ]
--  }
--  if (use_vaapi) {
--    deps += [ "//media/gpu/vaapi:unit_test" ]
--  }
--  if (use_v4l2_codec) {
--    deps += [ "//media/gpu/v4l2:unit_test" ]
--  }
--
--  # TODO(crbug.com/1006266): consider using |use_chromeos_video_acceleration|.
--  if (use_v4l2_codec || use_vaapi) {
--    sources += [ "vp8_decoder_unittest.cc" ]
--  }
--
--  if (use_libgav1_parser) {
--    sources += [ "av1_decoder_unittest.cc" ]
--    deps += [
--      "//build:chromeos_buildflags",
--      "//third_party/ffmpeg",
--    ]
--  }
--
--  if (is_win && enable_library_cdms) {
--    sources += [
--      "windows/d3d11_copying_texture_wrapper_unittest.cc",
--      "windows/d3d11_decoder_configurator_unittest.cc",
--      "windows/d3d11_picture_buffer_unittest.cc",
--      "windows/d3d11_texture_selector_unittest.cc",
--      "windows/d3d11_texture_wrapper_unittest.cc",
--      "windows/d3d11_video_decoder_unittest.cc",
--      "windows/d3d11_video_device_format_support_unittest.cc",
--      "windows/d3d11_video_processor_proxy_unittest.cc",
--      "windows/supported_profile_helpers_unittest.cc",
--    ]
--    libs = [ "dxguid.lib" ]
--  }
--
--  if (is_mac) {
--    deps += [ "//media/gpu/mac:unit_tests" ]
--  }
--}
--
- # TODO(crbug.com/1006266): consider using |use_chromeos_video_acceleration|.
- if (use_v4l2_codec || use_vaapi) {
-   test("video_decode_accelerator_tests") {
 --- a/third_party/devtools-frontend/src/BUILD.gn
 +++ b/third_party/devtools-frontend/src/BUILD.gn
-@@ -226,7 +226,6 @@ devtools_frontend_resources_deps = [
+@@ -14,7 +14,6 @@ import("./third_party/blink/public/publi
+ 
  devtools_frontend_resources_deps = [
-   ":build_release_devtools",
    "front_end",
 -  "test",
  ]
diff --git a/debian/patches/disable/tflite-test.patch b/debian/patches/disable/tflite-test.patch
deleted file mode 100644
index fd18a5c..0000000
--- a/debian/patches/disable/tflite-test.patch
+++ /dev/null
@@ -1,21 +0,0 @@
---- a/chrome/services/machine_learning/BUILD.gn
-+++ b/chrome/services/machine_learning/BUILD.gn
-@@ -30,7 +30,6 @@ source_set("machine_learning") {
-     ]
- 
-     deps += [
--      ":tflite_simple_test",
-       "//components/optimization_guide/core:machine_learning",
-     ]
- 
-@@ -80,10 +79,3 @@ source_set("unit_tests") {
-     "//testing/gtest",
-   ]
- }
--
--if (build_with_tflite_lib) {
--  copy("tflite_simple_test") {
--    sources = [ "//components/test/data/optimization_guide/simple_test.tflite" ]
--    outputs = [ "$root_out_dir/test_data/simple_test.tflite" ]
--  }
--}
diff --git a/debian/patches/disable/third-party-cookies.patch b/debian/patches/disable/third-party-cookies.patch
index 055e8db..7c776b6 100644
--- a/debian/patches/disable/third-party-cookies.patch
+++ b/debian/patches/disable/third-party-cookies.patch
@@ -1,14 +1,20 @@
 description: disable third-party cookies by default
-author: Chad Miller <chad.miller@canonical.com>
+author: Andres Salomon <dilinger@debian.org>
 
---- a/chrome/browser/prefs/browser_prefs.cc
-+++ b/chrome/browser/prefs/browser_prefs.cc
-@@ -549,7 +549,7 @@ void RegisterProfilePrefsForMigration(
- 
-   registry->RegisterDictionaryPref(kObservedSessionTime);
- 
--  registry->RegisterBooleanPref(kBlockThirdPartyCookies, false);
-+  registry->RegisterBooleanPref(kBlockThirdPartyCookies, true);
- 
-   registry->RegisterTimePref(kPluginsDeprecationInfobarLastShown, base::Time());
+This is easily configured in
+  Settings -> Security & Privacy -> Cookies & other site data
+
+With this patch, we just change the default on a new chromium profile.
+
+
+--- a/components/content_settings/core/browser/cookie_settings.cc
++++ b/components/content_settings/core/browser/cookie_settings.cc
+@@ -63,7 +63,7 @@ void CookieSettings::RegisterProfilePref
+     user_prefs::PrefRegistrySyncable* registry) {
+   registry->RegisterIntegerPref(
+       prefs::kCookieControlsMode,
+-      static_cast<int>(CookieControlsMode::kIncognitoOnly),
++      static_cast<int>(CookieControlsMode::kBlockThirdParty),
+       user_prefs::PrefRegistrySyncable::SYNCABLE_PREF);
+ }
  
diff --git a/debian/patches/disable/unrar.patch b/debian/patches/disable/unrar.patch
index 8e7de3d..c1772a6 100644
--- a/debian/patches/disable/unrar.patch
+++ b/debian/patches/disable/unrar.patch
@@ -4,8 +4,8 @@ bug: http://bugs.debian.org/914487
 
 --- a/chrome/common/safe_browsing/BUILD.gn
 +++ b/chrome/common/safe_browsing/BUILD.gn
-@@ -43,39 +43,6 @@ if (safe_browsing_mode == 1) {
-     public_deps = [ "//components/safe_browsing/core:csd_proto" ]
+@@ -58,39 +58,6 @@ if (safe_browsing_mode == 1) {
+     public_deps = [ "//components/safe_browsing/core/common/proto:csd_proto" ]
    }
  
 -  source_set("rar_analyzer") {
@@ -19,8 +19,8 @@ bug: http://bugs.debian.org/914487
 -      ":download_type_util",
 -      "//base",
 -      "//base:i18n",
--      "//components/safe_browsing/core:features",
--      "//components/safe_browsing/core:file_type_policies",
+-      "//components/safe_browsing/content/common:file_type_policies",
+-      "//components/safe_browsing/core/common",
 -      "//third_party/unrar:unrar",
 -    ]
 -
@@ -38,41 +38,41 @@ bug: http://bugs.debian.org/914487
 -      "UNRAR_NO_EXCEPTIONS",
 -    ]
 -
--    public_deps = [ "//components/safe_browsing/core:csd_proto" ]
+-    public_deps = [ "//components/safe_browsing/core/common/proto:csd_proto" ]
 -  }
 -
-   if (is_mac) {
-     source_set("disk_image_type_sniffer_mac") {
+   if (is_linux || is_win) {
+     source_set("document_analyzer") {
        sources = [
-@@ -145,7 +112,6 @@ source_set("safe_browsing") {
+@@ -189,7 +156,6 @@ source_set("safe_browsing") {
        ":archive_analyzer_results",
        ":binary_feature_extractor",
        ":download_type_util",
 -      ":rar_analyzer",
-       "//components/safe_browsing/core:features",
+       "//components/safe_browsing/core/common",
      ]
  
 --- a/chrome/services/file_util/BUILD.gn
 +++ b/chrome/services/file_util/BUILD.gn
-@@ -15,7 +15,6 @@ source_set("file_util") {
-     "//build:chromeos_buildflags",
-     "//chrome/common/safe_browsing",
-     "//chrome/common/safe_browsing:archive_analyzer_results",
--    "//chrome/common/safe_browsing:rar_analyzer",
-     "//components/safe_browsing:buildflags",
-     "//mojo/public/cpp/bindings",
-   ]
+@@ -60,7 +60,6 @@ source_set("file_util") {
+     deps += [
+       "//chrome/common/safe_browsing",
+       "//chrome/common/safe_browsing:archive_analyzer_results",
+-      "//chrome/common/safe_browsing:rar_analyzer",
+     ]
+ 
+     if (is_linux || is_win) {
 --- a/chrome/services/file_util/safe_archive_analyzer.cc
 +++ b/chrome/services/file_util/safe_archive_analyzer.cc
-@@ -7,7 +7,6 @@
- #include "base/macros.h"
+@@ -6,7 +6,6 @@
+ 
  #include "build/build_config.h"
  #include "chrome/common/safe_browsing/archive_analyzer_results.h"
 -#include "chrome/common/safe_browsing/rar_analyzer.h"
  #include "chrome/common/safe_browsing/zip_analyzer.h"
  
- #if defined(OS_MAC)
-@@ -47,8 +46,7 @@ void SafeArchiveAnalyzer::AnalyzeRarFile
+ #if BUILDFLAG(IS_MAC)
+@@ -46,8 +45,7 @@ void SafeArchiveAnalyzer::AnalyzeRarFile
                                           AnalyzeRarFileCallback callback) {
    DCHECK(rar_file.IsValid());
  
@@ -84,12 +84,12 @@ bug: http://bugs.debian.org/914487
  }
 --- a/chrome/browser/safe_browsing/download_protection/file_analyzer.cc
 +++ b/chrome/browser/safe_browsing/download_protection/file_analyzer.cc
-@@ -90,7 +90,7 @@ void FileAnalyzer::Start(const base::Fil
+@@ -96,7 +96,7 @@ void FileAnalyzer::Start(const base::Fil
    if (inspection_type == DownloadFileType::ZIP) {
      StartExtractZipFeatures();
    } else if (inspection_type == DownloadFileType::RAR) {
 -    StartExtractRarFeatures();
 +    LOG(WARNING) << "Safebrowser inspection of rar files is disabled in this build";
- #if defined(OS_MAC)
+ #if BUILDFLAG(IS_MAC)
    } else if (inspection_type == DownloadFileType::DMG) {
      StartExtractDmgFeatures();
diff --git a/debian/patches/disable/web-ui-tests.patch b/debian/patches/disable/web-ui-tests.patch
deleted file mode 100644
index a8e049e..0000000
--- a/debian/patches/disable/web-ui-tests.patch
+++ /dev/null
@@ -1,102 +0,0 @@
---- a/content/shell/BUILD.gn
-+++ b/content/shell/BUILD.gn
-@@ -403,7 +403,6 @@ repack("pak") {
-     "$root_gen_dir/content/content_resources.pak",
-     "$root_gen_dir/content/dev_ui_content_resources.pak",
-     "$root_gen_dir/content/shell/shell_resources.pak",
--    "$root_gen_dir/content/test/web_ui_mojo_test_resources.pak",
-     "$root_gen_dir/mojo/public/js/mojo_bindings_resources.pak",
-     "$root_gen_dir/net/net_resources.pak",
-     "$root_gen_dir/third_party/blink/public/resources/blink_resources.pak",
-@@ -426,7 +426,6 @@ repack("pak") {
-     "//content/app/resources",
-     "//content/browser/resources/media:resources",
-     "//content/browser/webrtc/resources",
--    "//content/test:web_ui_mojo_test_resources",
-     "//mojo/public/js:resources",
-     "//net:net_resources",
-     "//third_party/blink/public:devtools_inspector_resources",
---- a/content/test/BUILD.gn
-+++ b/content/test/BUILD.gn
-@@ -812,28 +812,6 @@ mojom("content_test_mojo_bindings") {
-   ]
- }
- 
--mojom("web_ui_test_mojo_bindings") {
--  testonly = true
--  sources = [
--    "data/web_ui_test.test-mojom",
--    "data/web_ui_test_types.test-mojom",
--  ]
--  public_deps = [ "//url/mojom:url_mojom_gurl" ]
--  webui_module_path = "/content/test/data"
--}
--
--js_library("web_ui_mojo_test_js") {
--  sources = [ "data/web_ui_mojo_test.js" ]
--  deps = [ ":web_ui_test_mojo_bindings_webui_js" ]
--}
--
--# NOTE: Building this target serves as a compile test for type-checking of
--# WebUI JS that consumes generated Mojom JS bindings.
--js_type_check("web_ui_mojo_test_js_type_check") {
--  deps = [ ":web_ui_mojo_test_js" ]
--  closure_flags = default_closure_args + mojom_js_args
--}
--
- mojom("mojo_web_test_bindings") {
-   testonly = true
-   sources = [
-@@ -848,16 +848,6 @@ mojom("test_interfaces") {
-   }
- }
- 
--mojom("mojo_bindings_web_test_mojom") {
--  testonly = true
--  sources = [
--    "data/mojo_bindings_web_test.test-mojom",
--    "data/mojo_bindings_web_test_types.test-mojom",
--  ]
--  scramble_message_ids = false
--  js_generate_struct_deserializers = true
--}
--
- if (is_android) {
-   static_library("android_test_message_pump_support") {
-     testonly = true
-@@ -1228,7 +1205,6 @@ test("content_browsertests") {
- 
-   public_deps = [
-     ":test_interfaces",
--    ":web_ui_mojo_test_resources",
-     "//content:content_resources",
-     "//content:dev_ui_content_resources",
-   ]
-@@ -1237,8 +1213,6 @@ test("content_browsertests") {
-     ":browsertest_support",
-     ":content_test_mojo_bindings",
-     ":test_support",
--    ":web_ui_mojo_test_js_type_check",
--    ":web_ui_test_mojo_bindings",
-     "//base/test:test_support",
-     "//build:chromecast_buildflags",
-     "//build:chromeos_buildflags",
-@@ -1665,18 +1639,6 @@ test("content_browsertests") {
-   }
- }
- 
--grit("web_ui_mojo_test_resources") {
--  source = "web_ui_mojo_test_resources.grd"
--
--  outputs = [
--    "grit/web_ui_mojo_test_resources.h",
--    "grit/web_ui_mojo_test_resources_map.cc",
--    "grit/web_ui_mojo_test_resources_map.h",
--    "web_ui_mojo_test_resources.pak",
--  ]
--  deps = [ ":web_ui_test_mojo_bindings_webui_js" ]
--}
--
- static_library("run_all_unittests") {
-   testonly = true
-   sources = [ "run_all_unittests.cc" ]
diff --git a/debian/patches/disable/welcome-page.patch b/debian/patches/disable/welcome-page.patch
index 3623a09..e0f93a9 100644
--- a/debian/patches/disable/welcome-page.patch
+++ b/debian/patches/disable/welcome-page.patch
@@ -8,7 +8,7 @@ bug-debian: http://bugs.debian.org/857767
      profile->GetPrefs()->SetString(prefs::kSupervisedUserId,
                                     supervised_user_id);
    }
--#if !defined(OS_ANDROID)
+-#if !BUILDFLAG(IS_ANDROID)
 +#if 0
    // TODO(pmonette): Fix IsNewProfile() to handle the case where the profile is
    // new even if the "Preferences" file already existed. (For example: The
diff --git a/debian/patches/disable/widevine-cdm-cu.patch b/debian/patches/disable/widevine-cdm-cu.patch
index da45c3d..265a55b 100644
--- a/debian/patches/disable/widevine-cdm-cu.patch
+++ b/debian/patches/disable/widevine-cdm-cu.patch
@@ -3,14 +3,14 @@ author: Michel Le Bihan <michel@lebihan.pl>
 
 --- a/chrome/browser/component_updater/registration.cc
 +++ b/chrome/browser/component_updater/registration.cc
-@@ -96,10 +96,6 @@ void RegisterComponentsForUpdate(bool is_off_the_record_profile,
-   // TODO(crbug.com/1069814): Remove after 2021-10-01.
-   CleanUpPepperFlashComponent(profile_path);
+@@ -118,10 +118,6 @@ void RegisterComponentsForUpdate(bool is_off_the_record_profile,
+   RegisterMediaFoundationWidevineCdmComponent(cus);
+ #endif
  
 -#if BUILDFLAG(ENABLE_WIDEVINE_CDM_COMPONENT)
 -  RegisterWidevineCdmComponent(cus);
 -#endif  // BUILDFLAG(ENABLE_WIDEVINE_CDM_COMPONENT)
 -
- #if BUILDFLAG(ENABLE_NACL) && !defined(OS_ANDROID)
+ #if BUILDFLAG(ENABLE_NACL) && !BUILDFLAG(IS_ANDROID)
  #if BUILDFLAG(IS_CHROMEOS_ASH)
    // PNaCl on Chrome OS is on rootfs and there is no need to download it. But
diff --git a/debian/patches/fixes/chromeos_devicetype.patch b/debian/patches/fixes/chromeos_devicetype.patch
deleted file mode 100644
index a719119..0000000
--- a/debian/patches/fixes/chromeos_devicetype.patch
+++ /dev/null
@@ -1,59 +0,0 @@
---- /dev/null
-+++ b/ui/chromeos/devicetype_utils.h
-@@ -0,0 +1,34 @@
-+// Copyright 2015 The Chromium Authors. All rights reserved.
-+// Use of this source code is governed by a BSD-style license that can be
-+// found in the LICENSE file.
-+
-+#ifndef UI_CHROMEOS_DEVICETYPE_UTILS_H_
-+#define UI_CHROMEOS_DEVICETYPE_UTILS_H_
-+
-+#include "base/strings/string16.h"
-+#include "ui/chromeos/ui_chromeos_export.h"
-+
-+namespace ui {
-+
-+// Assuming the given localization resources takes a device type parameter, this
-+// will substitute the appropriate device in (e.g. Chromebook, Chromebox).
-+UI_CHROMEOS_EXPORT base::string16 SubstituteChromeOSDeviceType(int resource_id);
-+
-+// Returns the name of the Chrome device type (e.g. Chromebook, Chromebox).
-+UI_CHROMEOS_EXPORT base::string16 GetChromeOSDeviceName();
-+
-+// Returns the resource ID for the current Chrome device type (e.g. Chromebook,
-+// Chromebox).
-+UI_CHROMEOS_EXPORT int GetChromeOSDeviceTypeResourceId();
-+
-+// Returns the name (plural forms) of the Chrome device type (e.g. Chromebooks,
-+// Chromeboxes).
-+UI_CHROMEOS_EXPORT base::string16 GetChromeOSDeviceNameInPlural();
-+
-+// Returns the resource ID for the current Chrome device type in plural forms
-+// (e.g. Chromebooks, Chromeboxes).
-+UI_CHROMEOS_EXPORT int GetChromeOSDeviceTypeInPluralResourceId();
-+
-+}  // namespace ui
-+
-+#endif  // UI_CHROMEOS_DEVICETYPE_UTILS_H_
---- /dev/null
-+++ b/ui/chromeos/ui_chromeos_export.h
-@@ -0,0 +1,19 @@
-+// Copyright 2014 The Chromium Authors. All rights reserved.
-+// Use of this source code is governed by a BSD-style license that can be
-+// found in the LICENSE file.
-+
-+#ifndef UI_CHROMEOS_CHROMEOS_EXPORT_H_
-+#define UI_CHROMEOS_CHROMEOS_EXPORT_H_
-+
-+#if defined(COMPONENT_BUILD)
-+#if defined(UI_CHROMEOS_IMPLEMENTATION)
-+#define UI_CHROMEOS_EXPORT __attribute__((visibility("default")))
-+#else
-+#define UI_CHROMEOS_EXPORT
-+#endif
-+
-+#else  // defined(COMPONENT_BUILD)
-+#define UI_CHROMEOS_EXPORT
-+#endif
-+
-+#endif  // UI_CHROMEOS_CHROMEOS_EXPORT_H_
diff --git a/debian/patches/fixes/clang-and-gcc11.patch b/debian/patches/fixes/clang-and-gcc11.patch
new file mode 100644
index 0000000..8f94ecb
--- /dev/null
+++ b/debian/patches/fixes/clang-and-gcc11.patch
@@ -0,0 +1,206 @@
+description: In order to build w/ libstdc++ >= 11 and clang, this patch is needed.
+author: https://bugs.gentoo.org/786597#c14
+--- a/sql/recover_module/btree.cc
++++ b/sql/recover_module/btree.cc
+@@ -136,16 +136,25 @@ static_assert(std::is_trivially_destruct
+               "Move the destructor to the .cc file if it's non-trival");
+ #endif  // !DCHECK_IS_ON()
+ 
+-LeafPageDecoder::LeafPageDecoder(DatabasePageReader* db_reader) noexcept
+-    : page_id_(db_reader->page_id()),
+-      db_reader_(db_reader),
+-      cell_count_(ComputeCellCount(db_reader)),
+-      next_read_index_(0),
+-      last_record_size_(0) {
++void LeafPageDecoder::Initialize(DatabasePageReader* db_reader) {
++  DCHECK(db_reader);
+   DCHECK(IsOnValidPage(db_reader));
++  page_id_ = db_reader->page_id();
++  db_reader_ = db_reader;
++  cell_count_ = ComputeCellCount(db_reader);
++  next_read_index_ = 0;
++  last_record_size_ = 0;
+   DCHECK(DatabasePageReader::IsValidPageId(page_id_));
+ }
+ 
++void LeafPageDecoder::Reset() {
++  db_reader_ = nullptr;
++  page_id_ = 0;
++  cell_count_ = 0;
++  next_read_index_ = 0;
++  last_record_size_ = 0;
++}
++
+ bool LeafPageDecoder::TryAdvance() {
+   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+   DCHECK(CanAdvance());
+--- a/sql/recover_module/btree.h
++++ b/sql/recover_module/btree.h
+@@ -103,7 +103,7 @@ class LeafPageDecoder {
+   //
+   // |db_reader| must have been used to read an inner page of a table B-tree.
+   // |db_reader| must outlive this instance.
+-  explicit LeafPageDecoder(DatabasePageReader* db_reader) noexcept;
++  explicit LeafPageDecoder() noexcept = default;
+   ~LeafPageDecoder() noexcept = default;
+ 
+   LeafPageDecoder(const LeafPageDecoder&) = delete;
+@@ -151,6 +151,15 @@ class LeafPageDecoder {
+   // read as long as CanAdvance() returns true.
+   bool TryAdvance();
+ 
++  // Initialize with DatabasePageReader
++  void Initialize(DatabasePageReader* db_reader);
++
++  // Reset internal DatabasePageReader
++  void Reset();
++
++  // True if DatabasePageReader is valid
++  bool IsValid() { return (db_reader_ != nullptr); }
++
+   // True if the given reader may point to an inner page in a table B-tree.
+   //
+   // The last ReadPage() call on |db_reader| must have succeeded.
+@@ -164,14 +173,14 @@ class LeafPageDecoder {
+   static int ComputeCellCount(DatabasePageReader* db_reader);
+ 
+   // The number of the B-tree page this reader is reading.
+-  const int64_t page_id_;
++  int64_t page_id_;
+   // Used to read the tree page.
+   //
+   // Raw pointer usage is acceptable because this instance's owner is expected
+   // to ensure that the DatabasePageReader outlives this.
+-  DatabasePageReader* const db_reader_;
++  DatabasePageReader* db_reader_;
+   // Caches the ComputeCellCount() value for this reader's page.
+-  const int cell_count_ = ComputeCellCount(db_reader_);
++  int cell_count_;
+ 
+   // The reader's cursor state.
+   //
+--- a/sql/recover_module/cursor.cc
++++ b/sql/recover_module/cursor.cc
+@@ -28,7 +28,7 @@ VirtualCursor::~VirtualCursor() {
+ int VirtualCursor::First() {
+   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+   inner_decoders_.clear();
+-  leaf_decoder_ = nullptr;
++  leaf_decoder_.Reset();
+ 
+   AppendPageDecoder(table_->root_page_id());
+   return Next();
+@@ -38,18 +38,18 @@ int VirtualCursor::Next() {
+   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+   record_reader_.Reset();
+ 
+-  while (!inner_decoders_.empty() || leaf_decoder_.get()) {
+-    if (leaf_decoder_.get()) {
+-      if (!leaf_decoder_->CanAdvance()) {
++  while (!inner_decoders_.empty() || leaf_decoder_.IsValid()) {
++    if (leaf_decoder_.IsValid()) {
++      if (!leaf_decoder_.CanAdvance()) {
+         // The leaf has been exhausted. Remove it from the DFS stack.
+-        leaf_decoder_ = nullptr;
++        leaf_decoder_.Reset();
+         continue;
+       }
+-      if (!leaf_decoder_->TryAdvance())
++      if (!leaf_decoder_.TryAdvance())
+         continue;
+ 
+-      if (!payload_reader_.Initialize(leaf_decoder_->last_record_size(),
+-                                      leaf_decoder_->last_record_offset())) {
++      if (!payload_reader_.Initialize(leaf_decoder_.last_record_size(),
++                                      leaf_decoder_.last_record_offset())) {
+         continue;
+       }
+       if (!record_reader_.Initialize())
+@@ -101,13 +101,13 @@ int VirtualCursor::ReadColumn(int column
+ int64_t VirtualCursor::RowId() {
+   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+   DCHECK(record_reader_.IsInitialized());
+-  DCHECK(leaf_decoder_.get());
+-  return leaf_decoder_->last_record_rowid();
++  DCHECK(leaf_decoder_.IsValid());
++  return leaf_decoder_.last_record_rowid();
+ }
+ 
+ void VirtualCursor::AppendPageDecoder(int page_id) {
+   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+-  DCHECK(leaf_decoder_.get() == nullptr)
++  DCHECK(!leaf_decoder_.IsValid())
+       << __func__
+       << " must only be called when the current path has no leaf decoder";
+ 
+@@ -115,7 +115,7 @@ void VirtualCursor::AppendPageDecoder(in
+     return;
+ 
+   if (LeafPageDecoder::IsOnValidPage(&db_reader_)) {
+-    leaf_decoder_ = std::make_unique<LeafPageDecoder>(&db_reader_);
++    leaf_decoder_.Initialize(&db_reader_);
+     return;
+   }
+ 
+--- a/sql/recover_module/cursor.h
++++ b/sql/recover_module/cursor.h
+@@ -130,7 +130,7 @@ class VirtualCursor {
+   std::vector<std::unique_ptr<InnerPageDecoder>> inner_decoders_;
+ 
+   // Decodes the leaf page containing records.
+-  std::unique_ptr<LeafPageDecoder> leaf_decoder_;
++  LeafPageDecoder leaf_decoder_;
+ 
+   SEQUENCE_CHECKER(sequence_checker_);
+ };
+--- a/sql/recover_module/pager.cc
++++ b/sql/recover_module/pager.cc
+@@ -23,8 +23,7 @@ static_assert(DatabasePageReader::kMaxPa
+               "ints are not appropriate for representing page IDs");
+ 
+ DatabasePageReader::DatabasePageReader(VirtualTable* table)
+-    : page_data_(std::make_unique<uint8_t[]>(table->page_size())),
+-      table_(table) {
++    : page_data_(), table_(table) {
+   DCHECK(table != nullptr);
+   DCHECK(IsValidPageSize(table->page_size()));
+ }
+@@ -57,8 +56,8 @@ int DatabasePageReader::ReadPage(int pag
+                     std::numeric_limits<int64_t>::max(),
+                 "The |read_offset| computation above may overflow");
+ 
+-  int sqlite_status =
+-      RawRead(sqlite_file, read_size, read_offset, page_data_.get());
++  int sqlite_status = RawRead(sqlite_file, read_size, read_offset,
++                              const_cast<uint8_t*>(page_data_.data()));
+ 
+   // |page_id_| needs to be set to kInvalidPageId if the read failed.
+   // Otherwise, future ReadPage() calls with the previous |page_id_| value
+--- a/sql/recover_module/pager.h
++++ b/sql/recover_module/pager.h
+@@ -5,6 +5,7 @@
+ #ifndef SQL_RECOVER_MODULE_PAGER_H_
+ #define SQL_RECOVER_MODULE_PAGER_H_
+ 
++#include <array>
+ #include <cstdint>
+ #include <memory>
+ #include <ostream>
+@@ -72,7 +73,7 @@ class DatabasePageReader {
+     DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+     DCHECK_NE(page_id_, kInvalidPageId)
+         << "Successful ReadPage() required before accessing pager state";
+-    return page_data_.get();
++    return page_data_.data();
+   }
+ 
+   // The number of bytes in the page read by the last ReadPage() call.
+@@ -139,7 +140,7 @@ class DatabasePageReader {
+   int page_id_ = kInvalidPageId;
+   // Stores the bytes of the last page successfully read by ReadPage().
+   // The content is undefined if the last call to ReadPage() did not succeed.
+-  const std::unique_ptr<uint8_t[]> page_data_;
++  const std::array<uint8_t, kMaxPageSize> page_data_;
+   // Raw pointer usage is acceptable because this instance's owner is expected
+   // to ensure that the VirtualTable outlives this.
+   const raw_ptr<VirtualTable> table_;
diff --git a/debian/patches/fixes/closure.patch b/debian/patches/fixes/closure.patch
index 72a2dd5..7958c59 100644
--- a/debian/patches/fixes/closure.patch
+++ b/debian/patches/fixes/closure.patch
@@ -44,7 +44,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 --- /dev/null
 +++ b/third_party/closure_compiler/compiler.py
 @@ -0,0 +1,314 @@
-+#!/usr/bin/python2
++#!/usr/bin/python3
 +# Copyright 2015 The Chromium Authors. All rights reserved.
 +# Use of this source code is governed by a BSD-style license that can be
 +# found in the LICENSE file.
diff --git a/debian/patches/fixes/gnu-as.patch b/debian/patches/fixes/gnu-as.patch
deleted file mode 100644
index c6346c8..0000000
--- a/debian/patches/fixes/gnu-as.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-description: gnu as does not support this argument
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/build/config/compiler/BUILD.gn
-+++ b/build/config/compiler/BUILD.gn
-@@ -1127,7 +1127,7 @@ config("compiler_deterministic") {
-       "-Xclang",
-       ".",
-     ]
--    if (!is_win) {
-+    if (false) {
-       # We don't use clang -cc1as on Windows (yet? https://crbug.com/762167)
-       asmflags = [ "-Wa,-fdebug-compilation-dir,." ]
-     }
diff --git a/debian/patches/fixes/inspector.patch b/debian/patches/fixes/inspector.patch
deleted file mode 100644
index e7c96fb..0000000
--- a/debian/patches/fixes/inspector.patch
+++ /dev/null
@@ -1,258 +0,0 @@
-description: use inspector_protocol from top level third_party dir
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/v8/src/inspector/BUILD.gn
-+++ b/v8/src/inspector/BUILD.gn
-@@ -4,7 +4,7 @@
- 
- import("../../gni/v8.gni")
- 
--_inspector_protocol = v8_path_prefix + "/third_party/inspector_protocol"
-+_inspector_protocol = "../../../third_party/inspector_protocol"
- import("$_inspector_protocol/inspector_protocol.gni")
- 
- _protocol_generated = [
-@@ -84,7 +84,7 @@ v8_source_set("inspector") {
-     ":inspector_string_conversions",
-     "../..:v8_tracing",
-     "../..:v8_version",
--    "../../third_party/inspector_protocol:crdtp",
-+    "../../../third_party/inspector_protocol:crdtp",
-   ]
- 
-   public_deps = [
---- a/v8/test/unittests/BUILD.gn
-+++ b/v8/test/unittests/BUILD.gn
-@@ -486,7 +486,7 @@ v8_source_set("unittests_sources") {
-     "../..:v8_shared_internal_headers",
-     "../..:v8_wrappers",
-     "../..:wasm_test_common",
--    "../../third_party/inspector_protocol:crdtp_test",
-+    "../../../third_party/inspector_protocol:crdtp_test",
-     "//build/win:default_exe_manifest",
-     "//testing/gmock",
-     "//testing/gtest",
---- a/v8/src/inspector/inspector_protocol_config.json
-+++ b/v8/src/inspector/inspector_protocol_config.json
-@@ -48,6 +48,6 @@
-     },
- 
-     "crdtp": {
--        "namespace": "v8_crdtp"
-+        "namespace": "crdtp"
-     }
- }
---- a/v8/src/inspector/v8-inspector-session-impl.cc
-+++ b/v8/src/inspector/v8-inspector-session-impl.cc
-@@ -26,12 +26,12 @@
- 
- namespace v8_inspector {
- namespace {
--using v8_crdtp::span;
--using v8_crdtp::SpanFrom;
--using v8_crdtp::Status;
--using v8_crdtp::cbor::CheckCBORMessage;
--using v8_crdtp::json::ConvertCBORToJSON;
--using v8_crdtp::json::ConvertJSONToCBOR;
-+using crdtp::span;
-+using crdtp::SpanFrom;
-+using crdtp::Status;
-+using crdtp::cbor::CheckCBORMessage;
-+using crdtp::json::ConvertCBORToJSON;
-+using crdtp::json::ConvertJSONToCBOR;
- 
- bool IsCBORMessage(StringView msg) {
-   return msg.is8Bit() && msg.length() >= 2 && msg.characters8()[0] == 0xd8 &&
-@@ -196,8 +196,8 @@ void V8InspectorSessionImpl::SendProtoco
- }
- 
- void V8InspectorSessionImpl::FallThrough(int callId,
--                                         const v8_crdtp::span<uint8_t> method,
--                                         v8_crdtp::span<uint8_t> message) {
-+                                         const crdtp::span<uint8_t> method,
-+                                         crdtp::span<uint8_t> message) {
-   // There's no other layer to handle the command.
-   UNREACHABLE();
- }
-@@ -344,8 +344,8 @@ void V8InspectorSessionImpl::reportAllCo
- }
- 
- void V8InspectorSessionImpl::dispatchProtocolMessage(StringView message) {
--  using v8_crdtp::span;
--  using v8_crdtp::SpanFrom;
-+  using crdtp::span;
-+  using crdtp::SpanFrom;
-   span<uint8_t> cbor;
-   std::vector<uint8_t> converted_cbor;
-   if (IsCBORMessage(message)) {
-@@ -358,21 +358,21 @@ void V8InspectorSessionImpl::dispatchPro
-     auto status = ConvertToCBOR(message, &converted_cbor);
-     if (!status.ok()) {
-       m_channel->sendNotification(
--          serializeForFrontend(v8_crdtp::CreateErrorNotification(
--              v8_crdtp::DispatchResponse::ParseError(status.ToASCIIString()))));
-+          serializeForFrontend(crdtp::CreateErrorNotification(
-+              crdtp::DispatchResponse::ParseError(status.ToASCIIString()))));
-       return;
-     }
-     cbor = SpanFrom(converted_cbor);
-   }
--  v8_crdtp::Dispatchable dispatchable(cbor);
-+  crdtp::Dispatchable dispatchable(cbor);
-   if (!dispatchable.ok()) {
-     if (dispatchable.HasCallId()) {
-       m_channel->sendNotification(serializeForFrontend(
--          v8_crdtp::CreateErrorNotification(dispatchable.DispatchError())));
-+          crdtp::CreateErrorNotification(dispatchable.DispatchError())));
-     } else {
-       m_channel->sendResponse(
-           dispatchable.CallId(),
--          serializeForFrontend(v8_crdtp::CreateErrorResponse(
-+          serializeForFrontend(crdtp::CreateErrorResponse(
-               dispatchable.CallId(), dispatchable.DispatchError())));
-     }
-     return;
---- a/v8/src/inspector/string-16.cc
-+++ b/v8/src/inspector/string-16.cc
-@@ -239,7 +239,7 @@ std::string String16::utf8() const {
- 
- }  // namespace v8_inspector
- 
--namespace v8_crdtp {
-+namespace crdtp {
- void SerializerTraits<v8_inspector::String16>::Serialize(
-     const v8_inspector::String16& str, std::vector<uint8_t>* out) {
-   cbor::EncodeFromUTF16(
---- a/v8/src/inspector/string-16.h
-+++ b/v8/src/inspector/string-16.h
-@@ -169,7 +169,7 @@ struct hash<v8_inspector::String16> {
- #endif  // !defined(__APPLE__) || defined(_LIBCPP_VERSION)
- 
- // See third_party/inspector_protocol/crdtp/serializer_traits.h.
--namespace v8_crdtp {
-+namespace crdtp {
- template <>
- struct SerializerTraits<v8_inspector::String16> {
-   static void Serialize(const v8_inspector::String16& str,
---- a/v8/src/inspector/v8-inspector-session-impl.h
-+++ b/v8/src/inspector/v8-inspector-session-impl.h
-@@ -105,8 +105,8 @@ class V8InspectorSessionImpl : public V8
-       int callId, std::unique_ptr<protocol::Serializable> message) override;
-   void SendProtocolNotification(
-       std::unique_ptr<protocol::Serializable> message) override;
--  void FallThrough(int callId, v8_crdtp::span<uint8_t> method,
--                   v8_crdtp::span<uint8_t> message) override;
-+  void FallThrough(int callId, crdtp::span<uint8_t> method,
-+                   crdtp::span<uint8_t> message) override;
-   void FlushProtocolNotifications() override;
- 
-   std::unique_ptr<StringBuffer> serializeForFrontend(
---- a/v8/src/inspector/injected-script.cc
-+++ b/v8/src/inspector/injected-script.cc
-@@ -724,8 +724,8 @@ Response InjectedScript::resolveCallArgu
-     String16 value;
-     if (callArgument->hasValue()) {
-       std::vector<uint8_t> json;
--      v8_crdtp::json::ConvertCBORToJSON(
--          v8_crdtp::SpanFrom(callArgument->getValue(nullptr)->Serialize()),
-+      crdtp::json::ConvertCBORToJSON(
-+          crdtp::SpanFrom(callArgument->getValue(nullptr)->Serialize()),
-           &json);
-       value =
-           "(" +
---- a/v8/src/inspector/custom-preview.cc
-+++ b/v8/src/inspector/custom-preview.cc
-@@ -121,7 +121,7 @@ bool substituteObjectTags(int sessionId,
-       return false;
-     }
-     std::vector<uint8_t> json;
--    v8_crdtp::json::ConvertCBORToJSON(v8_crdtp::SpanFrom(wrapper->Serialize()),
-+    crdtp::json::ConvertCBORToJSON(crdtp::SpanFrom(wrapper->Serialize()),
-                                       &json);
-     v8::Local<v8::Value> jsonWrapper;
-     v8_inspector::StringView serialized(json.data(), json.size());
---- a/v8/src/inspector/v8-stack-trace-impl.cc
-+++ b/v8/src/inspector/v8-stack-trace-impl.cc
-@@ -11,9 +11,9 @@
- #include "src/inspector/v8-inspector-impl.h"
- #include "src/tracing/trace-event.h"
- 
--using v8_crdtp::SpanFrom;
--using v8_crdtp::json::ConvertCBORToJSON;
--using v8_crdtp::json::ConvertJSONToCBOR;
-+using crdtp::SpanFrom;
-+using crdtp::json::ConvertCBORToJSON;
-+using crdtp::json::ConvertJSONToCBOR;
- 
- namespace v8_inspector {
- 
-@@ -139,10 +139,10 @@ V8StackTraceId::V8StackTraceId(StringVie
-   std::vector<uint8_t> cbor;
-   if (json.is8Bit()) {
-     ConvertJSONToCBOR(
--        v8_crdtp::span<uint8_t>(json.characters8(), json.length()), &cbor);
-+        crdtp::span<uint8_t>(json.characters8(), json.length()), &cbor);
-   } else {
-     ConvertJSONToCBOR(
--        v8_crdtp::span<uint16_t>(json.characters16(), json.length()), &cbor);
-+        crdtp::span<uint16_t>(json.characters16(), json.length()), &cbor);
-   }
-   auto dict = protocol::DictionaryValue::cast(
-       protocol::Value::parseBinary(cbor.data(), cbor.size()));
-@@ -169,7 +169,7 @@ std::unique_ptr<StringBuffer> V8StackTra
-   dict->setString(kDebuggerId, V8DebuggerId(debugger_id).toString());
-   dict->setBoolean(kShouldPause, should_pause);
-   std::vector<uint8_t> json;
--  v8_crdtp::json::ConvertCBORToJSON(v8_crdtp::SpanFrom(dict->Serialize()),
-+  crdtp::json::ConvertCBORToJSON(crdtp::SpanFrom(dict->Serialize()),
-                                     &json);
-   return StringBufferFrom(std::move(json));
- }
---- a/v8/src/inspector/string-util.cc
-+++ b/v8/src/inspector/string-util.cc
-@@ -245,7 +245,7 @@ String16 stackTraceIdToString(uintptr_t
- 
- }  // namespace v8_inspector
- 
--namespace v8_crdtp {
-+namespace crdtp {
- 
- using v8_inspector::String16;
- using v8_inspector::protocol::Binary;
---- a/v8/src/inspector/string-util.h
-+++ b/v8/src/inspector/string-util.h
-@@ -86,7 +86,7 @@ String16 stackTraceIdToString(uintptr_t
- }  // namespace v8_inspector
- 
- // See third_party/inspector_protocol/crdtp/serializer_traits.h.
--namespace v8_crdtp {
-+namespace crdtp {
- 
- template <>
- struct ProtocolTypeTraits<v8_inspector::String16> {
---- a/v8/src/inspector/v8-debugger-agent-impl.cc
-+++ b/v8/src/inspector/v8-debugger-agent-impl.cc
-@@ -1607,8 +1607,8 @@ void V8DebuggerAgentImpl::didParseSource
-     // execution context id.
-     const String16& aux = inspected->auxData();
-     std::vector<uint8_t> cbor;
--    v8_crdtp::json::ConvertJSONToCBOR(
--        v8_crdtp::span<uint16_t>(aux.characters16(), aux.length()), &cbor);
-+    crdtp::json::ConvertJSONToCBOR(
-+        crdtp::span<uint16_t>(aux.characters16(), aux.length()), &cbor);
-     executionContextAuxData = protocol::DictionaryValue::cast(
-         protocol::Value::parseBinary(cbor.data(), cbor.size()));
-   }
---- a/v8/src/inspector/v8-runtime-agent-impl.cc
-+++ b/v8/src/inspector/v8-runtime-agent-impl.cc
-@@ -870,8 +870,8 @@ void V8RuntimeAgentImpl::reportExecution
-   const String16& aux = context->auxData();
-   if (!aux.isEmpty()) {
-     std::vector<uint8_t> cbor;
--    v8_crdtp::json::ConvertJSONToCBOR(
--        v8_crdtp::span<uint16_t>(aux.characters16(), aux.length()), &cbor);
-+    crdtp::json::ConvertJSONToCBOR(
-+        crdtp::span<uint16_t>(aux.characters16(), aux.length()), &cbor);
-     description->setAuxData(protocol::DictionaryValue::cast(
-         protocol::Value::parseBinary(cbor.data(), cbor.size())));
-   }
diff --git a/debian/patches/fixes/missing-includes.patch b/debian/patches/fixes/missing-includes.patch
deleted file mode 100644
index 78b08e2..0000000
--- a/debian/patches/fixes/missing-includes.patch
+++ /dev/null
@@ -1,125 +0,0 @@
-description: add include statements that are missing
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/cc/base/list_container_helper.cc
-+++ b/cc/base/list_container_helper.cc
-@@ -5,6 +5,7 @@
- #include "cc/base/list_container_helper.h"
- 
- #include <stddef.h>
-+#include <string.h>
- 
- #include <algorithm>
- #include <cstring>
---- a/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc
-+++ b/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc
-@@ -17,6 +17,7 @@
- #include <string.h>
- #include <sys/types.h>
- 
-+#include <cstring>
- #include <utility>
- #include <vector>
- 
---- a/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc
-+++ b/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc
-@@ -20,6 +20,8 @@
- #include "base/stl_util.h"
- #include "minidump/minidump_context.h"
- 
-+#include <cstring>
-+
- namespace crashpad {
- namespace internal {
- 
---- a/third_party/crashpad/crashpad/util/process/process_memory.cc
-+++ b/third_party/crashpad/crashpad/util/process/process_memory.cc
-@@ -16,6 +16,7 @@
- 
- #include <string.h>
- 
-+#include <cstring>
- #include <algorithm>
- 
- #include "base/check_op.h"
---- a/third_party/crashpad/crashpad/util/stream/log_output_stream.cc
-+++ b/third_party/crashpad/crashpad/util/stream/log_output_stream.cc
-@@ -16,6 +16,7 @@
- 
- #include <string.h>
- 
-+#include <cstring>
- #include <algorithm>
- 
- #include "base/check.h"
---- a/third_party/webrtc/modules/audio_processing/aec3/clockdrift_detector.h
-+++ b/third_party/webrtc/modules/audio_processing/aec3/clockdrift_detector.h
-@@ -14,6 +14,7 @@
- #include <stddef.h>
- 
- #include <array>
-+#include <cstddef>
- 
- namespace webrtc {
- 
---- a/chrome/browser/search/background/ntp_backgrounds.h
-+++ b/chrome/browser/search/background/ntp_backgrounds.h
-@@ -8,6 +8,7 @@
- #include <stddef.h>
- 
- #include <array>
-+#include <cstddef>
- 
- class GURL;
- 
---- a/components/autofill/core/browser/pattern_provider/pattern_provider.h
-+++ b/components/autofill/core/browser/pattern_provider/pattern_provider.h
-@@ -6,6 +6,7 @@
- #define COMPONENTS_AUTOFILL_CORE_BROWSER_PATTERN_PROVIDER_PATTERN_PROVIDER_H_
- 
- #include <string>
-+#include <vector>
- 
- #include "base/gtest_prod_util.h"
- #include "base/macros.h"
---- a/components/autofill/core/browser/data_model/borrowed_transliterator.h
-+++ b/components/autofill/core/browser/data_model/borrowed_transliterator.h
-@@ -5,6 +5,8 @@
- #ifndef COMPONENTS_AUTOFILL_CORE_BROWSER_DATA_MODEL_BORROWED_TRANSLITERATOR_H_
- #define COMPONENTS_AUTOFILL_CORE_BROWSER_DATA_MODEL_BORROWED_TRANSLITERATOR_H_
- 
-+#include <memory>
-+
- #include "base/i18n/unicodestring.h"
- #include "base/no_destructor.h"
- #include "base/synchronization/lock.h"
---- a/components/translate/core/language_detection/ngram_hash_ops_utils.cc
-+++ b/components/translate/core/language_detection/ngram_hash_ops_utils.cc
-@@ -4,6 +4,7 @@
- 
- #include "components/translate/core/language_detection/ngram_hash_ops_utils.h"
- 
-+#include <cstring>
- #include <vector>
- 
- #include "third_party/utf/src/include/utf.h"
---- a/components/translate/core/language_detection/quantization_utils.h
-+++ b/components/translate/core/language_detection/quantization_utils.h
-@@ -7,6 +7,7 @@
- 
- #include <algorithm>
- #include <cmath>
-+#include <cstdint>
- 
- namespace translate {
- 
---- a/third_party/pdfium/core/fxcodec/png/png_decoder.cpp
-+++ b/third_party/pdfium/core/fxcodec/png/png_decoder.cpp
-@@ -10,6 +10,7 @@
- 
- #include "core/fxcodec/cfx_codec_memory.h"
- #include "core/fxcodec/fx_codec.h"
-+#include "core/fxcodec/fx_codec_def.h"
- #include "core/fxcrt/unowned_ptr.h"
- #include "core/fxge/dib/fx_dib.h"
- #include "third_party/base/compiler_specific.h"
diff --git a/debian/patches/fixes/multiple-destruction.patch b/debian/patches/fixes/multiple-destruction.patch
deleted file mode 100644
index 6a21614..0000000
--- a/debian/patches/fixes/multiple-destruction.patch
+++ /dev/null
@@ -1,16 +0,0 @@
-description: suggest proxy misconfiguration when network is unreachable
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/base/supports_user_data.cc
-+++ b/base/supports_user_data.cc
-@@ -42,6 +42,10 @@ void SupportsUserData::SetUserData(const
- 
- void SupportsUserData::RemoveUserData(const void* key) {
-   DCHECK(sequence_checker_.CalledOnValidSequence());
-+
-+  std::unique_ptr<Data> to_be_deleted =
-+  std::move(user_data_[key]);
-+  DCHECK(to_be_deleted);
-   user_data_.erase(key);
- }
- 
diff --git a/debian/patches/fixes/no-ozone.patch b/debian/patches/fixes/no-ozone.patch
deleted file mode 100644
index bae2377..0000000
--- a/debian/patches/fixes/no-ozone.patch
+++ /dev/null
@@ -1,14 +0,0 @@
---- a/chrome/browser/ui/views/chrome_browser_main_extra_parts_views_linux.cc
-+++ b/chrome/browser/ui/views/chrome_browser_main_extra_parts_views_linux.cc
-@@ -86,9 +86,11 @@ void ChromeBrowserMainExtraPartsViewsLin
-   views::LinuxUI::SetInstance(linux_ui);
-   linux_ui->Initialize();
- 
-+#if defined(USE_OZONE)
-   // Cursor theme changes are tracked by LinuxUI (via a CursorThemeManager
-   // implementation). Start observing them once it's initialized.
-   ui::CursorFactory::GetInstance()->ObserveThemeChanges();
-+#endif
- 
-   DCHECK(ui::LinuxInputMethodContextFactory::instance())
-       << "LinuxUI must set LinuxInputMethodContextFactory instance.";
diff --git a/debian/patches/fixes/not-constexpr.patch b/debian/patches/fixes/not-constexpr.patch
deleted file mode 100644
index d5d7113..0000000
--- a/debian/patches/fixes/not-constexpr.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-description: clang 7 won't allow this variable to be constexpr
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/cc/trees/frame_rate_estimator.cc
-+++ b/cc/trees/frame_rate_estimator.cc
-@@ -48,7 +48,7 @@ void FrameRateEstimator::WillDraw(base::
-   // frequency is lower than that, then using a lower frame rate is permitted.
-   // The delta below is to account for minor offsets in frame times.
-   constexpr auto kFudgeDelta = base::TimeDelta::FromMilliseconds(1);
--  constexpr auto kMinDelta =
-+  const auto kMinDelta =
-       (viz::BeginFrameArgs::DefaultInterval() * 2) + kFudgeDelta;
-   if (draw_delta < kMinDelta)
-     num_of_consecutive_frames_with_min_delta_++;
diff --git a/debian/patches/fixes/nullptr-dereference.patch b/debian/patches/fixes/nullptr-dereference.patch
deleted file mode 100644
index b7060cd..0000000
--- a/debian/patches/fixes/nullptr-dereference.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-description: use a meaningful string to avoid possible nullptr dereference
-author: Michael Gilbert
-
---- a/base/location.cc
-+++ b/base/location.cc
-@@ -92,7 +92,7 @@ NOINLINE Location Location::Current(cons
- #else
- // static
- NOINLINE Location Location::Current() {
--  return Location(nullptr, RETURN_ADDRESS());
-+  return Location("[unknown file]", RETURN_ADDRESS());
- }
- #endif
- 
diff --git a/debian/patches/fixes/ps-print.patch b/debian/patches/fixes/ps-print.patch
index 7bb8993..86b465a 100644
--- a/debian/patches/fixes/ps-print.patch
+++ b/debian/patches/fixes/ps-print.patch
@@ -3,7 +3,7 @@ author: Salvatore Bonaccorso
 
 --- a/ui/gtk/printing/print_dialog_gtk.cc
 +++ b/ui/gtk/printing/print_dialog_gtk.cc
-@@ -390,7 +390,7 @@ void PrintDialogGtk::ShowDialog(
+@@ -395,7 +395,7 @@ void PrintDialogGtk::ShowDialog(
    GtkPrintCapabilities cap = static_cast<GtkPrintCapabilities>(
        GTK_PRINT_CAPABILITY_GENERATE_PDF | GTK_PRINT_CAPABILITY_PAGE_SET |
        GTK_PRINT_CAPABILITY_COPIES | GTK_PRINT_CAPABILITY_COLLATE |
diff --git a/debian/patches/fixes/sequence-point.patch b/debian/patches/fixes/sequence-point.patch
deleted file mode 100644
index 57f7481..0000000
--- a/debian/patches/fixes/sequence-point.patch
+++ /dev/null
@@ -1,38 +0,0 @@
-description: fix undefined order in which expressions are evaluated (-Wsequence-point)
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/components/download/internal/common/download_item_impl.cc
-+++ b/components/download/internal/common/download_item_impl.cc
-@@ -643,7 +643,9 @@ void DownloadItemImpl::UpdateResumptionI
-     bytes_wasted_ = 0;
-   }
- 
--  auto_resume_count_ = user_resume ? 0 : ++auto_resume_count_;
-+  ++auto_resume_count_;
-+  if (user_resume)
-+    auto_resume_count_ = 0;
-   download_schedule_ = base::nullopt;
-   RecordDownloadLaterEvent(DownloadLaterEvent::kScheduleRemoved);
- }
---- a/third_party/blink/renderer/modules/animationworklet/animation_worklet_proxy_client.cc
-+++ b/third_party/blink/renderer/modules/animationworklet/animation_worklet_proxy_client.cc
-@@ -186,7 +186,7 @@ AnimationWorkletProxyClient::SelectGloba
-   if (--next_global_scope_switch_countdown_ < 0) {
-     int last_global_scope_index = current_global_scope_index_;
-     current_global_scope_index_ =
--        (++current_global_scope_index_ % global_scopes_.size());
-+        (current_global_scope_index_ + 1) % global_scopes_.size();
-     global_scopes_[last_global_scope_index]->MigrateAnimatorsTo(
-         global_scopes_[current_global_scope_index_]);
-     // Introduce an element of randomness in the switching interval to make
---- a/chrome/browser/notifications/scheduler/internal/impression_history_tracker.cc
-+++ b/chrome/browser/notifications/scheduler/internal/impression_history_tracker.cc
-@@ -412,7 +412,7 @@ void ImpressionHistoryTrackerImpl::Apply
- 
-   // Increase |current_max_daily_show| by 1.
-   client_state->current_max_daily_show =
--      base::ClampToRange(++client_state->current_max_daily_show, 0,
-+      base::ClampToRange(client_state->current_max_daily_show + 1, 0,
-                          config_.max_daily_shown_per_type);
- }
- 
diff --git a/debian/patches/fixes/time64-sandbox.patch b/debian/patches/fixes/time64-sandbox.patch
deleted file mode 100644
index 163eca7..0000000
--- a/debian/patches/fixes/time64-sandbox.patch
+++ /dev/null
@@ -1,47 +0,0 @@
-Description: allow sandboxed code to call gettime64
- Add __NR_clock_gettime64 and __NR_clock_nanosleep_time64 to syscall whitelist
- and clock selection parameter filtering code.
-
- Add __NR_utimensat_time64 to syscall whitelist
-
- Conditionalise additions on the new calls existing, because they do not exist
- on 64-bit architectures.
-Author: Peter Michael Green <plugwash@raspbian.org>
-
---- a/sandbox/linux/seccomp-bpf-helpers/baseline_policy.cc
-+++ b/sandbox/linux/seccomp-bpf-helpers/baseline_policy.cc
-@@ -157,7 +157,11 @@ ResultExpr EvaluateSyscallImpl(int fs_de
-     return Allow();
- #endif
- 
-+#ifdef __NR_clock_gettime64
-+  if (sysno == __NR_clock_gettime || sysno == __NR_clock_gettime64 || sysno == __NR_clock_nanosleep || sysno == __NR_clock_nanosleep_time64) {
-+#else
-   if (sysno == __NR_clock_gettime || sysno == __NR_clock_nanosleep) {
-+#endif
-     return RestrictClockID();
-   }
- 
---- a/sandbox/linux/seccomp-bpf-helpers/syscall_sets.cc
-+++ b/sandbox/linux/seccomp-bpf-helpers/syscall_sets.cc
-@@ -38,6 +38,10 @@ bool SyscallSets::IsAllowedGettime(int s
-     case __NR_clock_getres:     // Allowed only on Android with parameters
-                                 // filtered by RestrictClokID().
-     case __NR_clock_gettime:    // Parameters filtered by RestrictClockID().
-+#ifdef __NR_clock_gettime64
-+    case __NR_clock_gettime64:    // Parameters filtered by RestrictClockID().
-+    case __NR_clock_nanosleep_time64:  // Parameters filtered by RestrictClockID().
-+#endif
-     case __NR_clock_nanosleep:  // Parameters filtered by RestrictClockID().
-     case __NR_clock_settime:    // Privileged.
- #if defined(__i386__) || \
-@@ -159,6 +163,9 @@ bool SyscallSets::IsFileSystem(int sysno
-     case __NR_utime:
- #endif
-     case __NR_utimensat:  // New.
-+#ifdef __NR_utimensat_time64
-+    case __NR_utimensat_time64:
-+#endif
-       return true;
-     default:
-       return false;
diff --git a/debian/patches/fixes/widevine-locations.patch b/debian/patches/fixes/widevine-locations.patch
index 9872742..e8778e1 100644
--- a/debian/patches/fixes/widevine-locations.patch
+++ b/debian/patches/fixes/widevine-locations.patch
@@ -4,9 +4,9 @@ author: Olivier Tilloy <olivier.tilloy@canonical.com>
 
 --- a/chrome/common/chrome_paths.cc
 +++ b/chrome/common/chrome_paths.cc
-@@ -339,6 +339,11 @@ bool PathProvider(int key, base::FilePath* result) {
- #if (defined(OS_LINUX) || defined(OS_CHROMEOS)) && \
-     BUILDFLAG(BUNDLE_WIDEVINE_CDM)
+@@ -313,6 +313,11 @@ bool PathProvider(int key, base::FilePath* result) {
+ 
+ #if BUILDFLAG(ENABLE_WIDEVINE)
      case chrome::DIR_BUNDLED_WIDEVINE_CDM:
 +      base::PathService::Get(base::DIR_HOME, &cur);
 +      cur = cur.Append(FILE_PATH_LITERAL(".local/lib/libwidevinecdm.so"));
@@ -18,12 +18,12 @@ author: Olivier Tilloy <olivier.tilloy@canonical.com>
  #if !BUILDFLAG(IS_CHROMEOS_ASH)
 --- a/third_party/widevine/cdm/BUILD.gn
 +++ b/third_party/widevine/cdm/BUILD.gn
-@@ -15,7 +15,7 @@ buildflag_header("buildflags") {
+@@ -17,7 +17,7 @@ buildflag_header("buildflags") {
  
    flags = [
      "ENABLE_WIDEVINE=$enable_widevine",
 -    "BUNDLE_WIDEVINE_CDM=$bundle_widevine_cdm",
 +    "BUNDLE_WIDEVINE_CDM=true",
      "ENABLE_WIDEVINE_CDM_COMPONENT=$enable_widevine_cdm_component",
+     "ENABLE_MEDIA_FOUNDATION_WIDEVINE_CDM=$enable_media_foundation_widevine_cdm",
    ]
- }
diff --git a/debian/patches/gn/explicit-python2.patch b/debian/patches/gn/explicit-python2.patch
deleted file mode 100644
index ffc12dd..0000000
--- a/debian/patches/gn/explicit-python2.patch
+++ /dev/null
@@ -1,38 +0,0 @@
-Description: use explicit python2 in gn
-Author: Peter Michael Green <plugwash@raspbian.org>
-
----
-The information above should follow the Patch Tagging Guidelines, please
-checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
-are templates for supplementary fields that you might want to add:
-
-Origin: <vendor|upstream|other>, <url of original patch>
-Bug: <url in upstream bugtracker>
-Bug-Debian: https://bugs.debian.org/<bugnumber>
-Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
-Forwarded: <no|not-needed|url proving that it has been forwarded>
-Reviewed-By: <name and email of someone who approved the patch>
-Last-Update: 2020-08-13
-
---- a/tools/gn/src/gn/function_exec_script.cc
-+++ b/tools/gn/src/gn/function_exec_script.cc
-@@ -79,7 +79,7 @@ const char kExecScript_Help[] =
-   rebase_path() function to make file names relative to this path (see "gn help
-   rebase_path").
- 
--  The default script interpreter is Python ("python" on POSIX, "python.exe" or
-+  The default script interpreter is Python ("python2" on POSIX, "python.exe" or
-   "python.bat" on Windows). This can be configured by the script_executable
-   variable, see "gn help dotfile".
- 
---- a/tools/gn/src/gn/setup.cc
-+++ b/tools/gn/src/gn/setup.cc
-@@ -795,7 +795,7 @@ bool Setup::FillPythonPath(const base::CommandLine& cmdline, Err* err) {
-     }
-     build_settings_.set_python_path(python_path);
- #else
--    build_settings_.set_python_path(base::FilePath("python"));
-+    build_settings_.set_python_path(base::FilePath("python2"));
- #endif
-   }
-   return true;
diff --git a/debian/patches/gn/libcxx.patch b/debian/patches/gn/libcxx.patch
deleted file mode 100644
index 2b5f097..0000000
--- a/debian/patches/gn/libcxx.patch
+++ /dev/null
@@ -1,13 +0,0 @@
-description: avoid chromium's embedded C++ library when bootstrapping gn
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/tools/gn/bootstrap/bootstrap.py
-+++ b/tools/gn/bootstrap/bootstrap.py
-@@ -111,6 +111,7 @@ def main(argv):
-   cmd = [
-       sys.executable,
-       os.path.join(GN_ROOT, 'build', 'gen.py'),
-+      '--no-static-libstdc++',
-       '--no-last-commit-position',
-       '--out-path=' + gn_build_dir,
-   ]
diff --git a/debian/patches/gn/parallel.patch b/debian/patches/gn/parallel.patch
deleted file mode 100644
index 77e0110..0000000
--- a/debian/patches/gn/parallel.patch
+++ /dev/null
@@ -1,28 +0,0 @@
-description: respect specified number of parallel jobs while bootstrapping gn
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/tools/gn/bootstrap/bootstrap.py
-+++ b/tools/gn/bootstrap/bootstrap.py
-@@ -47,6 +47,7 @@ def main(argv):
-       help='The directory in which to build gn, '
-       'relative to the src directory. (eg. out/Release)')
-   parser.add_option('-v', '--verbose', help='ignored')
-+  parser.add_option('-j', '--jobs', help='Number of jobs')
-   parser.add_option(
-       '--skip-generate-buildfiles',
-       action='store_true',
-@@ -121,8 +122,12 @@ def main(argv):
- 
-   shutil.copy2(
-       os.path.join(BOOTSTRAP_DIR, 'last_commit_position.h'), gn_build_dir)
--  subprocess.check_call(
--      [ninja_binary, '-C', gn_build_dir, '-w', 'dupbuild=err', 'gn'])
-+  if options.jobs:
-+    subprocess.check_call(
-+        [ninja_binary, '-C', gn_build_dir, '-w', 'dupbuild=err', '-j'+str(options.jobs), 'gn'])
-+  else:
-+    subprocess.check_call(
-+        [ninja_binary, '-C', gn_build_dir, '-w', 'dupbuild=err', 'gn'])
-   shutil.copy2(os.path.join(gn_build_dir, 'gn'), gn_path)
- 
-   if not options.skip_generate_buildfiles:
diff --git a/debian/patches/gooroom/.0009-Put-gooroom-logo-into-the-browser.patch.swp b/debian/patches/gooroom/.0009-Put-gooroom-logo-into-the-browser.patch.swp
deleted file mode 100644
index 55a6d4bfcf54ba7af58be2b523cd8cf5117f42b6..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 24576
zcmeI437j)^dB+Di1zxluS{3W;X*PMYJ2N?FvpIG*d%m0OCVOVVWOGcC$u-$za_;eh
ziq>*iIi#R%Q4uXz0ZSDuptW2DrPiY@Ue$sHk5-@{(qi$MWM;`cZ(v^zKcDtP@_B!`
zzWG1T^MC%&e~x$lvk_`##zR^M83G<}B#4Jk8HwBxa2&IHJwcR;TtWJJzehq43WAW`
z?`OoWWN=9SwLVf1D)3n!<05=GHzdF0!(uea6_sBNQ541M7fPaDX_gTZf}YQbf?iB=
zijl!avwZ{T{GgM8*K`IB5C(>(q!jdYcadkDzWkcbMyK<g40JNk$v`IqoeXp`(8)k2
z1Dy=K)-oXGUq>8<P9H0G{I0W_Z;p{aE3e1NpWSb6zOf<xzt1%vto;2Z;=e)sI>etv
z{2|2u2l2Dyz?As@8}VhtpF#X$#D9(WJ%~SzIPtn>fQtWLA<iQH6ygQMpG5q6#QzKN
zhY^1Q@ps4rs>Js=;wy+hhWLjN|0Ux0BL1I<A0rox;{QKnZkNY(81Y}A_7%i`j`)p;
z{|xb;BK}jEJ7oXe$E(NhQPh3|@kbE967hdW{F{jXMCMBWPdP#D|6$aA8u5n^KM(PL
zL-xOf_>U2P8u1??`^FR1@%<~}S;T*c>|cxc4`i<7{~^S`kL-7yr1t+k#Mcr3F5;IW
z{vhICL;PP5KmPS<|No4*1Mz>7`B<|VQ9=AWG9Q=ut%!eH=1P4$i}<&YfA(Z`eBVUv
z3yA+CYJUUb-$3mjMf@L7`@U1u{vSX*i1^nLzXI{E$y}+AZy<iZ%$5DlX{W0F-zW27
zIlnWA|2^{mUc~Q3{5HhzLHsGi??!y^fI7ar5Kka}C*oHl{&$E!i1=4!J|g%3^wZS-
z|5oNoe!Yl)MdnKVUWoXYW$u*iKY;ihGFSHh2i~Cee>>unh~Fl2Wquq+{BLAFBm4g<
z;$K4cPl0P0(nHz*+={px@mmnzLHvt|e*y6?ApT3l{~B@4@2TUv8SyaUe}(u}h<_gO
zZy|mY;-{Xj_J1Sd6Nuk{_%7m~L;Q<~|0Uv&A^us!2hLE(cRk_}#IHmAqlo_n;@?L6
zGl(B}liL5M5uZf-TEq_{{wc(7LHruTA4mL?h-=SO$M*@uqlkYT@sA;XHR9hv{Lc|T
zO+F7$=GUJgK85(7B7QF7ACtMVeYzF#kD~TZBYqX))LYc~xe{?6@jpTQ6Nq1d`1cV1
z2;y)0eYO9~5%(Z|8RG9p{8GffjQAyp{~GZRBTm0n9p4`#o<jUXh<_6CixK}m;uj%)
z=G)Z%FGSpn_yvf60P#OU{40om5b<Xa|3k!?x2xm(0OD!H-;ek;h@X%64-kK!%$53o
zGdd4{FKWMp_<Lk7pOz69A>QoGk<Z~6L73ocR+`AL&l;A0ax3g#F9YR3CXf+Cfu4Z<
z{%1jP5DEGo9EW@a<O7`wx*Lv*-UD)go`GYyn?V9d3;GEhQ(g^P2b~G}1{~vF0P=!P
z0^JG6<cC2v(9>{!a3d%M>IMA}&R4DiErCu0-3#Ye9|VnqP62%j&i5_=O@gFz&)Xmo
z6_6ctEa+}HU%mun2R#aXy%Z$%*(&w><vhq}feVWqnH6FjNmG>BXe6V_f{^8g!uk9V
zEKY!TF)ki1WyBEhP@XG9xtzGSvLRm(Vx_1Uk`^?Ca^Wl&Vwk~vE<wDymJPoPqra0#
zX>+stMhh9|Gh7kU8O|lR*g?`@BKaJw6%lzMSJdbR4w6<f#$~wXXZ-*{ih_`VMI!|s
z@(WKPNIak8ii3$9PagT$hOaE7uK6Iy!NI|yGFK>q^-zf)DsV-i1Y=bk3P*&J7?ROo
zv{;l(NsW!rSg*$|L&az~!^J{-1_l#_SYB$=eBhSyl9nM=B~+5U$VrJ%T1l_l<QShL
zDN^qsjb<Z7MrtBgY`Sk}1UFaQ?-?;M7VCaSLi<I+P^@u3Bl|{Twa|2{k;W9_OIcM?
z+FEJmgfT*KKw4VuM1^c#$iZAI4)M9T5D6EGLs6l?DW9M^GF$>C?_f0A98ZSS$)gG5
zFJyCkM5qomXLCsY7>Z_iFxhC*$fq=#&$r{FP@2lz4&}It7>+ci_7SnSj3sOqjI7f8
zBQ_q5O^CXfngc04OWs+fgr(q*Xx^?cLS|z#o|Yg?6m5RtAlh0nTH9K&ykJ+_T479$
z3Ex`WQY>c0iZm^oo6+{onNU{92}*ujdt`X2ku<iEs%fT*<mhrsGtIQLM$+1!7qpTM
zM~7lUw3L<Vi;w2y&CK3xWi2$bH|Jl}3ha6I3^Zz`B^H{dEoP=QxzF#Xlmut^T&XJU
zzd{+lD29}ARt=G1FBEBj_O;R6|1>IguR}&!we{K8hEgf5anP()RVn)#Y3^RsfiRYR
zIwL3MhzZ@A*B70{N@mCWqh9xncd9We%9AvS(SAtzeT9n@Mc8JAqzy}GFNsP^cx?%R
zVXS*ISQ?b}Mi_bSx7cVkLYo=YsI)h-m&Fz<Es@X^yEpe<FcM|TwwO?N$6~Omb_z-;
zFKI_<q8U?bwYN3WIPTgjb2*@v{;&qCYRbH@k>(-M^Id8&VrHp*ca&|1xOI3;ta1OG
zv>TmPBMfcYe|Xx4($XE;NEzBCR$a3DR2yq;J2+|^?Yh$vh`Id$t8DC7Yc$I;ZRgHQ
zsx_m5*?)xht2MLPaMZP?J~(U1$<ashVg-9Nk+j<;wbmMKV9agDSe02EMPmZB^oORc
zrv0<hu25QIQSHsuyRGK_G*rs9J9vj^q;0fSIndG*dN}MS7E6&77Zr!evlm8}#-~Y&
z9Woo<O~NvDQr<w2(pepxw1@%;hcKkP)}3&}LFX{JDxK3X3^`lMkPHR8cG@&-Fb*5x
zXp&+nikO76$YC-CA(e88C^@3MbIHaB(*;N4N2HOCatz1DV{yuCrZ|%^7LQVt)f}-J
zjS<?)nPJmoibV~iN63+jT%M#YBt;E3{()<XCdB;V#`S+VEp9xN^MB>ESb3HId*L~=
z{5zZcs_@SB|7M0*IWL{-|II`w_0hTh->eVi`flg?zq&p;*Z<Y^(YgMwu8+?3fA#*Q
zbNydkAD!#}>iXzh|5w*X=lZ|8K04R`)%DT2{;#f&&h>wFef)p9{;!;W9_{siF&}N5
z|DV?!{^ykTccb+K=OX?b;)fBpzC)eAUBovL-$DF3#J3TD2=Oh%&-w$k|2pE!h}RIm
z81X9N_aI(DoOq|&e;IKW@e<+%#6`rfN4zL=N7F6wFyaN&zME9Xw~6@Ki02W%3~>SR
zuOpsA{DdyG|19E8#50Ij5l<t26XGeve}*`Zcu%)Fz9i!3Af7<{a>V0^KY%!g_=!Dg
z|1rc}h({5xAs&&rQXij3JdF5bh;JbKgT3nbLWn024<ddw;_pWMLB!8N{PaGx|FaQ4
zg!nq*??XI*`0a?VA^t1GR}mlTSI4)4coOkt#6OPs65`)Qd=c?8-lg{MM|=)(AL8dD
zz94g@e(peg9<_fKaWCQ~jXFLL;yJ|U5dSpdhY<e};<JdqbwKTZ25~>)(}-Vy_!Q!I
zB0h=uZxEkA+^ki{=SEyWd>rx5AU=lpj}ae5{B1h5e;4A5h&yGj)W?O0J5c-k5Vs?K
z>_N5v5yVFjw;^6ad>HZ1A<iQH2;x@6Nw^FoJ&tL<5EjG(h?^0=1aTAM_akmZ{J6oU
zW5vG#aXaD+;$_5X#BV^HLi|z0hY;@?QpYzabLG0xI^ufN{&K_*BK`p4I+>5i<8dOT
z_OC^J9Pt5U|1jbj#BV|TT{2ht_c-GHh##cY@%1753B-F5zZ&r#nUBf+e-QC*)c);^
z+JBeK?Q;7i#7Wft!-yX*w{yv__aQES-FfL`pp$|BLm80P|9g%l2>v(->Wu{9l4HC5
z4FpjKSwK&oMi4iFav&Y((E|kWDNqFTPSE#HC5S6QE1)w#(!HA(fo4G`g6=$-AkG7Y
zK^veI&@5;M^uX&0;u=sAbP#kF=*g1^;t|kYpdjeyClbW@pff-xgMM)WL7WRZ0D1^E
zJlBJYpmop;NC$cg=mgMH(61*zkAWTr-4D7MbS>x#&}E=1s07*sr9e_HlAz9`lYveK
zUabr;g9Zxz%&1;Z61pAY9MUV0uuL9S9CKt?B)MFS6yl8=KM4H}0gJ9Gd`wIZlQfsL
zNgqWaKTHlX@~6B|<fXemhRFh#35$H0vk@*Asb|dx;ogkKGklB)u^PEWkUi2J0pVQZ
zJwfgex;^U*L*=VBLcjL~ZEbuZIpnIMKAhnb-~^&;1d$CF5_}H+{HPSRz9@zZun5ek
zw1{VfFnliXiKN&J$7DDN>w6o|&xZrIosbc@Az|+(g`>OoL|S@AhF?ZIJ{RMvWZW3G
zMkzYX#f_Hu;2_J<R3sWRa3(fvmG567VthPK>h%d;d^wI@R;M7*Bso$P3veq`slbt9
zEzjAz<wbe&k~}^ePH^3%w0_dwJ>&L=7X0(><?*G^-2BvhccW(P-LN(;k>Nt}^7z&@
zhSCzyZgR*$NS^pO$yM_Odv{3Hpu0(j__#x=j#m~^XmxsKX`&@C>96CeZfJRa`DP=q
zSM2e{eC>4~iu~2=S0mH-P94;-SL{;hSX*a%J(K#iH?TQDB##{25$U!teI6z(jP!`J
zn$3{%w6k~9gH$(6@u(2va|wHQNsQ~Q-A+eigF+vK#h=oX%S9Y9arbWYYPo%^{Y_v;
zPTrT$wmE?#uv9s0GBFV|6*CVG#v(LF(=1~#7>wclCh*ZaQ%~ZfZ$}W*(d>#d27j*^
zR+VPp9=1X_L&8b$sx|DXnoOGd`i8_tJl<tbZf<dDeIxA+^-dA>zOBBAb^UH$w-(K&
z$79-o;6S+)$(wh^U4H+XZ`GICrWYMSzqw2W7R^cRoW-2%vm4zm*6%6VZTc>vUS9D8
zMmE`PN2u6SbWDe;Tgi!FH8WXRT5v@db=xxme^BR$_;d^Q{_&pB=GN2-XVJ_>rpKrm
z`>0o&B<lXOSz}n;whydq=F2oYFq+n`%~v^Hpf7LZcI-@wcl6c*fvm6By5o)JG(GEw
z*7Et3!8mDKNb#l^L=kX~=$%4tKJRsz$2GI%<yw#tW&*33{OV46P8Z4N&3zW@`0B=J
zY)Wvi?uc`JR##F?a5*;b@pkpQh&omE6m09xv@XN#QV}!VKS|X~wrXlTJHSoZY~>Y)
zzAIq$d0b1(Zhx|xU#Oc*6Zu|8HYnEl&4{T;)JG$|^VUi>-MjAb)_QakW81Z{{<Z0a
zWRUY&ybCsVK4)KYY?(&5mAL4&`N!%Z#<Fgpdu`=_UprH96Lr2^GmZ33<tv_r)hyLN
z&AVrGMeBsy7TQ{_^CR9>HoZBwlUkcyaMrX;AYWvhmf60Trb^Ey-P-b^m8b_RV#>Pc
znee5@;{L6ku(je2nS9PEt-o%`^z=HmHhuQRL+gtfp?)YjosUt@%D{B699~<^*gZ4m
zkrkqziMdiey8Kwel+^b*z__g|y3KAZjEqw=e2HHxPi_W{7JH(esXGd_;B=x;tgbTV
zm8t1sx?b0p@<e@PbbQ6PyzE$UIoD!KY&|x%lyg>e6J;T^<F(HF>xGifWEiomElujj
zR(t(Z8LOx-ERU^cQxR%frwJ1Ev4E3bH<t|tW^!fRwrX?lCb#>;V#?yA*EGgrm$S(0
z(t&s?zgE%Lmv^{ynH44u^-}g_FUPPt3QSCdn7Avv#&~^}30Eewxv-Qg`W8pi#aJ>w
zTeo<bF6xkLw=3<BjaTTjb#5oL5v_%4^rEwtnyOLbX`&tvF{Opsd2`ND(T=n3o<y16
z5$O2JqGozA$n`{-rBtea+f<+2sM>Q|3;Mq4r7-K6q^C2%xSQeEXJJHmuCy`XoikbL
zzWmx+c3v1;S#*tUPF0feo#mytd%AyPZc|%gM|!oR?ro2jr&61vsjX#wKi@T7n)DI%
z<doK^v)h@CWvYKiAMEl}CNiadTV%<+71H|$#Hz3n^=cD!i#@qfSe^A|+&*eNQe~%7
z8x>1BtRExlVk+UVZqT)yy{qPkx<s$Rqup3wx|m{MJFe*+pIv5p$0xKw=k5UQHu;vk
zJ<&;@-5W@{f<n~UXIUfaVR1K{&vyCZnXdV$QCO<cdB!)xZ>`04XLBP$oHKd`H09bv
zgs(+Ra0uD&JJi2gXI<i!Bc?9}ceaT7;!4axt-DvMJ%L!+ySeC(u1(Sb&4Q3N<#sr6
zn$cQa!jhFXl{I5k_lR|B)5urWgq3Pn*%%*PSY)9t%Fgx3KxmHM-e%)dI>DOsM?I58
z??OpGsdug?H2rpNA-F@^4y{qvl4deEW;YkoyP?UnVM}9iq{~EoOEWcJH_o!Fx%6sZ
zEmilX?LF>tF3m?BCfZlk2mRHRSOjK6$d<NmY{hHI>G@vkz{0lAy`G!e7=Vsw4z1P}
zrvh$`v5Srb`nBU+&CTf7vdd=uQb4;o$66zE;n78ZzPKG<@72wVnc!AFnT*t`?(*hl
IaBh|OE#guwi2wiq

diff --git a/debian/patches/system/eu-strip.patch b/debian/patches/system/eu-strip.patch
new file mode 100644
index 0000000..6bcab16
--- /dev/null
+++ b/debian/patches/system/eu-strip.patch
@@ -0,0 +1,11 @@
+--- a/build/linux/strip_binary.gni
++++ b/build/linux/strip_binary.gni
+@@ -20,7 +20,7 @@ template("strip_binary") {
+                            "testonly",
+                          ])
+   action("${target_name}") {
+-    eu_strip_binary = "//buildtools/third_party/eu-strip/bin/eu-strip"
++    eu_strip_binary = "/usr/bin/eu-strip"
+     script = "//build/linux/strip_binary.py"
+ 
+     if (defined(invoker.stripped_binary_output)) {
diff --git a/debian/patches/system/ffmpeg.patch b/debian/patches/system/ffmpeg.patch
deleted file mode 100644
index 12dc453..0000000
--- a/debian/patches/system/ffmpeg.patch
+++ /dev/null
@@ -1,79 +0,0 @@
-description: ffmpeg decoders before version 4.0 require explicit initialization
-author: Michael Gilbert <mgilbert@debian.org>
-origin: chromium 66 authors
-
---- a/media/filters/ffmpeg_audio_decoder.cc
-+++ b/media/filters/ffmpeg_audio_decoder.cc
-@@ -95,6 +95,8 @@ void FFmpegAudioDecoder::Initialize(cons
-     return;
-   }
- 
-+  FFmpegGlue::InitializeFFmpeg();
-+
-   if (!ConfigureDecoder(config)) {
-     av_sample_format_ = 0;
-     std::move(bound_init_cb).Run(StatusCode::kDecoderFailedInitialization);
---- a/media/cdm/library_cdm/clear_key_cdm/clear_key_cdm.cc
-+++ b/media/cdm/library_cdm/clear_key_cdm/clear_key_cdm.cc
-@@ -149,6 +149,7 @@ void ConvertCdmKeysInfo(const media::Cdm
- void INITIALIZE_CDM_MODULE() {
-   DVLOG(1) << __func__;
-   media::InitializeMediaLibrary();
-+  av_register_all();
-   g_is_cdm_module_initialized = true;
- }
- 
---- a/media/filters/ffmpeg_glue.cc
-+++ b/media/filters/ffmpeg_glue.cc
-@@ -65,7 +65,13 @@ static void LogContainer(bool is_local_f
-     base::UmaHistogramSparse("Media.DetectedContainer.Local", container);
- }
- 
-+void FFmpegGlue::InitializeFFmpeg() {
-+  av_register_all();
-+}
-+
- FFmpegGlue::FFmpegGlue(FFmpegURLProtocol* protocol) {
-+  InitializeFFmpeg();
-+
-   // Initialize an AVIOContext using our custom read and seek operations.  Don't
-   // keep pointers to the buffer since FFmpeg may reallocate it on the fly.  It
-   // will be cleaned up
---- a/media/filters/ffmpeg_glue.h
-+++ b/media/filters/ffmpeg_glue.h
-@@ -59,6 +59,8 @@ class MEDIA_EXPORT FFmpegURLProtocol {
- 
- class MEDIA_EXPORT FFmpegGlue {
-  public:
-+  static void InitializeFFmpeg();
-+
-   // See file documentation for usage.  |protocol| must outlive FFmpegGlue.
-   explicit FFmpegGlue(FFmpegURLProtocol* protocol);
-   ~FFmpegGlue();
---- a/media/filters/ffmpeg_video_decoder.cc
-+++ b/media/filters/ffmpeg_video_decoder.cc
-@@ -23,6 +23,7 @@
- #include "media/base/video_util.h"
- #include "media/ffmpeg/ffmpeg_common.h"
- #include "media/ffmpeg/ffmpeg_decoding_loop.h"
-+#include "media/filters/ffmpeg_glue.h"
- 
- namespace media {
- 
-@@ -80,6 +81,7 @@ static void ReleaseVideoBufferImpl(void*
- 
- // static
- bool FFmpegVideoDecoder::IsCodecSupported(VideoCodec codec) {
-+  FFmpegGlue::InitializeFFmpeg();
-   return avcodec_find_decoder(VideoCodecToCodecID(codec)) != nullptr;
- }
- 
-@@ -218,6 +220,8 @@ void FFmpegVideoDecoder::Initialize(cons
-     return;
-   }
- 
-+  FFmpegGlue::InitializeFFmpeg();
-+
-   if (!ConfigureDecoder(config, low_delay)) {
-     std::move(bound_init_cb).Run(StatusCode::kDecoderFailedInitialization);
-     return;
diff --git a/debian/patches/system/harfbuzz.patch b/debian/patches/system/harfbuzz.patch
deleted file mode 100644
index 1ae0059..0000000
--- a/debian/patches/system/harfbuzz.patch
+++ /dev/null
@@ -1,90 +0,0 @@
-description: use system harfbuzz
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/skia/src/pdf/SkPDFSubsetFont.cpp
-+++ b/third_party/skia/src/pdf/SkPDFSubsetFont.cpp
-@@ -7,6 +7,9 @@
- #include "SkLoadICU.h"
- #endif
- 
-+#undef SK_PDF_USE_SFNTLY
-+#undef SK_PDF_USE_HARFBUZZ_SUBSET
-+
- #if defined(SK_PDF_USE_HARFBUZZ_SUBSET)
- 
- #include "include/private/SkTemplates.h"
---- a/third_party/harfbuzz-ng/BUILD.gn
-+++ b/third_party/harfbuzz-ng/BUILD.gn
-@@ -19,7 +19,6 @@ if (use_system_harfbuzz) {
-     ]
-     packages = [
-       "harfbuzz",
--      "harfbuzz-subset",
-     ]
-   }
- } else {
---- a/components/paint_preview/common/subset_font.cc
-+++ b/components/paint_preview/common/subset_font.cc
-@@ -6,7 +6,6 @@
- 
- // clang-format off
- #include <hb.h>
--#include <hb-subset.h>
- // clang-format on
- 
- #include <memory>
---- a/components/paint_preview/common/serial_utils.cc
-+++ b/components/paint_preview/common/serial_utils.cc
-@@ -65,12 +65,8 @@ sk_sp<SkData> SerializeTypeface(SkTypefa
-   if (usage_it == context->usage->end())
-     return typeface->serialize(SkTypeface::SerializeBehavior::kDontIncludeData);
- 
--  auto subset_data = SubsetFont(typeface, *usage_it->second);
--  // This will fail if the font cannot be subsetted properly. In such cases
--  // all typeface data should be added for portability.
--  if (!subset_data)
-+  if (true)
-     return typeface->serialize(SkTypeface::SerializeBehavior::kDoIncludeData);
--  return subset_data;
- }
- 
- sk_sp<SkData> SerializeImage(SkImage* image, void* ctx) {
---- a/components/paint_preview/common/BUILD.gn
-+++ b/components/paint_preview/common/BUILD.gn
-@@ -26,8 +26,6 @@ source_set("common") {
-     "serial_utils.h",
-     "serialized_recording.cc",
-     "serialized_recording.h",
--    "subset_font.cc",
--    "subset_font.h",
-     "version.cc",
-     "version.h",
-   ]
---- a/third_party/skia/BUILD.gn
-+++ b/third_party/skia/BUILD.gn
-@@ -989,7 +989,6 @@ optional("pdf") {
-   sources_when_disabled = [ "src/pdf/SkDocument_PDF_None.cpp" ]
-   if (skia_use_icu && skia_use_harfbuzz && skia_pdf_subset_harfbuzz) {
-     deps += [ "//third_party/harfbuzz" ]
--    defines = [ "SK_PDF_USE_HARFBUZZ_SUBSET" ]
-   } else if (skia_use_icu && skia_use_sfntly) {
-     deps += [ "//third_party/sfntly" ]
-     defines = [ "SK_PDF_USE_SFNTLY" ]
---- a/third_party/harfbuzz-ng/utils/hb_scoped.h
-+++ b/third_party/harfbuzz-ng/utils/hb_scoped.h
-@@ -7,7 +7,6 @@
- 
- // clang-format off
- #include <hb.h>
--#include <hb-subset.h>
- // clang-format on
- 
- #include <memory>
-@@ -53,7 +52,6 @@ using HbScoped = std::unique_ptr<T, HbSp
-   F(hb_face_t, hb_face_destroy)            \
-   F(hb_font_t, hb_font_destroy)            \
-   F(hb_set_t, hb_set_destroy)              \
--  F(hb_subset_input_t, hb_subset_input_destroy)
- 
- HB_TYPE_DESTRUCTOR_PAIRS_REPEAT(SPECIALIZED_DELETER_FOR_HARFBUZZ_TYPE)
- 
diff --git a/debian/patches/system/icu-shim.patch b/debian/patches/system/icu-shim.patch
new file mode 100644
index 0000000..06586f4
--- /dev/null
+++ b/debian/patches/system/icu-shim.patch
@@ -0,0 +1,19 @@
+description: allow building against system icu even when is_offical_build=true
+author: Andres Salomon <dilinger@debian.org>
+
+I noticed this when switching to an official build and trying to build against
+the system's libicu, but it may be necessary for other system libs as well.
+If we switch to using the bundled icu, we can see if it's possible to get rid
+of it.
+
+--- a/tools/generate_shim_headers/generate_shim_headers.py
++++ b/tools/generate_shim_headers/generate_shim_headers.py
+@@ -18,7 +18,7 @@ import sys
+ 
+ 
+ SHIM_TEMPLATE = """
+-#if defined(OFFICIAL_BUILD)
++#if defined(DONT_TELL_ME_WHAT_TO_DO_GOOGLE)
+ #error shim headers must not be used in official builds!
+ #endif
+ """
diff --git a/debian/patches/system/icu.patch b/debian/patches/system/icu.patch
index 65d2101..65a2ea3 100644
--- a/debian/patches/system/icu.patch
+++ b/debian/patches/system/icu.patch
@@ -3,7 +3,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/net/BUILD.gn
 +++ b/net/BUILD.gn
-@@ -10,7 +10,6 @@ import("//build/config/features.gni")
+@@ -11,7 +11,6 @@ import("//build/config/features.gni")
  import("//net/features.gni")
  import("//testing/libfuzzer/fuzzer_test.gni")
  import("//testing/test.gni")
@@ -11,31 +11,6 @@ author: Michael Gilbert <mgilbert@debian.org>
  import("//third_party/protobuf/proto_library.gni")
  import("//tools/grit/grit_rule.gni")
  import("//url/features.gni")
---- a/third_party/blink/renderer/platform/wtf/text/text_codec_utf8.cc
-+++ b/third_party/blink/renderer/platform/wtf/text/text_codec_utf8.cc
-@@ -502,7 +502,7 @@ TextCodec::EncodeIntoResult TextCodecUTF
- 
-   wtf_size_t i = 0;
-   wtf_size_t previous_code_unit_index = 0;
--  bool is_error = false;
-+  UBool is_error = false;
-   while (i < length && encode_into_result.bytes_written < capacity &&
-          !is_error) {
-     UChar32 character;
---- a/v8/src/regexp/regexp-macro-assembler.cc
-+++ b/v8/src/regexp/regexp-macro-assembler.cc
-@@ -68,9 +68,9 @@ int RegExpMacroAssembler::CaseInsensitiv
- 
- #ifdef V8_INTL_SUPPORT
-   int32_t length = static_cast<int32_t>(byte_length >> 1);
--  icu::UnicodeString uni_str_1(reinterpret_cast<const char16_t*>(byte_offset1),
-+  icu::UnicodeString uni_str_1(reinterpret_cast<const UChar*>(byte_offset1),
-                                length);
--  return uni_str_1.caseCompare(reinterpret_cast<const char16_t*>(byte_offset2),
-+  return uni_str_1.caseCompare(reinterpret_cast<const UChar*>(byte_offset2),
-                                length, U_FOLD_CASE_DEFAULT) == 0;
- #else
-   uc16* substring1 = reinterpret_cast<uc16*>(byte_offset1);
 --- a/base/BUILD.gn
 +++ b/base/BUILD.gn
 @@ -36,7 +36,6 @@ import("//build/timestamp.gni")
@@ -46,12 +21,12 @@ author: Michael Gilbert <mgilbert@debian.org>
  
  if (is_mac) {
    # Used to generate fuzzer corpus :base_mach_port_rendezvous_convert_corpus.
-@@ -3257,7 +3256,7 @@ if (build_base_unittests) {
-       ]
-     }
+@@ -3397,7 +3396,7 @@ test("base_unittests") {
+     ]
+   }
  
--    if (icu_use_data_file) {
-+    if (false) {
-       if (is_android) {
-         deps += [ "//third_party/icu:icu_extra_assets" ]
-       } else {
+-  if (icu_use_data_file) {
++  if (false) {
+     if (is_android) {
+       deps += [ "//third_party/icu:icu_extra_assets" ]
+     } else {
diff --git a/debian/patches/system/jsoncpp.patch b/debian/patches/system/jsoncpp.patch
index 73b97bf..8c592d9 100644
--- a/debian/patches/system/jsoncpp.patch
+++ b/debian/patches/system/jsoncpp.patch
@@ -83,9 +83,9 @@ author: Michael Gilbert <mgilbert@debian.org>
  namespace mirroring {
 --- a/third_party/openscreen/src/cast/streaming/answer_messages.h
 +++ b/third_party/openscreen/src/cast/streaming/answer_messages.h
-@@ -16,7 +16,7 @@
- 
+@@ -17,7 +17,7 @@
  #include "absl/types/optional.h"
+ #include "cast/streaming/resolution.h"
  #include "cast/streaming/ssrc.h"
 -#include "json/value.h"
 +#include <json/value.h>
diff --git a/debian/patches/system/node.patch b/debian/patches/system/node.patch
deleted file mode 100644
index 8e67685..0000000
--- a/debian/patches/system/node.patch
+++ /dev/null
@@ -1,59 +0,0 @@
-description: call system nodejs
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/devtools-frontend/src/scripts/devtools_paths.py
-+++ b/third_party/devtools-frontend/src/scripts/devtools_paths.py
-@@ -37,13 +37,7 @@ def third_party_path():
- 
- # This points to the node binary downloaded as part of the checkout.
- def node_path():
--    try:
--        old_sys_path = sys.path[:]
--        sys.path.append(path.join(third_party_path(), 'node'))
--        import node
--    finally:
--        sys.path = old_sys_path
--    return node.GetBinaryPath()
-+    return '/usr/bin/nodejs'
- 
- 
- def devtools_root_path():
---- /dev/null
-+++ b/third_party/node/node.py
-@@ -0,0 +1,36 @@
-+#!/usr/bin/python3
-+# Copyright 2017 The Chromium Authors. All rights reserved.
-+# Use of this source code is governed by a BSD-style license that can be
-+# found in the LICENSE file.
-+
-+from os import path as os_path
-+import platform
-+import subprocess
-+import sys
-+import os
-+
-+
-+def RunNode(cmd_parts, stdout=None):
-+  cmd = ['/usr/bin/nodejs'] + cmd_parts
-+  process = subprocess.Popen(
-+      cmd, cwd=os.getcwd(), stdout=subprocess.PIPE, stderr=subprocess.PIPE)
-+  stdout, stderr = process.communicate()
-+
-+  # TODO(crbug.com/1098074): Properly handle the returncode of
-+  # process defined above. Right now, if the process would exit
-+  # with a return code of non-zero, but the stderr is empty,
-+  # we would still pass.
-+  #
-+  # However, we can't make this change here yet, as there are
-+  # various presubmit scripts that rely on the runtime error
-+  # and are unable to handle a `os.exit` call in this branch.
-+  # These presubmit scripts need to spawn `subprocesses`
-+  # themselves to handle the exitcode, before we can make the
-+  # change here.
-+  if stderr:
-+    raise RuntimeError('%s failed: %s' % (cmd, stderr))
-+
-+  return stdout
-+
-+if __name__ == '__main__':
-+  RunNode(sys.argv[1:])
diff --git a/debian/patches/system/nspr.patch b/debian/patches/system/nspr.patch
deleted file mode 100644
index 5539e81..0000000
--- a/debian/patches/system/nspr.patch
+++ /dev/null
@@ -1,49 +0,0 @@
-description: use system nspr library
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/base/time/pr_time_unittest.cc
-+++ b/base/time/pr_time_unittest.cc
-@@ -7,7 +7,7 @@
- 
- #include "base/compiler_specific.h"
- #include "base/stl_util.h"
--#include "base/third_party/nspr/prtime.h"
-+#include <nspr/prtime.h>
- #include "base/time/time.h"
- #include "build/build_config.h"
- #include "testing/gtest/include/gtest/gtest.h"
---- a/base/time/time.cc
-+++ b/base/time/time.cc
-@@ -14,7 +14,7 @@
- #include "base/optional.h"
- #include "base/strings/string_util.h"
- #include "base/strings/stringprintf.h"
--#include "base/third_party/nspr/prtime.h"
-+#include <nspr/prtime.h>
- #include "base/time/time_override.h"
- #include "build/build_config.h"
- 
---- a/base/BUILD.gn
-+++ b/base/BUILD.gn
-@@ -113,6 +113,12 @@ if (is_android) {
-   }
- }
- 
-+if (is_linux) {
-+  ldflags = [
-+    "-lnspr4",
-+  ]
-+}
-+
- # Base and everything it depends on should be a static library rather than
- # a source set. Base is more of a "library" in the classic sense in that many
- # small parts of it are used in many different contexts. This combined with a
-@@ -712,8 +718,6 @@ component("base") {
-     "third_party/cityhash_v103/src/city_v103.cc",
-     "third_party/cityhash_v103/src/city_v103.h",
-     "third_party/icu/icu_utf.h",
--    "third_party/nspr/prtime.cc",
--    "third_party/nspr/prtime.h",
-     "third_party/superfasthash/superfasthash.c",
-     "thread_annotations.h",
-     "threading/hang_watcher.cc",
diff --git a/debian/patches/system/openjpeg.patch b/debian/patches/system/openjpeg.patch
index b44ecdb..f68e437 100644
--- a/debian/patches/system/openjpeg.patch
+++ b/debian/patches/system/openjpeg.patch
@@ -3,9 +3,9 @@ author: Michael Gilbert <mgilbert@debian.org>
 
 --- a/third_party/pdfium/BUILD.gn
 +++ b/third_party/pdfium/BUILD.gn
-@@ -17,7 +17,7 @@ group("freetype_common") {
- config("pdfium_common_config") {
+@@ -19,7 +19,7 @@ config("pdfium_common_config") {
    cflags = []
+   cflags_cc = []
    ldflags = []
 -  include_dirs = [ "." ]
 +  include_dirs = [ ".", "/usr/include/openjpeg-2.3", "/usr/include/openjpeg-2.4" ]
@@ -16,7 +16,7 @@ author: Michael Gilbert <mgilbert@debian.org>
 +++ b/third_party/pdfium/core/fpdfapi/render/BUILD.gn
 @@ -46,6 +46,7 @@ source_set("render") {
    ]
-   configs += [ "../../../:pdfium_core_config" ]
+   configs += [ "../../../:pdfium_strict_config" ]
    deps = [
 +    "../../../third_party:libopenjpeg2",
      "../../../constants",
diff --git a/debian/patches/system/opus.patch b/debian/patches/system/opus.patch
index 30bf70a..a764db5 100644
--- a/debian/patches/system/opus.patch
+++ b/debian/patches/system/opus.patch
@@ -1,9 +1,9 @@
 --- a/media/audio/audio_opus_encoder.h
 +++ b/media/audio/audio_opus_encoder.h
 @@ -13,7 +13,7 @@
- #include "media/base/audio_converter.h"
  #include "media/base/audio_encoder.h"
  #include "media/base/audio_push_fifo.h"
+ #include "media/base/audio_timestamp_helper.h"
 -#include "third_party/opus/src/include/opus.h"
 +#include <opus/opus.h>
  
diff --git a/debian/patches/system/png.patch b/debian/patches/system/png.patch
deleted file mode 100644
index 4c82729..0000000
--- a/debian/patches/system/png.patch
+++ /dev/null
@@ -1,11 +0,0 @@
---- a/third_party/pdfium/pdfium.gni
-+++ b/third_party/pdfium/pdfium.gni
-@@ -66,7 +66,7 @@ declare_args() {
-   use_system_libopenjpeg2 = false
- 
-   # Don't build against bundled libpng.
--  use_system_libpng = false
-+  use_system_libpng = true
- }
- 
- if (pdf_use_skia && pdf_use_skia_paths) {
diff --git a/debian/patches/system/rapidjson.patch b/debian/patches/system/rapidjson.patch
new file mode 100644
index 0000000..77663e3
--- /dev/null
+++ b/debian/patches/system/rapidjson.patch
@@ -0,0 +1,22 @@
+description: build against debian's rapidjson-dev package
+author: Andres Salomon <dilinger@debian.org>
+
+Due to some questionable licensing (the JSON "do not use this for evil" license),
+debian deletes all of third_party/angle/third_party/rapidjson even though a small
+portion of it falls under that license. The library is tiny and doesn't change
+much, so this lets chromium build against the system's rapidjson-dev header files.
+
+--- /dev/null
++++ b/third_party/angle/third_party/rapidjson/BUILD.gn
+@@ -0,0 +1,11 @@
++config("rapidjson_config") {
++  include_dirs = [ "/usr/include/rapidjson" ]
++
++  # Enable std::string functionality.
++  defines = [ "RAPIDJSON_HAS_STDSTRING" ]
++}
++
++source_set("rapidjson") {
++  sources = [ "/usr/include/rapidjson/*.h" ]
++  public_configs = [ ":rapidjson_config" ]
++}
diff --git a/debian/patches/system/use-desktop-gl-as-default.patch b/debian/patches/system/use-desktop-gl-as-default.patch
deleted file mode 100644
index 40fb545..0000000
--- a/debian/patches/system/use-desktop-gl-as-default.patch
+++ /dev/null
@@ -1,24 +0,0 @@
-Description: Use desktop gl implementation as default
-Author: Jan Luca Naumann <j.naumann@fu-berlin.de>
-Bug-Debian: https://bugs.debian.org/979135
-Forwarded: not-needed
-Last-Update: 2021-01-07
---- a/ui/gl/init/gl_factory.cc
-+++ b/ui/gl/init/gl_factory.cc
-@@ -66,6 +66,16 @@ GLImplementation GetRequestedGLImplement
-     }
-   }
- 
-+  // Use desktop implementation as default if allowed
-+  {
-+    auto iter = std::find(allowed_impls.begin(), allowed_impls.end(),
-+                          kGLImplementationDesktopGL);
-+    if (iter != allowed_impls.end()) {
-+      allowed_impls.erase(iter);
-+      allowed_impls.insert(allowed_impls.begin(), kGLImplementationDesktopGL);
-+    }
-+  }
-+
-   if (allowed_impls.empty()) {
-     LOG(ERROR) << "List of allowed GL implementations is empty.";
-     return kGLImplementationNone;
diff --git a/debian/patches/system/vpx.patch b/debian/patches/system/vpx.patch
deleted file mode 100644
index 1c4893c..0000000
--- a/debian/patches/system/vpx.patch
+++ /dev/null
@@ -1,696 +0,0 @@
-description: system vpx
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/media/base/supported_types.cc
-+++ b/media/base/supported_types.cc
-@@ -19,8 +19,8 @@
- #if BUILDFLAG(ENABLE_LIBVPX)
- // TODO(dalecurtis): This technically should not be allowed in media/base. See
- // TODO below about moving outside of base.
--#include "third_party/libvpx/source/libvpx/vpx/vp8dx.h"
--#include "third_party/libvpx/source/libvpx/vpx/vpx_codec.h"
-+#include <vpx/vp8dx.h>
-+#include <vpx/vpx_codec.h>
- #endif
- 
- #if defined(OS_ANDROID)
---- a/media/gpu/vaapi/BUILD.gn
-+++ b/media/gpu/vaapi/BUILD.gn
-@@ -68,8 +68,6 @@ source_set("vaapi") {
-     "vp8_vaapi_video_decoder_delegate.h",
-     "vp9_encoder.cc",
-     "vp9_encoder.h",
--    "vp9_rate_control.cc",
--    "vp9_rate_control.h",
-     "vp9_temporal_layers.cc",
-     "vp9_temporal_layers.h",
-     "vp9_vaapi_video_decoder_delegate.cc",
-@@ -84,7 +82,6 @@ source_set("vaapi") {
- 
-   configs += [
-     "//build/config/linux/libva",
--    "//third_party/libvpx:libvpx_config",
-   ]
- 
-   deps = [
-@@ -99,7 +96,6 @@ source_set("vaapi") {
-     "//media/gpu/chromeos:common",
-     "//media/parsers",
-     "//mojo/public/cpp/bindings",
--    "//third_party/libvpx:libvp9rc",
-     "//third_party/libyuv",
-     "//ui/gfx",
-     "//ui/gfx/geometry",
-@@ -227,7 +223,6 @@ source_set("unit_test") {
-     "vp9_encoder_unittest.cc",
-     "vp9_temporal_layers_unittest.cc",
-   ]
--  configs += [ "//third_party/libvpx:libvpx_config" ]
-   deps = [
-     ":common",
-     ":vaapi",
-@@ -239,7 +234,6 @@ source_set("unit_test") {
-     "//mojo/core/embedder",
-     "//testing/gmock",
-     "//testing/gtest",
--    "//third_party/libvpx:libvp9rc",
-     "//ui/gfx:test_support",
-     "//ui/gfx/geometry",
-   ]
---- a/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.h
-+++ b/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.h
-@@ -15,10 +15,11 @@
- 
- #include <memory>
- 
--#include "vpx/vp8cx.h"
--#include "vpx/vpx_codec.h"
--#include "vpx/vpx_encoder.h"
--#include "vpx/vpx_image.h"
-+#include <vpx/vp8cx.h>
-+#include <vpx/vpx_codec.h>
-+#include <vpx/vpx_encoder.h>
-+#include <vpx/vpx_image.h>
-+#include "vpx_ext_ratectrl.h"
- 
- namespace webrtc {
- 
---- a/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.cc
-+++ b/third_party/webrtc/modules/video_coding/codecs/interface/libvpx_interface.cc
-@@ -170,11 +170,6 @@ class LibvpxFacade : public LibvpxInterface {
-         return vpx_codec_control(ctx, VP9E_SET_COLOR_RANGE, param);
-       case VP9E_SET_DELTA_Q_UV:
-         return vpx_codec_control(ctx, VP9E_SET_DELTA_Q_UV, param);
--      case VP9E_SET_DISABLE_OVERSHOOT_MAXQ_CBR:
--        return vpx_codec_control(ctx, VP9E_SET_DISABLE_OVERSHOOT_MAXQ_CBR,
--                                 param);
--      case VP9E_SET_DISABLE_LOOPFILTER:
--        return vpx_codec_control(ctx, VP9E_SET_DISABLE_LOOPFILTER, param);
- 
-       default:
-         if (param >= 0) {
-@@ -328,8 +323,6 @@ class LibvpxFacade : public LibvpxInterface {
-                                 vp8e_enc_control_id ctrl_id,
-                                 vpx_rc_funcs_t* param) const override {
-     switch (ctrl_id) {
--      case VP9E_SET_EXTERNAL_RATE_CONTROL:
--        return vpx_codec_control_(ctx, VP9E_SET_EXTERNAL_RATE_CONTROL, param);
-       default:
-         RTC_NOTREACHED() << "Unsupported libvpx ctrl_id: " << ctrl_id;
-     }
---- /dev/null
-+++ b/third_party/webrtc/modules/video_coding/codecs/interface/vpx_ext_ratectrl.h
-@@ -0,0 +1,360 @@
-+/*
-+ *  Copyright (c) 2020 The WebM project authors. All Rights Reserved.
-+ *
-+ *  Use of this source code is governed by a BSD-style license
-+ *  that can be found in the LICENSE file in the root of the source
-+ *  tree. An additional intellectual property rights grant can be found
-+ *  in the file PATENTS.  All contributing project authors may
-+ *  be found in the AUTHORS file in the root of the source tree.
-+ */
-+
-+#ifndef VPX_VPX_VPX_EXT_RATECTRL_H_
-+#define VPX_VPX_VPX_EXT_RATECTRL_H_
-+
-+#ifdef __cplusplus
-+extern "C" {
-+#endif
-+
-+#include <vpx/vpx_integer.h>
-+
-+/*!\brief Current ABI version number
-+ *
-+ * \internal
-+ * If this file is altered in any way that changes the ABI, this value
-+ * must be bumped. Examples include, but are not limited to, changing
-+ * types, removing or reassigning enums, adding/removing/rearranging
-+ * fields to structures.
-+ */
-+#define VPX_EXT_RATECTRL_ABI_VERSION (1)
-+
-+/*!\brief Abstract rate control model handler
-+ *
-+ * The encoder will receive the model handler from create_model() defined in
-+ * vpx_rc_funcs_t.
-+ */
-+typedef void *vpx_rc_model_t;
-+
-+/*!\brief Encode frame decision made by the external rate control model
-+ *
-+ * The encoder will receive the decision from the external rate control model
-+ * through get_encodeframe_decision() defined in vpx_rc_funcs_t.
-+ *
-+ * If max_frame_size = 0, the encoding ignores max frame size limit.
-+ * If max_frame_size = -1, the encoding uses VP9's max frame size as the limit.
-+ * If the encoded frame size is larger than max_frame_size, the frame is
-+ * recoded to meet the size limit, following VP9's recoding principles.
-+ */
-+typedef struct vpx_rc_encodeframe_decision {
-+  int q_index;        /**< Quantizer step index [0..255]*/
-+  int max_frame_size; /**< Maximal frame size allowed to encode a frame*/
-+} vpx_rc_encodeframe_decision_t;
-+
-+/*!\brief Information for the frame to be encoded.
-+ *
-+ * The encoder will send the information to external rate control model through
-+ * get_encodeframe_decision() defined in vpx_rc_funcs_t.
-+ *
-+ */
-+typedef struct vpx_rc_encodeframe_info {
-+  /*!
-+   * 0: Key frame
-+   * 1: Inter frame
-+   * 2: Alternate reference frame
-+   * 3: Overlay frame
-+   * 4: Golden frame
-+   */
-+  int frame_type;
-+  int show_index;   /**< display index, starts from zero*/
-+  int coding_index; /**< coding index, starts from zero*/
-+  /*!
-+   * index in group of picture, starts from zero.
-+   */
-+  int gop_index;
-+  int ref_frame_coding_indexes[3]; /**< three reference frames' coding indices*/
-+  /*!
-+   * The validity of the three reference frames.
-+   * 0: Invalid
-+   * 1: Valid
-+   */
-+  int ref_frame_valid_list[3];
-+} vpx_rc_encodeframe_info_t;
-+
-+/*!\brief Frame coding result
-+ *
-+ * The encoder will send the result to the external rate control model through
-+ * update_encodeframe_result() defined in vpx_rc_funcs_t.
-+ */
-+typedef struct vpx_rc_encodeframe_result {
-+  int64_t sse;         /**< sum of squared error of the reconstructed frame */
-+  int64_t bit_count;   /**< number of bits spent on coding the frame*/
-+  int64_t pixel_count; /**< number of pixels in YUV planes of the frame*/
-+  int actual_encoding_qindex; /**< the actual qindex used to encode the frame*/
-+} vpx_rc_encodeframe_result_t;
-+
-+/*!\brief Status returned by rate control callback functions.
-+ */
-+typedef enum vpx_rc_status {
-+  VPX_RC_OK = 0,
-+  VPX_RC_ERROR = 1,
-+} vpx_rc_status_t;
-+
-+/*!\brief First pass frame stats
-+ * This is a mirror of vp9's FIRSTPASS_STATS except that spatial_layer_id is
-+ * omitted
-+ */
-+typedef struct vpx_rc_frame_stats {
-+  /*!
-+   * Frame number in display order, if stats are for a single frame.
-+   * No real meaning for a collection of frames.
-+   */
-+  double frame;
-+  /*!
-+   * Weight assigned to this frame (or total weight for the collection of
-+   * frames) currently based on intra factor and brightness factor. This is used
-+   * to distribute bits between easier and harder frames.
-+   */
-+  double weight;
-+  /*!
-+   * Intra prediction error.
-+   */
-+  double intra_error;
-+  /*!
-+   * Best of intra pred error and inter pred error using last frame as ref.
-+   */
-+  double coded_error;
-+  /*!
-+   * Best of intra pred error and inter pred error using golden frame as ref.
-+   */
-+  double sr_coded_error;
-+  /*!
-+   * Estimate the noise energy of the current frame.
-+   */
-+  double frame_noise_energy;
-+  /*!
-+   * Percentage of blocks with inter pred error < intra pred error.
-+   */
-+  double pcnt_inter;
-+  /*!
-+   * Percentage of blocks using (inter prediction and) non-zero motion vectors.
-+   */
-+  double pcnt_motion;
-+  /*!
-+   * Percentage of blocks where golden frame was better than last or intra:
-+   * inter pred error using golden frame < inter pred error using last frame and
-+   * inter pred error using golden frame < intra pred error
-+   */
-+  double pcnt_second_ref;
-+  /*!
-+   * Percentage of blocks where intra and inter prediction errors were very
-+   * close.
-+   */
-+  double pcnt_neutral;
-+  /*!
-+   * Percentage of blocks that have intra error < inter error and inter error <
-+   * LOW_I_THRESH
-+   * - bit_depth 8: LOW_I_THRESH = 24000
-+   * - bit_depth 10: LOW_I_THRESH = 24000 << 4
-+   * - bit_depth 12: LOW_I_THRESH = 24000 << 8
-+   */
-+  double pcnt_intra_low;
-+  /*!
-+   * Percentage of blocks that have intra error < inter error and intra error <
-+   * LOW_I_THRESH but inter error >= LOW_I_THRESH LOW_I_THRESH
-+   * - bit_depth 8: LOW_I_THRESH = 24000
-+   * - bit_depth 10: LOW_I_THRESH = 24000 << 4
-+   * - bit_depth 12: LOW_I_THRESH = 24000 << 8
-+   */
-+  double pcnt_intra_high;
-+  /*!
-+   * Percentage of blocks that have almost no intra error residual
-+   * (i.e. are in effect completely flat and untextured in the intra
-+   * domain). In natural videos this is uncommon, but it is much more
-+   * common in animations, graphics and screen content, so may be used
-+   * as a signal to detect these types of content.
-+   */
-+  double intra_skip_pct;
-+  /*!
-+   * Percentage of blocks that have intra error < SMOOTH_INTRA_THRESH
-+   * - bit_depth 8:  SMOOTH_INTRA_THRESH = 4000
-+   * - bit_depth 10: SMOOTH_INTRA_THRESH = 4000 << 4
-+   * - bit_depth 12: SMOOTH_INTRA_THRESH = 4000 << 8
-+   */
-+  double intra_smooth_pct;
-+  /*!
-+   * Image mask rows top and bottom.
-+   */
-+  double inactive_zone_rows;
-+  /*!
-+   * Image mask columns at left and right edges.
-+   */
-+  double inactive_zone_cols;
-+  /*!
-+   * Mean of row motion vectors.
-+   */
-+  double MVr;
-+  /*!
-+   * Mean of absolute value of row motion vectors.
-+   */
-+  double mvr_abs;
-+  /*!
-+   * Mean of column motion vectors.
-+   */
-+  double MVc;
-+  /*!
-+   * Mean of absolute value of column motion vectors.
-+   */
-+  double mvc_abs;
-+  /*!
-+   * Variance of row motion vectors.
-+   */
-+  double MVrv;
-+  /*!
-+   * Variance of column motion vectors.
-+   */
-+  double MVcv;
-+  /*!
-+   * Value in range [-1,1] indicating fraction of row and column motion vectors
-+   * that point inwards (negative MV value) or outwards (positive MV value).
-+   * For example, value of 1 indicates, all row/column MVs are inwards.
-+   */
-+  double mv_in_out_count;
-+  /*!
-+   * Duration of the frame / collection of frames.
-+   */
-+  double duration;
-+  /*!
-+   * 1.0 if stats are for a single frame, or
-+   * number of frames whose stats are accumulated.
-+   */
-+  double count;
-+} vpx_rc_frame_stats_t;
-+
-+/*!\brief Collection of first pass frame stats
-+ */
-+typedef struct vpx_rc_firstpass_stats {
-+  /*!
-+   * Pointer to first pass frame stats.
-+   * The pointed array of vpx_rc_frame_stats_t should have length equal to
-+   * number of show frames in the video.
-+   */
-+  vpx_rc_frame_stats_t *frame_stats;
-+  /*!
-+   * Number of show frames in the video.
-+   */
-+  int num_frames;
-+} vpx_rc_firstpass_stats_t;
-+
-+/*!\brief Encode config sent to external rate control model
-+ */
-+typedef struct vpx_rc_config {
-+  int frame_width;      /**< frame width */
-+  int frame_height;     /**< frame height */
-+  int show_frame_count; /**< number of visible frames in the video */
-+  /*!
-+   * Target bitrate in kilobytes per second
-+   */
-+  int target_bitrate_kbps;
-+  int frame_rate_num; /**< numerator of frame rate */
-+  int frame_rate_den; /**< denominator of frame rate */
-+} vpx_rc_config_t;
-+
-+/*!\brief Create an external rate control model callback prototype
-+ *
-+ * This callback is invoked by the encoder to create an external rate control
-+ * model.
-+ *
-+ * \param[in]  priv               Callback's private data
-+ * \param[in]  ratectrl_config    Pointer to vpx_rc_config_t
-+ * \param[out] rate_ctrl_model_pt Pointer to vpx_rc_model_t
-+ */
-+typedef vpx_rc_status_t (*vpx_rc_create_model_cb_fn_t)(
-+    void *priv, const vpx_rc_config_t *ratectrl_config,
-+    vpx_rc_model_t *rate_ctrl_model_pt);
-+
-+/*!\brief Send first pass stats to the external rate control model callback
-+ * prototype
-+ *
-+ * This callback is invoked by the encoder to send first pass stats to the
-+ * external rate control model.
-+ *
-+ * \param[in]  rate_ctrl_model    rate control model
-+ * \param[in]  first_pass_stats   first pass stats
-+ */
-+typedef vpx_rc_status_t (*vpx_rc_send_firstpass_stats_cb_fn_t)(
-+    vpx_rc_model_t rate_ctrl_model,
-+    const vpx_rc_firstpass_stats_t *first_pass_stats);
-+
-+/*!\brief Receive encode frame decision callback prototype
-+ *
-+ * This callback is invoked by the encoder to receive encode frame decision from
-+ * the external rate control model.
-+ *
-+ * \param[in]  rate_ctrl_model    rate control model
-+ * \param[in]  encode_frame_info  information of the coding frame
-+ * \param[out] frame_decision     encode decision of the coding frame
-+ */
-+typedef vpx_rc_status_t (*vpx_rc_get_encodeframe_decision_cb_fn_t)(
-+    vpx_rc_model_t rate_ctrl_model,
-+    const vpx_rc_encodeframe_info_t *encode_frame_info,
-+    vpx_rc_encodeframe_decision_t *frame_decision);
-+
-+/*!\brief Update encode frame result callback prototype
-+ *
-+ * This callback is invoked by the encoder to update encode frame result to the
-+ * external rate control model.
-+ *
-+ * \param[in]  rate_ctrl_model     rate control model
-+ * \param[out] encode_frame_result encode result of the coding frame
-+ */
-+typedef vpx_rc_status_t (*vpx_rc_update_encodeframe_result_cb_fn_t)(
-+    vpx_rc_model_t rate_ctrl_model,
-+    const vpx_rc_encodeframe_result_t *encode_frame_result);
-+
-+/*!\brief Delete the external rate control model callback prototype
-+ *
-+ * This callback is invoked by the encoder to delete the external rate control
-+ * model.
-+ *
-+ * \param[in]  rate_ctrl_model     rate control model
-+ */
-+typedef vpx_rc_status_t (*vpx_rc_delete_model_cb_fn_t)(
-+    vpx_rc_model_t rate_ctrl_model);
-+
-+/*!\brief Callback function set for external rate control.
-+ *
-+ * The user can enable external rate control by registering
-+ * a set of callback functions with the codec control flag
-+ * VP9E_SET_EXTERNAL_RATE_CONTROL.
-+ */
-+typedef struct vpx_rc_funcs {
-+  /*!
-+   * Create an external rate control model.
-+   */
-+  vpx_rc_create_model_cb_fn_t create_model;
-+  /*!
-+   * Send first pass stats to the external rate control model.
-+   */
-+  vpx_rc_send_firstpass_stats_cb_fn_t send_firstpass_stats;
-+  /*!
-+   * Get encodeframe decision from the external rate control model.
-+   */
-+  vpx_rc_get_encodeframe_decision_cb_fn_t get_encodeframe_decision;
-+  /*!
-+   * Update encodeframe result to the external rate control model.
-+   */
-+  vpx_rc_update_encodeframe_result_cb_fn_t update_encodeframe_result;
-+  /*!
-+   * Delete the external rate control model.
-+   */
-+  vpx_rc_delete_model_cb_fn_t delete_model;
-+  /*!
-+   * Private data for the external rate control model.
-+   */
-+  void *priv;
-+} vpx_rc_funcs_t;
-+
-+#ifdef __cplusplus
-+}  // extern "C"
-+#endif
-+
-+#endif  // VPX_VPX_VPX_EXT_RATECTRL_H_
---- a/media/filters/vpx_video_decoder.cc
-+++ b/media/filters/vpx_video_decoder.cc
-@@ -242,13 +242,6 @@ bool VpxVideoDecoder::ConfigureDecoder(c
-       return false;
-     }
- 
--    vpx_codec_err_t status =
--        vpx_codec_control(vpx_codec_.get(), VP9D_SET_LOOP_FILTER_OPT, 1);
--    if (status != VPX_CODEC_OK) {
--      DLOG(ERROR) << "Failed to enable VP9D_SET_LOOP_FILTER_OPT. "
--                  << vpx_codec_error(vpx_codec_.get());
--      return false;
--    }
-   }
- 
-   if (config.alpha_mode() == VideoDecoderConfig::AlphaMode::kIsOpaque)
---- a/media/gpu/vaapi/vp9_encoder.cc
-+++ b/media/gpu/vaapi/vp9_encoder.cc
-@@ -12,7 +12,6 @@
- #include "media/gpu/macros.h"
- #include "media/gpu/vaapi/vp9_rate_control.h"
- #include "media/gpu/vaapi/vp9_temporal_layers.h"
--#include "third_party/libvpx/source/libvpx/vp9/ratectrl_rtc.h"
- 
- namespace media {
- 
-@@ -114,47 +113,6 @@ VideoBitrateAllocation GetDefaultVideoBi
-   return bitrate_allocation;
- }
- 
--libvpx::VP9RateControlRtcConfig CreateRateControlConfig(
--    const gfx::Size encode_size,
--    const VP9Encoder::EncodeParams& encode_params,
--    const VideoBitrateAllocation& bitrate_allocation,
--    const size_t num_temporal_layers) {
--  libvpx::VP9RateControlRtcConfig rc_cfg{};
--  rc_cfg.width = encode_size.width();
--  rc_cfg.height = encode_size.height();
--  rc_cfg.max_quantizer =
--      QindexToQuantizer(encode_params.scaling_settings.max_qp);
--  rc_cfg.min_quantizer =
--      QindexToQuantizer(encode_params.scaling_settings.min_qp);
--  // libvpx::VP9RateControlRtcConfig is kbps.
--  rc_cfg.target_bandwidth = encode_params.bitrate_allocation.GetSumBps() / 1000;
--  // These default values come from
--  // //third_party/webrtc/modules/video_coding/codecs/vp9/vp9_impl.cc.
--  rc_cfg.buf_initial_sz = 500;
--  rc_cfg.buf_optimal_sz = 600;
--  rc_cfg.buf_sz = 1000;
--  rc_cfg.undershoot_pct = 50;
--  rc_cfg.overshoot_pct = 50;
--  rc_cfg.max_intra_bitrate_pct = MaxSizeOfKeyframeAsPercentage(
--      rc_cfg.buf_optimal_sz, encode_params.framerate);
--  rc_cfg.framerate = encode_params.framerate;
--
--  // Spatial layers variables.
--  rc_cfg.ss_number_layers = 1;
--  rc_cfg.scaling_factor_num[0] = 1;
--  rc_cfg.scaling_factor_den[0] = 1;
--  // Fill temporal layers variables.
--  rc_cfg.ts_number_layers = num_temporal_layers;
--  int bitrate_sum = 0;
--  for (size_t ti = 0; ti < num_temporal_layers; ti++) {
--    rc_cfg.max_quantizers[ti] = rc_cfg.max_quantizer;
--    rc_cfg.min_quantizers[ti] = rc_cfg.min_quantizer;
--    bitrate_sum += bitrate_allocation.GetBitrateBps(0, ti);
--    rc_cfg.layer_target_bitrate[ti] = bitrate_sum / 1000;
--    rc_cfg.ts_rate_decimator[ti] = 1u << (num_temporal_layers - ti - 1);
--  }
--  return rc_cfg;
--}
- }  // namespace
- 
- VP9Encoder::EncodeParams::EncodeParams()
-@@ -166,11 +124,6 @@ VP9Encoder::EncodeParams::EncodeParams()
-       scaling_settings(kMinQP, kMaxQP),
-       error_resilient_mode(false) {}
- 
--void VP9Encoder::set_rate_ctrl_for_testing(
--    std::unique_ptr<VP9RateControl> rate_ctrl) {
--  rate_ctrl_ = std::move(rate_ctrl);
--}
--
- void VP9Encoder::Reset() {
-   current_params_ = EncodeParams();
-   reference_frames_.Clear();
-@@ -226,22 +179,12 @@ bool VP9Encoder::Initialize(const VideoE
-     }
-     current_params_.scaling_settings.max_qp = kMaxQPForSoftwareRateCtrl;
- 
--    // |rate_ctrl_| might be injected for tests.
--    if (!rate_ctrl_) {
--      rate_ctrl_ = VP9RateControl::Create(CreateRateControlConfig(
--          visible_size_, current_params_, initial_bitrate_allocation,
--          num_temporal_layers));
--    }
--    if (!rate_ctrl_)
--      return false;
-   } else {
-     if (config.HasTemporalLayer()) {
-       DVLOGF(1) << "Temporal layer encoding works only when in "
-                 << "kConstantQuantizationParameter";
-       return false;
-     }
--    DCHECK(!rate_ctrl_) << "|rate_ctrl_| should only be configured when in "
--                           "kConstantQuantizationParameter";
-   }
- 
-   return UpdateRates(initial_bitrate_allocation,
-@@ -309,14 +252,12 @@ BitstreamBufferMetadata VP9Encoder::GetM
- 
- void VP9Encoder::BitrateControlUpdate(uint64_t encoded_chunk_size_bytes) {
-   if (accelerator_->bitrate_control() !=
--          BitrateControl::kConstantQuantizationParameter ||
--      !rate_ctrl_) {
-+          BitrateControl::kConstantQuantizationParameter) {
-     DLOG(ERROR) << __func__ << "() is called when no bitrate controller exists";
-     return;
-   }
- 
-   DVLOGF(4) << "|encoded_chunk_size_bytes|=" << encoded_chunk_size_bytes;
--  rate_ctrl_->PostEncodeUpdate(encoded_chunk_size_bytes);
- }
- 
- bool VP9Encoder::UpdateRates(const VideoBitrateAllocation& bitrate_allocation,
-@@ -340,13 +281,8 @@ bool VP9Encoder::UpdateRates(const Video
-       current_params_.bitrate_allocation.GetSumBps() *
-       current_params_.cpb_window_size_ms / 1000;
- 
--  if (!rate_ctrl_)
--    return true;
--
-   const size_t num_temporal_layers =
-       temporal_layers_ ? temporal_layers_->num_layers() : 1u;
--  rate_ctrl_->UpdateRateControl(CreateRateControlConfig(
--      visible_size_, current_params_, bitrate_allocation, num_temporal_layers));
-   return true;
- }
- 
-@@ -397,21 +333,6 @@ void VP9Encoder::SetFrameHeader(
-     }
-   }
- 
--  if (!rate_ctrl_)
--    return;
--
--  libvpx::VP9FrameParamsQpRTC frame_params{};
--  frame_params.frame_type =
--      keyframe ? FRAME_TYPE::KEY_FRAME : FRAME_TYPE::INTER_FRAME;
--  if (picture->metadata_for_encoding) {
--    frame_params.temporal_layer_id =
--        picture->metadata_for_encoding->temporal_idx;
--  }
--  rate_ctrl_->ComputeQP(frame_params);
--  picture->frame_hdr->quant_params.base_q_idx = rate_ctrl_->GetQP();
--  picture->frame_hdr->loop_filter.level = rate_ctrl_->GetLoopfilterLevel();
--  DVLOGF(4) << "qp=" << rate_ctrl_->GetQP()
--            << ", filter_level=" << rate_ctrl_->GetLoopfilterLevel();
- }
- 
- void VP9Encoder::UpdateReferenceFrames(scoped_refptr<VP9Picture> picture) {
---- a/media/gpu/vaapi/vp9_encoder.h
-+++ b/media/gpu/vaapi/vp9_encoder.h
-@@ -20,7 +20,6 @@
- 
- namespace media {
- class VP9TemporalLayers;
--class VP9RateControl;
- 
- class VP9Encoder : public AcceleratedVideoEncoder {
-  public:
-@@ -101,8 +100,6 @@ class VP9Encoder : public AcceleratedVid
-  private:
-   friend class VP9EncoderTest;
- 
--  void set_rate_ctrl_for_testing(std::unique_ptr<VP9RateControl> rate_ctrl);
--
-   Vp9FrameHeader GetDefaultFrameHeader(const bool keyframe) const;
-   void SetFrameHeader(bool keyframe,
-                       VP9Picture* picture,
-@@ -122,7 +119,6 @@ class VP9Encoder : public AcceleratedVid
-   Vp9ReferenceFrameVector reference_frames_;
-   std::unique_ptr<VP9TemporalLayers> temporal_layers_;
- 
--  std::unique_ptr<VP9RateControl> rate_ctrl_;
-   const std::unique_ptr<Accelerator> accelerator_;
- 
-   SEQUENCE_CHECKER(sequence_checker_);
---- a/third_party/blink/renderer/modules/mediarecorder/vpx_encoder.cc
-+++ b/third_party/blink/renderer/modules/mediarecorder/vpx_encoder.cc
-@@ -72,14 +72,6 @@ void VpxEncoder::EncodeOnEncodingTaskRun
-   TRACE_EVENT0("media", "VpxEncoder::EncodeOnEncodingTaskRunner");
-   DCHECK_CALLED_ON_VALID_SEQUENCE(encoding_sequence_checker_);
- 
--  if (frame->format() == media::PIXEL_FORMAT_NV12 &&
--      frame->storage_type() == media::VideoFrame::STORAGE_GPU_MEMORY_BUFFER)
--    frame = media::ConvertToMemoryMappedFrame(frame);
--  if (!frame) {
--    LOG(WARNING) << "Invalid video frame to encode";
--    return;
--  }
--
-   const gfx::Size frame_size = frame->visible_rect().size();
-   base::TimeDelta duration = EstimateFrameDuration(*frame);
-   const media::WebmMuxer::VideoParameters video_params(frame);
-@@ -95,18 +87,6 @@ void VpxEncoder::EncodeOnEncodingTaskRun
-   std::string data;
-   std::string alpha_data;
-   switch (frame->format()) {
--    case media::PIXEL_FORMAT_NV12: {
--      last_frame_had_alpha_ = false;
--      DoEncode(encoder_.get(), frame_size, frame->data(VideoFrame::kYPlane),
--               frame->visible_data(VideoFrame::kYPlane),
--               frame->stride(VideoFrame::kYPlane),
--               frame->visible_data(VideoFrame::kUVPlane),
--               frame->stride(VideoFrame::kUVPlane),
--               frame->visible_data(VideoFrame::kUVPlane) + 1,
--               frame->stride(VideoFrame::kUVPlane), duration, force_keyframe,
--               data, &keyframe, VPX_IMG_FMT_NV12);
--      break;
--    }
-     case media::PIXEL_FORMAT_I420: {
-       last_frame_had_alpha_ = false;
-       DoEncode(encoder_.get(), frame_size, frame->data(VideoFrame::kYPlane),
-@@ -195,7 +175,7 @@ void VpxEncoder::DoEncode(vpx_codec_ctx_
-                           bool* const keyframe,
-                           vpx_img_fmt_t img_fmt) {
-   DCHECK_CALLED_ON_VALID_SEQUENCE(encoding_sequence_checker_);
--  DCHECK(img_fmt == VPX_IMG_FMT_I420 || img_fmt == VPX_IMG_FMT_NV12);
-+  DCHECK(img_fmt == VPX_IMG_FMT_I420);
- 
-   vpx_image_t vpx_image;
-   vpx_image_t* const result =
diff --git a/debian/patches/system/zlib.patch b/debian/patches/system/zlib.patch
index 1c45bad..78a6da5 100644
--- a/debian/patches/system/zlib.patch
+++ b/debian/patches/system/zlib.patch
@@ -30,13 +30,3 @@ author: Michael Gilbert <mgilbert@debian.org>
  #ifdef COURGETTE_USE_CRC_LIB
  #  include "zlib.h"
  #else
---- a/third_party/perfetto/gn/BUILD.gn
-+++ b/third_party/perfetto/gn/BUILD.gn
-@@ -360,7 +360,6 @@ if (enable_perfetto_zlib) {
-       public_configs = [ "//buildtools:zlib_config" ]
-       public_deps = [ "//buildtools:zlib" ]
-     } else {
--      public_configs = [ "//third_party/zlib:zlib_config" ]
-       public_deps = [ "//third_party/zlib" ]
-     }
-   }
diff --git a/debian/patches/upstream/libdrm.patch b/debian/patches/upstream/libdrm.patch
new file mode 100644
index 0000000..6e9acbd
--- /dev/null
+++ b/debian/patches/upstream/libdrm.patch
@@ -0,0 +1,54 @@
+description: fix build error when building against system libdrm
+
+../../media/gpu/chromeos/video_decoder_pipeline.cc:31:10: fatal error: 'third_party/libdrm/src/include/drm/drm_fourcc.h' file not found
+#include "third_party/libdrm/src/include/drm/drm_fourcc.h"
+         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+1 error generated
+
+
+commit 5b287e0be8d8d8475ec6ef81b16eaa61e19db078
+Author: Steinar H. Gunderson <sesse@chromium.org>
+Date:   Tue Jan 25 19:14:53 2022 +0000
+
+    Fix build break with system libdrm.
+    
+    This patch is submitted on behalf of Andres Salomon
+    <dilinger@queued.net> (on Cc). Also adding him to src/AUTHORS
+    per policy, as he has signed the CLA.
+    
+    Original patch:
+    https://salsa.debian.org/dilinger/chromium/-/commit/2333c2fb985ac1ef3d7331776a7833d965c63302
+    
+    Change-Id: I18bd60e2e80f2b9181e74ee7972c3f457ab33b10
+    Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/3401704
+    Reviewed-by: Andres Calderon Jaramillo <andrescj@chromium.org>
+    Commit-Queue: Steinar H Gunderson <sesse@chromium.org>
+    Auto-Submit: Steinar H Gunderson <sesse@chromium.org>
+    Cr-Commit-Position: refs/heads/main@{#963119}
+
+diff --git a/media/gpu/chromeos/BUILD.gn b/media/gpu/chromeos/BUILD.gn
+index 7cb4c3ea39a16..6fe21c15ecc1b 100644
+--- a/media/gpu/chromeos/BUILD.gn
++++ b/media/gpu/chromeos/BUILD.gn
+@@ -25,6 +25,7 @@ source_set("chromeos") {
+ 
+   deps = [
+     "//base",
++    "//build/config/linux/libdrm",
+     "//media",
+     "//media/gpu:buildflags",
+     "//media/gpu:command_buffer_helper",
+diff --git a/media/gpu/chromeos/video_decoder_pipeline.cc b/media/gpu/chromeos/video_decoder_pipeline.cc
+index d2f154ea0d87c..416b9434a8d70 100644
+--- a/media/gpu/chromeos/video_decoder_pipeline.cc
++++ b/media/gpu/chromeos/video_decoder_pipeline.cc
+@@ -28,8 +28,8 @@
+ #include "third_party/abseil-cpp/absl/types/optional.h"
+ 
+ #if BUILDFLAG(USE_VAAPI)
++#include <drm_fourcc.h>
+ #include "media/gpu/vaapi/vaapi_video_decoder.h"
+-#include "third_party/libdrm/src/include/drm/drm_fourcc.h"
+ #elif BUILDFLAG(USE_V4L2_CODEC)
+ #include "media/gpu/v4l2/v4l2_video_decoder.h"
+ #else
diff --git a/debian/patches/upstream/mojo.patch b/debian/patches/upstream/mojo.patch
new file mode 100644
index 0000000..81df73a
--- /dev/null
+++ b/debian/patches/upstream/mojo.patch
@@ -0,0 +1,7545 @@
+description: copy of missing files in content/test/data, taken from upstream git
+
+This is just
+cp chromium-git/content/test/data/*{html,mojom,js} \
+   chromium-debian/content/test/data/
+
+Upstream bug report about the missing files:
+https://bugs.chromium.org/p/chromium/issues/detail?id=1293630
+I'm not sure how much of them are actually needed, but it's easier to
+just copy all of them for now. Hopefully this will be fixed upstream
+shortly.
+
+It's not clear how much these files changes, but this copy is from
+chromium-98.0.4758.80.
+
+--- /dev/null
++++ b/content/test/data/web_ui_test.test-mojom
+@@ -0,0 +1,13 @@
++// Copyright 2020 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module content.mojom;
++
++import "content/test/data/web_ui_test_types.test-mojom";
++import "url/mojom/url.mojom";
++
++interface WebUIMojoTestCache {
++  Put(url.mojom.Url url, string contents);
++  GetAll() => (array<CacheItem> items);
++};
+--- /dev/null
++++ b/content/test/data/web_ui_test_types.test-mojom
+@@ -0,0 +1,16 @@
++// Copyright 2020 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module content.mojom;
++
++import "url/mojom/url.mojom";
++
++// This struct is imported by web_ui_test.test-mojom and is used to provide
++// test coverage of non-shared WebUI mojom JS modules importing other
++// non-shared WebUI mojom JS modules.
++struct CacheItem {
++  url.mojom.Url url;
++  string contents;
++};
++
+--- /dev/null
++++ b/content/test/data/mojo_bindings_web_test.test-mojom
+@@ -0,0 +1,86 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module mojo_bindings_test.mojom;
++
++// NOTE: This import exists to exercise automatic dependency loading in
++// generated JS modules.
++import "content/test/data/mojo_bindings_web_test_types.test-mojom";
++
++// An interface whose definition covers various types of message signatures in
++// order to exercise the lite JS mojom bindings.
++interface TestMessageTarget {
++  enum NestedEnum {
++    kFoo,
++    kBar,
++  };
++
++  // Zero arguments, no reply.
++  Poke();
++
++  // Zero-argument request, zero-argument reply.
++  Ping() => ();
++
++  // Request and reply both with arguments.
++  Repeat(string? message, array<int32>? numbers)
++      => (string? message, array<int32>? numbers);
++
++  Echo(NestedEnum nested) => (NestedEnum nested);
++
++  Deconstruct(TestStruct test_struct)
++       => (int32 x, int32 y,
++           // Using TestStruct.StructEnum causes a compile failure. Use
++           // int32 instead.
++           // TODO(crbug.com/1011660): Change |z| to TestStruct.StructEnum.
++           int32 z);
++
++  Flatten(array<TestStruct> values) => (array<int32> values);
++  FlattenUnions(array<TestUnion> unions) => (array<int32> x, array<int32> s);
++
++  RequestSubinterface(pending_receiver<Subinterface> receiver,
++                      pending_remote<SubinterfaceClient> client);
++};
++
++interface Subinterface {
++  Push(int32 value);
++  Flush();
++};
++
++interface SubinterfaceClient {
++  DidFlush(array<int32> values);
++};
++
++struct StructVersionTest {
++  string a;
++  string b;
++  [MinVersion=1] string? c;
++  [MinVersion=2] string? d;
++};
++
++interface InterfaceVersionTest {
++  Foo(int32 x, [MinVersion=1] int32 y) => (int32 z, [MinVersion=1] int32 w);
++};
++
++interface Counter {
++  // Two different varieties of observer addition to exercise sending remotes
++  // and receiving receivers.
++  AddObserver(pending_associated_remote<CounterObserver> observer);
++  AddNewObserver() => (pending_associated_receiver<CounterObserver> receiver);
++  RemoveAllObservers();
++
++  // Two different varieties of cloning to exercise sending receivers and
++  // receiving remotes.
++  Clone(pending_associated_receiver<Counter> receiver);
++  CloneToNewRemote() => (pending_associated_remote<Counter> remote);
++
++  // Increments the counter, notifies all observers, then replies. Because
++  // observers are associated with this interface, they are therefore guaranteed
++  // to observe an increment before the caller observes its corresponding reply.
++  Increment() => (int32 count);
++};
++
++interface CounterObserver {
++  OnCountChanged(int32 count);
++  OnCloneDisconnected();
++};
+--- /dev/null
++++ b/content/test/data/mojo_bindings_web_test_types.test-mojom
+@@ -0,0 +1,25 @@
++// Copyright 2020 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module mojo_bindings_test.mojom;
++
++struct TestStruct {
++  enum StructEnum {
++    kZero = 0,
++    kOne  = 1,
++  };
++
++  const int32 kStructConst = 2;
++
++  int32 x;
++  int32 y = kStructConst;
++  StructEnum z = StructEnum.kOne;
++  const bool isValid = false;
++};
++
++union TestUnion {
++  int32 x;
++  TestStruct s;
++};
++
+--- /dev/null
++++ b/content/test/data/lite_js_test.mojom
+@@ -0,0 +1,67 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module lite_js_test.mojom;
++
++struct TestStruct {
++  enum StructEnum {
++    kZero = 0,
++    kOne  = 1,
++  };
++
++  const int32 kStructConst = 2;
++
++  int32 x;
++  int32 y = kStructConst;
++  StructEnum z = StructEnum.kOne;
++  const bool isValid = false;
++};
++
++union TestUnion {
++  int32 x;
++  TestStruct s;
++};
++
++// An interface whose definition covers various types of message signatures in
++// order to exercise the lite JS mojom bindings.
++interface TestMessageTarget {
++  enum NestedEnum {
++    kFoo,
++    kBar,
++  };
++
++  // Zero arguments, no reply.
++  Poke();
++
++  // Zero-argument request, zero-argument reply.
++  Ping() => ();
++
++  // Request and reply both with arguments.
++  Repeat(string? message, array<int32>? numbers)
++      => (string? message, array<int32>? numbers);
++
++  Echo(NestedEnum nested) => (NestedEnum nested);
++
++  Deconstruct(TestStruct test_struct)
++       => (int32 x, int32 y,
++           // Using TestStruct.StructEnum causes a compile failure. Use
++           // int32 instead.
++           // TODO(crbug.com/1011660): Change |z| to TestStruct.StructEnum.
++           int32 z);
++
++  Flatten(array<TestStruct> values) => (array<int32> values);
++  FlattenUnions(array<TestUnion> unions) => (array<int32> x, array<int32> s);
++
++  RequestSubinterface(pending_receiver<Subinterface> receiver,
++                      pending_remote<SubinterfaceClient> client);
++};
++
++interface Subinterface {
++  Push(int32 value);
++  Flush();
++};
++
++interface SubinterfaceClient {
++  DidFlush(array<int32> values);
++};
+--- /dev/null
++++ b/content/test/data/mojo_web_test_helper_test.mojom
+@@ -0,0 +1,10 @@
++// Copyright 2014 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++module content.mojom;
++
++interface MojoWebTestHelper {
++  Reverse(string message) => (string reversed);
++};
++
+--- /dev/null
++++ b/content/test/data/accept-header-iframe.html
+@@ -0,0 +1,7 @@
++<html>
++<body>
++<script>
++var request = new XMLHttpRequest();
++</script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/accept-header.html
+@@ -0,0 +1,46 @@
++<html>
++<head>
++<script src="test.js"></script>
++<link rel="stylesheet"  href="/test.css">
++<link rel="icon" href="/test.ico" type="image/x-icon"/>
++<link rel="manifest" href="/manifest">
++<iframe src="/iframe.html"></iframe>
++<iframe src="/accept-header-iframe.html"></iframe>
++<img src="/image.gif">
++</head>
++<style>
++@font-face {
++  font-family: "TestFontFamily";
++  src: url("/font.otf");
++}
++p.customfont {
++    font-family: "TestFontFamily";
++}
++</style>
++<video src="/media.mp4" autoplay controls></video>
++<body>Hello World</body>
++<a ping="/ping" href="javascript:void(0)" id="ping">
++<p class="customfont">font</p>
++<link rel="prefetch" href="/prefetch">
++
++<script>
++var request = new XMLHttpRequest();
++request.open('GET', '/xhr', true);
++request.send(null);
++
++request = new XMLHttpRequest();
++request.open('GET', '/xhr_with_accept_header', true);
++request.setRequestHeader('Accept', 'custom/type');
++request.send(null);
++
++document.getElementById('ping').click();
++
++var worker = new Worker('/worker.js');
++if ("SharedWorker" in window)
++  var shared_worker = new SharedWorker('/shared_worker.js');
++
++navigator.serviceWorker.register('/service_worker.js')
++.catch(function(error) {});
++
++</script>
++</html>
+--- /dev/null
++++ b/content/test/data/allowed_frames.html
+@@ -0,0 +1,14 @@
++<!DOCTYPE html>
++<head>
++</head>
++<body>
++  <!-- These frames should not have any other attributes, other than an id and
++    those attributes required for testing feature policy creation and
++    replication. See https://crbug.com/705658 -->
++  <iframe id="child-0"></iframe>
++  <iframe id="child-1" allow></iframe>
++  <iframe id="child-2" allow="fullscreen; geolocation" src="/cross-site/bar.com/title1.html"></iframe>
++  <iframe id="child-3" allow="fullscreen; geolocation" src="title1.html"></iframe>
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/body_overflow_hidden.html
+@@ -0,0 +1,17 @@
++<html>
++<head>
++  <meta name='viewport' content='width=device-width, minimum-scale=1'>
++</head>
++<style>
++body {
++  height: 10000px;
++  overflow: hidden;
++}
++</style>
++<div style="width:100px; height:300px; overflow: scroll;">
++  <div style="width:150px; height:250px; overflow: scroll">
++    <div style="width:300px; height:200px; overflow: scroll">
++    </div>
++  </div>
++</div>
++</html>
+--- /dev/null
++++ b/content/test/data/click-nocontent-link.html
+@@ -0,0 +1,73 @@
++<html>
++
++ <head><title>Click nocontent link</title>
++ <script>
++  function simulateClick(target) {
++    var evt = document.createEvent("MouseEvents");
++    evt.initMouseEvent("click", true, true, window,
++                       0, 0, 0, 0, 0, false, false,
++                       false, false, 0, null);
++
++    return target.dispatchEvent(evt);
++  }
++
++  function clickNoContentTargetedLink() {
++    return simulateClick(document.getElementById("nocontent_targeted_link"));
++  }
++
++  function clickNoContentScriptedTargetedLink() {
++    return simulateClick(document.getElementById(
++        "nocontent_scripted_targeted_link"));
++  }
++
++  function getNewWindowReference() {
++    // Grab a reference to the existing foo window, but don't otherwise access
++    // it in any way.
++    var w = window.open("", "foo");
++    // w is intentionally unused after this point to avoid triggering a call to
++    // DidAccessInitialDocument().
++
++    // Modify the title to give the test a notification to listen for. Use a
++    // timeout so that any DidAccessInitialDocument() notification arrives
++    // first. Note that this intentionally uses |window| instead of |w| to avoid
++    // test boilerplate from triggering calls to DidAccessInitialDocument().
++    setTimeout(function() { window.document.title = "Modified Title"; });
++  }
++
++  function modifyNewWindow() {
++    // Grab a reference to the existing foo window and modify its content.
++    var w = window.open("", "foo");
++    w.document.body.innerHTML += "Modified";
++
++    // Modify the title to give the test a notification to listen for. Use a
++    // timeout so that any DidAccessInitialDocument() notification arrives
++    // first. Note that this intentionally uses |window| instead of |w| to avoid
++    // test boilerplate from triggering calls to DidAccessInitialDocument().
++    setTimeout(function() { window.document.title = "Modified Title"; });
++  }
++
++  function modifyNewWindowWithDocumentOpen() {
++    // Grab a reference to the existing foo window and modify its content.
++    var w = window.open("", "foo");
++    w.document.open();
++    w.document.write("Modified");
++    w.document.close();
++
++    // Modify the title to give the test a notification to listen for. Use a
++    // timeout so that any DidAccessInitialDocument() notification arrives
++    // first. Note that this intentionally uses |window| instead of |w| to avoid
++    // test boilerplate from triggering calls to DidAccessInitialDocument().
++    setTimeout(function() { window.document.title = "Modified Title"; });
++  }
++ </script>
++ </head>
++
++<a href="/nocontent" id="nocontent_targeted_link" target="foo">
++  /nocontent target=foo</a><br>
++<button onclick="modifyNewWindow()">Modify New Window</button><br>
++
++<a href="/nocontent" id="nocontent_scripted_targeted_link" target="foo"
++   onclick="modifyNewWindow()">
++  /nocontent scripted target=foo</a><br>
++
++</html>
+--- /dev/null
++++ b/content/test/data/click-noreferrer-links.html
+@@ -0,0 +1,163 @@
++<html>
++
++ <head><title>Click noreferrer links</title>
++ <script>
++  function setOriginForLinks(baseUrl) {
++    var links = [
++        'noref_and_tblank_link',
++        'noopener_and_tblank_link',
++        'tblank_link',
++        'noref_link',
++        'noopener_link'
++    ];
++    links.forEach(function(linkId) {
++      link = document.getElementById(linkId);
++      link.href = baseUrl + link.pathname.substr(1);
++    });
++  }
++  function simulateClick(target) {
++    var evt = document.createEvent("MouseEvents");
++    evt.initMouseEvent("click", true, true, window,
++                       0, 0, 0, 0, 0, false, false,
++                       false, false, 0, null);
++
++    return target.dispatchEvent(evt);
++  }
++
++  function clickNoRefTargetBlankLink() {
++    return simulateClick(document.getElementById("noref_and_tblank_link"));
++  }
++
++  function clickNoOpenerTargetBlankLink() {
++    return simulateClick(document.getElementById("noopener_and_tblank_link"));
++  }
++
++  function clickSameSiteNoRefTargetedLink() {
++    return simulateClick(
++        document.getElementById("samesite_noref_and_targeted_link"));
++  }
++
++  function clickSameSiteNoOpenerTargetedLink() {
++    return simulateClick(
++        document.getElementById("samesite_noopener_and_targeted_link"));
++  }
++
++  function clickSameSiteTargetedLink() {
++    return simulateClick(document.getElementById("samesite_targeted_link"));
++  }
++
++  function clickSameSiteTargetBlankLink() {
++    return simulateClick(document.getElementById("samesite_tblank_link"));
++  }
++
++  function clickTargetBlankLink() {
++    return simulateClick(document.getElementById("tblank_link"));
++  }
++
++  function clickNoRefLink() {
++    return simulateClick(document.getElementById("noref_link"));
++  }
++
++  function clickNoOpenerLink() {
++    return simulateClick(document.getElementById("noopener_link"));
++  }
++
++  function clickBlankTargetedLink() {
++    return simulateClick(document.getElementById("blank_targeted_link"));
++  }
++
++  function testScriptAccessToWindow() {
++    // Grab a reference to the existing foo window and access its location.
++    try {
++      var w = window.open("", "foo");
++      var url = w.location.href;
++      return url != undefined;
++    } catch (e) {
++      return false;
++    }
++  }
++
++  function testCloseWindow() {
++    // Grab a reference to the existing foo window and close it.
++    var w = window.open("", "foo");
++    w.close();
++    return true;
++  }
++
++  // Listen to incoming messages and reply to them.
++  var receivedMessages = 0;
++  window.addEventListener("message", messageReceived, false);
++  function messageReceived(event) {
++    receivedMessages++;
++    event.source.postMessage(event.data, "*");
++  }
++
++  // Send a message which contains a message port.
++  var mc;
++  function postWithPortToFoo() {
++    mc = new MessageChannel();
++    mc.port1.onmessage = portMessageReceived;
++    mc.port1.start();
++    var w = window.open("", "foo");
++    w.postMessage({message: "msg-with-port", port: mc.port2}, "*", [mc.port2]);
++    return true;
++  }
++
++  var receivedMessagesViaPort = 0;
++  function portMessageReceived(event) {
++    receivedMessagesViaPort++;
++    // Change the title to generate a notification.
++    document.title = event.data;
++  }
++
++  var last_opened_window = undefined;
++  function saveWindowReference() {
++    // Grab a reference to the existing foo window into a global variable
++    // for later testing.
++    last_opened_window = window.open("", "foo");
++  }
++  function getLastOpenedWindowLocation() {
++    return last_opened_window.location.href;
++  }
++
++  function openWindowWithTargetAndFeatures(path, target, features) {
++    var w = window.open(path, target, features);
++    return w !== null;
++  }
++ </script>
++ </head>
++
++<a href="title2.html" id="samesite_noref_and_targeted_link"
++   rel="noreferrer" target="foo">
++  same-site rel=noreferrer and target=foo</a><br>
++<a href="title2.html" id="samesite_noopener_and_targeted_link"
++   rel="noopener" target="foo">
++  same-site rel=noopener and target=foo</a><br>
++<a href="navigate_opener.html" id="samesite_targeted_link" target="foo">
++  same-site target=foo</a><br>
++<a href="title2.html" id="samesite_tblank_link" rel="opener" target="_blank">
++  same-site rel=opener target=_blank</a><br>
++<a href="about:blank" id="blank_targeted_link" target="foo">
++  blank_targeted_link=foo</a><br>
++
++<!-- The following set of links have to be fixed at runtime with the proper
++  scheme://host:port/ string, since the port is randomly generated. The
++  setOriginForLinks method is provided for facilitating the replacement and
++  should be called by each browser test utilizing these links. -->
++<a href="http://REPLACE/title2.html"
++   id="noref_and_tblank_link" rel="noreferrer" target="_blank">
++  rel=noreferrer and target=_blank</a><br>
++<a href="http://REPLACE/title2.html"
++   id="noopener_and_tblank_link" rel="noopener" target="_blank">
++  rel=noopener and target=_blank</a><br>
++<a href="http://REPLACE/title2.html" id="tblank_link"
++   rel="opener" target="_blank">rel=opener target=_blank</a><br>
++<a href="http://REPLACE/title2.html" id="noref_link"
++   rel="noreferrer">rel=noreferrer</a><br>
++<a href="http://REPLACE/title2.html" id="noopener_link"
++   rel="noopener">rel=opener</a><br>
++
++
++<iframe id="frame1" src="frame_tree/1-1.html"></iframe>
++
++</html>
+--- /dev/null
++++ b/content/test/data/client_redirect.html
+@@ -0,0 +1,7 @@
++<html>
++<head>
++<title>Client redirect</title>
++<meta http-equiv="refresh" content="0; url=title1.html">
++</head>
++<body>Client redirect</body>
++</html>
+--- /dev/null
++++ b/content/test/data/color-scheme-2.html
+@@ -0,0 +1,21 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <meta charset="utf-8">
++  <meta name="viewport" content="width=device-width">
++  <title>color scheme test</title>
++</head>
++
++<script>
++  if (window.matchMedia("(prefers-color-scheme: light)").matches) {
++    document.documentElement.style.backgroundColor = "White";
++    document.documentElement.style.color = "Black";
++  } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
++    document.documentElement.style.backgroundColor = "Black";
++    document.documentElement.style.color = "White";
++  }
++</script>
++<body>
++color scheme test 2
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/color-scheme-dark.html
+@@ -0,0 +1,3 @@
++<head>
++  <meta name="color-scheme" content="dark">
++</head>
+--- /dev/null
++++ b/content/test/data/color-scheme.html
+@@ -0,0 +1,21 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <meta charset="utf-8">
++  <meta name="viewport" content="width=device-width">
++  <title>color scheme test</title>
++</head>
++
++<script>
++  if (window.matchMedia("(prefers-color-scheme: light)").matches) {
++    document.documentElement.style.backgroundColor = "White";
++    document.documentElement.style.color = "Black";
++  } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
++    document.documentElement.style.backgroundColor = "Black";
++    document.documentElement.style.color = "White";
++  }
++</script>
++<body>
++color scheme test
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-disposition-empty.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>success</title></head>
++<body>this page should be displayed instead of downloaded</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-disposition-inline.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>success</title></head>
++<body>this page should be displayed instead of downloaded</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-sniffer-test0.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Content Sniffer Test 0</title></head>
++<body>We should sniff this content as HTML.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-sniffer-test1.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Content Sniffer Test 1</title></head>
++<body>We should not sniff this content as HTML.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-sniffer-test2.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Content Sniffer Test 2</title></head>
++<body>We should not sniff this as HTML as server says its a GIF.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/content-sniffer-test3.html
+@@ -0,0 +1,16 @@
++<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
++<html>
++<head>
++<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
++<title>Content Sniffer Test 3</title>
++</head>
++<body>
++<script id="sc">
++var iframe = document.createElement('iframe');
++iframe.frameBorder = iframe.width = iframe.height = 0;
++iframe.src = "http://mock.http/content-sniffer-test3-frame.txt";
++document.body.appendChild(iframe);
++</script>
++<pre>Do NOT download!!</pre>
++</body>
++</html>
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/coreferencingframe_1.html
+@@ -0,0 +1,7 @@
++<!DOCTYPE html>
++<html>
++<body>
++  A - This page has co-referencing nested iframes.
++  <iframe id="child-0" src="/cross-site/b.com/coreferencingframe_2.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/coreferencingframe_2.html
+@@ -0,0 +1,7 @@
++<!DOCTYPE html>
++<html>
++<body>
++  B - This page has co-referencing nested iframes.
++  <iframe id="child-0" src="/cross-site/a.com/coreferencingframe_1.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/corp-cross-origin.html
+@@ -0,0 +1 @@
++File with "Cross-Origin-Resource-Policy: cross-origin" header set.
+--- /dev/null
++++ b/content/test/data/counter.html
+@@ -0,0 +1,14 @@
++<html>
++<body>
++  <p> Counting up every 50ms </p>
++  <input id="input" value="0"/>
++  <script>
++  window.addEventListener('load', function() {
++    var inputElement = document.getElementById('input');
++    window.setInterval(function() {
++      inputElement.value = inputElement.value * 1 + 1;
++    }, 50);
++  });
++  </script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/cross-origin-opener-policy_redirect_final.html
+@@ -0,0 +1 @@
++Document with "Cross-Origin-Opener-Policy: same-origin"
+--- /dev/null
++++ b/content/test/data/cross-origin-opener-policy_redirect_initial.html
+@@ -0,0 +1 @@
++Document with "Cross-Origin-Opener-Policy: same-origin"
+--- /dev/null
++++ b/content/test/data/cross-origin-opener-policy_sandbox_popup.html
+@@ -0,0 +1 @@
++<iframe id="frame" sandbox="allow-scripts allow-popups" src='empty.html'></iframe>
+--- /dev/null
++++ b/content/test/data/cross-origin-redirect-blocked.html
+@@ -0,0 +1,57 @@
++<html>
++<head>
++  <title></title>
++</head>
++<body>
++<script>
++
++function NewXHR(url) {
++  var r = new XMLHttpRequest
++  r.open("GET", url);
++  return r;
++}
++
++function SignalSuccess() {
++  document.location = "title3.html";
++}
++
++function SignalFailure() {
++  document.location = "title1.html";
++}
++
++function CreateDummyRequest() {
++  dummy_request = NewXHR("/title2.html");
++  dummy_request.onload = SignalSuccess;
++  dummy_request.send(null);
++}
++
++function RedirectFailed() {
++  // Good, the redirect was blocked by WebKit.
++  //
++  // We also care that the underlying network stack does not send the redirect.
++  // We cannot detect that from JS, but our test harness is designed to detect
++  // that (see ResourceDispatcherTest::CrossOriginRedirectBlocked).  Before
++  // calling SignalSuccess, we want to allow the browser time to notice a request
++  // to follow the redirect if one should exist.  To do that, we just need to
++  // make another network request.
++  //
++  // The setTimeout call is intended to delay CreateDummyRequest so that any
++  // processing associated with the current "error" handler completes.
++  setTimeout(CreateDummyRequest, 0);
++}
++
++function RedirectSucceeded() {
++  // Oops, the redirect should have been denied!
++  SignalFailure();
++}
++
++// Kick off a request that will attempt a cross-origin redirect.
++var redirect_url = "/server-redirect-302?http://a.com:" + location.port + "/title2.html";
++request = NewXHR(redirect_url);
++request.onerror = RedirectFailed;
++request.onload = RedirectSucceeded;
++request.send(null);
++
++</script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/cross_site_iframe_factory.html
+@@ -0,0 +1,298 @@
++<html>
++<!-- This page can create whatever iframe structure you want, across whatever
++sites you want. This is useful for testing site isolation.
++
++Example usage in a browsertest, explained:
++
++  GURL url = embedded_test_server()->
++      GetURL("a.com", "/cross_site_iframe_factory.html?a(b(c,d))");
++
++When you navigate to the above URL, the outer document (on a.com) will create a
++single iframe:
++
++  <iframe id="child-0" src="http://b.com:1234/cross_site_iframe_factory.html?b(c(),d())">
++
++Inside of which, then, are created the two leaf iframes:
++
++  <iframe id="child-0" src="http://c.com:1234/cross_site_iframe_factory.html?c()">
++  <iframe id="child-1" src="http://d.com:1234/cross_site_iframe_factory.html?d()">
++
++Add iframe options by enclosing them in '{' and '}' characters after the
++hostname (multiple options can be separated with commas):
++
++  cross_site_iframe_factory.html?a(b{allowfullscreen}(),c{sandbox-allow-scripts}(d))
++
++Will create two iframes:
++
++  <iframe id="child-0" src="http://a.com:1234/cross_site_iframe_factory.html?b()" allowfullscreen>
++  <iframe id="child-1" src="http://c.com:1234/cross_site_iframe_factory.html?c{sandbox-allow-scripts}(d())" sandbox="allow-scripts">
++
++To specify the site for each iframe, you can use a simple identifier like "a"
++or "b", and ".com" will be automatically appended. You can also specify a port
++number to use for each site by using a label like "a:12345". If no port number
++is given, the port will default to the port number of the top level frame.
++You can also specify an arbitrary full URL for any bottommost leaf frame.
++
++These options are supported:
++
++  allowfullscreen
++  allowpaymentrequest
++  allow-{featurename} - Adds {featurename} to the "allow" attribute
++  sandbox-{flagname} - Adds {flagname} to the "sandbox" attribute
++
++To make this page work, your browsertest needs a MockHostResolver, like:
++
++  void SetUpOnMainThread() override {
++    host_resolver()->AddRule("*", "127.0.0.1");
++    ASSERT_TRUE(embedded_test_server()->Start());
++  }
++
++You can play around with the arguments by loading this page via file://, but
++you probably won't get the same process behavior as if you loaded via http. -->
++<head>
++<title>Cross-site iframe factory</title>
++<style>
++body {
++  font-family: "DejaVu Sans", Sans-Serif;
++  text-align: center;
++}
++iframe {
++  border-radius: 7px;
++  border-style: solid;
++  vertical-align: top;
++  margin: 2px;
++  box-shadow: 2px 2px 2px #888888;
++}
++</style>
++</head>
++<body>
++<h2 id='siteNameHeading'></h2>
++
++
++<script src='tree_parser_util.js'></script>
++<script type='text/javascript'>
++
++/**
++ * Determines a random pastel-ish color from the first character of a string.
++ */
++function pastelColorForFirstCharacter(seedString, lightness) {
++  // Map the first character to an index. This could be negative, we don't
++  // really care.
++  var index = seedString.charCodeAt(0) - 'a'.charCodeAt(0);
++
++  // If the first character is 'a', this will the the starting color.
++  var hueOfA = 200;  // Spoiler alert: it's blue.
++
++  // Color palette generation articles suggest that spinning the hue wheel by
++  // the golden ratio yields a magically nice color distribution. Something
++  // about sunflower seeds. I am skeptical of the rigor of that claim (probably
++  // any irrational number at a slight offset from 2/3 would do) but it does
++  // look pretty.
++  var phi = 2 / (1 + Math.pow(5, .5));
++  var hue = Math.round((360 * index * phi + hueOfA) % 360);
++  return 'hsl(' + hue + ', 60%, ' + Math.round(100 * lightness) + '%)';
++}
++
++function backgroundColorForSite(site) {
++  // Light pastel.
++  return pastelColorForFirstCharacter(site, .75);
++}
++
++function borderColorForSite(site) {
++  // Darker color in the same hue has the background.
++  return pastelColorForFirstCharacter(site, .32);
++}
++
++function isUrl(siteString) {
++  try {
++    var url = new URL(siteString);
++  } catch (e) {
++    if (e instanceof TypeError)
++      return false;
++  }
++  return true;
++}
++
++/**
++ * Extract the specified port number, if any. Returns empty string if not
++ * specified.
++ */
++function sitePortNumber(siteString) {
++  let index = siteString.indexOf(':');
++  if (index == -1)
++    return ""
++  return siteString.substring(index + 1);
++}
++
++/**
++ * Adds ".com" to an argument if it doesn't already have a top level domain.
++ * This cuts down on noise in the query string, letting you use single-letter
++ * names. Adds the specified port number, if any, or the default port otherwise.
++ */
++function canonicalizeSiteAndPort(siteString, defaultPort) {
++  var portNumber = sitePortNumber(siteString) || defaultPort;
++  var hostName = siteString.split(':')[0];
++  if (hostName !== "localhost" && hostName.indexOf('.') == -1)
++    hostName = hostName + '.com';
++  return hostName + (portNumber ? ':' + portNumber : "");
++}
++
++/**
++ * Parses the list of iframe options and applies them to the provided element.
++ */
++function applyIFrameOptions(element, options) {
++  var sandbox = false;
++  var sandboxArguments = [];
++  var allowFeatures = [];
++  for (var option of options) {
++    if (option == "allowfullscreen") {
++      element.allowFullscreen = true;
++    }
++    if (option == "allowpaymentrequest") {
++      element.allowPaymentRequest = true;
++    }
++    if (option == "sandbox") {
++      sandbox = true;
++    }
++    if (option.startsWith("sandbox-")) {
++      sandbox = true;
++      sandboxArguments.push(option.slice(8));
++    }
++    if (option.startsWith("allow-")) {
++      allowFeatures.push(option.slice(6))
++    }
++  }
++  if (sandbox) {
++    element.sandbox = sandboxArguments.join(" ");
++  }
++  if (allowFeatures.length) {
++    element.allow = allowFeatures.join(" ");
++  }
++}
++
++/**
++ * Determines whether or not text should be rendered by checking whether
++ * "no-text-render" is among the list of attributes.
++ */
++function shouldRenderText(attributes) {
++  for (var attribute of attributes) {
++    if (attribute == "no-text-render") {
++      return false;
++    }
++  }
++  return true;
++}
++
++/**
++ * Determines whether or not the frame should be positioned outside of
++ * its parent frame by checking whether "out-of-view" is among the list
++ * of attributes.
++ */
++function renderOutsideParentView(attributes) {
++  for (var attribute of attributes) {
++    if (attribute == "out-of-view") {
++      return true;
++    }
++  }
++  return false;
++}
++
++/**
++ * Simple recursive layout heuristic, since frames can't size themselves.
++ * This scribbles .layoutX and .layoutY properties into |tree|.
++ */
++function layout(tree) {
++  // Step 1: layout children.
++  var numFrames = tree.children.length;
++  for (var i = 0; i < numFrames; i++) {
++    layout(tree.children[i]);
++  }
++
++  // Step 2: find largest child.
++  var largestChildX = 0;
++  var largestChildY = 0;
++  for (var i = 0; i < numFrames; i++) {
++    largestChildX = Math.max(largestChildX, tree.children[i].layoutX);
++    largestChildY = Math.max(largestChildY, tree.children[i].layoutY);
++  }
++
++  // Step 3: Tweakable control parameters.
++  var minX = 110;  // Should be wide enough to fit a decent sized domain.
++  var minY = 110;  // Could be less, but squares look nice.
++  var extraYPerLevel = 50;  // Needs to be tall enough to fit a line of text.
++  var extraXPerLevel = 50;  // Could be less, but squares look nice.
++
++  // Account for padding around each <iframe>.
++  largestChildX += 30;
++  largestChildY += 30;
++
++  // Step 4: Assume a gridSizeX-by-gridSizeY layout that's big enough to fit if
++  // all children were the size of the largest one.
++  var gridSizeX = Math.ceil(Math.sqrt(numFrames));
++  var gridSizeY = Math.round(Math.sqrt(numFrames));
++  tree.layoutX = Math.max(gridSizeX * largestChildX + extraXPerLevel, minX);
++  tree.layoutY = Math.max(gridSizeY * largestChildY + extraYPerLevel, minY);
++}
++
++function main() {
++  var goCrossSite = !window.location.protocol.startsWith('file');
++  var queryString = decodeURIComponent(window.location.search.substring(1));
++  var frameTree = TreeParserUtil.parse(queryString);
++  var currentSite = isUrl(frameTree.value)
++                      ? frameTree.value
++                      : canonicalizeSiteAndPort(frameTree.value, "");
++
++  // Render text unless the attribute "no-text-render" is specified, in which
++  // case load some bytes anyway in order to trigger histogram recording for
++  // ad metrics tests.
++  if (shouldRenderText(frameTree.attributes)) {
++      document.getElementById('siteNameHeading').appendChild(
++          document.createTextNode(currentSite));
++  }
++
++  // Apply style to the current document.
++  document.body.style.backgroundColor = backgroundColorForSite(currentSite);
++
++  // Determine how big the children should be (using a very rough heuristic).
++  layout(frameTree);
++
++  for (var i = 0; i < frameTree.children.length; i++) {
++    // Compute the URL for this iframe.
++    let url = frameTree.children[i].value;
++    let siteAndPort = url;
++    if (!isUrl(url)) {
++      siteAndPort = canonicalizeSiteAndPort(url, window.location.port);
++      const subtreeString = TreeParserUtil.flatten(frameTree.children[i]);
++      url = '';
++      url += window.location.protocol + '//';              // scheme (preserved)
++      url += goCrossSite ? siteAndPort : window.location.host;    // host and port
++      url += window.location.pathname;                     // path (preserved)
++      url += '?' + encodeURIComponent(subtreeString);      // query
++    }
++
++    // Construct the iframe.
++    var iframe = document.createElement('iframe');
++    iframe.src = url;
++    iframe.id = "child-" + i;
++    iframe.style.borderColor = borderColorForSite(siteAndPort);
++    iframe.width = frameTree.children[i].layoutX;
++    iframe.height = frameTree.children[i].layoutY;
++
++    // If needed, position the iframe.
++    if (renderOutsideParentView(frameTree.children[i].attributes)) {
++        iframe.style.position = "fixed";
++        iframe.style.top = "150%";
++        iframe.style.left = "150%";
++    }
++
++    // Apply any additional attributes.
++    applyIFrameOptions(iframe, frameTree.children[i].attributes);
++
++    // Add the iframe to the document.
++    document.body.appendChild(iframe);
++  }
++}
++
++main();
++</script>
++</body></html>
+--- /dev/null
++++ b/content/test/data/csp_sandboxed_frame.html
+@@ -0,0 +1,8 @@
++<html>
++<title>sandboxed_frames</title>
++<head></head>
++  <body>
++    <iframe id="child-1" src="title1.html"></iframe>
++    <iframe id="child-2" sandbox></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/csp_wasm_eval.html
+@@ -0,0 +1,9 @@
++<!DOCTYPE html>
++<html>
++  <script>
++    WebAssembly.compile(new Uint8Array(
++        // The smallest possible Wasm module. Just the header
++        // (0, "A", "S", "M"), and the version (0x1).
++        [0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00]));
++  </script>
++</html>
+--- /dev/null
++++ b/content/test/data/ctrl-click-subframe-link.html
+@@ -0,0 +1,23 @@
++<html>
++<head>
++<script>
++  function simulateCtrlClick(target) {
++    var is_mac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
++    if (is_mac) {
++      var evt = new MouseEvent("click", { "metaKey": true });
++    } else {
++      var evt = new MouseEvent("click", { "ctrlKey": true });
++    }
++    return target.dispatchEvent(evt);
++  }
++  function ctrlClickLink() {
++    simulateCtrlClick(frames[0].document.getElementById("link"));
++  }
++</script>
++</head>
++<body>
++
++<iframe srcdoc="<a href='title1.html' id='link'>link</a>"></iframe>
++
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/dark_color_scheme_meta_slow.html
+@@ -0,0 +1,3 @@
++<!doctype html>
++<meta name="color-scheme" content="dark">
++<link rel="stylesheet" href="/slow-response">
+--- /dev/null
++++ b/content/test/data/data_url_navigations.html
+@@ -0,0 +1,110 @@
++<html>
++
++<h3>HTML mimetype</h3>
++
++<a download href="data:text/html,download" id="download-link">&lt;a download link&gt;</a>
++<br><br>
++<button id='navigate-top-frame-to-html'
++    onclick='top.location.href=`data:text/html,
++        <script>console.log(&quot;NAVIGATION_SUCCESSFUL&quot;)</script>`'>
++  Navigate top frame to data URL HTML
++</button>
++<br>
++<button id='window-open-html'
++    onclick='window.open(`data:text/html,
++        <script>console.log(&quot;NAVIGATION_SUCCESSFUL&quot;)</script>`);'>
++  Open new window with a data URL HTML
++</button>
++<button id='window-open-redirect'
++    onclick='window.open(`/server-redirect?data:text/html,<script>console.log(&quot;NAVIGATION_SUCCESSFUL&quot;)</script>`);'>
++  Open new window with a redirect to data URL
++</button>
++<br>
++<form method="post" action="data:text/html,
++             <script>console.log('NAVIGATION_SUCCESSFUL')</script>">
++  <input type=submit id='form-post-to-html'
++      value="Submit form to data URL HTML">
++</form>
++
++<h3>octet-stream mimetype</h3>
++
++<button id='navigate-top-frame-to-octetstream'
++    onclick='top.location.href=`data:application/octet-stream,test`'>
++  Navigate top frame to data URL octet-stream
++</button>
++<br>
++<button id='window-open-octetstream'
++    onclick='window.open(`data:application/octet-stream,test`)'>
++  Open new window with a data URL octet-stream
++</button>
++<form method="post" action="data:application/octet-stream,test">
++  <input type=submit id='form-post-to-octetstream'
++      value="Submit form to data URL octet-stream">
++</form>
++<h3>PDF mimetype</h3>
++
++<button id='navigate-top-frame-to-pdf'
++    onclick='top.location.href=`data:application/pdf;base64,
++    JVBERi0xLjcKMSAwIG9iaiA8PCAvVHlwZSAvUGFnZSAvUG
++    FyZW50IDMgMCBSIC9SZXNvdXJjZXMgNSAwIFIgL0NvbnRlbnRzIDIgMCBSID4+CmVuZG9iagoy
++    IDAgb2JqIDw8IC9MZW5ndGggNTEgPj4KIHN0cmVhbSBCVAogL0YxIDEyIFRmCiAxIDAgMCAxID
++    EwMCAyMCBUbQogKEhlbGxvIFdvcmxkKVRqCiBFVAogZW5kc3RyZWFtCmVuZG9iagozIDAgb2Jq
++    IDw8IC9UeXBlIC9QYWdlcyAvS2lkcyBbIDEgMCBSIF0gL0NvdW50IDEgL01lZGlhQm94IFsgMC
++    AwIDMwMCA1MF0gPj4KZW5kb2JqCjQgMCBvYmogPDwgL1R5cGUgL0ZvbnQgL1N1YnR5cGUgL1R5
++    cGUxIC9OYW1lIC9GMSAvQmFzZUZvbnQvQXJpYWwgPj4KZW5kb2JqCjUgMCBvYmogPDwgL1Byb2
++    NTZXRbL1BERi9UZXh0XSAvRm9udCA8PC9GMSA0IDAgUiA+PiA+PgplbmRvYmoKNiAwIG9iaiA8
++    PCAvVHlwZSAvQ2F0YWxvZyAvUGFnZXMgMyAwIFIgPj4KZW5kb2JqCnRyYWlsZXIgPDwgL1Jvb3
++    QgNiAwIFIgPj4K`'>
++  Navigate top frame to data URL PDF
++</button>
++<br>
++<button id='window-open-pdf'
++    onclick='window.open(`data:application/pdf;base64,
++    JVBERi0xLjcKMSAwIG9iaiA8PCAvVHlwZSAvUGFnZSAvUG
++    FyZW50IDMgMCBSIC9SZXNvdXJjZXMgNSAwIFIgL0NvbnRlbnRzIDIgMCBSID4+CmVuZG9iagoy
++    IDAgb2JqIDw8IC9MZW5ndGggNTEgPj4KIHN0cmVhbSBCVAogL0YxIDEyIFRmCiAxIDAgMCAxID
++    EwMCAyMCBUbQogKEhlbGxvIFdvcmxkKVRqCiBFVAogZW5kc3RyZWFtCmVuZG9iagozIDAgb2Jq
++    IDw8IC9UeXBlIC9QYWdlcyAvS2lkcyBbIDEgMCBSIF0gL0NvdW50IDEgL01lZGlhQm94IFsgMC
++    AwIDMwMCA1MF0gPj4KZW5kb2JqCjQgMCBvYmogPDwgL1R5cGUgL0ZvbnQgL1N1YnR5cGUgL1R5
++    cGUxIC9OYW1lIC9GMSAvQmFzZUZvbnQvQXJpYWwgPj4KZW5kb2JqCjUgMCBvYmogPDwgL1Byb2
++    NTZXRbL1BERi9UZXh0XSAvRm9udCA8PC9GMSA0IDAgUiA+PiA+PgplbmRvYmoKNiAwIG9iaiA8
++    PCAvVHlwZSAvQ2F0YWxvZyAvUGFnZXMgMyAwIFIgPj4KZW5kb2JqCnRyYWlsZXIgPDwgL1Jvb3
++    QgNiAwIFIgPj4K`)'>
++  Open new window with a data URL PDF
++</button>
++<br>
++<form method="post" action='data:application/pdf;base64,
++    JVBERi0xLjcKMSAwIG9iaiA8PCAvVHlwZSAvUGFnZSAvUG
++    FyZW50IDMgMCBSIC9SZXNvdXJjZXMgNSAwIFIgL0NvbnRlbnRzIDIgMCBSID4+CmVuZG9iagoy
++    IDAgb2JqIDw8IC9MZW5ndGggNTEgPj4KIHN0cmVhbSBCVAogL0YxIDEyIFRmCiAxIDAgMCAxID
++    EwMCAyMCBUbQogKEhlbGxvIFdvcmxkKVRqCiBFVAogZW5kc3RyZWFtCmVuZG9iagozIDAgb2Jq
++    IDw8IC9UeXBlIC9QYWdlcyAvS2lkcyBbIDEgMCBSIF0gL0NvdW50IDEgL01lZGlhQm94IFsgMC
++    AwIDMwMCA1MF0gPj4KZW5kb2JqCjQgMCBvYmogPDwgL1R5cGUgL0ZvbnQgL1N1YnR5cGUgL1R5
++    cGUxIC9OYW1lIC9GMSAvQmFzZUZvbnQvQXJpYWwgPj4KZW5kb2JqCjUgMCBvYmogPDwgL1Byb2
++    NTZXRbL1BERi9UZXh0XSAvRm9udCA8PC9GMSA0IDAgUiA+PiA+PgplbmRvYmoKNiAwIG9iaiA8
++    PCAvVHlwZSAvQ2F0YWxvZyAvUGFnZXMgMyAwIFIgPj4KZW5kb2JqCnRyYWlsZXIgPDwgL1Jvb3
++    QgNiAwIFIgPj4K'>
++  <input type=submit id='form-post-to-pdf'
++      value="Submit form to data URL PDF">
++</form>
++
++<h3>Unknown mimetype</h3>
++
++<button id='navigate-top-frame-to-unknown-mimetype'
++    onclick='top.location.href=`data:unknown/mimetype,test`'>
++  Navigate top frame to data URL unknown mimetype
++</button>
++<br>
++<button id='window-open-unknown-mimetype'
++    onclick='window.open(`data:unknown/mimetype,test`)'>
++  Open new window with a data URL unknown mimetype
++</button>
++<form method="post" action="data:unknown/mimetype,test">
++  <input type=submit id='form-post-to-unknown-mimetype'
++         value='Submit form to data URL unknown mimetype'>
++</form>
++<script>
++  if (window.domAutomationController)
++      window.domAutomationController.send("READY");
++</script>
++</html>
+--- /dev/null
++++ b/content/test/data/detach_frame_in_copy.html
+@@ -0,0 +1,13 @@
++<!DOCTYPE html>
++<html>
++<body>
++<iframe></iframe>
++<script>
++window[0].addEventListener('copy', (e) => {
++  document.querySelector('iframe').remove();
++  // Finish asynchronously, to make sure the renderer doesn't crash.
++  window.setTimeout(() => { document.title = 'done'; });
++});
++</script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/div_with_touch_action_auto.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>
++  <div style="touch-action:auto; width:100px; height:100px;background-color:red; overflow: scroll">
++    This div prohibits pinch-zoom.
++    <div style="width: 120px; height: 500px; background-color: black">Scrollable content!</div>
++  </div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/div_with_touch_action_none.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>
++  <div style="touch-action:none; width:100px; height:100px;background-color:red; overflow: scroll">
++    This div prohibits pinch-zoom.
++    <div style="width: 120px; height: 500px; background-color: black">Scrollable content!</div>
++  </div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/dynamic1.html
+@@ -0,0 +1,27 @@
++<html>
++<head>
++<title>Test Title</title>
++<script type="text/javascript">
++function OpenPopup() {
++    // Create a new popup window
++    var oWnd = window.open('','MyPopupName','width=350,height=300');
++
++    // Dynamically generate the HTML content for popup window
++    var sHtml =
++        '<html>'
++            + '<head><title>My Popup Title</title></head>'
++            + '<body></body>'
++        + '</html>';
++
++    // Push the HTML into that window
++    oWnd.document.write(sHtml);
++
++    // Finish
++    oWnd.document.close();
++}
++</script>
++</head>
++<body>
++  <p>This is dynamic1.html</p>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/dynamic2.html
+@@ -0,0 +1,31 @@
++<html>
++<head>
++<title>Test Title</title>
++<script type="text/javascript">
++function OpenPopup() {
++    // Create a new popup window
++    var oWnd = window.open('','MyPopupName','width=350,height=300');
++
++    // Dynamically generate the HTML content for popup window
++    var sHtml =
++        '<html>'
++            + '<head><title>My Popup Title</title></head>'
++            + '<body>'
++                + '<script type="text/javascript">'
++                    + 'document.title="My Dynamic Title";'
++                + '<\/script>'
++            + '</body>'
++        + '</html>';
++
++    // Push the HTML into that window
++    oWnd.document.write(sHtml);
++
++    // Finish
++    oWnd.document.close();
++}
++</script>
++</head>
++<body>
++  <p>This is dynamic2.html</p>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/echo-referrer.html
+@@ -0,0 +1,4 @@
++<!doctype html>
++<script>
++document.title = "Referrer = '" + document.referrer + "'";
++</script>
+--- /dev/null
++++ b/content/test/data/event-latency-animation.html
+@@ -0,0 +1,77 @@
++<!DOCTYPE html>
++<html lang="en">
++  <head>
++    <meta charset="utf-8">
++    <meta name="viewport" content="width=device-width">
++    <title>EventLatency vs. Animation</title>
++    <style>
++      #raf-box {
++        display: inline-block;
++        width: 100px;
++        height: 100px;
++        background-color: blue;
++      }
++
++      #main-box {
++        display: inline-block;
++        width: 100px;
++        height: 100px;
++        background-color: red;
++      }
++
++      .pulse-width {
++        animation: pulse-width 1s infinite;
++      }
++
++      @keyframes pulse-width {
++        0% {
++          width: 100px;
++        }
++        100% {
++          width: 200px;
++        }
++      }
++    </style>
++  </head>
++
++  <body>
++    <button id="button">Press here with space</button>
++    <input id="input" placeholder="Type something here">
++    <div>
++      <div id="raf-box"></div>
++      <div id="main-box"></div>
++    </div>
++    <script>
++      var button = document.getElementById('button');
++      var input = document.getElementById('input');
++      var rafBox = document.getElementById('raf-box');
++      var mainBox = document.getElementById('main-box');
++
++      var rafId = null;
++      var rafStart = null;
++
++      var focusButton = function() {
++        button.focus();
++      };
++
++      var focusInput = function() {
++        input.focus();
++      };
++
++      var rafAnimate = function(time) {
++        if (rafStart === null)
++          rafStart = time;
++        var w = Math.floor((time - rafStart) / 10) % 100 + 100;
++        rafBox.style.width = w + 'px';
++        rafId = requestAnimationFrame(rafAnimate);
++      };
++
++      var startAnimations = function() {
++        if (rafId === null)
++          rafId = requestAnimationFrame(rafAnimate);
++        if (!mainBox.classList.contains('pulse-width'))
++          mainBox.classList.add('pulse-width');
++      };
++    </script>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/fetch-keepalive.html
+@@ -0,0 +1,16 @@
++<!doctype html>
++<title>Fetching</title>
++<script>
++const params = new URL(location.href).searchParams;
++const numRequests = params.has('requests') ? Number(params.get('requests')) : 1;
++const promises = [];
++for (let i = 0; i < numRequests; i += 1) {
++    promises.push(fetch('/beacon', {keepalive: true, cache: 'no-store'}));
++}
++document.title = 'Waiting';
++Promise.all(promises).then(() => {
++    document.title = 'Resolved';
++}, () => {
++    document.title = 'Rejected';
++});
++</script>
+--- /dev/null
++++ b/content/test/data/file_input.html
+@@ -0,0 +1 @@
++<input type="file" id="fileinput" />
+--- /dev/null
++++ b/content/test/data/file_input_subframe.html
+@@ -0,0 +1,2 @@
++<iframe srcdoc="<form action='title2.html' enctype='multipart/form-data' method='post'><input type='file' id='fileinput' /></form>">
++</iframe>
+--- /dev/null
++++ b/content/test/data/filesystem_url_navigations.html
+@@ -0,0 +1,161 @@
++<html>
++<body onload="setupHandlers()">
++
++<h3>HTML mimetype</h3>
++
++<a download id="download-link">&lt;a download link&gt;</a>
++<br><br>
++<button id='navigate-top-frame-to-html'>
++  Navigate top frame to filesystem URL HTML
++</button>
++<br>
++<button id='window-open-html'>
++  Open new window with a filesystem URL HTML
++</button>
++<button id='window-open-redirect'>
++  Open new window with a redirect to filesystem URL
++</button>
++<br>
++<form method="post" id="form-post-to-html-form">
++  <input type=submit id='form-post-to-html'
++      value="Submit form to filesystem URL HTML">
++</form>
++
++<h3>octet-stream mimetype</h3>
++
++<button id='navigate-top-frame-to-octetstream'>
++  Navigate top frame to filesystem URL octet-stream
++</button>
++<br>
++<button id='window-open-octetstream'>
++  Open new window with a filesystem URL octet-stream
++</button>
++<form method="post" id="form-post-to-octetstream-form">
++  <input type=submit id="form-post-to-octetstream"
++      value="Submit form to filesystem URL octet-stream">
++</form>
++<h3>PDF mimetype</h3>
++
++<button id='navigate-top-frame-to-pdf'>
++  Navigate top frame to filesystem URL PDF
++</button>
++<br>
++<button id='window-open-pdf'>
++  Open new window with a filesystem URL PDF
++</button>
++<br>
++<form method="post" id="form-post-to-pdf-form">
++  <input type=submit id='form-post-to-pdf'
++      value="Submit form to filesystem URL PDF">
++</form>
++
++<h3>Unknown mimetype</h3>
++
++<button id='navigate-top-frame-to-unknown-mimetype'>
++  Navigate top frame to filesystem URL unknown mimetype
++</button>
++<br>
++<button id="window-open-unknown-mimetype">
++  Open new window with a filesystem URL unknown mimetype
++</button>
++<form method="post" id="form-post-to-unknown-mimetype-form">
++  <input type=submit id='form-post-to-unknown-mimetype'
++         value='Submit form to filesystem URL unknown mimetype'>
++</form>
++
++<script>
++var PDF =
++  "%PDF-1.7\n" +
++  "1 0 obj << /Type /Page /Parent 3 0 R /Resources 5 0 R /Contents 2 0 R >>\n" +
++  "endobj\n" +
++  "2 0 obj << /Length 51 >>\n" +
++  " stream BT\n" +
++  " /F1 12 Tf\n" +
++  " 1 0 0 1 100 20 Tm\n" +
++  " (Hello World)Tj\n" +
++  " ET\n" +
++  " endstream\n" +
++  "endobj\n" +
++  "3 0 obj << /Type /Pages /Kids [ 1 0 R ] /Count 1 /MediaBox [ 0 0 300 50] >>\n" +
++  "endobj\n" +
++  "4 0 obj << /Type /Font /Subtype /Type1 /Name /F1 /BaseFont/Arial >>\n" +
++  "endobj\n" +
++  "5 0 obj << /ProcSet[/PDF/Text] /Font <</F1 4 0 R >> >>\n" +
++  "endobj\n" +
++  "6 0 obj << /Type /Catalog /Pages 3 0 R >>\n" +
++  "endobj\n" +
++  "trailer << /Root 6 0 R >>";
++
++function setupHandlers() {
++  window.webkitRequestFileSystem(window.TEMPORARY, 1024, fs => {
++    // HTML mime type:
++    fs.root.getFile('test.html', {create: true}, entry => {
++      entry.createWriter(w => {
++        w.write(new Blob([
++            "NAVIGATION_SUCCESSFUL" +
++            "<script" + ">console.log('NAVIGATION_SUCCESSFUL')<" + "/script>"],
++            {type: "text/html"}));
++      });
++      document.getElementById("download-link").href = entry.toURL();
++      document.getElementById("navigate-top-frame-to-html").onclick = function() {
++        top.location.href = entry.toURL();
++      };
++      document.getElementById("window-open-html").onclick = function() {
++        window.open(entry.toURL());
++      };
++      document.getElementById("window-open-redirect").onclick = function() {
++        window.open("/server-redirect?" + entry.toURL());
++      };
++      document.getElementById("form-post-to-html-form").action = entry.toURL();
++
++      // PDF:
++      fs.root.getFile('test.pdf', {create: true}, entry => {
++        entry.createWriter(w => {
++          var blob = new Blob([PDF], {type: "application/pdf"});
++          w.write(blob);
++        });
++        document.getElementById("navigate-top-frame-to-pdf").onclick = function() {
++          top.location.href = entry.toURL();
++        };
++        document.getElementById("window-open-pdf").onclick = function() {
++          window.open(entry.toURL());
++        };
++        document.getElementById("form-post-to-pdf-form").action = entry.toURL();
++
++        // Binary mime type:
++        fs.root.getFile('test.binary', {create: true}, entry => {
++          entry.createWriter(w => {
++            w.write(new Blob(["testdata"], {type: "application/octet-stream"}));
++          });
++          document.getElementById("navigate-top-frame-to-octetstream").onclick = function() {
++            top.location.href = entry.toURL();
++          };
++          document.getElementById("window-open-octetstream").onclick = function() {
++            window.open(entry.toURL());
++          };
++          document.getElementById("form-post-to-octetstream-form").action = entry.toURL();
++
++          // Unknown mime type:
++          fs.root.getFile('test.unknown', {create: true}, entry => {
++            entry.createWriter(w => {
++              w.write(new Blob(["test"], {type: "unknown/mimetype"}));
++            });
++            document.getElementById("navigate-top-frame-to-unknown-mimetype").onclick = function() {
++              top.location.href = entry.toURL();
++            };
++            document.getElementById("window-open-unknown-mimetype").onclick = function() {
++              window.open(entry.toURL());
++            };
++            document.getElementById("form-post-to-unknown-mimetype-form").action = entry.toURL();
++
++            if (window.domAutomationController)
++              window.domAutomationController.send("READY");
++          });
++        });
++      });
++    });
++  });
++}
++</script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_dynamic_page.html
+@@ -0,0 +1,16 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++<script>
++  function addNewText() {
++    document.querySelector('div').innerText = 'result result result result result';
++  }
++</script>
++</head>
++<body>
++This is a find-in-page test page with dynamically added text.</br>
++result result result
++<div></div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_embedded_pdf_page.html
+@@ -0,0 +1,13 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++</head>
++<body>
++This a test page for find-in-page with two embedded PDFs. This page should contain 13 matches total for "result".</br>
++<iframe src="find_in_pdf_page.pdf"></iframe></br>
++result</br>
++<iframe src="find_in_pdf_page.pdf"></iframe></br>
++result</br>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_hidden_frame.html
+@@ -0,0 +1,2 @@
++<div>hello</div><iframe style="display:inline;width:0;height:0;border:none" src="data:text/html,hello"></iframe>
++<iframe style="visibility:hidden" src="data:text/html,hello"></iframe>
+--- /dev/null
++++ b/content/test/data/find_in_long_page.html
+@@ -0,0 +1,2011 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++</head>
++<body>
++This is a long test page for find-in-page. Pi to 100,000 digits follows:</br>
++</br>
++3.</br>
++14159265358979323846264338327950288419716939937510</br>
++58209749445923078164062862089986280348253421170679</br>
++82148086513282306647093844609550582231725359408128</br>
++48111745028410270193852110555964462294895493038196</br>
++44288109756659334461284756482337867831652712019091</br>
++45648566923460348610454326648213393607260249141273</br>
++72458700660631558817488152092096282925409171536436</br>
++78925903600113305305488204665213841469519415116094</br>
++33057270365759591953092186117381932611793105118548</br>
++07446237996274956735188575272489122793818301194912</br>
++98336733624406566430860213949463952247371907021798</br>
++60943702770539217176293176752384674818467669405132</br>
++00056812714526356082778577134275778960917363717872</br>
++14684409012249534301465495853710507922796892589235</br>
++42019956112129021960864034418159813629774771309960</br>
++51870721134999999837297804995105973173281609631859</br>
++50244594553469083026425223082533446850352619311881</br>
++71010003137838752886587533208381420617177669147303</br>
++59825349042875546873115956286388235378759375195778</br>
++18577805321712268066130019278766111959092164201989</br>
++38095257201065485863278865936153381827968230301952</br>
++03530185296899577362259941389124972177528347913151</br>
++55748572424541506959508295331168617278558890750983</br>
++81754637464939319255060400927701671139009848824012</br>
++85836160356370766010471018194295559619894676783744</br>
++94482553797747268471040475346462080466842590694912</br>
++93313677028989152104752162056966024058038150193511</br>
++25338243003558764024749647326391419927260426992279</br>
++67823547816360093417216412199245863150302861829745</br>
++55706749838505494588586926995690927210797509302955</br>
++32116534498720275596023648066549911988183479775356</br>
++63698074265425278625518184175746728909777727938000</br>
++81647060016145249192173217214772350141441973568548</br>
++16136115735255213347574184946843852332390739414333</br>
++45477624168625189835694855620992192221842725502542</br>
++56887671790494601653466804988627232791786085784383</br>
++82796797668145410095388378636095068006422512520511</br>
++73929848960841284886269456042419652850222106611863</br>
++06744278622039194945047123713786960956364371917287</br>
++46776465757396241389086583264599581339047802759009</br>
++94657640789512694683983525957098258226205224894077</br>
++26719478268482601476990902640136394437455305068203</br>
++49625245174939965143142980919065925093722169646151</br>
++57098583874105978859597729754989301617539284681382</br>
++68683868942774155991855925245953959431049972524680</br>
++84598727364469584865383673622262609912460805124388</br>
++43904512441365497627807977156914359977001296160894</br>
++41694868555848406353422072225828488648158456028506</br>
++01684273945226746767889525213852254995466672782398</br>
++64565961163548862305774564980355936345681743241125</br>
++15076069479451096596094025228879710893145669136867</br>
++22874894056010150330861792868092087476091782493858</br>
++90097149096759852613655497818931297848216829989487</br>
++22658804857564014270477555132379641451523746234364</br>
++54285844479526586782105114135473573952311342716610</br>
++21359695362314429524849371871101457654035902799344</br>
++03742007310578539062198387447808478489683321445713</br>
++86875194350643021845319104848100537061468067491927</br>
++81911979399520614196634287544406437451237181921799</br>
++98391015919561814675142691239748940907186494231961</br>
++56794520809514655022523160388193014209376213785595</br>
++66389377870830390697920773467221825625996615014215</br>
++03068038447734549202605414665925201497442850732518</br>
++66600213243408819071048633173464965145390579626856</br>
++10055081066587969981635747363840525714591028970641</br>
++40110971206280439039759515677157700420337869936007</br>
++23055876317635942187312514712053292819182618612586</br>
++73215791984148488291644706095752706957220917567116</br>
++72291098169091528017350671274858322287183520935396</br>
++57251210835791513698820914442100675103346711031412</br>
++67111369908658516398315019701651511685171437657618</br>
++35155650884909989859982387345528331635507647918535</br>
++89322618548963213293308985706420467525907091548141</br>
++65498594616371802709819943099244889575712828905923</br>
++23326097299712084433573265489382391193259746366730</br>
++58360414281388303203824903758985243744170291327656</br>
++18093773444030707469211201913020330380197621101100</br>
++44929321516084244485963766983895228684783123552658</br>
++21314495768572624334418930396864262434107732269780</br>
++28073189154411010446823252716201052652272111660396</br>
++66557309254711055785376346682065310989652691862056</br>
++47693125705863566201855810072936065987648611791045</br>
++33488503461136576867532494416680396265797877185560</br>
++84552965412665408530614344431858676975145661406800</br>
++70023787765913440171274947042056223053899456131407</br>
++11270004078547332699390814546646458807972708266830</br>
++63432858785698305235808933065757406795457163775254</br>
++20211495576158140025012622859413021647155097925923</br>
++09907965473761255176567513575178296664547791745011</br>
++29961489030463994713296210734043751895735961458901</br>
++93897131117904297828564750320319869151402870808599</br>
++04801094121472213179476477726224142548545403321571</br>
++85306142288137585043063321751829798662237172159160</br>
++77166925474873898665494945011465406284336639379003</br>
++97692656721463853067360965712091807638327166416274</br>
++88880078692560290228472104031721186082041900042296</br>
++61711963779213375751149595015660496318629472654736</br>
++42523081770367515906735023507283540567040386743513</br>
++62222477158915049530984448933309634087807693259939</br>
++78054193414473774418426312986080998886874132604721</br>
++56951623965864573021631598193195167353812974167729</br>
++47867242292465436680098067692823828068996400482435</br>
++40370141631496589794092432378969070697794223625082</br>
++21688957383798623001593776471651228935786015881617</br>
++55782973523344604281512627203734314653197777416031</br>
++99066554187639792933441952154134189948544473456738</br>
++31624993419131814809277771038638773431772075456545</br>
++32207770921201905166096280490926360197598828161332</br>
++31666365286193266863360627356763035447762803504507</br>
++77235547105859548702790814356240145171806246436267</br>
++94561275318134078330336254232783944975382437205835</br>
++31147711992606381334677687969597030983391307710987</br>
++04085913374641442822772634659470474587847787201927</br>
++71528073176790770715721344473060570073349243693113</br>
++83504931631284042512192565179806941135280131470130</br>
++47816437885185290928545201165839341965621349143415</br>
++95625865865570552690496520985803385072242648293972</br>
++85847831630577775606888764462482468579260395352773</br>
++48030480290058760758251047470916439613626760449256</br>
++27420420832085661190625454337213153595845068772460</br>
++29016187667952406163425225771954291629919306455377</br>
++99140373404328752628889639958794757291746426357455</br>
++25407909145135711136941091193932519107602082520261</br>
++87985318877058429725916778131496990090192116971737</br>
++27847684726860849003377024242916513005005168323364</br>
++35038951702989392233451722013812806965011784408745</br>
++19601212285993716231301711444846409038906449544400</br>
++61986907548516026327505298349187407866808818338510</br>
++22833450850486082503930213321971551843063545500766</br>
++82829493041377655279397517546139539846833936383047</br>
++46119966538581538420568533862186725233402830871123</br>
++28278921250771262946322956398989893582116745627010</br>
++21835646220134967151881909730381198004973407239610</br>
++36854066431939509790190699639552453005450580685501</br>
++95673022921913933918568034490398205955100226353536</br>
++19204199474553859381023439554495977837790237421617</br>
++27111723643435439478221818528624085140066604433258</br>
++88569867054315470696574745855033232334210730154594</br>
++05165537906866273337995851156257843229882737231989</br>
++87571415957811196358330059408730681216028764962867</br>
++44604774649159950549737425626901049037781986835938</br>
++14657412680492564879855614537234786733039046883834</br>
++36346553794986419270563872931748723320837601123029</br>
++91136793862708943879936201629515413371424892830722</br>
++01269014754668476535761647737946752004907571555278</br>
++19653621323926406160136358155907422020203187277605</br>
++27721900556148425551879253034351398442532234157623</br>
++36106425063904975008656271095359194658975141310348</br>
++22769306247435363256916078154781811528436679570611</br>
++08615331504452127473924544945423682886061340841486</br>
++37767009612071512491404302725386076482363414334623</br>
++51897576645216413767969031495019108575984423919862</br>
++91642193994907236234646844117394032659184044378051</br>
++33389452574239950829659122850855582157250310712570</br>
++12668302402929525220118726767562204154205161841634</br>
++84756516999811614101002996078386909291603028840026</br>
++91041407928862150784245167090870006992821206604183</br>
++71806535567252532567532861291042487761825829765157</br>
++95984703562226293486003415872298053498965022629174</br>
++87882027342092222453398562647669149055628425039127</br>
++57710284027998066365825488926488025456610172967026</br>
++64076559042909945681506526530537182941270336931378</br>
++51786090407086671149655834343476933857817113864558</br>
++73678123014587687126603489139095620099393610310291</br>
++61615288138437909904231747336394804575931493140529</br>
++76347574811935670911013775172100803155902485309066</br>
++92037671922033229094334676851422144773793937517034</br>
++43661991040337511173547191855046449026365512816228</br>
++82446257591633303910722538374218214088350865739177</br>
++15096828874782656995995744906617583441375223970968</br>
++34080053559849175417381883999446974867626551658276</br>
++58483588453142775687900290951702835297163445621296</br>
++40435231176006651012412006597558512761785838292041</br>
++97484423608007193045761893234922927965019875187212</br>
++72675079812554709589045563579212210333466974992356</br>
++30254947802490114195212382815309114079073860251522</br>
++74299581807247162591668545133312394804947079119153</br>
++26734302824418604142636395480004480026704962482017</br>
++92896476697583183271314251702969234889627668440323</br>
++26092752496035799646925650493681836090032380929345</br>
++95889706953653494060340216654437558900456328822505</br>
++45255640564482465151875471196218443965825337543885</br>
++69094113031509526179378002974120766514793942590298</br>
++96959469955657612186561967337862362561252163208628</br>
++69222103274889218654364802296780705765615144632046</br>
++92790682120738837781423356282360896320806822246801</br>
++22482611771858963814091839036736722208883215137556</br>
++00372798394004152970028783076670944474560134556417</br>
++25437090697939612257142989467154357846878861444581</br>
++23145935719849225284716050492212424701412147805734</br>
++55105008019086996033027634787081081754501193071412</br>
++23390866393833952942578690507643100638351983438934</br>
++15961318543475464955697810382930971646514384070070</br>
++73604112373599843452251610507027056235266012764848</br>
++30840761183013052793205427462865403603674532865105</br>
++70658748822569815793678976697422057505968344086973</br>
++50201410206723585020072452256326513410559240190274</br>
++21624843914035998953539459094407046912091409387001</br>
++26456001623742880210927645793106579229552498872758</br>
++46101264836999892256959688159205600101655256375678</br>
++56672279661988578279484885583439751874454551296563</br>
++44348039664205579829368043522027709842942325330225</br>
++76341807039476994159791594530069752148293366555661</br>
++56787364005366656416547321704390352132954352916941</br>
++45990416087532018683793702348886894791510716378529</br>
++02345292440773659495630510074210871426134974595615</br>
++13849871375704710178795731042296906667021449863746</br>
++45952808243694457897723300487647652413390759204340</br>
++19634039114732023380715095222010682563427471646024</br>
++33544005152126693249341967397704159568375355516673</br>
++02739007497297363549645332888698440611964961627734</br>
++49518273695588220757355176651589855190986665393549</br>
++48106887320685990754079234240230092590070173196036</br>
++22547564789406475483466477604114632339056513433068</br>
++44953979070903023460461470961696886885014083470405</br>
++46074295869913829668246818571031887906528703665083</br>
++24319744047718556789348230894310682870272280973624</br>
++80939962706074726455399253994428081137369433887294</br>
++06307926159599546262462970706259484556903471197299</br>
++64090894180595343932512362355081349490043642785271</br>
++38315912568989295196427287573946914272534366941532</br>
++36100453730488198551706594121735246258954873016760</br>
++02988659257866285612496655235338294287854253404830</br>
++83307016537228563559152534784459818313411290019992</br>
++05981352205117336585640782648494276441137639386692</br>
++48031183644536985891754426473998822846218449008777</br>
++69776312795722672655562596282542765318300134070922</br>
++33436577916012809317940171859859993384923549564005</br>
++70995585611349802524990669842330173503580440811685</br>
++52653117099570899427328709258487894436460050410892</br>
++26691783525870785951298344172953519537885534573742</br>
++60859029081765155780390594640873506123226112009373</br>
++10804854852635722825768203416050484662775045003126</br>
++20080079980492548534694146977516493270950493463938</br>
++24322271885159740547021482897111777923761225788734</br>
++77188196825462981268685817050740272550263329044976</br>
++27789442362167411918626943965067151577958675648239</br>
++93917604260176338704549901761436412046921823707648</br>
++87834196896861181558158736062938603810171215855272</br>
++66830082383404656475880405138080163363887421637140</br>
++64354955618689641122821407533026551004241048967835</br>
++28588290243670904887118190909494533144218287661810</br>
++31007354770549815968077200947469613436092861484941</br>
++78501718077930681085469000944589952794243981392135</br>
++05586422196483491512639012803832001097738680662877</br>
++92397180146134324457264009737425700735921003154150</br>
++89367930081699805365202760072774967458400283624053</br>
++46037263416554259027601834840306811381855105979705</br>
++66400750942608788573579603732451414678670368809880</br>
++60971642584975951380693094494015154222219432913021</br>
++73912538355915031003330325111749156969174502714943</br>
++31515588540392216409722910112903552181576282328318</br>
++23425483261119128009282525619020526301639114772473</br>
++31485739107775874425387611746578671169414776421441</br>
++11126358355387136101102326798775641024682403226483</br>
++46417663698066378576813492045302240819727856471983</br>
++96308781543221166912246415911776732253264335686146</br>
++18654522268126887268445968442416107854016768142080</br>
++88502800541436131462308210259417375623899420757136</br>
++27516745731891894562835257044133543758575342698699</br>
++47254703165661399199968262824727064133622217892390</br>
++31760854289437339356188916512504244040089527198378</br>
++73864805847268954624388234375178852014395600571048</br>
++11949884239060613695734231559079670346149143447886</br>
++36041031823507365027785908975782727313050488939890</br>
++09923913503373250855982655867089242612429473670193</br>
++90772713070686917092646254842324074855036608013604</br>
++66895118400936686095463250021458529309500009071510</br>
++58236267293264537382104938724996699339424685516483</br>
++26113414611068026744663733437534076429402668297386</br>
++52209357016263846485285149036293201991996882851718</br>
++39536691345222444708045923966028171565515656661113</br>
++59823112250628905854914509715755390024393153519090</br>
++21071194573002438801766150352708626025378817975194</br>
++78061013715004489917210022201335013106016391541589</br>
++57803711779277522597874289191791552241718958536168</br>
++05947412341933984202187456492564434623925319531351</br>
++03311476394911995072858430658361935369329699289837</br>
++91494193940608572486396883690326556436421664425760</br>
++79147108699843157337496488352927693282207629472823</br>
++81537409961545598798259891093717126218283025848112</br>
++38901196822142945766758071865380650648702613389282</br>
++29949725745303328389638184394477077940228435988341</br>
++00358385423897354243956475556840952248445541392394</br>
++10001620769363684677641301781965937997155746854194</br>
++63348937484391297423914336593604100352343777065888</br>
++67781139498616478747140793263858738624732889645643</br>
++59877466763847946650407411182565837887845485814896</br>
++29612739984134427260860618724554523606431537101127</br>
++46809778704464094758280348769758948328241239292960</br>
++58294861919667091895808983320121031843034012849511</br>
++62035342801441276172858302435598300320420245120728</br>
++72535581195840149180969253395075778400067465526031</br>
++44616705082768277222353419110263416315714740612385</br>
++04258459884199076112872580591139356896014316682831</br>
++76323567325417073420817332230462987992804908514094</br>
++79036887868789493054695570307261900950207643349335</br>
++91060245450864536289354568629585313153371838682656</br>
++17862273637169757741830239860065914816164049449650</br>
++11732131389574706208847480236537103115089842799275</br>
++44268532779743113951435741722197597993596852522857</br>
++45263796289612691572357986620573408375766873884266</br>
++40599099350500081337543245463596750484423528487470</br>
++14435454195762584735642161981340734685411176688311</br>
++86544893776979566517279662326714810338643913751865</br>
++94673002443450054499539974237232871249483470604406</br>
++34716063258306498297955101095418362350303094530973</br>
++35834462839476304775645015008507578949548931393944</br>
++89921612552559770143685894358587752637962559708167</br>
++76438001254365023714127834679261019955852247172201</br>
++77723700417808419423948725406801556035998390548985</br>
++72354674564239058585021671903139526294455439131663</br>
++13453089390620467843877850542393905247313620129476</br>
++91874975191011472315289326772533918146607300089027</br>
++76896311481090220972452075916729700785058071718638</br>
++10549679731001678708506942070922329080703832634534</br>
++52038027860990556900134137182368370991949516489600</br>
++75504934126787643674638490206396401976668559233565</br>
++46391383631857456981471962108410809618846054560390</br>
++38455343729141446513474940784884423772175154334260</br>
++30669883176833100113310869042193903108014378433415</br>
++13709243530136776310849135161564226984750743032971</br>
++67469640666531527035325467112667522460551199581831</br>
++96376370761799191920357958200759560530234626775794</br>
++39363074630569010801149427141009391369138107258137</br>
++81357894005599500183542511841721360557275221035268</br>
++03735726527922417373605751127887218190844900617801</br>
++38897107708229310027976659358387589093956881485602</br>
++63224393726562472776037890814458837855019702843779</br>
++36240782505270487581647032458129087839523245323789</br>
++60298416692254896497156069811921865849267704039564</br>
++81278102179913217416305810554598801300484562997651</br>
++12124153637451500563507012781592671424134210330156</br>
++61653560247338078430286552572227530499988370153487</br>
++93008062601809623815161366903341111386538510919367</br>
++39383522934588832255088706450753947395204396807906</br>
++70868064450969865488016828743437861264538158342807</br>
++53061845485903798217994599681154419742536344399602</br>
++90251001588827216474500682070419376158454712318346</br>
++00726293395505482395571372568402322682130124767945</br>
++22644820910235647752723082081063518899152692889108</br>
++45557112660396503439789627825001611015323516051965</br>
++59042118449499077899920073294769058685778787209829</br>
++01352956613978884860509786085957017731298155314951</br>
++68146717695976099421003618355913877781769845875810</br>
++44662839988060061622984861693533738657877359833616</br>
++13384133853684211978938900185295691967804554482858</br>
++48370117096721253533875862158231013310387766827211</br>
++57269495181795897546939926421979155233857662316762</br>
++75475703546994148929041301863861194391962838870543</br>
++67774322427680913236544948536676800000106526248547</br>
++30558615989991401707698385483188750142938908995068</br>
++54530765116803337322265175662207526951791442252808</br>
++16517166776672793035485154204023817460892328391703</br>
++27542575086765511785939500279338959205766827896776</br>
++44531840404185540104351348389531201326378369283580</br>
++82719378312654961745997056745071833206503455664403</br>
++44904536275600112501843356073612227659492783937064</br>
++78426456763388188075656121689605041611390390639601</br>
++62022153684941092605387688714837989559999112099164</br>
++64644119185682770045742434340216722764455893301277</br>
++81586869525069499364610175685060167145354315814801</br>
++05458860564550133203758645485840324029871709348091</br>
++05562116715468484778039447569798042631809917564228</br>
++09873998766973237695737015808068229045992123661689</br>
++02596273043067931653114940176473769387351409336183</br>
++32161428021497633991898354848756252987524238730775</br>
++59555955465196394401821840998412489826236737714672</br>
++26061633643296406335728107078875816404381485018841</br>
++14318859882769449011932129682715888413386943468285</br>
++90066640806314077757725705630729400492940302420498</br>
++41656547973670548558044586572022763784046682337985</br>
++28271057843197535417950113472736257740802134768260</br>
++45022851579795797647467022840999561601569108903845</br>
++82450267926594205550395879229818526480070683765041</br>
++83656209455543461351341525700659748819163413595567</br>
++19649654032187271602648593049039787489589066127250</br>
++79482827693895352175362185079629778514618843271922</br>
++32238101587444505286652380225328438913752738458923</br>
++84422535472653098171578447834215822327020690287232</br>
++33005386216347988509469547200479523112015043293226</br>
++62827276321779088400878614802214753765781058197022</br>
++26309717495072127248479478169572961423658595782090</br>
++83073323356034846531873029302665964501371837542889</br>
++75579714499246540386817992138934692447419850973346</br>
++26793321072686870768062639919361965044099542167627</br>
++84091466985692571507431574079380532392523947755744</br>
++15918458215625181921552337096074833292349210345146</br>
++26437449805596103307994145347784574699992128599999</br>
++39961228161521931488876938802228108300198601654941</br>
++65426169685867883726095877456761825072759929508931</br>
++80521872924610867639958916145855058397274209809097</br>
++81729323930106766386824040111304024700735085782872</br>
++46271349463685318154696904669686939254725194139929</br>
++14652423857762550047485295476814795467007050347999</br>
++58886769501612497228204030399546327883069597624936</br>
++15101024365553522306906129493885990157346610237122</br>
++35478911292547696176005047974928060721268039226911</br>
++02777226102544149221576504508120677173571202718024</br>
++29681062037765788371669091094180744878140490755178</br>
++20385653909910477594141321543284406250301802757169</br>
++65082096427348414695726397884256008453121406593580</br>
++90412711359200419759851362547961606322887361813673</br>
++73244506079244117639975974619383584574915988097667</br>
++44709300654634242346063423747466608043170126005205</br>
++59284936959414340814685298150539471789004518357551</br>
++54125223590590687264878635752541911288877371766374</br>
++86027660634960353679470269232297186832771739323619</br>
++20077745221262475186983349515101986426988784717193</br>
++96649769070825217423365662725928440620430214113719</br>
++92278526998469884770232382384005565551788908766136</br>
++01304770984386116870523105531491625172837327286760</br>
++07248172987637569816335415074608838663640693470437</br>
++20668865127568826614973078865701568501691864748854</br>
++16791545965072342877306998537139043002665307839877</br>
++63850323818215535597323530686043010675760838908627</br>
++04984188859513809103042359578249514398859011318583</br>
++58406674723702971497850841458530857813391562707603</br>
++56390763947311455495832266945702494139831634332378</br>
++97595568085683629725386791327505554252449194358912</br>
++84050452269538121791319145135009938463117740179715</br>
++12283785460116035955402864405902496466930707769055</br>
++48102885020808580087811577381719174177601733073855</br>
++47580060560143377432990127286772530431825197579167</br>
++92969965041460706645712588834697979642931622965520</br>
++16879730003564630457930884032748077181155533090988</br>
++70255052076804630346086581653948769519600440848206</br>
++59673794731680864156456505300498816164905788311543</br>
++45485052660069823093157776500378070466126470602145</br>
++75057932709620478256152471459189652236083966456241</br>
++05195510522357239739512881816405978591427914816542</br>
++63289200428160913693777372229998332708208296995573</br>
++77273756676155271139225880552018988762011416800546</br>
++87365580633471603734291703907986396522961312801782</br>
++67971728982293607028806908776866059325274637840539</br>
++76918480820410219447197138692560841624511239806201</br>
++13184541244782050110798760717155683154078865439041</br>
++21087303240201068534194723047666672174986986854707</br>
++67812051247367924791931508564447753798537997322344</br>
++56122785843296846647513336573692387201464723679427</br>
++87004250325558992688434959287612400755875694641370</br>
++56251400117971331662071537154360068764773186755871</br>
++48783989081074295309410605969443158477539700943988</br>
++39491443235366853920994687964506653398573888786614</br>
++76294434140104988899316005120767810358861166020296</br>
++11936396821349607501116498327856353161451684576956</br>
++87109002999769841263266502347716728657378579085746</br>
++64607722834154031144152941880478254387617707904300</br>
++01566986776795760909966936075594965152736349811896</br>
++41304331166277471233881740603731743970540670310967</br>
++67657486953587896700319258662594105105335843846560</br>
++23391796749267844763708474978333655579007384191473</br>
++19886271352595462518160434225372996286326749682405</br>
++80602964211463864368642247248872834341704415734824</br>
++81833301640566959668866769563491416328426414974533</br>
++34999948000266998758881593507357815195889900539512</br>
++08535103572613736403436753471410483601754648830040</br>
++78464167452167371904831096767113443494819262681110</br>
++73994825060739495073503169019731852119552635632584</br>
++33909982249862406703107683184466072912487475403161</br>
++79699411397387765899868554170318847788675929026070</br>
++04321266617919223520938227878880988633599116081923</br>
++53555704646349113208591897961327913197564909760001</br>
++39962344455350143464268604644958624769094347048293</br>
++29414041114654092398834443515913320107739441118407</br>
++41076849810663472410482393582740194493566516108846</br>
++31256785297769734684303061462418035852933159734583</br>
++03845541033701091676776374276210213701354854450926</br>
++30719011473184857492331816720721372793556795284439</br>
++25481560913728128406333039373562420016045664557414</br>
++58816605216660873874804724339121295587776390696903</br>
++70788285277538940524607584962315743691711317613478</br>
++38827194168606625721036851321566478001476752310393</br>
++57860689611125996028183930954870905907386135191459</br>
++18195102973278755710497290114871718971800469616977</br>
++70017913919613791417162707018958469214343696762927</br>
++45910994006008498356842520191559370370101104974733</br>
++94938778859894174330317853487076032219829705797511</br>
++91440510994235883034546353492349826883624043327267</br>
++41554030161950568065418093940998202060999414021689</br>
++09007082133072308966211977553066591881411915778362</br>
++72927461561857103721724710095214236964830864102592</br>
++88745799932237495519122195190342445230753513380685</br>
++68073544649951272031744871954039761073080602699062</br>
++58076020292731455252078079914184290638844373499681</br>
++45827337207266391767020118300464819000241308350884</br>
++65841521489912761065137415394356572113903285749187</br>
++69094413702090517031487773461652879848235338297260</br>
++13611098451484182380812054099612527458088109948697</br>
++22161285248974255555160763716750548961730168096138</br>
++03811914361143992106380050832140987604599309324851</br>
++02516829446726066613815174571255975495358023998314</br>
++69822036133808284993567055755247129027453977621404</br>
++93182014658008021566536067765508783804304134310591</br>
++80460680083459113664083488740800574127258670479225</br>
++83191274157390809143831384564241509408491339180968</br>
++40251163991936853225557338966953749026620923261318</br>
++85589158083245557194845387562878612885900410600607</br>
++37465014026278240273469625282171749415823317492396</br>
++83530136178653673760642166778137739951006589528877</br>
++42766263684183068019080460984980946976366733566228</br>
++29151323527888061577682781595886691802389403330764</br>
++41912403412022316368577860357276941541778826435238</br>
++13190502808701857504704631293335375728538660588890</br>
++45831114507739429352019943219711716422350056440429</br>
++79892081594307167019857469273848653833436145794634</br>
++17592257389858800169801475742054299580124295810545</br>
++65108310462972829375841611625325625165724980784920</br>
++99897990620035936509934721582965174135798491047111</br>
++66079158743698654122234834188772292944633517865385</br>
++67319625598520260729476740726167671455736498121056</br>
++77716893484917660771705277187601199908144113058645</br>
++57791052568430481144026193840232247093924980293355</br>
++07318458903553971330884461741079591625117148648744</br>
++68611247605428673436709046678468670274091881014249</br>
++71114965781772427934707021668829561087779440504843</br>
++75284433751088282647719785400065097040330218625561</br>
++47332117771174413350281608840351781452541964320309</br>
++57601869464908868154528562134698835544456024955666</br>
++84366029221951248309106053772019802183101032704178</br>
++38665447181260397190688462370857518080035327047185</br>
++65949947612424811099928867915896904956394762460842</br>
++40659309486215076903149870206735338483495508363660</br>
++17848771060809804269247132410009464014373603265645</br>
++18456679245666955100150229833079849607994988249706</br>
++17236744936122622296179081431141466094123415935930</br>
++95854079139087208322733549572080757165171876599449</br>
++85693795623875551617575438091780528029464200447215</br>
++39628074636021132942559160025707356281263873310600</br>
++58910652457080244749375431841494014821199962764531</br>
++06800663118382376163966318093144467129861552759820</br>
++14514102756006892975024630401735148919457636078935</br>
++28555053173314164570504996443890936308438744847839</br>
++61684051845273288403234520247056851646571647713932</br>
++37755172947951261323982296023945485797545865174587</br>
++87713318138752959809412174227300352296508089177705</br>
++06825924882232215493804837145478164721397682096332</br>
++05083056479204820859204754998573203888763916019952</br>
++40918938945576768749730856955958010659526503036266</br>
++15975066222508406742889826590751063756356996821151</br>
++09496697445805472886936310203678232501823237084597</br>
++90111548472087618212477813266330412076216587312970</br>
++81123075815982124863980721240786887811450165582513</br>
++61789030708608701989758898074566439551574153631931</br>
++91981070575336633738038272152798849350397480015890</br>
++51942087971130805123393322190346624991716915094854</br>
++14018710603546037946433790058909577211808044657439</br>
++62806186717861017156740967662080295766577051291209</br>
++90794430463289294730615951043090222143937184956063</br>
++40561893425130572682914657832933405246350289291754</br>
++70872564842600349629611654138230077313327298305001</br>
++60256724014185152041890701154288579920812198449315</br>
++69990591820118197335001261877280368124819958770702</br>
++07532406361259313438595542547781961142935163561223</br>
++49666152261473539967405158499860355295332924575238</br>
++88101362023476246690558164389678630976273655047243</br>
++48643071218494373485300606387644566272186661701238</br>
++12771562137974614986132874411771455244470899714452</br>
++28856629424402301847912054784985745216346964489738</br>
++92062401943518310088283480249249085403077863875165</br>
++91130287395878709810077271827187452901397283661484</br>
++21428717055317965430765045343246005363614726181809</br>
++69976933486264077435199928686323835088756683595097</br>
++26557481543194019557685043724800102041374983187225</br>
++96773871549583997184449072791419658459300839426370</br>
++20875635398216962055324803212267498911402678528599</br>
++67340524203109179789990571882194939132075343170798</br>
++00237365909853755202389116434671855829068537118979</br>
++52626234492483392496342449714656846591248918556629</br>
++58932990903523923333364743520370770101084388003290</br>
++75983421701855422838616172104176030116459187805393</br>
++67447472059985023582891833692922337323999480437108</br>
++41965947316265482574809948250999183300697656936715</br>
++96893644933488647442135008407006608835972350395323</br>
++40179582557036016936990988671132109798897070517280</br>
++75585519126993067309925070407024556850778679069476</br>
++61262980822516331363995211709845280926303759224267</br>
++42575599892892783704744452189363203489415521044597</br>
++26188380030067761793138139916205806270165102445886</br>
++92476492468919246121253102757313908404700071435613</br>
++62316992371694848132554200914530410371354532966206</br>
++39210547982439212517254013231490274058589206321758</br>
++94943454890684639931375709103463327141531622328055</br>
++22972979538018801628590735729554162788676498274186</br>
++16421878988574107164906919185116281528548679417363</br>
++89066538857642291583425006736124538491606741373401</br>
++73572779956341043326883569507814931378007362354180</br>
++07061918026732855119194267609122103598746924117283</br>
++74931261633950012395992405084543756985079570462226</br>
++64619000103500490183034153545842833764378111988556</br>
++31877779253720116671853954183598443830520376281944</br>
++07615941068207169703022851522505731260930468984234</br>
++33152732131361216582808075212631547730604423774753</br>
++50595228717440266638914881717308643611138906942027</br>
++90881431194487994171540421034121908470940802540239</br>
++32942945493878640230512927119097513536000921971105</br>
++41209668311151632870542302847007312065803262641711</br>
++61659576132723515666625366727189985341998952368848</br>
++30999302757419916463841427077988708874229277053891</br>
++22717248632202889842512528721782603050099451082478</br>
++35729056919885554678860794628053712270424665431921</br>
++45281760741482403827835829719301017888345674167811</br>
++39895475044833931468963076339665722672704339321674</br>
++54218245570625247972199786685427989779923395790575</br>
++81890622525473582205236424850783407110144980478726</br>
++69199018643882293230538231855973286978092225352959</br>
++10173414073348847610055640182423921926950620831838</br>
++14546983923664613639891012102177095976704908305081</br>
++85470419466437131229969235889538493013635657618610</br>
++60622287055994233716310212784574464639897381885667</br>
++46260879482018647487672727222062676465338099801966</br>
++88368099415907577685263986514625333631245053640261</br>
++05696055131838131742611844201890888531963569869627</br>
++95036738424313011331753305329802016688817481342988</br>
++68158557781034323175306478498321062971842518438553</br>
++44276201282345707169885305183261796411785796088881</br>
++50329602290705614476220915094739035946646916235396</br>
++80920139457817589108893199211226007392814916948161</br>
++52738427362642980982340632002440244958944561291670</br>
++49508235812487391799648641133480324757775219708932</br>
++77226234948601504665268143987705161531702669692970</br>
++49283162855042128981467061953319702695072143782304</br>
++76875280287354126166391708245925170010714180854800</br>
++63692325946201900227808740985977192180515853214739</br>
++26532515590354102092846659252999143537918253145452</br>
++90598415817637058927906909896911164381187809435371</br>
++52133226144362531449012745477269573939348154691631</br>
++16249288735747188240715039950094467319543161938554</br>
++85207665738825139639163576723151005556037263394867</br>
++20820780865373494244011579966750736071115935133195</br>
++91971209489647175530245313647709420946356969822266</br>
++73775209945168450643623824211853534887989395673187</br>
++80660610788544000550827657030558744854180577889171</br>
++92078814233511386629296671796434687600770479995378</br>
++83387870348718021842437342112273940255717690819603</br>
++09201824018842705704609262256417837526526335832424</br>
++06612533115294234579655695025068100183109004112453</br>
++79015332966156970522379210325706937051090830789479</br>
++99900499939532215362274847660361367769797856738658</br>
++46709366795885837887956259464648913766521995882869</br>
++33801836011932368578558558195556042156250883650203</br>
++32202451376215820461810670519533065306060650105488</br>
++71672453779428313388716313955969058320834168984760</br>
++65607118347136218123246227258841990286142087284956</br>
++87963932546428534307530110528571382964370999035694</br>
++88852851904029560473461311382638788975517885604249</br>
++98748316382804046848618938189590542039889872650697</br>
++62020199554841265000539442820393012748163815853039</br>
++64399254702016727593285743666616441109625663373054</br>
++09219519675148328734808957477775278344221091073111</br>
++35182804603634719818565557295714474768255285786334</br>
++93428584231187494400032296906977583159038580393535</br>
++21358860079600342097547392296733310649395601812237</br>
++81285458431760556173386112673478074585067606304822</br>
++94096530411183066710818930311088717281675195796753</br>
++47188537229309616143204006381322465841111157758358</br>
++58113501856904781536893813771847281475199835050478</br>
++12977185990847076219746058874232569958288925350419</br>
++37958260616211842368768511418316068315867994601652</br>
++05774052942305360178031335726326705479033840125730</br>
++59123396018801378254219270947673371919872873852480</br>
++57421248921183470876629667207272325650565129333126</br>
++05950577772754247124164831283298207236175057467387</br>
++01282095755443059683955556868611883971355220844528</br>
++52640081252027665557677495969626612604565245684086</br>
++13923826576858338469849977872670655519185446869846</br>
++94784957346226062942196245570853712727765230989554</br>
++50193037732166649182578154677292005212667143463209</br>
++63789185232321501897612603437368406719419303774688</br>
++09992968775824410478781232662531818459604538535438</br>
++39114496775312864260925211537673258866722604042523</br>
++49108702695809964759580579466397341906401003636190</br>
++40420331135793365424263035614570090112448008900208</br>
++01478056603710154122328891465722393145076071670643</br>
++55682743774396578906797268743847307634645167756210</br>
++30986040927170909512808630902973850445271828927496</br>
++89212106670081648583395537735919136950153162018908</br>
++88748421079870689911480466927065094076204650277252</br>
++86507289053285485614331608126930056937854178610969</br>
++69202538865034577183176686885923681488475276498468</br>
++82194973972970773718718840041432312763650481453112</br>
++28509900207424092558592529261030210673681543470152</br>
++52348786351643976235860419194129697690405264832347</br>
++00991115424260127343802208933109668636789869497799</br>
++40012601642276092608234930411806438291383473546797</br>
++25399262338791582998486459271734059225620749105308</br>
++53153718291168163721939518870095778818158685046450</br>
++76993439409874335144316263303172477474868979182092</br>
++39480833143970840673084079589358108966564775859905</br>
++56376952523265361442478023082681183103773588708924</br>
++06130313364773710116282146146616794040905186152603</br>
++60092521947218890918107335871964142144478654899528</br>
++58234394705007983038853886083103571930600277119455</br>
++80219119428999227223534587075662469261776631788551</br>
++44350218287026685610665003531050216318206017609217</br>
++98468493686316129372795187307897263735371715025637</br>
++87335797718081848784588665043358243770041477104149</br>
++34927438457587107159731559439426412570270965125108</br>
++11554824793940359768118811728247215825010949609662</br>
++53933953809221955919181885526780621499231727631632</br>
++18339896938075616855911752998450132067129392404144</br>
++59386239880938124045219148483164621014738918251010</br>
++90967738690664041589736104764365000680771056567184</br>
++86281496371118832192445663945814491486165500495676</br>
++98269030891118568798692947051352481609174324301538</br>
++36847072928989828460222373014526556798986277679680</br>
++91469798378268764311598832109043715611299766521539</br>
++63546442086919756737000573876497843768628768179249</br>
++74694384274652563163230055513041742273416464551278</br>
++12784577772457520386543754282825671412885834544435</br>
++13256205446424101103795546419058116862305964476958</br>
++70540721419852121067343324107567675758184569906930</br>
++46047522770167005684543969234041711089888993416350</br>
++58515788735343081552081177207188037910404698306957</br>
++86854739376564336319797868036718730796939242363214</br>
++48450354776315670255390065423117920153464977929066</br>
++24150832885839529054263768766896880503331722780018</br>
++58850697362324038947004718976193473443084374437599</br>
++25034178807972235859134245813144049847701732361694</br>
++71976571535319775499716278566311904691260918259124</br>
++98903676541769799036237552865263757337635269693443</br>
++54400473067198868901968147428767790866979688522501</br>
++63694985673021752313252926537589641517147955953878</br>
++42784998664563028788319620998304945198743963690706</br>
++82762657485810439112232618794059941554063270131989</br>
++89570376110532360629867480377915376751158304320849</br>
++87209202809297526498125691634250005229088726469252</br>
++84666104665392171482080130502298052637836426959733</br>
++70705392278915351056888393811324975707133102950443</br>
++03467159894487868471164383280506925077662745001220</br>
++03526203709466023414648998390252588830148678162196</br>
++77519458316771876275720050543979441245990077115205</br>
++15461993050983869825428464072555409274031325716326</br>
++40792934183342147090412542533523248021932277075355</br>
++54679587163835875018159338717423606155117101312352</br>
++56334858203651461418700492057043720182617331947157</br>
++00867578539336078622739558185797587258744102542077</br>
++10547536129404746010009409544495966288148691590389</br>
++90718659805636171376922272907641977551777201042764</br>
++96949611056220592502420217704269622154958726453989</br>
++22769766031052498085575947163107587013320886146326</br>
++64125911486338812202844406941694882615295776253250</br>
++19870359870674380469821942056381255833436421949232</br>
++27593722128905642094308235254408411086454536940496</br>
++92714940033197828613181861888111184082578659287574</br>
++26384450059944229568586460481033015388911499486935</br>
++43603022181094346676400002236255057363129462629609</br>
++61987605642599639461386923308371962659547392346241</br>
++34597795748524647837980795693198650815977675350553</br>
++91899115133525229873611277918274854200868953965835</br>
++94219633315028695611920122988898870060799927954111</br>
++88269023078913107603617634779489432032102773359416</br>
++90865007193280401716384064498787175375678118532132</br>
++84082165711075495282949749362146082155832056872321</br>
++85574065161096274874375098092230211609982633033915</br>
++46949464449100451528092508974507489676032409076898</br>
++36529406579201983152654106581368237919840906457124</br>
++68948470209357761193139980246813405200394781949866</br>
++20262400890215016616381353838151503773502296607462</br>
++79529103840686855690701575166241929872444827194293</br>
++31004854824454580718897633003232525821581280327467</br>
++96200281476243182862217105435289834820827345168018</br>
++61317195933247110746622285087106661177034653528395</br>
++77625997744672185715816126411143271794347885990892</br>
++80848669491413909771673690027775850268664654056595</br>
++03948678411107901161040085727445629384254941675946</br>
++05487117235946429105850909950214958793112196135908</br>
++31588262068233215615308683373083817327932819698387</br>
++50870834838804638847844188400318471269745437093732</br>
++98362402875197920802321878744882872843727378017827</br>
++00805878241074935751488997891173974612932035108143</br>
++27032514090304874622629423443275712600866425083331</br>
++87688650756429271605525289544921537651751492196367</br>
++18104943531785838345386525565664065725136357506435</br>
++32365089367904317025978781771903148679638408288102</br>
++09461490079715137717099061954969640070867667102330</br>
++04867263147551053723175711432231741141168062286420</br>
++63889062101923552235467116621374996932693217370431</br>
++05987225039456574924616978260970253359475020913836</br>
++67377289443869640002811034402608471289900074680776</br>
++48440887113413525033678773167977093727786821661178</br>
++65344231732264637847697875144332095340001650692130</br>
++54647689098505020301504488083426184520873053097318</br>
++94929164253229336124315143065782640702838984098416</br>
++02950309241897120971601649265613413433422298827909</br>
++92178604267981245728534580133826099587717811310216</br>
++73402565627440072968340661984806766158050216918337</br>
++23680399027931606420436812079900316264449146190219</br>
++45822969099212278855394878353830564686488165556229</br>
++43156731282743908264506116289428035016613366978240</br>
++51770155219626522725455850738640585299830379180350</br>
++43287670380925216790757120406123759632768567484507</br>
++91511473134400018325703449209097124358094479004624</br>
++94313455028900680648704293534037436032625820535790</br>
++11839564908935434510134296961754524957396062149028</br>
++87289327925206965353863964432253883275224996059869</br>
++74759882329916263545973324445163755334377492928990</br>
++58117578635555562693742691094711700216541171821975</br>
++05198317871371060510637955585889055688528879890847</br>
++50915764639074693619881507814685262133252473837651</br>
++19299015610918977792200870579339646382749068069876</br>
++91681974923656242260871541761004306089043779766785</br>
++19661891404144925270480881971498801542057787006521</br>
++59400928977760133075684796699295543365613984773806</br>
++03943688958876460549838714789684828053847017308711</br>
++17761159663505039979343869339119789887109156541709</br>
++13308260764740630571141109883938809548143782847452</br>
++88383680794188843426662220704387228874139478010177</br>
++21392281911992365405516395893474263953824829609036</br>
++90028835932774585506080131798840716244656399794827</br>
++57836501955142215513392819782269842786383916797150</br>
++91262410548725700924070045488485692950448110738087</br>
++99654748156891393538094347455697212891982717702076</br>
++66136024895814681191336141212587838955773571949863</br>
++17210844398901423948496659251731388171602663261931</br>
++06536653504147307080441493916936326237376777709585</br>
++03132559900957627319573086480424677012123270205337</br>
++42667053142448208168130306397378736642483672539837</br>
++48769098060218278578621651273856351329014890350988</br>
++32706172589325753639939790557291751600976154590447</br>
++71692265806315111028038436017374742152476085152099</br>
++01615858231257159073342173657626714239047827958728</br>
++15050956330928026684589376496497702329736413190609</br>
++82740633531089792464242134583740901169391964250459</br>
++12881340349881063540088759682005440836438651661788</br>
++05576089568967275315380819420773325979172784376256</br>
++61184319891025007491829086475149794003160703845549</br>
++46538594602745244746681231468794344161099333890899</br>
++26384118474252570445725174593257389895651857165759</br>
++61481266020310797628254165590506042479114016957900</br>
++33835657486925280074302562341949828646791447632277</br>
++40055294609039401775363356554719310001754300475047</br>
++19144899841040015867946179241610016454716551337074</br>
++07395026044276953855383439755054887109978520540117</br>
++51697475813449260794336895437832211724506873442319</br>
++89878844128542064742809735625807066983106979935260</br>
++69339213568588139121480735472846322778490808700246</br>
++77763036055512323866562951788537196730346347012229</br>
++39581606792509153217489030840886516061119011498443</br>
++41235012464692802880599613428351188471544977127847</br>
++33617662850621697787177438243625657117794500644777</br>
++18370221999106695021656757644044997940765037999954</br>
++84500271066598781360380231412683690578319046079276</br>
++52972776940436130230517870805465115424693952651271</br>
++01052927070306673024447125973939950514628404767431</br>
++36373997825918454117641332790646063658415292701903</br>
++02760173394748669603486949765417524293060407270050</br>
++59039503148522921392575594845078867977925253931765</br>
++15641619716844352436979444735596426063339105512682</br>
++60615957262170366985064732812667245219890605498802</br>
++80782881429796336696744124805982192146339565745722</br>
++10229867759974673812606936706913408155941201611596</br>
++01902377535255563006062479832612498812881929373434</br>
++76862689219239777833910733106588256813777172328315</br>
++32908252509273304785072497713944833389255208117560</br>
++84529665905539409655685417060011798572938139982583</br>
++19293679100391844099286575605993598910002969864460</br>
++97471471847010153128376263114677420914557404181590</br>
++88000649432378558393085308283054760767995243573916</br>
++31221886057549673832243195650655460852881201902363</br>
++64471270374863442172725787950342848631294491631847</br>
++53475314350413920961087960577309872013524840750576</br>
++37199253650470908582513936863463863368042891767107</br>
++60211115982887553994012007601394703366179371539630</br>
++61398636554922137415979051190835882900976566473007</br>
++33879314678913181465109316761575821351424860442292</br>
++44530411316065270097433008849903467540551864067734</br>
++26035834096086055337473627609356588531097609942383</br>
++47382222087292464497684560579562516765574088410321</br>
++73134562773585605235823638953203853402484227337163</br>
++91239732159954408284216666360232965456947035771848</br>
++73442034227706653837387506169212768015766181095420</br>
++09770836360436111059240911788954033802142652394892</br>
++96864398089261146354145715351943428507213534530183</br>
++15875628275733898268898523557799295727645229391567</br>
++47756667605108788764845349363606827805056462281359</br>
++88858792599409464460417052044700463151379754317371</br>
++87756039815962647501410906658866162180038266989961</br>
++96558058720863972117699521946678985701179833244060</br>
++18115756580742841829106151939176300591943144346051</br>
++54047710570054339000182453117733718955857603607182</br>
++86050635647997900413976180895536366960316219311325</br>
++02238517916720551806592635180362512145759262383693</br>
++48222665895576994660491938112486609099798128571823</br>
++49400661555219611220720309227764620099931524427358</br>
++94887105766238946938894464950939603304543408421024</br>
++62401048723328750081749179875543879387381439894238</br>
++01176270083719605309438394006375611645856094312951</br>
++75977139353960743227924892212670458081833137641658</br>
++18269562105872892447740035947009268662659651422050</br>
++63007859200248829186083974373235384908396432614700</br>
++05324235406470420894992102504047267810590836440074</br>
++66380020870126664209457181702946752278540074508552</br>
++37772089058168391844659282941701828823301497155423</br>
++52359117748186285929676050482038643431087795628929</br>
++25405638946621948268711042828163893975711757786915</br>
++43016505860296521745958198887868040811032843273986</br>
++71986213062055598552660364050462821523061545944744</br>
++89908839081999738747452969810776201487134000122535</br>
++52224669540931521311533791579802697955571050850747</br>
++38747507580687653764457825244326380461430428892359</br>
++34852961058269382103498000405248407084403561167817</br>
++17051281337880570564345061611933042444079826037795</br>
++11985486945591520519600930412710072778493015550388</br>
++95360338261929343797081874320949914159593396368110</br>
++62755729527800425486306005452383915106899891357882</br>
++00194117865356821491185282078521301255185184937115</br>
++03422159542244511900207393539627400208110465530207</br>
++93286725474054365271759589350071633607632161472581</br>
++54076420530200453401835723382926619153083540951202</br>
++26329165054426123619197051613839357326693760156914</br>
++42994494374485680977569630312958871916112929468188</br>
++49363386473927476012269641588489009657170861605981</br>
++47204467428664208765334799858222090619802173211614</br>
++23041947775499073873856794118982466091309169177227</br>
++42072333676350326783405863019301932429963972044451</br>
++79288122854478211953530898910125342975524727635730</br>
++22628138209180743974867145359077863353016082155991</br>
++13141442050914472935350222308171936635093468658586</br>
++56314855575862447818620108711889760652969899269328</br>
++17870557643514338206014107732926106343152533718224</br>
++33852635202177354407152818981376987551575745469397</br>
++27150488469793619500477720970561793913828989845327</br>
++42622728864710888327017372325881824465843624958059</br>
++25603381052156062061557132991560848920643403033952</br>
++62263451454283678698288074251422567451806184149564</br>
++68611163540497189768215422772247947403357152743681</br>
++94098920501136534001238467142965518673441537416150</br>
++42563256713430247655125219218035780169240326699541</br>
++74608759240920700466934039651017813485783569444076</br>
++04702325407555577647284507518268904182939661133101</br>
++60131119077398632462778219023650660374041606724962</br>
++49013743321724645409741299557052914243820807609836</br>
++48234659738866913499197840131080155813439791948528</br>
++30436739012482082444814128095443773898320059864909</br>
++15950532285791457688496257866588599917986752055455</br>
++80990045564611787552493701245532171701942828846174</br>
++02736649978475508294228020232901221630102309772151</br>
++56944642790980219082668986883426307160920791408519</br>
++76952355534886577434252775311972474308730436195113</br>
++96119080030255878387644206085044730631299277888942</br>
++72918972716989057592524467966018970748296094919064</br>
++87646937027507738664323919190422542902353189233772</br>
++93166736086996228032557185308919284403805071030064</br>
++77684786324319100022392978525537237556621364474009</br>
++67605394398382357646069924652600890906241059042154</br>
++53927904411529580345334500256244101006359530039598</br>
++86446616959562635187806068851372346270799732723313</br>
++46939714562855426154676506324656766202792452085813</br>
++47717608521691340946520307673391841147504140168924</br>
++12131982688156866456148538028753933116023229255561</br>
++89410429953356400957864953409351152664540244187759</br>
++49316930560448686420862757201172319526405023099774</br>
++56764783848897346431721598062678767183800524769688</br>
++40849891850861490034324034767426862459523958903585</br>
++82135006450998178244636087317754378859677672919526</br>
++11121385919472545140030118050343787527766440276261</br>
++89410175768726804281766238606804778852428874302591</br>
++45247073950546525135339459598789619778911041890292</br>
++94381856720507096460626354173294464957661265195349</br>
++57018600154126239622864138977967333290705673769621</br>
++56498184506842263690367849555970026079867996261019</br>
++03933126376855696876702929537116252800554310078640</br>
++87289392257145124811357786276649024251619902774710</br>
++90335933309304948380597856628844787441469841499067</br>
++12376478958226329490467981208998485716357108783119</br>
++18486302545016209298058292083348136384054217200561</br>
++21989353669371336733392464416125223196943471206417</br>
++37549121635700857369439730597970971972666664226743</br>
++11177621764030686813103518991122713397240368870009</br>
++96862922546465006385288620393800504778276912835603</br>
++37254825579391298525150682996910775425764748832534</br>
++14121328006267170940090982235296579579978030182824</br>
++28490221470748111124018607613415150387569830918652</br>
++78065889668236252393784527263453042041880250844236</br>
++31903833183845505223679923577529291069250432614469</br>
++50109861088899914658551881873582528164302520939285</br>
++25807796973762084563748211443398816271003170315133</br>
++44023095263519295886806908213558536801610002137408</br>
++51154484912685841268695899174149133820578492800698</br>
++25519574020181810564129725083607035685105533178784</br>
++08290000415525118657794539633175385320921497205266</br>
++07831260281961164858098684587525129997404092797683</br>
++17663991465538610893758795221497173172813151793290</br>
++44311218158710235187407572221001237687219447472093</br>
++49312324107065080618562372526732540733324875754482</br>
++96757345001932190219911996079798937338367324257610</br>
++39389853492787774739805080800155447640610535222023</br>
++25409443567718794565430406735896491017610775948364</br>
++54082348613025471847648518957583667439979150851285</br>
++80206078205544629917232020282229148869593997299742</br>
++97471155371858924238493855858595407438104882624648</br>
++78805330427146301194158989632879267832732245610385</br>
++21970111304665871005000832851773117764897352309266</br>
++61234588873102883515626446023671996644554727608310</br>
++11878838915114934093934475007302585581475619088139</br>
++87523578123313422798665035227253671712307568610450</br>
++04548970360079569827626392344107146584895780241408</br>
++15840522953693749971066559489445924628661996355635</br>
++06526234053394391421112718106910522900246574236041</br>
++30093691889255865784668461215679554256605416005071</br>
++27664176605687427420032957716064344860620123982169</br>
++82717231978268166282499387149954491373020518436690</br>
++76723577400053932662622760323659751718925901801104</br>
++29038427418550789488743883270306328327996300720069</br>
++80122443651163940869222207453202446241211558043545</br>
++42064215121585056896157356414313068883443185280853</br>
++97592773443365538418834030351782294625370201578215</br>
++73732655231857635540989540332363823192198921711774</br>
++49469403678296185920803403867575834111518824177439</br>
++14507736638407188048935825686854201164503135763335</br>
++55094403192367203486510105610498727264721319865434</br>
++35450409131859513145181276437310438972507004981987</br>
++05217627249406521461995923214231443977654670835171</br>
++47493679861865527917158240806510637995001842959387</br>
++99158350171580759883784962257398512129810326379376</br>
++21832245659423668537679911314010804313973233544909</br>
++08249104991433258432988210339846981417157560108297</br>
++06583065211347076803680695322971990599904451209087</br>
++27577622535104090239288877942463048328031913271049</br>
++54785991801969678353214644411892606315266181674431</br>
++93550817081875477050802654025294109218264858213857</br>
++52668815558411319856002213515888721036569608751506</br>
++31875330029421186822218937755460272272912905042922</br>
++59787710667873840000616772154638441292371193521828</br>
++49982435092089180168557279815642185819119749098573</br>
++05703326676464607287574305653726027689823732597450</br>
++84479649545648030771598153955827779139373601717422</br>
++99602735310276871944944491793978514463159731443535</br>
++18504914139415573293820485421235081739125497498193</br>
++08714396615132942045919380106231421774199184060180</br>
++34794988769105155790555480695387854006645337598186</br>
++28464199052204528033062636956264909108276271159038</br>
++56995051246529996062855443838330327638599800792922</br>
++84665950355121124528408751622906026201185777531374</br>
++79493620554964010730013488531507354873539056029089</br>
++33526400713274732621960311773433943673385759124508</br>
++14933573691166454128178817145402305475066713651825</br>
++82848980995121391939956332413365567770980030819102</br>
++72040997148687418134667006094051021462690280449159</br>
++64654533010775469541308871416531254481306119240782</br>
++11886900560277818242350226961893443525476335735364</br>
++85619363254417756613981703930632872166905722259745</br>
++20919291726219984440964615826945638023950283712168</br>
++64465617852355651641277128269186886155727162014749</br>
++34052276946595712198314943381622114006936307430444</br>
++17328478610177774383797703723179525543410722344551</br>
++25555899986461838767649039724611679590181000350989</br>
++28641204195163551108763204267612979826529425882951</br>
++14127584126273279079880755975185157684126474220947</br>
++97218433093529726652100156625145529947451276315509</br>
++17636730259462132930190402837954246323258550301096</br>
++70692272022707486341900543830265068121414213505715</br>
++41750575086399076739463351462090828889349383764393</br>
++99256900604067311422093312195936202982972351163259</br>
++38677224147791162957278075239505625158160313335938</br>
++23115005186268905306583681299881086632632719806112</br>
++71548858798093487912913707498230575929091862939195</br>
++01472119758606727009254771802575033773079939713453</br>
++95326461952699965963856549175904583335857991020127</br>
++13204583903200853878881633637685182083727885131175</br>
++22776960978796214237216254521459128183179821604411</br>
++13116714069148271709810154577819392023115638719508</br>
++05024679725792497605772625913328559726371211201905</br>
++72077140914864507409492671803581515757151405039761</br>
++09638467555692989703835473141002238025834687673501</br>
++29775413279532060971154506484212185936490997917766</br>
++87477448188287063231551586503289816422828823274686</br>
++61065927321979071623846421534898524762167890502609</br>
++98045266483929542357287343977680495774091449538391</br>
++57556548545905897649519851380100795801078375994577</br>
++52991967005476022525520344539887125387801719607181</br>
++64078124847847257912407824544361682345239570689514</br>
++27226975043187363326301110305342333582160933319121</br>
++88066082683414289104151732472160533558499932245487</br>
++30778822905252324234861531520976938461042582849714</br>
++96347534183756200301491570327968530186863157248840</br>
++15266398356895636346574353217834931998255421173084</br>
++67745297085839507616458229630324424328237737450517</br>
++02856069806788952176819815671078163340526675953942</br>
++49262807569683261074953233905362230908070814559198</br>
++37355377748742029039018142937311529334644468151212</br>
++94509759653430628421531944572711861490001765055817</br>
++70953024688752632501197052094761594167687277844720</br>
++00192789137251841622857783792284439084301181121496</br>
++36642465903363419454065718354477191244662125939265</br>
++66203068885200555991212353637182269225317814587925</br>
++93750441448933981608657900876165024635197045828895</br>
++48179375668104647461410514249887025213993687050937</br>
++23054477341126413548928068410591077166778212383328</br>
++10262185587751312721179344448201440425745083063944</br>
++73836379390628300897330624138061458941422769474793</br>
++16657176231824721683506780764875734204915576282175</br>
++83972975134478990696589532548940335615613167403276</br>
++47246921250575911625152965456854463349811431767025</br>
++72956618447754874693784642337372389819206620485118</br>
++94378868224807279352022501796545343757274163910791</br>
++97295295081294292220534771730418447791567399173841</br>
++83117103625243957161527146690058147000026330104526</br>
++43547865903290733205468338872078735444762647925297</br>
++69017091200787418373673508771337697768349634425241</br>
++99499513883150748775374338494582597655609965559543</br>
++18040920178497184685497370696212088524377013853757</br>
++68141663272241263442398215294164537800049250726276</br>
++51507890850712659970367087266927643083772296859851</br>
++69122305037462744310852934305273078865283977335246</br>
++01746352770320593817912539691562106363762588293757</br>
++13738407544064689647831007045806134467312715911946</br>
++08435935825987782835266531151065041623295329047772</br>
++17408355934972375855213804830509000964667608830154</br>
++06128243087406455944318534137552201663058121110334</br>
++53120745086824339432159043594430312431227471385842</br>
++03039010607094031523555617276799416002039397509989</br>
++76293353258555756248089966918298642226775023601932</br>
++57974726742578211119734709402357457222271212526852</br>
++38429587427350156366009318804549333898974157149054</br>
++41825597380808715652814301026704602843168192303925</br>
++35297795765862414392701549740879273131051636119137</br>
++57700892956482332364829826302460797587576774537716</br>
++01024908046243018565241617566556001608591215345562</br>
++67602192689982855377872583145144082654583484409478</br>
++46317877737479465358016996077940556870119232860804</br>
++11309046293508718271259346687127666948738998245985</br>
++27786499569165464029458935064964335809824765965165</br>
++14209098675520380830920323048734270346828875160407</br>
++15466538346196112230137594515792526967436425319273</br>
++90036038608236450762698827497618723575476762889950</br>
++75211480485252795084503395857083813047693788132112</br>
++36742813194879502280663201700224603319896719706491</br>
++63741175854851878484012054844672588851401562725019</br>
++82171906696081262778548596481836962141072171421498</br>
++63619187747545096503089570994709343378569816744658</br>
++28267911940611956037845397855839240761276344105766</br>
++75102430755981455278616781594965706255975507430652</br>
++10853015979080733437360794328667578905334836695554</br>
++86803913433720156498834220893399971641479746938696</br>
++90548008919306713805717150585730714881564992071408</br>
++67582596028760564597824237702424698053280566327870</br>
++41926768467116266879463486950464507420219373945259</br>
++26266861355294062478136120620263649819999949840514</br>
++38682852589563422643287076632993048917234007254717</br>
++64188685351372332667877921738347541480022803392997</br>
++35793615241275582956927683723123479898944627433045</br>
++45667900620324205163962825884430854383072014956721</br>
++06460533238537203143242112607424485845094580494081</br>
++82092763914000854042202355626021856434899414543995</br>
++04109805918179488826280520664410863190016885681551</br>
++69229486203010738897181007709290590480749092427141</br>
++01893354281842999598816966099383696164438152887721</br>
++40852680887574882932587358099056707558170179491619</br>
++06114001908553744882726200936685604475596557476485</br>
++67400817738170330738030547697360978654385938218722</br>
++05839023444435088674998665060406458743460053318274</br>
++36296177862518081893144363251205107094690813586440</br>
++51922951293245007883339878842933934243512634336520</br>
++43858129128343452973086529097833006712617981303167</br>
++94385535726296998740359570458452230856390098913179</br>
++47594875212639707837594486113945196028675121056163</br>
++89760088800927461158608002078033415914517970730368</br>
++35196977766076373785333012024120112046988609209339</br>
++08536577322239241244905153278095095586645947763448</br>
++22699860748132973026309750288121035177231244650953</br>
++49653693090018637764094094349837313251321862080214</br>
++80992268550294845466181471555744470966953017769043</br>
++42720318927706047177845279391604722815343798035396</br>
++79861424370956683221491465438014593829277393396032</br>
++75404800955223181666738035718393275707714204672383</br>
++86246178039762923771312095807893638414479298025880</br>
++65522129262093623930637313496640186619510811583471</br>
++17331202580586672763999276357907806381881306915636</br>
++62741254312595899361196476261014055635033995231403</br>
++23113819656236327198961837254845333702062563464223</br>
++95276694356837676136871196292181875457608161705303</br>
++15907288287007123136663087227549186613957737305460</br>
++65997437810987649802414011242142773668082751390959</br>
++31340415582626678951084677611866595766016599817808</br>
++94149857549762843878561002637965431783136340251358</br>
++14161151902096499133548733131115022700681930135929</br>
++59597164019719605362503355847998096348871803911161</br>
++28135959685654788683258564378961731597620024196215</br>
++52896297904819822199462269487137462444729093456470</br>
++02853769495885959160678928249105441251599630078136</br>
++83674902093749157328962700286568293444313423473512</br>
++39298259166739503425995868970697267332582735903121</br>
++28874666045146148785034614282776599160809039865257</br>
++57172630818334944418201935333850712923457743755793</br>
++44062178711330063106003324053991693682603746176638</br>
++56575887758020122936635327026710068126182517291460</br>
++82025418928859352444910701382062115538277935652969</br>
++14576502048643282865557934707209634807372692141186</br>
++89546732276775133569019015372366903686538916129168</br>
++88878764075254934942497334271811788927599315967193</br>
++54758988097924525262363659036320070854440784544797</br>
++34829180208204492667063442043755532505052752283377</br>
++88870408040335319234076856301093477721256390886404</br>
++13101073817853338316038135280828119040832564401842</br>
++05374679299262203769871801806112262449090924264198</br>
++58208617511771137890516091403815750033664241560952</br>
++16328197122335023167422600567941281406217219641842</br>
++70578432895980288233505982820819666624903585778994</br>
++03331522748177769528436816300885317696947836905806</br>
++71064828083598046698841098135158654906933319522394</br>
++36328792399053481098783027450017206543369906611778</br>
++45543646877236318444647680691428280045510746866453</br>
++92805399409108754939166095731619715033166968309929</br>
++46634914279878084225722069714887558063748030886299</br>
++51184731871247772919100702275888934869394562895158</br>
++02965372150409603107761289831263589964893410247036</br>
++03664505868728758905140684123812424738638542790828</br>
++27338279733268855049358743031602747490631295723497</br>
++42611221517417153133618622410913869500688835898962</br>
++34927631731647834007746088665559873338211382992877</br>
++69114954921841920877716060684728746736818861675072</br>
++21017261103830671787856694812948785048943063086169</br>
++94879870316051588410828235127415353851336589533294</br>
++86294944950618685147791058046960390693726626703865</br>
++12905201137810858616188886947957607413585534585151</br>
++76805197333443349523012039577073962377131603024288</br>
++72005373209982530089776189731298178819446717311606</br>
++47231476248457551928732782825127182446807824215216</br>
++46956781929409823892628494376024885227900362021938</br>
++66964822156280936053731780408637272684266964219299</br>
++46819214908701707533361094791381804063287387593848</br>
++26953558307739576144799727000347288018278528138950</br>
++32179863452161110666088393140532269449054555278678</br>
++94417579202440021450780192099804461382547805858048</br>
++44241640477503153605490659143007815837243012313751</br>
++15622840158386442708907182848167575271238467824595</br>
++34334449622010096071051370608461801187543120725491</br>
++33499424761711563332140893460915656155060031738421</br>
++87015702261031019166038870646614388977363187809407</br>
++11527528174689576401581047016965247557740891644568</br>
++67771715850058326994340167720215676772406812836656</br>
++52641229824394651331973591997094032759385026695574</br>
++70231813203243716420586141033606524536939160050644</br>
++95306016126782264894243739716671766123104897503188</br>
++57321655549883421218028469125290861014855278152776</br>
++25623750456375769497734336846015607727035509629049</br>
++39248708840628106794362241870474700836884267102255</br>
++83024035998416459511224852726336326451140173952480</br>
++86194635840783753556885622317115520947223065437092</br>
++60679735100056554938122457548372854571179739361575</br>
++61676416928958052572975223385586113883221711073622</br>
++65816218842443178857488798109026653793426664216990</br>
++91405653643224930133486798815488662866505234699723</br>
++55747384248305904236771432787923164224038777643301</br>
++92600192284778313837632536121025336935812624086866</br>
++69973827597736568222790721583247888864236934639616</br>
++43633087301398142114303060087306661648036789840913</br>
++35926293402304324974926887831643602681011309570716</br>
++14191283068657732353263965367739031766136131596555</br>
++35849993986005651559219367599777179330197446881483</br>
++71103206503693192894521402650915465184309936553493</br>
++33718342529843367991593941746622390038952767381333</br>
++06177476295749438687169784537672194935065908757119</br>
++17720875477107189937960894774512654757501871194870</br>
++73873678589020061737332107569330221632062843206567</br>
++11920969505857611739616323262177089454262146098584</br>
++10237813215817727602222738133495410481003073275107</br>
++79994899197796388353073444345753297591426376840544</br>
++22647842160631227696469671564739990437159033239065</br>
++60726644116438605404838847161912109008701019130726</br>
++07104411414324197679682854788552477947648180295973</br>
++60494397004795960402927462992035720997619501403483</br>
++15380947714601056333446998820822120587281510729182</br>
++97121191787642488035467231691654185225672923442918</br>
++71281632325969654135485895771332083399112887759172</br>
++26115273379010341362085614577992398778325083550730</br>
++19981845902595835598926055329967377049172245493532</br>
++96833000022301815172265757875240588322490858212800</br>
++89747909326100762578770428656006996176212176845478</br>
++99644070506624171021332748679623743022915535820078</br>
++01411653480656474882306150033920689837947662550365</br>
++49822805329662862117930628430170492402301985719978</br>
++94883689718304380518217441914766042975243725168343</br>
++54112170386313794114220952958857980601529387527537</br>
++99030938871683572095760715221900279379292786303637</br>
++26876582268124199338480816602160372215471014300737</br>
++75377926990695871212892880190520316012858618254944</br>
++13353820784883465311632650407642428390870121015194</br>
++23196165226842200371123046430067344206474771802135</br>
++30701240988603533991526679238711017062218658835737</br>
++81210935179775604425634694999787251125440854522274</br>
++81091487430725986960204027594117894258128188215995</br>
++23596589791811440776533543217575952555361581280011</br>
++63846720319346507296807990793963714961774312119402</br>
++02129757312516525376801735910155733815377200195244</br>
++45436200718484756634154074423286210609976132434875</br>
++48847434539665981338717466093020535070271952983943</br>
++27142537115576660002578442303107342955153394506048</br>
++62227649666876240793243531929926392537310768921353</br>
++52572321080889819339168668278948281170472624501948</br>
++40970097576092098372409007471797334078814182519584</br>
++25980962417476101382526439551352593118850456362641</br>
++88300338539652435997416931322894719878308427600401</br>
++36807470390409723847394583489618653979059411859931</br>
++03561684368692194853820557803957738813606795499000</br>
++85123259442529724486666766834641402189915944565309</br>
++42344065066785194841776677947047204195882204329538</br>
++03263105374948831221803912796784461001397267538921</br>
++95119117836587662528083690053249004597410947068772</br>
++91232821430463533728351995364827432583311914445901</br>
++78096077828835837301118575436599589827245319253105</br>
++88115026307542571493943024453931870179923608166611</br>
++30542625399583389794297160207033876781503301028012</br>
++00959972522222808014235710947603519255444349299867</br>
++67817891045559063015953809761875920358937341978962</br>
++35893112598390259831026719330418921510968915622506</br>
++96591198283234555030590817307351955037216658702880</br>
++53992138576037035377105178021280129566841984140362</br>
++87272562321442875430221090947272107347413497551419</br>
++07370433182766261772759968888260272252471336833534</br>
++52816692779591328861381766349857728936900965749562</br>
++28710302436259077241221909430087175569262575806570</br>
++99120166596224360802428700245473620363948412559548</br>
++81727272473653467783647201918303998717627037515724</br>
++64992228946793232269361917764161461879561395669956</br>
++77830682903165896994307673335082349907906241002025</br>
++06134057344300695745474682175690441651540636584680</br>
++46369262127421107539904218871612761778701425886482</br>
++57752238891845995233762923779155857445494773612955</br>
++25952226578636462118377598473700347971408206994145</br>
++58071908021359073226923310083175951065901912129479</br>
++54086036407573587502058902087045796700070552625058</br>
++11420663907459215273309406823649441590891009220296</br>
++68052332526619891131184201629163107689408472356436</br>
++68081821686572196882683584027855007828040434537101</br>
++83651096951782335743030504852653738073531074185917</br>
++70561039739506264035544227515610110726177937063472</br>
++38049906669221619711942591204450846417463835899382</br>
++39946517395509000859479990136026674261494290066467</br>
++11506717542217703877450767356374215478290591101261</br>
++91575558702389570014051178226469899449179083017954</br>
++75876760168094100135837613578591356924455647764464</br>
++17866711539195135769610486492249008344671548638305</br>
++44779143300976804868783481846727337584368927243104</br>
++47406807685278625585165092088263813233623148733336</br>
++71476452045087662761495038994950480956046098960432</br>
++91233583488599902945264002849942808786240398118148</br>
++84767301216754161106629995553668193123287425702063</br>
++73835202008686369131173346973174121915363324674532</br>
++56308713473027921749562270146873258678917345583799</br>
++64351358800959350877556356248810493852999007675135</br>
++51352779241242927748856588856651324730251471021057</br>
++53525165118148509027504768455182520963318990685276</br>
++14435138213662152368890578786699432288816028377482</br>
++03550601602989400911971385017987168363374413927597</br>
++36440170070147637066557035043381211135764150184518</br>
++21413619823495159601064752712575935185304332875537</br>
++78305750956742544268471221961870917856078393614451</br>
++13833356491032564057338986671781239722375193164306</br>
++17013859539474367843392670986712452211189690840236</br>
++32741149660124348309892994173803058841716661307304</br>
++00675883804321115553794406054977217059428215148861</br>
++65672771240903387727745629097110134885184374118695</br>
++65544974573684521806698291104505800429988795389902</br>
++78043835962824094218605562877884288021275538848037</br>
++28640019441614257499904272009595204654170598104989</br>
++96750451193647117277222043610261407975080968697517</br>
++66002371877483480161203102346805671126447661237476</br>
++27852190241202569943534716226660893675219833111813</br>
++51114650385489502512065577263614547360442685949807</br>
++43969323312971273771573470997139522911826534851555</br>
++87137336629120242714302503763269501350911612952993</br>
++78586468130722648600827088133353819370368259886789</br>
++33212383270532976258573827900978264605455985551318</br>
++36688844628265133798491667839409761353766251798258</br>
++24966345877195012438404035914084920973375464247448</br>
++81761840700235695801774101776969250778148933866725</br>
++57898564589851056891960924398841569280696983352240</br>
++22563457049731224526935419383700484318335719651662</br>
++67215755241934019330990183193091965829209696562476</br>
++67683659647019595754739345514337413708761517323677</br>
++20422738567427917069820454995309591887243493952409</br>
++44416789988463198455048523936629720797774528143994</br>
++18256789457795712552426826089940863317371538896262</br>
++88962940211210888442737656862452761213037101730078</br>
++51357154045330415079594477761435974378037424366469</br>
++73247138410492124314138903579092416036406314038149</br>
++83148190525172093710396402680899483257229795456404</br>
++27017577229041732347960736187878899133183058430693</br>
++94825961318713816423467218730845133877219086975104</br>
++94284376932502498165667381626061594176825250999374</br>
++16728839517440669325496534031014522253161890092353</br>
++76486378482881344209870048096227171226407489571939</br>
++00291857330746010436072919094576799461492929042798</br>
++16877294264877299528584346477753869069501489841339</br>
++24540394144680263625402118614317031251117577642829</br>
++91464453340892097696169909837265236176874560589470</br>
++49681701369749095230720826828878907301900182534258</br>
++05343421705928713931737993142410852647390948284596</br>
++41809361413847583113613057610846236683723769591349</br>
++26158245162215521348792441450417568480641206365201</br>
++70386330129532777699023118648020067556905682295016</br>
++35493199230591424639621702532974757311409422018019</br>
++93680350264956369558664259067626856873721103391567</br>
++93839895765565193177883000241613539562437777840801</br>
++74881937309502069990089089932808839743036773659552</br>
++48913001566332940779071396154645340887915103006513</br>
++21934486673248275907946807879819425019582622320395</br>
++13125201410996053126069655540424867054998678692302</br>
++17469890095478507256729787947698888310934874644264</br>
++00718183160331655511534276155622405474473378049246</br>
++21495213325852769884733626918264917433898782478927</br>
++84689188280546699823036899397834137475870258057163</br>
++49413568433929396068192061773331791738208562436433</br>
++63535986349449689078106401967407443658366707158692</br>
++45211829978938040771375012908586465789057714268335</br>
++82768978554717687184427726120509266486102051535642</br>
++84063236848180728794071712796682006072755955590404</br>
++02331787494473464547606281895415121391629184442976</br>
++51066947969354016866010055196077687335396511614930</br>
++93757096855455938151378956903925101495326562814701</br>
++19983269922000663928753747131352364215892651262040</br>
++72887716578358405219646054105435443642166562244565</br>
++04299901025658692727914275293117208279393775132610</br>
++60528812353734510683729398935808712438693859343891</br>
++75713376300720319760816604464683937725806909237297</br>
++52348670291691042636926209019960520412102407764819</br>
++03160140858635584276095370865581642739953493465463</br>
++14504040199528537252004957805254656251154109252437</br>
++99132626271360909940290226206283675213230506518393</br>
++40574501120993414649184333236465693717259144893241</br>
++59006242020612885732926133596808726500045628284557</br>
++57459659212053034131011182750130696150983551563200</br>
++43107846019065654938065425252291619918199596027523</br>
++27702249855738824899882707465936355768582560518068</br>
++96428537685077201222034792099393617926820659014216</br>
++56159253067379445689490708532635681968318617722682</br>
++49911472615732035807646298116244013316737892788689</br>
++22903259334986179702199498192573961767307583441709</br>
++85592221701718257127775344915082052784309046194608</br>
++35217402005838672849709411023266953921445461066215</br>
++00641067474020700918991195137646690448126725369153</br>
++71622907913854039375600778351533741677479421003840</br>
++02308951850994548779039346122220865060160500351776</br>
++26483161115332558770507354127924990985937347378708</br>
++11942530551214369797499149518605359204038302357163</br>
++52727630874693219622190064260886183676103346002255</br>
++47747781364101269190656968649501268837629690723396</br>
++12762872230411418136100602640440300359969889199458</br>
++27397624114613744804059697062576764723766065541618</br>
++57469052722923822827518679915698339074767114610302</br>
++27766060200612468764777288190967916133540198814027</br>
++57992174167678799231603963569492851513633647219540</br>
++61117176738737255572852294005436178517650230754469</br>
++38693078734991103521825329297260445532107978877114</br>
++49898870911511237250604238753734841257086064069052</br>
++05845212275453384800820530245045651766951857691320</br>
++00428167580549248117805198326460324457928297301291</br>
++05318385636821206215531288668564956512613892261367</br>
++06409395333457052698695969235035309422454386527867</br>
++76730275404027022463844835532399147513634410440500</br>
++92330361271496081355490531539021002299595756583705</br>
++38126196568314428605795669662215472169562087001372</br>
++77685369608407048333251327931122325071486302069512</br>
++45395003735723346807094656483089209801534878705633</br>
++49109236605755405086411152144148143463043727327104</br>
++50277686619531078583233348578402971609252153260925</br>
++58932655600672124359464255065996771770388445396181</br>
++63287961446081778927217183690888012677820743010642</br>
++25246348074543004764928855534090621851536543554741</br>
++25476152769772667769772777058315801412185688011705</br>
++02836527554321480348800444297999806215790456416195</br>
++72127845089284898064264974270905791290692178072987</br>
++69477975112447305991406050629946894280931034216416</br>
++62993561482813099887074529271604843363081840412646</br>
++96379258430941854422163590845761460785585624738149</br>
++31427078266215185541603870206876980461747400808324</br>
++34366538235455510944949843109349475994467267366535</br>
++25176627067721941831919771963780157021699336750837</br>
++60057163454643671776723387588643405644871566964321</br>
++04128259564534984138841289042068204700761559691684</br>
++30389993483667935425492103281133631847225923055543</br>
++83058206941675629992013373175489122037230349072681</br>
++06853445403599356182357631283776764063101312533521</br>
++21419946118693508331765878520471123643312267651299</br>
++64171325217513553261867681942338790365468908001827</br>
++13528358488844411176123410117991870923650718485785</br>
++62210211040097769944531217950224795780695065329659</br>
++40383987369907240797679040826794007618729547835963</br>
++49279390457697366164340535979221928587057495748169</br>
++66940623342726197335181366260637359825755524965098</br>
++07260123668283605928341855848026958413772558970883</br>
++78994291054980033111388460340193916612218669605849</br>
++15714857335682861495000190975911252188003964197621</br>
++63559375743718011480559442298730418196808085647265</br>
++71354761283162920044988031540210553059707666636274</br>
++93283089168809323592900817874119857383171926167288</br>
++34918402429721290434965526942726402559641463525914</br>
++34840067586769035038232057293413298159353304444649</br>
++68294413673234421583807616948312193331198190610961</br>
++42952201536170298575105594326461468505452684975764</br>
++80780800922133581137819774927176854507553832876887</br>
++44745915937311624706010912446098294248412875202244</br>
++62594477638749491997840446829257360968534549843266</br>
++53686284448936570411181779380644161653122360021491</br>
++87687694673984075171763075168498563592014868929431</br>
++05940202457969622924566644881967576294349535326382</br>
++17161339575779076637076456957025973880043841580589</br>
++43361371065518599876007549241872117148892952217377</br>
++21146081154344982665479872580056674724051122007383</br>
++45927157572771521858994694811794064446639943237004</br>
++42911407472181802248258377360173466853007449855647</br>
++15420036123593397312914458591522887408719508708632</br>
++21883728826282288463184371726190330577714765156414</br>
++38223067918473860391476831081413582757558536435977</br>
++21650028277803713422869688787349795096031108899196</br>
++14338666406845069742078770028050936720338723262963</br>
++78560386532164323488155575570184690890746478791224</br>
++36375556668678067610544955017260791142930831285761</br>
++25448194444947324481909379536900820638463167822506</br>
++48095318104065702543276043857035059228189198780658</br>
++65412184299217273720955103242251079718077833042609</br>
++08679427342895573555925272380551144043800123904168</br>
++77164451802264916816419274011064516224311017000566</br>
++91121733189423400547959684669804298017362570406733</br>
++28212996215368488140410219446342464622074557564396</br>
++04529853130714090846084996537678037932018991408658</br>
++14662175319337665970114330608625009829566917638846</br>
++05676297293146491149370462446935198403953444913514</br>
++11936679333019366176636525551491749823079870722808</br>
++60859626112660504289296966535652516688885572112276</br>
++80277274370891738963977225756489053340103885593112</br>
++56799915165890250164869614272070059160561661597024</br>
++51989051832969278935550303934681219761582183980483</br>
++96056252309146263844738629603984892438618729850777</br>
++59287927220685548072104978176532862101874767668972</br>
++48841139560349480376727036316921007350834073865261</br>
++68450748249644859742813493648037242611670426687083</br>
++19250409976153190768557703274217850100064419841242</br>
++07396400139603601583810565928413684574119102736420</br>
++27416372348821452410134771652960312840865841978795</br>
++11165115298278146203791398550063999603265912485253</br>
++08493690313130100799977191362230866011099929142871</br>
++24938854161203802041134018888721969347790449752745</br>
++42880728035093058287544207551348166609278793535665</br>
++21255620139988249628478726214432362853676502591450</br>
++46837763528258765213915648097214192967554938437558</br>
++26002531685363567313792624758780494459441834291727</br>
++56988376226261846365452743497662411138451305481449</br>
++83631178978448973207671950878415861887969295581973</br>
++32506999514026015116755297505754378102422389579257</br>
++86562128432731202200716730574069286869363930186765</br>
++95825132649914595026091706934751940897535746401683</br>
++08117988464524736189560564794263580705625632811892</br>
++69663026479535951097127659136233180866921535788607</br>
++81275991053717140220450618607537486630635059148391</br>
++64676567232057145168861707909846959322367249467375</br>
++83099607042589220481550799132752088583781117685214</br>
++26933478692189524062265792104362034885292626798401</br>
++39532164587911515790504605797108389833718640380244</br>
++17511347226472547010794793996953554669619726763255</br>
++22991465493349966323418595145036098034409221220671</br>
++25676987234279407088570704742931733291885238967219</br>
++71353924492426178641188637790962814486917869468177</br>
++59171715066911148002075943201206196963779510322708</br>
++90295660855622254526026104607361313688690092817210</br>
++68198618553780982018471154163630326265699283424155</br>
++02360097804641710852553761272890533504550613568414</br>
++37758544296779770146602943876872251153638011917581</br>
++54028120818255606485410787933598921064427244898618</br>
++96162941341800129513068363860929410008313667337215</br>
++30083526962357371753307386533382048421903081864491</br>
++84093723944033405244909554558016406460761581010301</br>
++76748847501766190869294609876920169120218168829104</br>
++08707095609514704169211470274133900522533408348128</br>
++70353031023919699978597413908593605433599697075604</br>
++46013424245368249609877258131102473279856207212657</br>
++24990034682938868723048955622532044636026398542252</br>
++58416464324271611419817802482595563544907219226583</br>
++86366266375083594431487763515614571074552801615967</br>
++70484427141944351832756984075526779264112617652506</br>
++15965235457187956673170913319358761628255920783080</br>
++18520689015150471334038610031005591481785211038475</br>
++45429333891884441205179439699701941126951195265649</br>
++19594189975418393234647424290702718875223534393673</br>
++63366320030723274703740712398256202466265197409019</br>
++97624520561985576257600087081730832883443818310700</br>
++54514493545885422678578551915372292379555494333410</br>
++17442016960009069641561273229777022121795186837635</br>
++90822551288164700219923488640439591530184640047143</br>
++21186360622527011541122283802778538911098490201342</br>
++74101412155976996543887719748537643115822983853312</br>
++30717511329619045590079380642766958190148426279912</br>
++21792947987348901868471676503827328552059082984529</br>
++80625925035212845192592798659350613296194679625237</br>
++39725655841578537445675589980324054921869628884903</br>
++32560851455344391660226257775512916200772796852629</br>
++38793753045418108072928589198971538179734349618723</br>
++29276147478501926114504132748732429705834084711123</br>
++33746274617274626582415324271059322506255302314738</br>
++75925172478732288149145591560503633457542423377916</br>
++03749525024930223514819613811625639114156103268449</br>
++58072508273431765944054098269765269344579863479709</br>
++74312449827193311386387315963636121862349726140955</br>
++60799206283169994200720548115253533939460768500199</br>
++09886553861433495781650089961649079678142901148387</br>
++64568217491407562376761845377514403147541120676016</br>
++07264605568592577993220703373333989163695043466906</br>
++94828436629980037414527627716547623825546170883189</br>
++81086880684785370553648046935095881802536052974079</br>
++35386765111950793732820831462689600710751755206144</br>
++33784114549950136432446328193346389050936545714506</br>
++90086448344018042836339051357815727397333453728426</br>
++33721740657757710798305175557210367959769018899584</br>
++94130195999573017901240193908681356585539661941371</br>
++79448763207986880037160730322054742357226689680188</br>
++21234243918859841689722776521940324932273147936692</br>
++34004848976059037958094696041754279613782553781223</br>
++94764614783292697654516229028170110043784603875654</br>
++41517394339600489153188175766505009516974024156447</br>
++71293656614253949368884230517400129920556854289853</br>
++89794266995677702708914651373689220610441548166215</br>
++68042198384767308717875902792091759006952734566820</br>
++26513373111518000181434120962601658629821076663523</br>
++36177400783778342370915264406305407180784335806107</br>
++29611055500204151316963730468492133568372654003075</br>
++09829089364612047891114753037049893952833457824082</br>
++81738644132271000296831194020332345642082647327623</br>
++38302946393789983758365545599193408662350909679611</br>
++34004867027123176526663710778725111860354037554487</br>
++41869351973365662177235922939677646325156202348757</br>
++01137957120962377234313702120310049651521119760131</br>
++76419408203437348512852602913334915125083119802850</br>
++17785571072537314913921570910513096505988599993156</br>
++08636554774035518981667335358800482146650997414337</br>
++61182777723351910741217572841592580872591315074606</br>
++02563490377726337391446137703802131834744730111303</br>
++26702969173350477016321066162278300272692833655840</br>
++11791419447808748253360714403296252285775009808599</br>
++60904093631263562132816207145340610422411208301000</br>
++85872642521122624801426475194261843258533867538740</br>
++54743491072710049754281159466017136122590440158991</br>
++60022982780179603519408004651353475269877760952783</br>
++99843680869089891978396935321799801391354425527179</br>
++10225397010810632143048511378291498511381969143043</br>
++49750018998068164441212327332830719282436240673319</br>
++65546926778511931527751134464689055042481133614349</br>
++84604849051258345683266441528489713972376040328212</br>
++66025351669391408204994732048602162775979177123475</br>
++10975024030789357599377150950217516935558270725339</br>
++11892334070223832077585802137174778378778391015234</br>
++13209848942345961369234049799827930414446316270721</br>
++47961174569757196812392919137409829258055619552074</br>
++34243295982898980529233366415419256367380689494201</br>
++47124134052507220406179435525255522500874879008656</br>
++83145428351677505422948032747830440564385815919526</br>
++66758282929705226127628711040134801787224801789684</br>
++05240792436058274246744307672164527031345135416764</br>
++96689012747868010102951338626986497482121186290403</br>
++37691568576240699296372493097201628707200189835423</br>
++69036414927023696193854737248032985504511208919287</br>
++98298744678641291594175316756025334353106267452545</br>
++07114181483239880607297140234725520713490798398982</br>
++35526872395090936566787899238371257897624875599044</br>
++32288953883773173489411227570714109597900479193010</br>
++46740750411435381782464630795989555638991884773781</br>
++34134707024674736211204898622699188851745625173251</br>
++93413520381158633501239130544419100736284475675141</br>
++61050410973505852762044489190978901984315485280533</br>
++98577784431393388399431044446566924455088594631408</br>
++17512203313906815965925105468580131338381521764182</br>
++10433429788826119630443111388796258746090226130900</br>
++84997543039577124323061690626291940392143974027089</br>
++47776637024881554993224588259790206312574369109463</br>
++93252806241642476868495455324938017639371615636847</br>
++85982371590238542126584061536722860713170267474013</br>
++11452610637653833903159219434698176053583803106128</br>
++87852051546933639241088467632009567089718367490578</br>
++16308515813816196688222204757043759061433804072585</br>
++38620835651769984267745231958241826836982701602374</br>
++14938363496629351576854061397342746470899685618170</br>
++16055110488097155485911861718966802597354170542398</br>
++51355600187203350790609464212711439931960465274240</br>
++50882225359773481519135438571253258540493946010865</br>
++79379805862014336607882521971780902581737087091646</br>
++04527279771535099103407364250203863867182205228796</br>
++94458387652947951048660717390229327455426785669776</br>
++86593992341683412227466301506215532050265534146099</br>
++52493560508549217565491348309589065361756938176374</br>
++73644183378974229700703545206663170929607591989627</br>
++73242309025239744386101426309868773391388251868431</br>
++65010279649114977375828889134503411488659486702154</br>
++92101084328080783428089417298008983297536940644969</br>
++90312539986391958160146899522088066228540841486427</br>
++47862819755466292788146216071713818801808405720847</br>
++15868906836919393381864278454537956719272397972364</br>
++65166759201105799566396259853551276355876814021340</br>
++98290162968734298507924718460568748283313812591619</br>
++62476156902875901072733103299140623864608333378638</br>
++25792630239159000355760903247728133888733917809696</br>
++66014696150317542267511259933155296742133363002229</br>
++64906480934582008181061802100227664580400278213336</br>
++75857301901137175467276305904435313131903609248909</br>
++72464279284555499134900051802957070829190525567818</br>
++89913899625138662319380053611346224294610248954072</br>
++40485712325662888893172211643294781619055486805494</br>
++34410340906807160880282279596869501336438142682521</br>
++70472870863010137301155236861416908375675747637239</br>
++76318575703810944339056456446852418302814810799837</br>
++69185121272019350440418046047216269394457883770901</br>
++05974693219720558114078775989772072009689382249303</br>
++23683051586265728111463799698313751793762321511125</br>
++23497343052406221052442343537329056551634066695061</br>
++65892878218707756794176080712973781335187117931650</br>
++03315552382248773065344417945341539520242444970341</br>
++01208740721881093882681675120422994049481794494727</br>
++32894770111574139441228455521828424922240658752689</br>
++17227278060711675404697300803703961878779669488255</br>
++56146743843925701158295466613586786718976612973112</br>
++67200072971553613027503556167817765442287442114729</br>
++88161480270524380681765357327557860250584708401320</br>
++88379328160087690813004924914736825170353822196190</br>
++39014999523495387105997351143478292339499187936608</br>
++69230137559636853237380670359114424326856151210940</br>
++42595826393016780171286692392832310576588517140202</br>
++11196957064799814031505633045141564414623163763809</br>
++90440281625691757648914256971416359843931743327023</br>
++78123369380430128926263753826677950341693343236075</br>
++00248175741808750388475094939454896209740485442635</br>
++63716499594992098088429479036366629752600324385635</br>
++29458447289445471662092974954966168774141208821304</br>
++77022816116456044007236351581149729739218966737382</br>
++64720472264222124201656015028497130633279581430251</br>
++60136948255670147809357908896571349261581613469018</br>
++06965089556310121218491805847922720691871696316330</br>
++04485802010286065785859126997463766174146393415956</br>
++95395542033146280265189511679380745733157598460861</br>
++73702687867602943677780500244673391332431669880354</br>
++07323238828184750105164133118953703648842269027047</br>
++80527424906034920829547550540034571601840725745369</br>
++38145531175354210726557835615499874447480427323457</br>
++88006187314934156604635297977945507535930479568720</br>
++93167245365472083816858556060438019770307642460834</br>
++89876101345709394877002946175792061952549255757109</br>
++03852517148852526567104534981341980339064152987634</br>
++36954202560802776144219143189213939088345431317696</br>
++85101840103844472348948869520981943531906506555354</br>
++61733581404554483788475252625394966586999205841765</br>
++27801253410338964698186424300341467913806190280596</br>
++07854888010789705516946215228773090104467462497979</br>
++99262712095168477956848258334140226647721084336243</br>
++75937416105367340419547389641978954253350363018614</br>
++00951534766961476255651873823292468547356935802896</br>
++01153679178730355315937836308224861517777054157757</br>
++65617593585120166929431111388635821596676188303261</br>
++04164651714846979385422621687161400122378213779774</br>
++13126897726671299202592201740877007695628347393220</br>
++10881593562862819285635718933849588506038531581797</br>
++60679479840878360975960149733420572704603521790605</br>
++64760328556927627349518220323614411258418242624771</br>
++20120357763888959743182328278713146080535335744942</br>
++97621796789034568169889553518504478325616380709476</br>
++95169908624710001974880920500952194363237871976487</br>
++03392238115403634754886268459561597551937654101150</br>
++14067001226927474393888589943859730245414801061235</br>
++90803627458528849356325158538438324249325266608758</br>
++89083187007091002373771065769850564339288543376583</br>
++42596750653715005333514489908293887737352051459333</br>
++04962653141514138612443793588507094468804548697535</br>
++81702129084907873478068143663233228194158273456713</br>
++56443171537967818058195852464840084032909981943781</br>
++71817730231700398973305049538735611626102399943325</br>
++97801268934326055847102787649010709234438846340117</br>
++35556865903585244919370181041626208504299258697435</br>
++81709813389404593447193749387762423240985283276226</br>
++66049423851297094532455862521036008292866497241749</br>
++19141988966129558076770979594795306013119159011773</br>
++94310420904907942444886851308684449370590902600612</br>
++06494257447103535476578592427081304106185462198818</br>
++30090634588187038755856274911587375421064667951346</br>
++48758677154383801852134828191581246259933516019893</br>
++55951679689328522058247994210345127158771633452229</br>
++95418839680448835529753361286837225935390079201666</br>
++94133909116875880398882886921600237325736158820716</br>
++35162713328105181876021048521806755266486739089009</br>
++07195138058626735124312215691637902277328705410842</br>
++03784152568328871804698795251307326634027851905941</br>
++73389203585403956770356113293544825856282876106106</br>
++98229721420961993509331312171187891078766872044548</br>
++87608941017479864713788246215395593333327556200943</br>
++95804345379197822805903959599274369137937786649409</br>
++64048777841748336432684026282932406260081908081804</br>
++39091455635193685606304508914228964521998779884934</br>
++74777291327972660276584016678901364905087411421268</br>
++61969862044126965282981087045479861559545338021201</br>
++15564697997678573892018624359932677768945406050821</br>
++88382279098336271671244900267611784982643770330020</br>
++81844590009717235204331994708242098771514449751017</br>
++05564302954282181967000920251561584417420593365814</br>
++81349026931115170938722600264586305613256057925609</br>
++27332265579346280805683443921373688405650434307396</br>
++57406101777937014142461549307074136080544210029560</br>
++00956635889778992676305177187819437067614982175641</br>
++86590116160865408635391513039201316805769034172596</br>
++45369235080641744656235152392905040947995318407486</br>
++21512105618338545661766526063937136588025216662235</br>
++76132201941701372664966073252010771947931265282763</br>
++30241380516490717456596485374835466919452358031530</br>
++19691604809946068149040378198297323609300871357607</br>
++98621425422096419004367905479049930078372421581954</br>
++53541837112936865843055384271762803527912882112930</br>
++83515756565999447417884383815651484342298587042455</br>
++92434693295232821803508333726283791830216591836181</br>
++55421715744846577842013432998259456688455826617197</br>
++90121808494803324487872581837748055222681510113717</br>
++45368417870280274452442905474518234674919564188551</br>
++24442133778352142386597992598820328708510933838682</br>
++99065719946149062902574276860388505110326385445404</br>
++19184958866538545040571323629681069146814847869659</br>
++16686184275679846004186876229805556296304595322792</br>
++30516167215919686758495236352989357885077460815373</br>
++21454642984792310511676357749494622952569497660359</br>
++47396243099534331040499420967788382700271447849406</br>
++90370732491064441516960532565605867787574174721108</br>
++27435774315194060757983563629143326397812218946287</br>
++44779811980722564671466405485013100965678631488009</br>
++03037493388753641831651349825466946733161181233648</br>
++54397649325026179549357204305402182974871251107404</br>
++01161140589991109306249231281311634054926257135672</br>
++18186289327861388337180285350565035919527414008695</br>
++10926167541476792668032109237467087213606278332922</br>
++38641361959412133927803611827632410600474097111104</br>
++81400036233427145144833346416754663546997314947566</br>
++43423659493496845884551524150756376605086632827424</br>
++79413606287604129064491382851945640264315322585862</br>
++40431418386695906332450630003922131926476259626915</br>
++10904457695301444054618037857503036686212462278639</br>
++75274666787012100339298487337501447560032210062235</br>
++80293437749550320370127384681630610265703008722754</br>
++62966796880890587127676361066225722352229739206443</br>
++09352432722810085997309513252863060110549791564479</br>
++18450046180467624089289256809129305929606423570210</br>
++61524646205023248966593987324933967376952023991760</br>
++89847457184353193664652912584806448019652016283879</br>
++51894993367592414856261369959453072872545324632915</br>
++29110128763770605570609531377527751867923292134955</br>
++24513308986796916512907384130216757323863757582008</br>
++03635757280027544903279530799007994425411087256931</br>
++88014667935595834676432868876966610097395749967836</br>
++59339784634695994895061049038364740950469522606385</br>
++80467580730699122904740898791668721171475276447116</br>
++04401952718169508289733537148530928937046384420893</br>
++29977112585684084660833993404568902678751600877546</br>
++12679880154658565220612109534907967073655397025761</br>
++99431376639960606061106406959330828171876426043573</br>
++42536175694378484849525010826648839515970049059838</br>
++08121052211110919433239511360514464598342107990580</br>
++82093716464523127704023160072138543723461267260997</br>
++87038565709199850759563461324846018840985019428768</br>
++79022687345565005191215465440638292538512763176639</br>
++22050938345204300773017029940362615434001322763910</br>
++91298832786392041230044555168405488980908077917463</br>
++60924393349126411642400938807463566072623366958427</br>
++64583698268734815881961058571835767462009650526065</br>
++92926354829149904576830721089324585707370166071739</br>
++81944850288426039636607460311847862258310565808708</br>
++70305567595861341700745402965687634774176431051751</br>
++03673286924555858208237203860178173940517513043799</br>
++48688223200443780431031709210342616749980000730160</br>
++94814586374488778522273076330495383944345382770608</br>
++76076354209844500830624763025357278103278346176697</br>
++05442871553153400164970766571959850417481990872014</br>
++90875686037783591994719343352772947285537925787684</br>
++83230110185936580071729118696761765505377503029303</br>
++38307064489128114120255061508964110076238245744886</br>
++55182581058140345320124754723269087547507078577659</br>
++73254284445935304499207001453874894822655644222369</br>
++63655441942254413382122254774975354946248276805333</br>
++36983284156138692363443358553868471111430498248398</br>
++99180316545863828935379913053522283343013795337295</br>
++40162576232280811384994918761441413229337671065634</br>
++92528814528239506209022357876684650116660097382753</br>
++66040544694165342223905210831458584703552935221992</br>
++82727605748212660652913855303455497445514703449394</br>
++86863429459658431024190785923680224560763936784166</br>
++27051855517870290407355730462063969245330779578224</br>
++59497104201880430001838814290081730394505073427870</br>
++13124466860092778581811040911511729374873627887874</br>
++90746528556543474888683106411005102302087510776891</br>
++87815256227352515503795324448577872776170019648537</br>
++03555167655209119339343762866284619844026295252183</br>
++67852236747510880978150709897841308624588152266096</br>
++35514018744958369269177990471207264949057372642860</br>
++05211403581231076006699518536124862746756375896225</br>
++29911649606687650826173417848478933729505673900787</br>
++86179253514406210453662506404637288156982323175005</br>
++96261080921955211150859302955654967538862612972339</br>
++91462835847604862762702730973920200143224870758233</br>
++73549152460856082103288829741839064788699232736913</br>
++60048837436615223517058437705545210815513361262142</br>
++91181561530175888257359489250710887926212864139244</br>
++33093837973338678061317952373152667738208580247014</br>
++33527009243803266951742119507670884326346442749127</br>
++55890774686358216216604274131517021245858605623363</br>
++14931646469139465624974717419583542186077487110573</br>
++38458433689939645913740603382159352243594751626239</br>
++18868530782282176398323730618020424656047752794310</br>
++47961897242995330297924974816840528937910449470045</br>
++90864991872727345413508101983881864673609392571930</br>
++51196864560185578245021823106588943798652243205067</br>
++73799661969554724405859224179530068204517953700434</br>
++72451762893566770508490213107736625751697335527462</br>
++30294303120359626095342357439724965921101065781782</br>
++61087453188748031874308235736991951563409571627009</br>
++92444929749105489851519658664740148225106335367949</br>
++73714251022934188258511737199449911509758374613010</br>
++55050641977215319293548753711916302620303285886585</br>
++28480193509225875775597425276584011721342323648084</br>
++02714335636754204637518255252494432965704386138786</br>
++59019657388028684018940876728167141370336617326501</br>
++20578653915780703088714261519075001492576112927675</br>
++19309672845397116021360630309054224396632067432358</br>
++27978893323244057791992784846333397777376559018705</br>
++74806828678347965624146102899508487399692970750432</br>
++75302997287229732793444298864641272534816060377970</br>
++72982991730292963086958019963124133049393504933254</br>
++12355071054461182591141116454534710329881047844067</br>
++78013807713146540009938630648126661433085820681139</br>
++58383191695455582594268957698414288937434670841079</br>
++46318932539106963955780706021245974898293564613560</br>
++78898347241997947856436204209461341238761319886535</br>
++23583129968622689486084084566556068769545012744866</br>
++31405054735351746873009806322780468912246821460806</br>
++72762770840240226615548502400895289165711761743902</br>
++03375848778429112896232470591918746910420058483261</br>
++40677333751027195653994697162517248312230633919328</br>
++70798380074848572651612343493327335666447335855643</br>
++02352808839243482787608861649432893991663992104883</br>
++07847777048045728491456303353265070029588906265915</br>
++49850940797276756712979501009822947622896189159144</br>
++15200322838787734851309790810191292672271037788980</br>
++53964156362364169154985768408398468861684375407065</br>
++12103906250612810766379904790887967477806973847317</br>
++04752534421563903872012388063236880370179493089549</br>
++00776331523063548374256816653361606641980030188287</br>
++12376748189833024683637148830925928337590227894258</br>
++80600872860388591688497306939480205112217663591382</br>
++51524278670094406942355120201568377778851824670025</br>
++65170850924962374772681369428435006293881442998790</br>
++53010562173754591826799732177350293689280652100253</br>
++96268807498092643458011655715886700443503976505323</br>
++47828732736884086354000274067678382196352222653929</br>
++09398073673913640828987220177767471681181958561337</br>
++21583119054682936083236976113450281757830202934845</br>
++98292500089568263027126329586629214765314223335179</br>
++30933879513570953463771836840924444220963193312956</br>
++20305575517340067973740614162107923633423805646850</br>
++09203716715264255637185388957141641977238742261059</br>
++66673969971731681694154350952831935564177056686222</br>
++15217991151355639707143312893657553844648326201206</br>
++42433801695586269856102246064606933079384785881436</br>
++74070005997697036490192733288261353293631124036506</br>
++98652160638987250267238087403396744397830258296894</br>
++25689674186433613497947524552629142652284241924308</br>
++33881035800537870239995421721136865502753413622116</br>
++93140694669513186928102574795985605145005021715913</br>
++31775160995786555198188619321128211070944228724044</br>
++24811534060558959583558152320121846058205635926993</br>
++03478851132068626627588771446035996656108430725696</br>
++50056306448918759946659677284717153957361210818084</br>
++15472731426617489331341746326623542220726001460127</br>
++01206934639520564445543291662986660783089068118790</br>
++09081529506362678207561438881578135113469536630387</br>
++84120923469428687308393204323338727754968052103028</br>
++21544324723388845215343727250128589747691460808314</br>
++40412586818154004918777228786980185345453700652665</br>
++56491709154295227567092222174741120627206566229898</br>
++06032891672068743654948246108697367225547404812889</br>
++24247185432360575341167285075755205713115669795458</br>
++48873987422281358879858407831350605482905514827852</br>
++94891121905383195624228719484759407859398047901094</br>
++19407067176443903273071213588738504999363883820550</br>
++16834027774960702768448802819122206368886368110435</br>
++69529300652195528261526991271637277388418993287130</br>
++56346468822739828876319864570983630891778648708667</br>
++61854856800476725526754147428510281458074031529921</br>
++97814557756843681110185317498167016426647884090262</br>
++68282444825802753209454991510451851771654631180490</br>
++45679857132575281179136562781581112888165622858760</br>
++30875974963849435275676612168959261485030785362045</br>
++27450775295063101248034180458405943292607985443562</br>
++00937080918215239203717906781219922804960697382387</br>
++43312626730306795943960954957189577217915597300588</br>
++69364684557667609245090608820221223571925453671519</br>
++18348725874239194108904441159599327600445065562064</br>
++61164655665487594247369252336955993030355095817626</br>
++17623184956190649483967300203776387436934399982943</br>
++02091470736189479326927624451865602395590537051289</br>
++78163455423320114975994896278424327483788032701418</br>
++67695262118097500640514975588965029300486760520801</br>
++04915378854139094245316917199876289412772211294645</br>
++68294860281493181560249677887949813777216229359437</br>
++81100444806079767242927624951078415344642915084276</br>
++45200020427694706980417758322090970202916573472515</br>
++82904630910359037842977572651720877244740952267166</br>
++30600546971638794317119687348468873818665675127929</br>
++85750163634113146275304990191356468238043299706957</br>
++70150789337728658035712790913767420805655493624646</br>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page.html
+@@ -0,0 +1,13 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++</head>
++<body>
++This a find-in-page match rect test.</br>
++result 00</br>
++<iframe src="find_in_page_frame.html" id="frame" height="300" scrolling="yes"></iframe>
++</br>
++result 01
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_desktop.html
+@@ -0,0 +1,22 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <style>
++    iframe {
++      margin-top: 3000px;
++      margin-left: 1500px;
++    }
++    body {
++      height: 6000px;
++      width: 6000px;
++    }
++  </style>
++</head>
++<body>
++This a find-in-page match rect test.</br>
++result 00</br>
++<iframe src="find_in_page_frame.html" id="frame" height="300" scrolling="yes"></iframe>
++</br>
++result 01
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_frame.html
+@@ -0,0 +1,109 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++<style type="text/css">
++div.transform {
++  background-color: #00FF00;
++  width: 100px;
++  height: 100px;
++  padding-left: 30px;
++  padding-top: 20px;
++  transform:matrix(0.866,0.5,-0.5,0.866,120,150);
++}
++div.scroll {
++  background-color: #00FFFF;
++  width: 100px;
++  height: 100px;
++  overflow: scroll;
++}
++div.fixed {
++  background-color: #FF0000;
++  left: 200px;
++  top: 50px;
++  width: 100px;
++  height: 100px;
++  position: fixed;
++}
++div.relative-overflow {
++  position: relative;
++  overflow: hidden;
++  height: 100px;
++}
++div.margin-overflow {
++  overflow: hidden;
++  margin-top:20px;
++  height: 50px;
++}
++div.absolute {
++  position: absolute;
++  top: 0px;
++  height: 20px;
++  width: 80px;
++  background-color: "green";
++}
++</style>
++</head>
++<body>
++This is a test.
++<br>
++<br>
++<br>
++Foo bar.
++<br>
++<br>
++<br>
++result 02
++<div class="transform">
++result 03
++</div>
++result 04
++<div class="fixed">
++result 05
++</div>
++result 06
++<div class="scroll">
++result 07
++Foo bar.
++<br>
++<br>
++<br>
++result 08
++</div>
++result 09
++<br>
++result 10
++<table border="1" cellpadding="10" cellspacing="10">
++<tr>
++  <th>Foo</th>
++  <th>Bar</th>
++  <th>result 11</th>
++</tr>
++<tr>
++  <td rowspan="2">result 12</td>
++  <td colspan="2">result 13</td>
++</tr>
++<tr>
++  <td colspan="2">result 14</td>
++</tr>
++</table>
++result 15
++<div class="transform">
++<div style="height:0px">
++  <div style="float:left;">
++    result 16
++  </div>
++</div>
++</div>
++<div class="relative-overflow">
++  <div class="margin-overflow">
++    result 17
++    <div class="absolute">result 18</div>
++  </div>
++</div>
++<!-- Results below this line will not yield matches. -->
++<select>
++<option>result 19</option>
++</select>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_multi_frame.html
+@@ -0,0 +1,14 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++</head>
++<body>
++This a find-in-page test with multiple frames.</br>
++top result</br>
++<iframe id="frame1" height="300" scrolling="yes"></iframe></br>
++middle result</br>
++<iframe id="frame2" height="300" scrolling="yes"></iframe></br>
++bottom result</br>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_simple_frame.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++<body>
++  this frame contains a result.
++  and another result.
++  and another result.
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_two_frames.html
+@@ -0,0 +1,8 @@
++<!DOCTYPE html>
++<html>
++<body>
++Making two frames to reproduce crbug.com/889075.
++<iframe src="find_in_page_simple_frame.html"></iframe>
++<iframe src="find_in_page_simple_frame.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_page_with_portal.html
+@@ -0,0 +1,13 @@
++<!DOCTYPE html>
++<html>
++<head>
++<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
++</head>
++<body>
++This a find-in-page match rect test.</br>
++result 00</br>
++<portal src="find_in_page_frame.html"></portal>
++</br>
++result 01
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/find_in_simple_page.html
+@@ -0,0 +1,8 @@
++<!DOCTYPE html>
++<html>
++  <body>
++    This is a simple page with 5 matches for "result".
++
++    result Result RESULT rEsUlT
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/font_src_local_matching.html
+@@ -0,0 +1,136 @@
++<meta charset="utf-8">
++<style id="fontfaces">
++</style>
++<body>
++<script>
++function getFontsWithTestCharsForOS() {
++  if (navigator.userAgent.indexOf("Android") !== -1) {
++    // Intersection of available fonts of Android Kitkat to Oreo that kept the
++    // same family names to compare against for these postscript or full font
++    // names. (RobotoThin* and RobotoLight* had differing family names on
++    // different Android versions.
++    return [
++      ["AndroidClock-Regular", "0"],
++      ["Roboto-Bold", "0"],
++      ["DroidSansMono", "0"],
++      ["Roboto-Regular", "0"],
++      ["Noto Color Emoji", "☺"],
++      ["NotoSansBengali-Bold", "0"],
++      ["NotoSansBengaliUI-Bold", "0"],
++      ["NotoSansDevanagari-Bold", "0"],
++      ["NotoSansDevanagari", "0"],
++      ["NotoSansDevanagariUI-Bold", "0"],
++      ["NotoSansDevanagariUI", "0"],
++      ["NotoSansKannada-Bold", "0"],
++      ["NotoSansKannada", "0"],
++      ["NotoSansKannadaUI-Bold", "0"],
++      ["NotoSansKannadaUI", "0"],
++      ["NotoSansLao-Bold", "0"],
++      ["NotoSansLao", "0"],
++      ["NotoSansLaoUI-Bold", "0"],
++      ["NotoSansLaoUI", "0"],
++      ["NotoSansMalayalam-Bold", "0"],
++      ["NotoSansMalayalam", "0"],
++      ["NotoSansMalayalamUI-Bold", "0"],
++      ["NotoSansMalayalamUI", "0"],
++      ["NotoSansTamil-Bold", "0"],
++      ["NotoSansTamil", "0"],
++      ["NotoSansTamilUI-Bold", "0"],
++      ["NotoSansTamilUI", "0"],
++      ["NotoSansTelugu-Bold", "0"],
++      ["NotoSansTelugu", "0"],
++      ["NotoSansTeluguUI-Bold", "0"],
++      ["NotoSansTeluguUI", "0"],
++      ["NotoSansThai-Bold", "๐"],
++      ["NotoSansThai", "๐"],
++      ["NotoSansThaiUI-Bold", "๐"],
++      ["NotoSansThaiUI", "๐"],
++      ["Roboto-BoldItalic", "0"],
++      ["RobotoCondensed-BoldItalic", "0"],
++      ["RobotoCondensed-Bold", "0"],
++      ["RobotoCondensed-Italic", "0"],
++      ["RobotoCondensed-Regular", "0"],
++      ["Roboto-Italic", "0"],
++    ];
++  } else if (navigator.userAgent.indexOf("Linux") !== -1
++             || navigator.userAgent.indexOf("CrOS") !== -1) {
++    return [
++      ["Ahem", "0"],
++      ["Arimo-Bold", "0"],
++      ["Arimo-BoldItalic", "0"],
++      ["Arimo-Italic", "0"],
++      ["Arimo-Regular", "0"],
++      ["Cousine-Bold", "0"],
++      ["Cousine-BoldItalic", "0"],
++      ["Cousine-Italic", "0"],
++      ["Cousine-Regular", "0"],
++      ["DejaVuSans", "0"],
++      ["DejaVuSans-Bold", "0"],
++      ["Garuda", "0"],
++      ["Gelasio-Bold", "0"],
++      ["Gelasio-BoldItalic", "0"],
++      ["Gelasio-Italic", "0"],
++      ["Gelasio-Regular", "0"],
++      ["Lohit-Devanagari", "0"],
++      ["Lohit-Gurmukhi", "0"],
++      ["Lohit-Tamil", "0"],
++      ["NotoSansKhmer-Regular", "០"],
++      ["Tinos-Bold", "0"],
++      ["Tinos-BoldItalic", "0"],
++      ["Tinos-Italic", "0"],
++      ["Tinos-Regular", "0"],
++      ["muktinarrow", "0"],
++      ["Tinos-Regular", "0"]
++    ];
++  } else if (navigator.userAgent.indexOf("Macintosh") !== -1) {
++    return [
++      [ "AmericanTypewriter-CondensedLight", "0" ],
++      [ "ArialNarrow-BoldItalic", "0" ],
++      [ "Baskerville-SemiBoldItalic", "0" ],
++      [ "DevanagariMT", "0" ],
++      [ "DINAlternate-Bold", "0" ],
++      [ "GillSans-LightItalic", "0" ],
++      [ "IowanOldStyle-Titling", "0" ],
++      [ "MalayalamSangamMN", "0" ],
++      [ "HiraMaruPro-W4", "0" ],
++      [ "HiraKakuStdN-W8", "0" ],
++    ];
++  } else if (navigator.userAgent.indexOf("Windows") !== -1) {
++    return [
++      ["CambriaMath", "0"],
++      ["Ming-Lt-HKSCS-ExtB", "0"],
++      ["NSimSun", "0"],
++      ["calibri-bolditalic", "0"]
++      ];
++  }
++  return [];
++}
++
++function stripSpaces(fontName) {
++  return fontName.replace(/\s+/g, '');
++}
++
++async function addTestNodes() {
++  var containerDiv = document.createElement("div");
++  var fontFaceDeclarations = "";
++    for (font_name_and_testchars of getFontsWithTestCharsForOS()) {
++    var font_name = font_name_and_testchars[0];
++    // Add cursive to font stack to avoid ignoring failures when Roboto is used as fallback.
++    fontFaceDeclarations +=
++      `@font-face { font-family: ${stripSpaces(font_name)}_webfont; \
++      src: local("${font_name}"); } .${stripSpaces(font_name)}_style \
++      { font-family: ${stripSpaces(font_name)}_webfont, cursive; } `;
++    var testElement = document.createElement("div");
++    testElement.classList += `testnode ${stripSpaces(font_name)}_style`;
++    testElement.innerText = font_name_and_testchars[1];
++    containerDiv.appendChild(testElement);
++  }
++  fontfaces.innerText = fontFaceDeclarations;
++  document.body.appendChild(containerDiv);
++  await document.fonts.ready;
++  // Force layout so that the DevTools side of the test can start accessing
++  // nodes' font information reliably.
++  document.body.offsetTop;
++  return containerDiv.children.length;
++}
++</script>
+--- /dev/null
++++ b/content/test/data/form_that_posts_cross_site.html
+@@ -0,0 +1,16 @@
++<!DOCTYPE html>
++<html>
++  <head></head>
++  <meta name="viewport" content="width=device-width">
++  <body>
++    <form id="text-form" method="POST" action="/cross-site-307/i.com/cross-site-307/x.com/echoall">
++      <input type="text" id="text" name="text" value="value">
++      <input type="submit">
++    </form>
++    <form id="file-form" method="POST" action="/cross-site-307/x.com/echoall"
++          enctype="multipart/form-data">
++      <input type="file" id="file" name="file">
++      <input type="submit">
++    </form>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/form_that_posts_to_echoall.html
+@@ -0,0 +1,14 @@
++<!DOCTYPE html>
++<html>
++  <head></head>
++  <body>
++    <form id="form" method="POST" action="/echoall">
++      <input type="text" name="text" value="value">
++      <input type="submit">
++    </form>
++    <form id="file-form" method="POST" action="/echoall" enctype="multipart/form-data">
++      <input type="file" id="file" name="file">
++      <input type="submit">
++    </form>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/form_that_posts_to_echoall_nocache.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++  <head></head>
++  <body>
++    <form id="form" method="POST" action="/echoall/nocache">
++      <input type="text" name="text" value="value">
++      <input type="submit">
++    </form>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/frame-ancestors-none.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<head>
++<title>This page should NOT load in a frame</title>
++</head>
++<body>
++This page cannot be loaded in an iframe because its CSP specifies frame-ancestors 'none'.
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/frame-src-self-and-b.html
+@@ -0,0 +1,21 @@
++<!DOCTYPE html>
++<html>
++<head>
++<title>This page should only allow subframes from the same origin or b.com</title>
++</head>
++<body>
++This page should only allow subframes from the same origin or from b.com,
++because its CSP headers specify frame-src 'self' and 'b.com'.
++<iframe src="/cross-site/b.com/title2.html"></iframe>
++<iframe srcdoc="
++  <html>
++    <head>
++      <title>subtitle1</title>
++    </head>
++    <body>
++      <iframe src='/cross-site/b.com/title2.html'></iframe>
++    </body>
++  </html>"></iframe>
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/frame_owner_properties_csp.html
+@@ -0,0 +1,9 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <iframe id="child-1"
++      csp="object-src 'none'"
++      src="/cross-site/b.com/title1.html">
++  </iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/frame_owner_properties_margin.html
+@@ -0,0 +1,9 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <iframe id="child-1"
++      marginwidth="10"
++      marginheight="50"
++      src="/cross-site/b.com/title1.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/frame_owner_properties_scrolling.html
+@@ -0,0 +1,11 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <iframe
++      id="child-1"
++      height="200"
++      width="200"
++      frameborder="0"
++      src="/cross-site/b.com/tall_page.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/frame_with_load_event.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<head>
++</head>
++<body>
++  This page has a cross-site iframe with a load event.
++  <iframe id='test' onload="document.title += 'LOADED';" src="/cross-site/baz.com/title1.html"></iframe>
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/fullscreen_frame.html
+@@ -0,0 +1,47 @@
++<!DOCTYPE html>
++<html>
++<head>
++<script>
++
++var expectedWidth, expectedHeight;
++
++function onResize() {
++  if (window.innerWidth == expectedWidth && window.innerHeight == expectedHeight) {
++    domAutomationController.send("resize");
++    removeResizeListener();
++  }
++}
++
++function addResizeListener(width, height) {
++  expectedWidth = width;
++  expectedHeight = height;
++  window.addEventListener('resize', onResize);
++}
++
++function removeResizeListener() {
++  window.removeEventListener('resize', onResize);
++}
++
++function activateFullscreen() {
++  document.getElementById("fullscreen-div").webkitRequestFullscreen();
++}
++
++function exitFullscreen() {
++  document.webkitExitFullscreen();
++}
++
++</script>
++</head>
++<body>
++
++<div>This page contains a div that will go fullscreen</div>
++
++<div id="fullscreen-div" style="border: 1px solid black;">
++  This div will go fullscreen
++</div>
++
++<iframe id="child-0" srcdoc="This should not go fullscreen"></iframe>
++
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/hang_before_unload.html
+@@ -0,0 +1,29 @@
++<html>
++
++  <head><title>BeforeUnload dialog</title>
++  <script>
++    function clickLink() {
++      var evt = document.createEvent("MouseEvents");
++      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false,
++                         false, false, 0, null);
++      var target = document.getElementById("link");
++      target.dispatchEvent(evt);
++    }
++
++    function clickLinkSoon() {
++      window.setTimeout(clickLink, 100);
++      return true;
++    }
++
++    window.addEventListener("beforeunload", function(e) {
++      var confirmationMessage = "foo";
++      e.returnValue = confirmationMessage;
++      return confirmationMessage;
++    });
++
++  </script>
++  </head>
++
++<a href="title2.html" id="link">link</a><br>
++
++</html>
+--- /dev/null
++++ b/content/test/data/hello.html
+@@ -0,0 +1,2 @@
++<!doctype html>
++<p>hello</p>
+--- /dev/null
++++ b/content/test/data/https_upgrade_cross_site.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<title>Cross Site HTTPS upgrade</title>
++
++<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
++
++<body>
++  <iframe src="http://other.com/title1.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/https_upgrade_same_site.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<title>Same Site HTTPS upgrade</title>
++
++<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
++
++<body>
++  <iframe src="/title1.html"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/iframe_clipped.html
+@@ -0,0 +1,136 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <style>
++    body, html {
++      width: 100%;
++      height: 100%;
++      margin: 0;
++    }
++
++    #iframe {
++      width: 100vw;
++      height: 100vh;
++      border: 0;
++      padding: 0;
++      overflow: scroll;
++    }
++
++    #clip {
++      width: 50%;
++      height: 20%;
++      overflow: hidden;
++    }
++  </style>
++</head>
++<body>
++  <div id="clip">
++    <iframe id="iframe">
++    </iframe>
++  </div>
++  <script>
++  window.loaded = false;
++  window.notifyBrowser = false;
++  const kMarginOfError = 1;
++  const tinyTimeout = 50;
++
++  window.addEventListener("load", () => {
++    window.loaded = true;
++    if (window.notifyBrowser)
++      notifyWhenLoaded();
++  });
++
++  function notifyWhenLoaded() {
++    if (loaded)
++      window.domAutomationController.send("LOADED");
++    else
++      window.notifyBrowser = true;
++  }
++
++  // Waits until the |visualViewport| reaches the given size (approximately).
++  // Notifies the browser when this happens.
++  function notifyVisualViewportChanged(width, height) {
++    if ((Math.abs(visualViewport.width - width) < kMarginOfError) &&
++        (Math.abs(visualViewport.height - height) < kMarginOfError)) {
++      return window.domAutomationController.send("SIZED");
++    }
++
++    window.setTimeout(() => {
++      notifyVisualViewportChanged(width, height);
++    }, tinyTimeout);
++  }
++
++  function isEmptyRect(rect) {
++    return (rect.width * rect.height) === 0;
++  }
++
++  function intersect(rect1, rect2) {
++    let minX1 = rect1.x, maxX1 = minX1 + rect1.width
++        minY1 = rect1.y, maxY1 = minY1 + rect1.height,
++        minX2 = rect2.x, maxX2 = minX2 + rect2.width,
++        minY2 = rect2.y, maxY2 = minY2 + rect2.height;
++
++    return !(isEmptyRect(rect1) ||
++             isEmptyRect(rect2) ||
++             (minX1 > maxX2) ||
++             (minX2 > maxX1) ||
++             (minY1 > maxY2) ||
++             (minY2 > maxY1));
++  }
++
++  function visualViewportAsRect() {
++    return {
++      x: visualViewport.offsetLeft,
++      y: visualViewport.offsetTop,
++      width: Math.round(visualViewport.width),
++      height: Math.round(visualViewport.height)
++    };
++  }
++
++  function rectAsString(rect) {
++    return `${rect.x},${rect.y},${rect.width},${rect.height}`;
++  }
++
++  // Waits until the given element is inside the |visualViewport|.
++  function notifyWhenVisible(el) {
++    if (intersect(el.getBoundingClientRect(), visualViewportAsRect())) {
++      window.domAutomationController.send("VISIBLE");
++    } else {
++      window.setTimeout(() => {
++        notifyWhenVisible(el);
++      }, tinyTimeout);
++    }
++  }
++
++  let lastLayoutViewportX;
++  let lastLayoutViewportY;
++  let lastVisualViewportX;
++  let lastVisualViewportY;
++  let lastScale;
++  function notifyWhenViewportStable(numFrames) {
++    const kUnchangedFramesConsideredStable = 10;
++
++    if (lastLayoutViewportX !== window.scrollX ||
++        lastLayoutViewportY !== window.scrollY ||
++        lastVisualViewportX !== window.visualViewport.offsetLeft ||
++        lastVisualViewportY !== window.visualViewport.offsetTop ||
++        lastScale !== window.visualViewport.scale) {
++      lastLayoutViewportX = window.scrollX;
++      lastLayoutViewportY = window.scrollY;
++      lastVisualViewportX = window.visualViewport.offsetLeft;
++      lastVisualViewportY = window.visualViewport.offsetTop;
++      lastScale = window.visualViewport.scale;
++      numFrames = 0;
++    }
++
++    numFrames++;
++
++    if (numFrames == kUnchangedFramesConsideredStable) {
++      window.domAutomationController.send("VIEWPORT_STABLE");
++    } else {
++      requestAnimationFrame(notifyWhenViewportStable.bind(null, numFrames));
++    }
++  }
++  </script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/iframe_out_of_view.html
+@@ -0,0 +1,117 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <style>
++  body {
++    width: 100%;
++    height: 100%;
++    margin: 0;
++  }
++
++  iframe {
++    width: 400px;
++    height: 400px;
++    margin: 300%;
++    border: 0;
++    padding: 0;
++    overflow: scroll;
++  }
++
++  input {
++    margin: 0;
++    padding: 0;
++    border: 0;
++    height: 1px;
++    font-size: 1px;
++  }
++  </style>
++  <p> Single &lt;iframe&gt; which is positioned out of view. </p>
++  <iframe id="test_iframe">
++  </iframe>
++  <p> Iframe should be positioned way above </p>
++  <script>
++  window.loaded = false;
++  window.notifyBrowser = false;
++  const kInfinity = 1000000;
++  const kMarginOfError = 1;
++  const tinyTimeout = 50;
++
++  window.addEventListener("load", () => {
++    document.scrollingElement.scrollTop = kInfinity;
++    document.scrollingElement.scrollLeft = kInfinity;
++    window.loaded = true;
++    if (window.notifyBrowser)
++      notifyWhenLoaded();
++  });
++
++  function notifyWhenLoaded() {
++    if (loaded)
++      window.domAutomationController.send("LOADED");
++    else
++      window.notifyBrowser = true;
++  }
++
++  // Waits until the |visualViewport| reaches the given size (approximately).
++  // Notifies the browser when this happens.
++  function notifyVisualViewportChanged(width, height) {
++    if ((Math.abs(visualViewport.width - width) < kMarginOfError) &&
++        (Math.abs(visualViewport.height - height) < kMarginOfError)) {
++      return window.domAutomationController.send("SIZED");
++    }
++
++    window.setTimeout(() => {
++      notifyVisualViewportChanged(width, height);
++    }, tinyTimeout);
++  }
++
++  function isEmptyRect(rect) {
++    return (rect.width * rect.height) === 0;
++  }
++
++  function intersect(rect1, rect2) {
++    let minX1 = rect1.x, maxX1 = minX1 + rect1.width
++        minY1 = rect1.y, maxY1 = minY1 + rect1.height,
++        minX2 = rect2.x, maxX2 = minX2 + rect2.width,
++        minY2 = rect2.y, maxY2 = minY2 + rect2.height;
++
++    return !(isEmptyRect(rect1) ||
++             isEmptyRect(rect2) ||
++             (minX1 > maxX2) ||
++             (minX2 > maxX1) ||
++             (minY1 > maxY2) ||
++             (minY2 > maxY1));
++  }
++
++  function visualViewportAsRect() {
++    return {
++      x: visualViewport.offsetLeft,
++      y: visualViewport.offsetTop,
++      width: Math.round(visualViewport.width),
++      height: Math.round(visualViewport.height)
++    };
++  }
++
++  function rectAsString(rect) {
++    return `${rect.x},${rect.y},${rect.width},${rect.height}`;
++  }
++
++  function addFocusedInputField() {
++    var input = document.createElement("input");
++    input.value="some text";
++    document.body.insertBefore(input, document.body.firstChild);
++    input.focus();
++  }
++
++  // Waits until the given element is inside the |visualViewport|.
++  function notifyWhenVisible(el) {
++    if (intersect(el.getBoundingClientRect(), visualViewportAsRect())) {
++      window.domAutomationController.send("VISIBLE");
++    } else {
++      window.setTimeout(() => {
++        notifyWhenVisible(el);
++      }, tinyTimeout);
++    }
++  }
++  </script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/infinitely_loading_image.html
+@@ -0,0 +1 @@
++<img src="/hung">
+--- /dev/null
++++ b/content/test/data/input_box.html
+@@ -0,0 +1,52 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <style>
++    body, html {
++      width: 100%;
++      height: 100%;
++      margin: 0;
++    }
++
++    #space {
++      width: 10000px;
++      height: 10000px;
++    }
++
++    #input {
++      position: absolute;
++      top: 4000px;
++      left: 3000px;
++      border:0;
++      padding:0;
++    }
++  </style>
++  <script>
++    notifyBrowser = false;
++    function notifyWhenLoaded() {
++      if (loaded)
++        window.domAutomationController.send("LOADED");
++      else
++        window.notifyBrowser = true;
++    }
++
++    function rectAsString(rect) {
++      return `${rect.x},${rect.y},${rect.width},${rect.height}`;
++    }
++
++
++    window.addEventListener('load', () => {
++      document.getElementById("input").focus({'preventScroll': true});
++      window.scrollTo(0, 0);
++
++      window.loaded = true;
++      if (window.notifyBrowser)
++        notifyWhenLoaded();
++    });
++  </script>
++</head>
++<body>
++  <div id="space"></div>
++  <input id="input" type="text">
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/input_in_iframe.html
+@@ -0,0 +1,42 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <style>
++    body, html, iframe {
++      width: 100%;
++      height: 100%;
++      margin: 0;
++    }
++
++    iframe {
++      border: 0;
++    }
++
++    #space {
++      width: 200px;
++      height: 200px;
++    }
++
++  </style>
++  <script>
++    loaded = false;
++    notifyBrowser = false;
++    function notifyWhenLoaded() {
++      if (loaded)
++        window.domAutomationController.send("OUTER_LOADED");
++      else
++        window.notifyBrowser = true;
++    }
++    window.addEventListener('load', () => {
++      window.loaded = true;
++      if (window.notifyBrowser)
++        notifyWhenLoaded();
++    });
++  </script>
++</head>
++<body>
++  <div id="space"></div>
++  <iframe src="input_box.html" >
++
++ </body>
++</html>
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/interaction-mq-dynamic.html
+@@ -0,0 +1,30 @@
++<!DOCTYPE html>
++<html>
++<head>
++    <title>Dynamic interaction media query test</title>
++    <script type="text/javascript">
++      function handleMediaChange(mediaQueryList) {
++        if (mediaQueryList.matches) {
++          pass();
++        } else {
++          fail();
++        }
++      }
++
++      function start() {
++        var mql = window.matchMedia("(pointer: coarse) and (hover:hover)");
++        mql.addListener(handleMediaChange);
++      }
++
++      function pass() {
++        document.title = 'SUCCESS';
++      }
++
++      function fail() {
++        document.title = 'FAIL';
++      }
++    </script>
++</head>
++<body onLoad="start()">
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/isolated_base_origin_with_subframe.html
+@@ -0,0 +1,7 @@
++<html>
++  <head></head>
++  <body>
++    <iframe style="width: 50%; height: 50%"></iframe>
++    <iframe style="width: 50%; height: 50%"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/large-cursor.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<meta charset="utf-8">
++<style>
++body {
++  height: 1000px;
++  width: 1000px;
++  cursor: -webkit-image-set(url(single_face.jpg) 1x) 120 120, auto;
++}
++</style>
++
+--- /dev/null
++++ b/content/test/data/link_rel_prefetch.html
+@@ -0,0 +1,6 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <link rel="prefetch" href="image.jpg" />
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/link_rel_prefetch_referrer_policy.html
+@@ -0,0 +1,9 @@
++<!DOCTYPE html>
++<html>
++  <head>
++    <meta content="origin" name="referrer">
++  </head>
++  <body>
++    <link rel="prefetch" href="image.jpg" />
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/local_storage.html
+@@ -0,0 +1,14 @@
++<!DOCTYPE HTML>
++<body>
++  <script>
++    var pagehide_storage_at_load =
++      localStorage.getItem('pagehide_storage');
++    var visibilitychange_storage_at_load =
++      localStorage.getItem('visibilitychange_storage');
++    var unload_storage_at_load =
++      localStorage.getItem('unload_storage');
++  </script>
++  This page gets the value of the items "pagehide_storage",
++  "visibilitychange_storage" and "unload_storage" from
++  localStorage at first load.
++</body>
+--- /dev/null
++++ b/content/test/data/navigate_on_load.html
+@@ -0,0 +1,12 @@
++<html>
++<head>
++<title>Navigate On Load</title>
++<script type="text/javascript">
++window.onload = () => {
++  location.href = '/hello.html';
++};
++</script>
++</head>
++<body>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/navigate_opener.html
+@@ -0,0 +1,12 @@
++<html>
++
++ <head><title>Navigate opener</title>
++ <script>
++  function navigateOpener() {
++    window.opener.location.href = "title2.html";
++    return true;
++  }
++ </script>
++ </head>
++
++</html>
+--- /dev/null
++++ b/content/test/data/nested-unload-0.html
+@@ -0,0 +1,4 @@
++<!DOCTYPE html>
++<html>
++  <body><iframe src="/cross-site/b.com/nested-unload-1.html"></iframe></body>
++</html>
+--- /dev/null
++++ b/content/test/data/nested-unload-1.html
+@@ -0,0 +1,4 @@
++<!DOCTYPE html>
++<html>
++  <body><iframe src="/cross-site/a.com/nested-unload-2.html"></iframe></body>
++</html>
+--- /dev/null
++++ b/content/test/data/nested-unload-2.html
+@@ -0,0 +1,8 @@
++<!DOCTYPE html>
++<html>
++  <script>
++    window.addEventListener('unload', () => {
++      window.top.document.querySelector('iframe').remove();
++    });
++  </script>
++</html>
+--- /dev/null
++++ b/content/test/data/nested_page_with_subresources.html
+@@ -0,0 +1,8 @@
++<!DOCTYPE html>
++<body>
++<script>
++  var i = document.createElement("iframe");
++  i.src = location.protocol + "//not-" + location.hostname + (location.port ? (":" + location.port) : "") + "/page_with_subresources.html";
++  document.body.appendChild(i);
++</script>
++</body>
+--- /dev/null
++++ b/content/test/data/net_info.html
+@@ -0,0 +1,38 @@
++<html>
++<head></head>
++<script>
++
++function getType() {
++  sendValueToTest(navigator.connection.type);
++}
++
++function getDownlinkMax() {
++  sendValueToTest(navigator.connection.downlinkMax);
++}
++
++function getOnLine() {
++  sendValueToTest(navigator.onLine);
++}
++
++function getEffectiveType() {
++  sendValueToTest(navigator.connection.effectiveType);
++}
++
++function getRtt() {
++  sendValueToTest(navigator.connection.rtt);
++}
++
++function getDownlink() {
++  sendValueToTest(navigator.connection.downlink);
++}
++
++function getSaveData() {
++  sendValueToTest(navigator.connection.saveData);
++}
++
++function sendValueToTest(value) {
++  window.domAutomationController.send(value);
++}
++
++</script>
++</html>
+--- /dev/null
++++ b/content/test/data/no_color_scheme_meta_slow.html
+@@ -0,0 +1,2 @@
++<!doctype html>
++<link rel="stylesheet" href="/slow-response">
+--- /dev/null
++++ b/content/test/data/nocache-with-etag.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Nocache Test Page</title></head>
++<body>Nocache test body</body>
++</html>
+--- /dev/null
++++ b/content/test/data/nosniff-test.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>nosniff Test</title></head>
++<body>We should NOT sniff this content as HTML.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/nostore.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Cache-Control: no-store Test Page</title></head>
++<body>Cache-Control: no-store test body</body>
++</html>
+--- /dev/null
++++ b/content/test/data/object-frame.html
+@@ -0,0 +1,4 @@
++<html>
++<head></head>
++<body><object data="/title1.html"><p>fallback</p></object></body>
++</html>
+--- /dev/null
++++ b/content/test/data/onunload_cookie.html
+@@ -0,0 +1,18 @@
++<html> 
++  <head>
++    <title>Loading...</title>
++  </head>
++  <body onload="attachUnloadListener()"> 
++    <script> 
++      function attachUnloadListener() {
++        window.addEventListener('unload', onUnload, false);
++        document.title = "set cookie on unload";
++      }
++
++      function onUnload() {
++        document.cookie = "onunloadCookie=foo";
++      }
++    </script> 
++    <p>Navigate to another page to set cookie</p>
++  </body> 
++</html> 
+--- /dev/null
++++ b/content/test/data/overlapping_cross_site_iframe.html
+@@ -0,0 +1,18 @@
++<html>
++<title>Overlapping cross site iframe</title>
++
++This is the main body content.
++<iframe id="iframe" style="width:300px; height:300px; position:absolute; left:100px; top:100px"></iframe>
++<div id="target" style="background-color: yellow; position: absolute; top: 120px; left: 120px; width: 100px; height: 100px"></div>
++
++<script>
++
++  var url = window.location.protocol + '//b.com';
++  if (window.location.port)
++    url += ':' + window.location.port;
++  url += "/cross_site_iframe_factory.html?b()";
++
++  document.getElementById('iframe').src = url;
++</script>
++
++</html>
+--- /dev/null
++++ b/content/test/data/overscroll_navigation.html
+@@ -0,0 +1,90 @@
++<html>
++<title>Title: 0</title>
++<style>
++
++.large {
++  width: 300px;
++  height: 100px;
++  background-color: red;
++  margin: 300px;
++}
++
++::-webkit-scrollbar {
++    display: none;
++}
++
++</style>
++
++<div name='0' class='large'>A Large Div</div>
++<div name='1' class='large'>A Large Div</div>
++<div name='2' class='large'>A Large Div</div>
++<div name='3' class='large'>A Large Div</div>
++<div name='4' class='large'>A Large Div</div>
++<div name='5' class='large'>A Large Div</div>
++<div name='6' class='large'>A Large Div</div>
++<div name='7' class='large'>A Large Div</div>
++<div name='8' class='large'>A Large Div</div>
++<div name='9' class='large'>A Large Div</div>
++
++<script>
++
++window.touchmoveCount = 0;
++
++function get_current() {
++  if (location.hash.length == 0)
++    return 0;
++  return parseInt(location.hash.substr(1));
++}
++
++function navigate_next() {
++  var current = get_current();
++  current = (current + 1) % 10;
++  location.hash = "#" + current;
++}
++
++function navigate_prev() {
++  var current = get_current();
++  current = (current + 9) % 10;
++  location.hash = "#" + current;
++}
++
++function touch_start_handler() {
++}
++
++function touch_move_handler() {
++  window.touchmoveCount++;
++}
++
++function install_touch_handler() {
++  document.addEventListener('touchstart', touch_start_handler);
++}
++
++function install_touchmove_handler() {
++  document.addEventListener('touchmove', touch_move_handler);
++}
++
++function reset_touchmove_count() {
++  window.touchmoveCount = 0;
++}
++
++function uninstall_touch_handler() {
++  document.removeEventListener('touchstart', touch_start_handler);
++}
++
++function use_replace_state() {
++  window.history.replaceState({}, 'foo');
++}
++
++function use_push_state() {
++  window.history.pushState({}, 'foo2', 'newpath');
++}
++
++onload = function() {
++  window.onhashchange = function() {
++    document.title = "Title: " + location.hash;
++  }
++}
++
++</script>
++
++</html>
+--- /dev/null
++++ b/content/test/data/page-executing-trust-token-signing-from-204-subframe.html
+@@ -0,0 +1,27 @@
++<!DOCTYPE html>
++<meta charset="utf-8">
++
++<script>
++  "use strict";
++  const createChildAndExecuteSigningOp = function() {
++    // Assuming the /nocontent URL is handled by a server returning HTTP 204,
++    // which is the case for EmbeddedTestServers using the default handlers,
++    // |child| will not commit a navigation.
++    const child = document.createElement('iframe');
++    child.src = '/nocontent';
++    document.body.appendChild(child);
++
++    // Without the fix to crbug.com/1111735, the following will lead to a
++    // renderer kill.
++    const childDocument = child.contentDocument;
++    const myFrame = childDocument.createElement('iframe');
++    myFrame.trustToken = JSON.stringify({
++      type: 'send-redemption-record',
++      issuers: ['https://issuer.example']
++    });
++    myFrame.src = '/title1.html'; // arbitrary URL, no need for handling logic
++    childDocument.body.appendChild(myFrame);
++  };
++
++  window.onload = createChildAndExecuteSigningOp;
++</script>
+--- /dev/null
++++ b/content/test/data/page-with-trust-token-permissions-policy-disabled.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<meta charset="utf-8">
++<title></title>
++
++<body>
++  <p>This page has the trust-token-redemption Feature Policy feature disabled (via its mock headers).</p>
++  <p>It also has an iframe! Yay for iframes.</p>
++
++  <iframe src="/cross-site/b.com/title1.html" id="test_iframe" />
++</body>
+--- /dev/null
++++ b/content/test/data/page204.html
+@@ -0,0 +1 @@
++<title>This page intentionally left blank</title>
+--- /dev/null
++++ b/content/test/data/page404.html
+@@ -0,0 +1,2 @@
++<title>SUCCESS</title>
++ 
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/page500.html
+@@ -0,0 +1 @@
++<title>Server Error</title>
+--- /dev/null
++++ b/content/test/data/page_with_allowfullscreen_frame.html
+@@ -0,0 +1,7 @@
++<!DOCTYPE html>
++<html>
++<body>
++  This page has one cross-site iframe with permission to enter fullscreen.
++  <iframe id="child-0" src="/cross-site/b.com/title1.html" allowFullscreen></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_animation.html
+@@ -0,0 +1,29 @@
++<!doctype html>
++<html>
++  <head>
++    <style>
++      @keyframes move {
++        from {
++          transform: translate(-200px, 0);
++        }
++        to {
++          transform: translate(200px, 0);
++        }
++      }
++
++      div {
++        height: 200px;
++        width: 200px;
++
++        animation-duration: 1.5s;
++        animation-iteration-count: infinite;
++        animation-name: move;
++
++        background: black;
++      }
++    </style>
++  </head>
++  <body>
++    <div></div>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_anonymous_iframe.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>
++  <img src="image.jpg"/>
++  <p>This page has an anonymous iframe. Yay for iframes!
++  <p><iframe src="title1.html" id="test_iframe" name="test_iframe" anonymous>
++    </iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_blank_iframe.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <p>This page has blank iframe. Yay for iframes!
++  <p><iframe id="test_iframe" name="test_iframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_blank_iframe_tree.html
+@@ -0,0 +1,17 @@
++<html>
++<head>
++<script>
++function makeDeeper() {
++  // Create an about:blank iframe nested inside the existing #f1 about:blank
++  // iframe.
++  var iframe = document.getElementById("f1");
++  var grandKid = iframe.contentDocument.createElement("iframe");
++  iframe.contentDocument.body.appendChild(grandKid);
++}
++</script>
++</head>
++<body onload="makeDeeper()">
++  <p>This page has an iframe. Yay for iframes!
++  <p><iframe src="about:blank" id="f1"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_blur.html
+@@ -0,0 +1,19 @@
++<!DOCTYPE html>
++<html>
++<head>
++<script>
++
++window.onload = function() {
++  document.body.onblur = function() {
++    domAutomationController.send("document-blur");
++  }
++}
++
++</script>
++</head>
++
++<body>
++This page has a blur event.
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/page_with_cached_subresource.html
+@@ -0,0 +1,7 @@
++<html>
++<head>
++<script src="cachetime"></script>
++</head>
++<body>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_click_handler.html
+@@ -0,0 +1,36 @@
++<!DOCTYPE html>
++<html style="width: 100%; height: 100%">
++<head>
++  <script>
++    clicksReceived = 0;
++
++    function clickHandler(e) {
++      var clickResult = document.getElementById("click-results");
++      clicksReceived++;
++      if (clicksReceived == 1)
++        clickResult.textContent = "1 click received";
++      else
++        clickResult.textContent = clicksReceived + " clicks received";
++    }
++
++    function getClickStatus() {
++      var clickResult = document.getElementById("click-results");
++      return clickResult.textContent;
++    }
++
++    window.addEventListener('load', function(){
++      document.body.addEventListener('click',
++                                      function(e){
++                                        clickHandler(e);
++                                      }, false);
++    }, false);
++  </script>
++</head>
++
++<!-- Be sure to set 100% width/height so the test can determine an appropriate
++     screen region for targeting events. -->
++<body style="width: 100%; height: 100%">
++  Page with Click Handler
++  <div id="click-results">0 clicks received</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_data_iframe_and_allow.html
+@@ -0,0 +1,8 @@
++<html>
++<head></head>
++<body>
++  <p>This page has a data URL iframe which is initially allowed to use the
++  Geolocation API.
++  <p><iframe allow="geolocation" src="data:text/html,Subframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_frameset.html
+@@ -0,0 +1,6 @@
++<html>
++<frameset cols="50%,50%">
++  <frame src="title1.html"/>
++  <frame src="title1.html"/>
++</frameset>
++</html>
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/page_with_hidden_iframe.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <p>This page has a hidden iframe.
++  <p><iframe src="title1.html" id="test_iframe" style="display: none"></iframe>
++</body>
++</html>
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/page_with_iframe.html
+@@ -0,0 +1,8 @@
++<html>
++<head></head>
++<body>
++  <img src="image.jpg"/>
++  <p>This page has an iframe. Yay for iframes!
++  <p><iframe src="title1.html" id="test_iframe" name="test_iframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_iframe_and_image.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>
++  <img src="image.jpg"/>
++  <p>This page has an iframe. Yay for iframes!
++  <p>
++    <iframe src="page_with_image.html" id="test_iframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_iframe_and_link.html
+@@ -0,0 +1,31 @@
++<html>
++
++ <head><title>Page with iframe and link</title>
++ <script>
++  function simulateClick(target) {
++    var evt = document.createEvent("MouseEvents");
++    evt.initMouseEvent("click", true, true, window,
++                       0, 0, 0, 0, 0, false, false,
++                       false, false, 0, null);
++
++    return target.dispatchEvent(evt);
++  }
++
++  function setPortNumber(portNumber) {
++    var link = document.getElementById("cross_site_link");
++    link.setAttribute("href", "http://foo.com:" + portNumber + "/title2.html");
++    return true;
++  }
++
++  function clickCrossSiteLink() {
++    return simulateClick(document.getElementById("cross_site_link"));
++  }
++ </script>
++ </head>
++
++<a href="http://foo.com/title2.html" id="cross_site_link">cross-site</a><br>
++
++<p>This page has an iframe. Yay for iframes!
++<p><iframe src="about:blank"></iframe>
++
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_image.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <img src="./blank.jpg"/>
++  <p>This page has an image. Yay for images!
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_image_redirect.html
+@@ -0,0 +1,4 @@
++<html>
++This page has an image that is going through a redirect.
++<img src="server-redirect?blank.jpg"></img>
++</html>
+\ No newline at end of file
+--- /dev/null
++++ b/content/test/data/page_with_input_field.html
+@@ -0,0 +1,35 @@
++<!DOCTYPE html>
++<html>
++<head>
++<script>
++
++function focusInputField() {
++  var inputField = document.getElementById("text-field");
++  inputField.focus();
++}
++
++function getInputFieldText() {
++  var inputField = document.getElementById("text-field");
++  return inputField.value;
++}
++
++function onInputFocus() {
++  domAutomationController.send("input-focus");
++}
++
++function onInputBlur() {
++  domAutomationController.send("input-blur");
++}
++
++</script>
++</head>
++
++<body>
++This page has a cross-site iframe and a text input field.
++<input type='text' id='text-field'
++       onfocus="onInputFocus()" onblur="onInputBlur()"
++       style="width: 120px;height: 20px;"><br>
++<iframe id='subframe' src="/cross-site/b.com/page_with_blur.html"></iframe>
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/page_with_meta_refresh_frame.html
+@@ -0,0 +1,31 @@
++<!doctype html>
++<html>
++  <head>
++    <title>test</title>
++    <script>
++      window.addEventListener("load",  populateIframe);
++      function populateIframe() {
++        html = "<!doctype html>" +
++        "<html>" +
++        "  <head>" +
++        "    <meta http-equiv=\"refresh\" content=\"0\">" +
++        "    <title>meta refresh in iframe reloads parent</title>" +
++        "  </head>" +
++        "  <body>" +
++        "    iframe" +
++        "  </body>" +
++        "</html>";
++        doc = document.getElementById("frame").contentDocument;
++        // Opening the IFrame's document to write to it will cause the IFrame's 
++        // document's URL to be set to the URL of the parent document 
++        doc.open();
++        doc.write(html);
++        doc.close();
++      }
++    </script>
++  </head>
++  <body>
++    <div>parent</div>
++    <iframe id="frame"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_multiple_cached_subresources.html
+@@ -0,0 +1,8 @@
++<html>
++<head>
++<script src="cachetime"></script>
++</head>
++<body>
++<script src="cachetime"></script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_multiple_iframes.html
+@@ -0,0 +1,11 @@
++<html>
++<head></head>
++<body>
++  <p>This page has several iframes. Yay for iframes!</p>
++  <p><iframe src="page_with_image.html" id="test_iframe_1"></iframe></p>
++  <p><iframe src="page_with_popup.html" id="test_iframe_2"></iframe></p>
++  <p><iframe src="page_with_frameset.html" id="test_iframe_3"></iframe></p>
++  <p><iframe src="page_with_allowfullscreen_frame.html" id="test_iframe_4"></iframe></p>
++  <p><iframe src="page_with_iframe_and_link.html" id="test_iframe_5"></iframe></p>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_non_webby_iframe.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <p>This page has an iframe with a non-webby scheme.</p>
++  <p><iframe src="foo://bar" id="test_iframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_nostore_iframe.html
+@@ -0,0 +1,8 @@
++<html>
++  <head></head>
++  <body>
++    <iframe src="nostore.html"></iframe>
++    Main Frame, normal headers.
++    <img src="nostore.jpg">
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_object_fallback.html
+@@ -0,0 +1,43 @@
++<!doctype html>
++<html>
++<head>
++<title>Test page for &lt;object&gt; element rendering fallback</title>
++</head>
++<body>
++<object data="about:blank" type="text/html">
++  <p id="fallback-content">Fallback Content</p>
++</object>
++<p>Some text so the document is ready for input.</p>
++<script>
++  var send_object_load = false;
++  var fallback = document.getElementById("fallback-content");
++  var object = document.querySelector("object");
++
++  object.addEventListener("load", () => {
++    if (send_object_load)
++      window.domAutomationController.send("OBJECT_LOAD");
++  });
++
++  function setUrl(url, send_load) {
++    send_object_load = send_load;
++    object.data = url;
++  }
++
++  function fallbackVisible(alsoNotifyBrowser) {
++    let rect = fallback.getBoundingClientRect();
++    let hasLayout = (rect.width * rect.height) > 0;
++    if (alsoNotifyBrowser) {
++      window.domAutomationController.send(hasLayout);
++    }
++    return hasLayout;
++  }
++
++  function notifyWhenFallbackShown() {
++    if (!fallbackVisible(false)) {
++      return window.setTimeout(notifyWhenFallbackShown, 10);
++    }
++    fallbackVisible(true);
++  }
++</script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_popup.html
+@@ -0,0 +1,7 @@
++<html>
++<title>page with a iframe for popup</title>
++<head></head>
++  <body>
++    <iframe id="test"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_raf_counter.html
+@@ -0,0 +1,17 @@
++<!doctype html>
++<h1>This page contains a RAF loop and does some measurements of the interval</h1>
++<script>
++var recent_time_stamps = new Array(10);
++var raf_count = 0;
++
++function reset_count() {
++  raf_count = 0;
++}
++function on_raf(t) {
++  raf_count++;
++  recent_time_stamps.shift();
++  recent_time_stamps.push(t);
++  window.requestAnimationFrame(on_raf);
++}
++window.requestAnimationFrame(on_raf);
++</script>
+--- /dev/null
++++ b/content/test/data/page_with_resize_handler.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<script>
++var resize_count = 0;
++window.addEventListener('resize', () => {resize_count++;});
++</script>
++<body>
++Page that counts the number of times it receives a resize event.
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_rss.html
+@@ -0,0 +1,23 @@
++<html>
++<head>
++  <link type="application/rss+xml" rel="alternate" href="rss.xml" />
++  <link type="application/RSS+atom" rel="service.feed" href="atom.xml" />
++  <link type="application/atom+XML" rel="AlTeRnAtE"
++        href="https://some/path.xml" />
++  <!--Some non-RSS link tags-->
++  <link />
++  <link type="other" href="other" />
++  <link type="application/rss+xml" />
++  <link type="application/rss+xml" rel="alternate" href="https://badurl:💩/" />
++  <link type="application/rss+xml" href="no-rel.xml" />
++  <link type="application/rss+xml" rel="bad-rel" href="bad-rel.xml" />
++  <link type="application/rss+xml" rel="non-ascii-💩"
++        href="non-ascii-rel.xml" />
++  <link type="application/rss+xml+💩" rel="service.feed"
++        href="non-ascii-type.xml" />
++</head>
++<body>
++  <p>This page has valid rss links in its head and body.</p>
++  <link type="application/rss+xml" rel="alternate" href="rss-in-body.xml" />
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_rss_in_body.html
+@@ -0,0 +1,35 @@
++<html>
++<head>
++  <!--Some non-RSS link tags-->
++  <link />
++  <link type="other" href="other" />
++  <link type="application/rss+xml" />
++  <link type="application/rss+xml" rel="alternate" href="https://badurl:💩/" />
++  <link type="application/rss+xml" href="no-rel.xml" />
++  <link type="application/rss+xml" rel="bad-rel" href="bad-rel.xml" />
++  <link type="application/rss+xml" rel="non-ascii-💩"
++        href="non-ascii-rel.xml" />
++  <link type="application/rss+xml+💩" rel="service.feed"
++        href="non-ascii-type.xml" />
++</head>
++<body>
++  <p>This page has valid rss links in its body.</p>
++  <link type="application/rss+xml" rel="alternate" href="rss-in-body.xml" />
++  <link type="application/RSS+atom" rel="service.feed"
++        href="atom-in-body.xml" />
++  <link type="application/atom+XML" rel="AlTeRnAtE"
++        href="https://some/path-in-body.xml" />
++  <!--Some non-RSS link tags-->
++  <link />
++  <link type="other" href="other-in-body" />
++  <link type="application/rss+xml" />
++  <link type="application/rss+xml" rel="alternate"
++        href="https://badurl:💩/in-body" />
++  <link type="application/rss+xml" href="no-rel-in-body.xml" />
++  <link type="application/rss+xml" rel="bad-rel" href="bad-rel-in-body.xml" />
++  <link type="application/rss+xml" rel="non-ascii-💩"
++        href="non-ascii-rel-in-body.xml" />
++  <link type="application/rss+xml+💩" rel="service.feed"
++        href="non-ascii-type-in-body.xml" />
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_samesite_iframe.html
+@@ -0,0 +1,9 @@
++<!doctype html>
++<html>
++<head></head>
++<body>
++  <img src="image.jpg"/>
++  <p>This page has an iframe. Yay for iframes!
++  <p><iframe srcdoc="Initial page" id="test_iframe"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_sandboxed_iframe.html
+@@ -0,0 +1,11 @@
++<html>
++
++<head></head>
++
++<body>
++  <img src="image.jpg" />
++  <p>This page has an iframe. Yay for iframes!
++    <p><iframe sandbox="allow-scripts" src="title1.html" id="test_iframe"></iframe>
++</body>
++
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_scrollable_div.html
+@@ -0,0 +1,24 @@
++<!DOCTYPE html>
++<html>
++  <head>
++    <style>
++      div {
++        width: 200px;
++        height: 100px;
++        overflow: scroll;
++      }
++    </style>
++  </head>
++  <body>
++    <div id="scrollable_div">
++      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse
++      finibus massa at leo hendrerit, in pulvinar justo tempor. Suspendisse
++      potenti. Suspendisse ex lectus, faucibus sed nisi vitae, sagittis molestie
++      dolor. Morbi aliquet gravida risus, vel tempus diam accumsan eu. Nam massa
++      lacus, commodo eu mi nec, feugiat semper risus. Cras aliquam convallis
++      venenatis. Interdum et malesuada fames ac ante ipsum primis in faucibus.
++      Nullam vel justo lectus.
++    </div>
++    <br />This page has a scrollable div.
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_subresources.html
+@@ -0,0 +1,26 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <link rel="stylesheet" href="style"></link>
++  <link rel="prefetch" href="prefetch"></link>
++</head>
++<body>
++  <img src="image-inline">
++  <a href="javascript:" ping="ping">link</a>
++
++  <!-- All script-based loading at the bottom to avoid duplicating requests
++       due to the preload scanner -->
++  <script src="script"></script>
++  <script>
++    // <img>
++    var i = document.createElement('img');
++    i.src = "image-script";
++
++    // <a ping>
++    document.querySelector('a').click();
++
++    // Beacon
++    navigator.sendBeacon("/beacon", "foo");
++  </script>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_touch_handler.html
+@@ -0,0 +1,42 @@
++<!DOCTYPE html>
++<html style="width: 100%; height: 100%">
++<head>
++  <script>
++    function touchHandler(e, type) {
++      var touchResult = document.getElementById("last-touch-event");
++      touchResult.innerHTML = type;
++    }
++
++    function getLastTouchEvent() {
++      var touchResult = document.getElementById("last-touch-event");
++      return touchResult.innerHTML;
++    }
++
++    window.addEventListener('load', function(){ // on page load
++      document.body.addEventListener('touchstart',
++                                      function(e){
++                                        touchHandler(e, "touchstart");
++                                      }, false);
++
++      document.body.addEventListener('touchmove',
++                                      function(e){
++                                        touchHandler(e, "touchmove");
++                                      }, false);
++
++      document.body.addEventListener('touchend',
++                                      function(e){
++                                        touchHandler(e, "touchend");
++                                      }, false);
++    }, false);
++  </script>
++</head>
++
++<!-- Be sure to set 100% width/height so the test can determine an appropriate
++     screen region for targeting events. -->
++<!-- Make the body touch-action: none to force sending the touch action back
++     to the browser during the test, so we can verify that functionality. -->
++<body style="width: 100%; height: 100%; touch-action: none">
++  Page with Touch Handler
++  <div id="last-touch-event">noevent</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_touch_start_default_prevented.html
+@@ -0,0 +1,18 @@
++<!DOCTYPE html>
++<html style="width: 100%; height: 100%">
++<head>
++  <script>
++    window.addEventListener('load', function(){ // on page load
++      document.body.addEventListener('touchstart',
++                                      function(e){
++                                        e.preventDefault();
++                                      }, { passive: false });
++    }, false);
++  </script>
++</head>
++
++<!-- Be sure to set 100% width/height so the test can determine an appropriate
++     screen region for targeting events. -->
++<body style="width: 100%; height: 100%">
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_touch_start_janking_main_thread.html
+@@ -0,0 +1,19 @@
++<html>
++<style>
++#janktest{
++  width: 1000px;
++  height: 10000px;
++}
++</style>
++<body onload='setup()'>
++ <div id="janktest"></div>
++</body>
++<script>
++function setup() {
++  document.getElementById('janktest').addEventListener('touchstart', (e) => {
++    var end = performance.now() + 1200;
++    while (performance.now() < end);
++  }, {passive: false});
++}
++</script>
++</html>
+--- /dev/null
++++ b/content/test/data/page_with_webotp.html
+@@ -0,0 +1,9 @@
++<input autocomplete="one-time-code">
++<script>
++  const ac = document.querySelector('input[autocomplete="one-time-code"]');
++  navigator.credentials.get({
++    otp: {transport:['sms']}
++  })
++  .then(content => ac.value = content.code);
++</script>
++
+--- /dev/null
++++ b/content/test/data/page_with_wheel_handler.html
+@@ -0,0 +1,22 @@
++<!DOCTYPE html>
++<html>
++<head>
++  <style>
++    html,body {
++      width: 100%;
++      height: 100%;
++    }
++  </style>
++  <script>
++    var handlerPromise = new Promise(function(resolve) {
++      window.addEventListener('load', function() {
++        document.body.addEventListener(
++            'wheel', resolve, {passive: false});
++      }, false);
++    });
++  </script>
++</head>
++<body>
++  Page with Wheel Handler
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/paste_listener.html
+@@ -0,0 +1,15 @@
++<title>Waiting for paste</title>
++<body>
++<script>
++document.body.contentEditable = true;
++document.body.addEventListener('paste', (event) => {
++  Array.prototype.forEach.call(event.clipboardData.items, (item) => {
++    if (item.type != 'text/rtf') {
++      return;
++    }
++    item.getAsString((s) => {
++      document.title = s;
++    });
++  });
++});
++</script>
+--- /dev/null
++++ b/content/test/data/pause_schedule_task.html
+@@ -0,0 +1,18 @@
++<!DOCTYPE html>
++<html>
++<body>
++
++<input id="textfield" type="text" name="fname" value="">
++<input type="submit" value="Submit">
++
++<script type="text/javascript">
++var input_text = "a";
++var id = setInterval(function() {
++  document.getElementById("textfield").value = input_text;
++  input_text = input_text + "a";
++}, 1);
++</script>
++
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/permissions-policy-main.html
+@@ -0,0 +1,5 @@
++<html>
++<head></head>
++<body>This page has a permissions policy header.</body>
++<iframe src="permissions-policy1.html"></iframe>
++</html>
+--- /dev/null
++++ b/content/test/data/permissions-policy1.html
+@@ -0,0 +1,4 @@
++<html>
++<head></head>
++<body>This page has a permissions policy header.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/permissions-policy2.html
+@@ -0,0 +1,4 @@
++<html>
++<head></head>
++<body>This page has a different permissions policy header.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/permissions-policy3.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>This page has a different permissions policy header.
++<p>
++Note that we can't use use allow="geolocation" here, as this will redirect to a
++different origin, and we don't know the port which will be used.
++<iframe src="/cross-site/b.com/title2.html" allow="geolocation *"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/permissions-policy4.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>This page has a different permissions policy header.
++<p>
++Note that we can't use use allow="geolocation" here, as this will redirect to a
++different origin, and we don't know the port which will be used.
++<iframe src="/cross-site/b.com/title2.html" allow="geolocation *"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/pointerlock_on_dropped_elem.html
+@@ -0,0 +1,20 @@
++<div id="target">
++  <div></div>
++</div>
++<script>
++  function lock() {
++      document.getElementById("target").firstElementChild.requestPointerLock();
++  }
++
++  function replace() {
++      let target = document.getElementById("target");
++      target.removeChild(target.firstElementChild);
++      target.appendChild(document.createElement("div"));
++  }
++
++  document.addEventListener("click", () => {
++      setTimeout(lock, 0);
++      setTimeout(replace, 0);
++      setTimeout(lock, 0);
++  });
++</script>
+--- /dev/null
++++ b/content/test/data/popup.html
+@@ -0,0 +1,35 @@
++<html>
++<head>
++<meta charset="utf8">
++<title>Test Popup Overlay</title>
++<style type="text/css">
++.overlay {
++  position: fixed;
++  z-index: 1000;
++  top: 0;
++  left: 0;
++  width: 100%;
++  height: 100%;
++  background: rgba(0,0,0,0.5);
++}
++.modal {
++  position: fixed;
++  z-index: 1001;
++  left: 50%;
++  top: 50%; 
++  width: 200px;
++  height: 100px;
++  margin-left: -100px;
++  margin-top: -50px;
++  background-color: #ffffff;
++  text-align: center;
++  line-height: 100px;
++}
++</style>
++</head>
++<body>
++<div class="overlay"></div>
++<div class="modal">Popup</div>
++<div>Some text.</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/post_message.html
+@@ -0,0 +1,97 @@
++<html>
++
++ <head><title>Post message tests</title>
++ <script>
++  // Send a message to our opener, and it will reply.
++  function postToOpener(msg, origin) {
++    window.opener.postMessage(msg, origin);
++    return true;
++  }
++
++  // Send a message to our opener's opener.
++  function postToOpenerOfOpener(msg, origin) {
++    window.opener.opener.postMessage(msg, origin);
++    return true;
++  }
++
++  // Send a message to our parent's opener.
++  function postToOpenerOfParent(msg, origin) {
++    parent.opener.postMessage(msg, origin);
++    return true;
++  }
++
++  // Send a message to our parent's opener.
++  function postToOpenerOfSibling(siblingName, msg, origin) {
++    parent.frames[siblingName].opener.postMessage(msg, origin);
++    return true;
++  }
++
++  // Send a message to a window named "foo".
++  function postToFoo(msg) {
++    var w = window.open("", "foo");
++    w.postMessage(msg, "*");
++    return true;
++  }
++  
++  function openPopup(url) {
++    popup = window.open(url);
++  }
++
++  function postToPopup(msg) {
++    popup.postMessage(msg, "*");
++    return true;
++  }
++
++  // Send a message to parent.
++  function postToParent(msg) {
++    parent.postMessage(msg, "*");
++    return true;
++  }
++
++  // Send a message to sibling.
++  function postToSibling(msg, sibling) {
++    parent.frames[sibling].postMessage(msg, "*");
++    return true;
++  }
++
++  // Send a message to a subframe of window named "foo".
++  function postToFooFrame(msg) {
++    var w = window.open("", "foo");
++    w.frames[0][0].postMessage(msg, "*");
++    return true;
++  }
++
++  function registerUnload() {
++    window.addEventListener('unload', function(e) {
++	postToParent("message-from-unload", "*");
++    });
++  }
++
++  // Listen to incoming messages.
++  var receivedMessages = 0;
++  var receivedMessagesWithPort = 0;
++  window.addEventListener("message", messageReceived, false);
++  function messageReceived(event) {
++    receivedMessages++;
++    if (event.data === "2-1-reply") {
++      event.source.postMessage("msg4", "*");
++    } else if (event.data === "subframe-msg") {
++      event.source.postMessage("subframe-msg-reply", "*");
++    } else if (event.data === "subframe-msg-reply") {
++      domAutomationController.send("done-" + window.name);
++    }
++    if (event.ports && event.ports.length > 0) {
++      receivedMessagesWithPort++;
++      var port = event.ports[0];
++      port.start();
++      port.postMessage("msg-back-via-port");
++      // Change the title to generate a notification.
++      document.title = event.data.message;
++    } else {
++      document.title = event.data;
++    }
++  }
++ </script>
++ </head>
++
++</html>
+--- /dev/null
++++ b/content/test/data/post_message2.html
+@@ -0,0 +1,21 @@
++<html>
++
++<head><title>Post message subframe tests</title>
++<script>
++  function postToOpenerFrame(msg, origin) {
++    window.opener.frames[0][1].postMessage(msg, origin);
++    return true;
++  }
++
++  window.addEventListener("message", messageReceived, false);
++
++  function messageReceived(event) {
++    // Change the title to generate a notification.
++    document.title = event.data;
++  }
++</script>
++</head>
++
++<iframe id="frame1" src="frame_tree/1-1.html"></iframe>
++
++</html>
+--- /dev/null
++++ b/content/test/data/push_state.html
+@@ -0,0 +1,12 @@
++<html>
++<head>
++<script>
++window.onload = function() {
++  setTimeout(function() {
++    history.pushState("", "", "#pushState");
++    document.title = "pushState";
++  }, 0);
++}
++</script>
++</head>
++</html>
+--- /dev/null
++++ b/content/test/data/register_service_worker.html
+@@ -0,0 +1,11 @@
++<script>
++async function register(worker_url, scope) {
++  try {
++    await navigator.serviceWorker.register(worker_url);
++    await navigator.serviceWorker.ready;
++    return 'DONE';
++  } catch (error) {
++    return `${error}`;
++  }
++}
++</script>
+--- /dev/null
++++ b/content/test/data/remove_frame_on_load.html
+@@ -0,0 +1,19 @@
++<html>
++  <head>
++    <title>Remove frame on load of about:blank</title>
++    <script>
++      var f;
++      window.addEventListener('load', function() {
++        f = document.querySelector('iframe')
++        f.onload = function() {
++          if (f.contentWindow.location.href == 'about:blank')
++            f.parentNode.removeChild(f);
++        };
++      });
++    </script>
++  </head>
++  <body>
++    <p>Navigate the frame to about:blank page to cause it to be removed.</p>
++    <iframe src="/cross-site/b.com/title2.html"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/remove_frame_on_unload.html
+@@ -0,0 +1,21 @@
++<html>
++  <head>
++    <title>Remove Frame on Unload</title>
++    <script>
++      function openWindow() {
++        var w = window.open("title1.html");
++        return true;
++      }
++
++      window.addEventListener('unload', function() {
++        var f = document.getElementById("f");
++        document.body.removeChild(f);
++      }, false);
++    </script>
++  </head>
++  <body>
++    <button onclick="openWindow()">Open Window</button>
++    <p>Navigate to another page to cause frame to be removed.</p>
++    <iframe id="f" src="about:blank"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/remove_object_element_with_invalid_data.html
+@@ -0,0 +1,17 @@
++<html>
++<head>
++<script>
++
++function DoLoad() {
++  let test_div = document.getElementById("test_div");
++  document.body.removeChild(test_div);
++}
++
++</script>
++</head>
++<body onload="DoLoad();">
++<div id="test_div">
++  <object data="INVALID"></object>
++</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/run_async_code_on_worker.html
+@@ -0,0 +1,25 @@
++<!doctype html>
++<title>Run async code on a worker helper</title>
++<script>
++const workerCode = `
++onmessage = function(e) {
++  let AsyncFunction = Object.getPrototypeOf(async function(){}).constructor;
++  let receivedFunction = new AsyncFunction(e.data);
++  receivedFunction().then(workerResult => {postMessage(workerResult);});
++}
++`
++const workerBlob = new Blob ([workerCode], {type: 'text/javascript'});
++const worker = new Worker(window.URL.createObjectURL(workerBlob));
++
++async function runOnWorkerAndWaitForResult(code) {
++  worker.postMessage(code);
++  return new Promise((resolve, reject) => {
++    worker.onmessage = result => {
++      resolve(result.data);
++    }
++    worker.onerror = error => {
++      reject(error);
++    }
++  });
++}
++</script>
+--- /dev/null
++++ b/content/test/data/rwh_simple.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>The background is red.</title></head>
++<body style="background-color:#FF0000"></body>
++</html>
+--- /dev/null
++++ b/content/test/data/rwhv_compositing_animation.html
+@@ -0,0 +1,28 @@
++<!DOCTYPE HTML>
++<html>
++<head>
++<meta charset="utf-8">
++<title>GPU Feature Testing: Accelerated Compositing</title>
++<style>
++body {
++  -webkit-transform: translateZ(0);
++}
++
++@-webkit-keyframes spin {
++  from { -webkit-transform: rotateY(0deg);    }
++  to   { -webkit-transform: rotateY(-360deg); }
++}
++
++#spin {
++  -webkit-animation-name: spin;
++  -webkit-animation-timing-function: linear;
++  -webkit-animation-iteration-count: infinite;
++  -webkit-animation-duration: 6s;
++  -webkit-transform-style: preserve-3d;
++}
++</style>
++</head>
++<body>
++<div id="spin">Chrome Rocks</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/sandbox_main_frame_csp.html
+@@ -0,0 +1,11 @@
++<!DOCTYPE html>
++<html>
++<head>
++<title>CSP sandbox test</title>
++</head>
++<body>
++This is a sandboxed document: <pre>Content-Security-Policy: sandbox allow-popups allow-pointer-lock allow-scripts</pre><br>
++<iframe id="frame" sandbox="allow-scripts allow-popups allow-orientation-lock" src='sandboxed_child_frame.html'>
++</iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/sandboxed_child_frame.html
+@@ -0,0 +1,5 @@
++<html>
++<title>sandboxed_child_frame</title>
++<head></head>
++<body>Document sandboxed with Content-Security-Policy HTTP header</body>
++</html>
+--- /dev/null
++++ b/content/test/data/sandboxed_frames.html
+@@ -0,0 +1,9 @@
++<html>
++<title>sandboxed_frames</title>
++<head></head>
++  <body>
++    <iframe id="child-1" sandbox></iframe>
++    <iframe id="child-2" sandbox="allow-scripts"></iframe>
++    <iframe id="child-3" sandbox="allow-scripts allow-same-origin" src="frame_tree/1-3.html"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/sandboxed_frames_csp.html
+@@ -0,0 +1,8 @@
++<html>
++<title>sandboxed_frames</title>
++<head></head>
++  <body>
++    <iframe id="child-1" src="sandboxed_child_frame.html"></iframe>
++    <iframe id="child-2" sandbox="allow-scripts allow-pointer-lock allow-orientation-lock" src="sandboxed_child_frame.html"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/sandboxed_main_frame_script.html
+@@ -0,0 +1,7 @@
++<html>
++<title>sandboxed_main_frame_script</title>
++<head></head>
++  <body>
++    <iframe id="child" sandbox="allow-scripts"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/scrollable_page.html
+@@ -0,0 +1,10 @@
++<html>
++<head>
++  <meta name='viewport' content='width=device-width, minimum-scale=1'>
++</head>
++<style>
++body {
++  height: 10000px;
++  overflow: scroll;
++}
++</style>
+--- /dev/null
++++ b/content/test/data/scrollable_page_with_anchor.html
+@@ -0,0 +1,29 @@
++<html>
++  <head>
++    <meta name="viewport" content="width=device-width, minimum-scale=1.0">
++    <script>
++      document.addEventListener("DOMContentLoaded", function(event) {
++        document.getElementById("focusableElement1").addEventListener('focus', () => {
++          window.domAutomationController.send('FocusDone1');
++        });
++        document.getElementById("focusableElement2").addEventListener('focus', () => {
++          window.domAutomationController.send('FocusDone2');
++        });
++      });
++    </script>
++    <style>
++      p {
++        position: absolute;
++        left: 10000px;
++        top: 10000px;
++      }
++    </style>
++  </head>
++  <body>
++    <p id="text">
++      <a href="#" id="focusableElement1">Test1</a>
++      Some text
++      <a href="#" id="focusableElement2">Test2</a>
++    </p>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/scrollable_page_with_content.html
+@@ -0,0 +1,22 @@
++<html>
++  <head>
++    <meta name="viewport" content="width=device-width, minimum-scale=1.0">
++    <script>
++      let did_scroll = false;
++      window.addEventListener('scroll', () => {
++        did_scroll = true;
++      });
++    </script>
++    <style>
++      p {
++        position: absolute;
++        left: 10000px;
++        top: 10000px;
++      }
++    </style>
++  </head>
++  <body>
++    <a id="link" href="#text">Go Down</a>
++    <p id="text">Some text</p>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/scrollable_page_with_iframe.html
+@@ -0,0 +1,18 @@
++<html>
++<head>
++  <meta name='viewport' content='width=device-width, minimum-scale=1'>
++</head>
++<style>
++body {
++  height: 10000px;
++  overflow: scroll;
++}
++</style>
++<body>
++  <div style="width:100px; height:100px; overflow: scroll">
++    <div style="width:150px; height:150px; overflow: scroll">
++      <iframe style="width:200px; height:200px"> </iframe>
++    </div>
++  </div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/send-beacon.html
+@@ -0,0 +1,4 @@
++<!doctype html>
++<script>
++navigator.sendBeacon('/beacon', 'hello');
++</script>
+--- /dev/null
++++ b/content/test/data/set_cookie.html
+@@ -0,0 +1,12 @@
++<!DOCTYPE html>
++<html>
++<head>
++<title>Loading...</title>
++<script>
++  if (document.cookie == "A=B")
++    document.title = "cookie set";
++  else
++    document.title = "cookie not set";
++</script>
++</head>
++</html>
+--- /dev/null
++++ b/content/test/data/set_document_cookie.html
+@@ -0,0 +1,6 @@
++<!doctype html>
++<meta charset=utf-8>
++<title>Set a cookie string defined in the query string using document.cookie API</title>
++<script type="text/javascript">
++document.cookie = document.location.search.substring(1);
++</script>
+--- /dev/null
++++ b/content/test/data/simple_database.html
+@@ -0,0 +1,145 @@
++<html>
++<script>
++
++// Open a Web SQL database.
++var g_db = null;
++if (typeof window.openDatabase == "undefined") {
++  document.write("Error: Web SQL databases are not supported.");
++}
++try {
++  g_db = openDatabase("test", "1.0", "test database", 1024 * 1024);
++} catch(err) {
++  document.write("Error: cannot open database.");
++}
++
++// Creates a table named "table1" with one text column named "data".
++function createTable() {
++  if (!g_db)
++    return;
++  g_db.transaction(
++      function(tx) {
++        tx.executeSql("CREATE TABLE table1 (data TEXT)");
++      },
++      function(error) {
++        sendValueToTest(error);
++      },
++      function() {
++        sendValueToTest("done");
++      });
++}
++
++// Inserts a record into the database.
++function insertRecord(text) {
++  g_db.transaction(
++      function(tx) {
++        tx.executeSql("INSERT INTO table1 VALUES (?)", [text]);
++      },
++      function(error) {
++        sendValueToTest(error);
++      },
++      function() {
++        sendValueToTest("done");
++      });
++}
++
++
++// Updates a record at the given index with the given text. The indices are
++// 0-based and are ordered from oldest record, to newest record.
++function updateRecord(index, text) {
++  var didUpdate = false;
++  findId(index, function(rowId) {
++    g_db.transaction(
++        function(tx) {
++          tx.executeSql(
++              "UPDATE table1 SET data=? WHERE ROWID=?",
++              [text, rowId],
++              function(tx, result) {
++                if (result.rowsAffected == 1)
++                  didUpdate = true;
++                else if (result.rowsAffected == 0)
++                  sendValueToTest("could not update index: " + index);
++                else
++                  sendValueToTest("multiple rows with index: " + index);
++              });
++        },
++        function(error) {
++          sendValueToTest("update error: " + error);
++        },
++        function() {
++          if (didUpdate)
++            sendValueToTest("done");
++        });
++  });
++}
++
++// Deletes a record at the given index.
++function deleteRecord(index) {
++  findId(index, function(rowId) {
++    g_db.transaction(
++        function(tx) {
++          tx.executeSql("DELETE FROM table1 WHERE ROWID=?", [rowId]);
++        },
++        function(error) {
++          sendValueToTest("delete error: " + error);
++        },
++        function() {
++          sendValueToTest("done");
++        });
++  });
++}
++
++// Gets all the records in the database, ordered by their age.
++function getRecords() {
++  g_db.readTransaction(function(tx) {
++    tx.executeSql(
++        "SELECT data FROM table1 ORDER BY ROWID",
++        [],
++        function(tx, result) {
++          items = "";
++          for (var i = 0; i < result.rows.length; i++) {
++            if (items != "")
++              items += ", ";
++            items += result.rows.item(i).data;
++          }
++          sendValueToTest(items);
++        },
++        function(tx, error) {
++          sendValueToTest("getRecords error: " + error);
++        });
++  });
++}
++
++// Helper function that finds the ID for a record based on a given index.
++function findId(index, callback) {
++  g_db.readTransaction(function(tx) {
++    // |ROWID| is a special sqlite column. It is unique and is incremented
++    // automatically when a new record is created.
++    // |LIMIT| is a nonstandard clause supported by sqlite that lets us pick
++    // rows from the database by index. E.g., LIMIT 2,10 will give us 10 records
++    // starting at offset 2.
++    tx.executeSql(
++        "SELECT ROWID AS id FROM table1 ORDER BY ROWID LIMIT ?,1",
++        [index],
++        function(tx, result) {
++          if (result.rows.length >= 1)
++            callback(result.rows.item(0).id);
++          else
++            sendValueToTest("could not find row with index: " + index);
++        },
++        function(tx, error) {
++        sendValueToTest("findId error: " + error);
++        });
++  });
++}
++
++function sendValueToTest(value) {
++  //alert(value);
++  window.domAutomationController.send(value);
++}
++
++</script>
++
++<body>
++This page is used for testing Web SQL databases.
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/simple_links.html
+@@ -0,0 +1,71 @@
++<html>
++
++ <head><title>Simple links</title>
++ <script>
++  function simulateClick(target) {
++    var evt = document.createEvent("MouseEvents");
++    evt.initMouseEvent("click", true, true, window,
++                       0, 0, 0, 0, 0, false, false,
++                       false, false, 0, null);
++
++    return target.dispatchEvent(evt);
++  }
++
++  function setPortNumber(portNumber) {
++    var link = document.getElementById("cross_site_link");
++    link.setAttribute("href", "http://foo.com:" + portNumber + "/title2.html");
++
++    link = document.getElementById("cross_site_new_window_link");
++    link.setAttribute("href", "http://foo.com:" + portNumber + "/title2.html");
++
++    link = document.getElementById("cross_site_new_window_no_opener_link");
++    link.setAttribute("href", "http://foo.com:" + portNumber + "/title2.html");
++    return true;
++  }
++
++  function clickSameSiteLink() {
++    return simulateClick(document.getElementById("same_site_link"));
++  }
++
++  function clickSameSiteNewWindowLink() {
++    return simulateClick(document.getElementById("same_site_new_window_link"));
++  }
++
++  function clickCrossSiteLink() {
++    return simulateClick(document.getElementById("cross_site_link"));
++  }
++
++  function clickCrossSiteNewWindowLink() {
++    return simulateClick(document.getElementById("cross_site_new_window_link"));
++  }
++
++  function clickCrossSiteNewWindowNoOpenerLink() {
++    return simulateClick(document.getElementById("cross_site_new_window_no_opener_link"));
++  }
++
++  function clickViewSourceLink() {
++    return simulateClick(document.getElementById("view_source_link"));
++  }
++
++  function clickLinkToSelf() {
++    return simulateClick(document.getElementById("linkToSelf"));
++  }
++
++  function clickGoogleChromeLink() {
++    return simulateClick(document.getElementById("google_chrome_link"));
++  }
++ </script>
++ </head>
++
++<a href="title2.html" id="same_site_link">same-site</a><br>
++<a href="http://foo.com/title2.html" id="cross_site_link">cross-site</a><br>
++<a href="view-source:about:blank" id="view_source_link">view-source:</a><br>
++<a href="title2.html" id="same_site_new_window_link" rel="opener" target="_blank">same-site new window</a>
++<a href="http://foo.com/title2.html" id="cross_site_new_window_link" rel="opener" target="_blank">cross-site new window</a>
++<a href="http://foo.com/title2.html" id="cross_site_new_window_no_opener_link" rel="noopener" target="_blank">cross-site new window no opener</a>
++<a href="" id="linkToSelf" rel="opener" target="_blank">self new window</a>
++<script>
++  document.getElementById("linkToSelf").href = window.location.toString();
++</script>
++<a href="googlechrome://" id="google_chrome_link">googlechrome:</a></br>
++</html>
+--- /dev/null
++++ b/content/test/data/simple_page.html
+@@ -0,0 +1,6 @@
++<html>
++<head><title>OK</title></head>
++<body>
++Basic html test.
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/site_per_process_main.html
+@@ -0,0 +1,8 @@
++<html>
++<title>site_per_process_main</title>
++<head></head>
++  <body>
++    <iframe id="test"></iframe>
++    <iframe id="child-2" src="frame_tree/1-3.html"></iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/stale-while-revalidate.html
+@@ -0,0 +1,24 @@
++<script>
++function wait25ms() {
++  return new Promise(resolve => {
++    setTimeout(() => {
++      resolve();
++    }, 25);
++  });
++}
++
++// runTest() will be called by the browser test.
++async function runTest() {
++  const url = 'stale-script.js';
++  const response = await fetch(url).then(r => r.text());
++  const response2 = await fetch(url).then(r => r.text());
++  while(true) {
++    const revalidation_check = await fetch('stale-script.js');
++    if (performance.getEntriesByName(new URL(url, document.location)).length == 2) {
++      document.title = "Pass";
++      break;
++    }
++    await wait25ms();
++  }
++}
++</script>
+--- /dev/null
++++ b/content/test/data/super_tall_page.html
+@@ -0,0 +1,9 @@
++<html>
++  <head>
++  </head>
++  <body>
++    <div>This page is tall ...</div>
++    <div style="min-height: 30000px;"></div>
++    <div>... super tall!</div>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/super_tall_parent.html
+@@ -0,0 +1,9 @@
++<html>
++  <head>
++  </head>
++  <body>
++    <div>This page contains a super-tall iframe.</div>
++    <iframe style="min-height: 31000px; min-width: 500px" src="about:blank">
++    </iframe>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/sync_xmlhttprequest.html
+@@ -0,0 +1,32 @@
++<html>
++<head>
++<script>
++var request_success = false;
++
++function OnLoad() {
++  var request = new XMLHttpRequest();
++  request.open("GET", "title1.html", false);
++  request.send("");
++
++  var my_div = document.getElementById("my_div");
++  if (request.readyState == 4 && request.status == 200) {
++    request_success = true;
++    my_div.innerHTML = "Got a successful response: " + request.responseText;
++  } else {
++    my_div.innerHTML = "Request failed: ready state=" + request.readyState +
++                       " status=" + request.status;
++ }
++}
++
++function DidSyncRequestSucceed() {
++  return request_success;
++}
++
++</script>
++</head>
++<body onload="OnLoad();">
++This page sends a synchronous XMLHttpRequest.
++<br><br>
++<div id="my_div"></div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/sync_xmlhttprequest_cancelled.html
+@@ -0,0 +1,28 @@
++<!doctype html>
++<script>
++let errorCode = -1;
++
++function sendRequest() {
++  let status = document.getElementById('status');
++
++  let xhr = new XMLHttpRequest();
++  xhr.open("GET", "hung", false);
++
++  status.textContent = 'Sending a request.';
++  try {
++    xhr.send(null);
++  } catch (e) {
++    errorCode = e.code;
++  }
++  status.textContent = `Request completed. errorCode: ${errorCode}.`
++}
++
++function getErrorCode() {
++  return errorCode;
++}
++
++</script>
++<body onload="sendRequest()">
++This page sends a synchronous XMLHttpRequest that will get cancelled.<br>
++Status: <div id="status">Before sending the request.</div>
++</body>
+--- /dev/null
++++ b/content/test/data/sync_xmlhttprequest_disallowed.html
+@@ -0,0 +1,29 @@
++<html>
++<head>
++<script>
++var success = false;
++
++function OnLoad() {
++  try {
++    var request = new XMLHttpRequest();
++    request.open("GET", "file:///c:/foo.txt", false);
++    request.send(null);
++  } catch (e) {
++    success = true;
++  }
++  document.getElementById("console").appendChild(
++      document.createTextNode(success ? "SUCCESS" : "FAILURE"));
++}
++
++function DidSucceed() {
++  return success;
++}
++
++</script>
++</head>
++<body onload="OnLoad();">
++This page sends a synchronous XMLHttpRequest to fetch a local file, which
++should not be allowed.
++<div id="console"></div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/sync_xmlhttprequest_during_unload.html
+@@ -0,0 +1,20 @@
++<html> 
++  <head>
++    <title>Loading...</title>
++  </head>
++  <body onload="attachUnloadListener()"> 
++    <script> 
++      function attachUnloadListener() {
++        window.addEventListener('unload', onUnload, false);
++        document.title = "sync xhr on unload";
++      }
++
++      var req = new XMLHttpRequest();
++      function onUnload() {
++        req.open('GET','download-test1.lib', false);
++        req.send(null);
++      }
++    </script> 
++    <p>Navigate to another page to trigger synch xmlhttprequest</p>
++  </body> 
++</html> 
+--- /dev/null
++++ b/content/test/data/tall_page.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <div>This page is tall.</div>
++  <div style="min-height: 1000px">Hello</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/tall_page_with_local_iframe.html
+@@ -0,0 +1,9 @@
++<html>
++<head></head>
++<body>
++  <div>Tall w/ iframe.</div>
++  <iframe src="page_with_scrollable_div.html"
++          style="min-height: 800px; position: absolute; top: 28px; left: 8px"
++          id="nested_frame"></iframe>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/target_text_link.html
+@@ -0,0 +1,8 @@
++<html>
++  <head>
++    <meta name="viewport" content="width=device-width, minimum-scale=1.0">
++  </head>
++  <body>
++    <a id="link" href="/scrollable_page_with_content.html#:~:text=text">link</a>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/theme_color.html
+@@ -0,0 +1,11 @@
++<!DOCTYPE html>
++<html>
++    <head>
++        <title>Test page</title>
++        <meta name="theme-color" content="#ff0000">
++    </head>
++    <body>
++        Theme color
++    </body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/title1.html
+@@ -0,0 +1,4 @@
++<html>
++<head></head>
++<body>This page has no title.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/title2.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Title Of Awesomeness</title></head>
++<body>This page has a title.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/title3.html
+@@ -0,0 +1,4 @@
++<html>
++<head><title>Title Of More Awesomeness</title></head>
++<body>This page has a title.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/title4.html
+@@ -0,0 +1,4 @@
++<html>
++<head></head>
++<body>This page has no title.</body>
++</html>
+--- /dev/null
++++ b/content/test/data/touch_selection.html
+@@ -0,0 +1,42 @@
++<html>
++<style>
++/* Add space between div and textfield so that touch selects the text in div. */
++#textDiv {
++  margin-bottom: 30px;
++}
++</style>
++<body>
++<div id='dummy'>Dummy Padding Text</div>
++<div id='textDiv'>Some text we can select</div>
++<div id='dummy'>Dummy Padding Text</div>
++
++<input id='textfield' type="text" value="Text in a textfield">
++</body>
++<script>
++
++function focus_textfield() {
++  document.getElementById('textfield').focus();
++  // Focusing the textfiled selects its text. Collapse selection to a cursor.
++  window.getSelection().collapseToStart();
++}
++
++function get_point_inside(element) {
++  var rect = element.getBoundingClientRect();
++  var point = {
++    x: rect.left + 8,
++    y: rect.top + 8
++  };
++  window.domAutomationController.send(JSON.stringify(point));
++}
++
++function get_point_inside_text() {
++  get_point_inside(document.getElementById('textDiv'));
++}
++
++function get_point_inside_textfield() {
++  get_point_inside(document.getElementById('textfield'));
++}
++
++</script>
++
++</html>
+--- /dev/null
++++ b/content/test/data/unload.html
+@@ -0,0 +1,11 @@
++<html>
++  <head>
++    <title>Loading...</title>
++    <script>
++      window.onunload = function(e) { return 'foo'; };
++    </script>
++  </head>
++  <body>
++    <p>Navigate to another page to trigger unload handler.</p>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/unload_handler_force_layout.html
+@@ -0,0 +1,22 @@
++<!DOCTYPE html>
++<html>
++<body>
++  <div id="tall" style="height: 1000em">
++    This page will force a layout on unload
++  </div>
++</body>
++<script>
++window.addEventListener('unload', function(event) {
++  // Shrink the page.
++  document.getElementById('tall').style.height = '999em';
++  // Move the scroll position.
++  window.scroll(0, 100);
++  // Read the scroll position - this forces layout.
++  console.log(window.scrollY);
++  // Notify the opening window so tests can wait for this to run.
++  window.opener.postMessage('unloaded', '*');
++});
++// Notify the opening window that the page loaded, so tests can wait for it.
++window.opener.postMessage('loaded', '*');
++</script>
++</html>
+--- /dev/null
++++ b/content/test/data/virtual-keyboard.html
+@@ -0,0 +1,41 @@
++<html>
++<head>
++</head>
++<body>
++    <textarea id='txt1'
++              virtualkeyboardpolicy='manual'
++              onfocusin='FocusIn1()'
++              onkeydown='HideVKCalled()'></textarea>
++    <textarea id='txt2'
++              virtualkeyboardpolicy='manual'
++              onfocusin='FocusIn1()'
++              onkeydown='HideVKCalled()'></textarea>
++    <textarea id='txt3' virtualkeyboardpolicy='auto'></textarea>
++    <textarea id='txt4' virtualkeyboardpolicy='auto'></textarea>
++    <script>
++      txt4.focus();
++      let elemRect1 = txt1.getBoundingClientRect();
++      let elemRect2 = txt2.getBoundingClientRect();
++      let elemRect3 = txt3.getBoundingClientRect();
++      let elemRect4 = txt4.getBoundingClientRect();
++      let VKRect = navigator.virtualKeyboard.boundingRect, numEvents = 0;
++      navigator.virtualKeyboard.overlaysContent = true;
++      const editContext = new EditContext();
++      txt2.editContext = editContext;
++      editContext.inputPanelPolicy = "manual";
++
++      navigator.virtualKeyboard.addEventListener('geometrychange',
++       evt => {
++         numEvents++;
++         VKRect = navigator.virtualKeyboard.boundingRect
++       }, false);
++
++      function FocusIn1() {
++         navigator.virtualKeyboard.show();
++      }
++      function HideVKCalled() {
++         navigator.virtualKeyboard.hide();
++      }
++    </script>
++  </body>
++</html>
+--- /dev/null
++++ b/content/test/data/web_ui_mojo_native.html
+@@ -0,0 +1,4 @@
++<html>
++<head><script src="web_ui_mojo_native.js"></script></head>
++<body>hi</body>
++</html>
+--- /dev/null
++++ b/content/test/data/web_ui_mojo_test.html
+@@ -0,0 +1,8 @@
++<html>
++<head>
++  <script src="web_ui_mojo_test.js" type="module"></script>
++</head>
++<body>
++  x
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/wide_page.html
+@@ -0,0 +1,7 @@
++<html>
++<head></head>
++<body>
++  <div>This page is wide.</div>
++  <div style="min-width: 1000px">Hello</div>
++</body>
++</html>
+--- /dev/null
++++ b/content/test/data/x-frame-options-deny.html
+@@ -0,0 +1,10 @@
++<!DOCTYPE html>
++<html>
++<head>
++<title>This page should NOT load in a frame</title>
++</head>
++<body>
++This page cannot be loaded in an iframe because its X-Frame-Options is set to DENY.
++</body>
++</html>
++
+--- /dev/null
++++ b/content/test/data/fetch_event_octet_stream.js
+@@ -0,0 +1,13 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++self.addEventListener('fetch', e => {
++  const headers = new Headers();
++  const filename = 'octet-stream.abc';
++  headers.append('Content-Type', 'application/octet-stream; charset=UTF-8');
++  headers.append('Content-Disposition',
++                 'attachment; filename="' + filename +
++                 '"; filename*=UTF-8\'\'' + filename);
++  e.respondWith(new Response('This is a binary', {headers}));
++});
+--- /dev/null
++++ b/content/test/data/fetch_event_passthrough.js
+@@ -0,0 +1,5 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++self.addEventListener('fetch', e => {});
+--- /dev/null
++++ b/content/test/data/fetch_event_respond_with_fetch.js
+@@ -0,0 +1,5 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++self.addEventListener('fetch', e => { e.respondWith(fetch(e.request)) });
+--- /dev/null
++++ b/content/test/data/result_queue.js
+@@ -0,0 +1,52 @@
++// Copyright 2017 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++// Queue storing asynchronous results received from the Service Worker. Results
++// are sent to the test when requested.
++function ResultQueue() {
++  // Invariant: this.queue.length == 0 || this.pendingGets == 0
++  this.queue = [];
++  this.pendingGets = 0;
++}
++
++// Adds a data item to the queue. Will be sent to the test if there are
++// pendingGets.
++ResultQueue.prototype.push = function(data) {
++  if (this.pendingGets > 0) {
++    this.pendingGets--;
++    sendResultToTest(data);
++  } else {
++    this.queue.unshift(data);
++  }
++};
++
++// Called by native. Sends the next data item to the test if it is available.
++// Otherwise increments pendingGets so it will be delivered when received.
++ResultQueue.prototype.pop = function() {
++  if (this.queue.length) {
++    sendResultToTest(this.queue.pop());
++  } else {
++    this.pendingGets++;
++  }
++};
++
++// Called by native. Immediately sends the next data item to the test if it is
++// available, otherwise sends null.
++ResultQueue.prototype.popImmediately = function() {
++  sendResultToTest(this.queue.length ? this.queue.pop() : null);
++};
++
++// Sends data back to the test. This must be in response to an earlier
++// request, but it's ok to respond asynchronously. The request blocks until
++// the response is sent.
++function sendResultToTest(result) {
++  console.log('sendResultToTest: ' + result);
++  if (window.domAutomationController) {
++    domAutomationController.send('' + result);
++  }
++}
++
++function sendErrorToTest(error) {
++  sendResultToTest(error.name + ' - ' + error.message);
++}
+--- /dev/null
++++ b/content/test/data/stale-script.js
+@@ -0,0 +1,5 @@
++// Copyright 2018 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++// nothing to see here.
+--- /dev/null
++++ b/content/test/data/tree_parser_util.js
+@@ -0,0 +1,222 @@
++// Copyright 2015 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++/**
++ * Parser for a simple grammar that describes a tree structure using a function-
++ * like "a(b(c,d))" syntax. Original intended usage: to have browsertests
++ * specify an arbitrary tree of iframes, loaded from various sites, without
++ * having to write a .html page for each level or do crazy feats of data: url
++ * escaping. But there's nothing really iframe-specific here. See below for some
++ * examples of the grammar and the parser output.
++ *
++ * @example <caption>Basic syntax: an identifier, optionally followed by a list
++ * of attributes, optionally followed by a list of children.</caption>
++ * // returns { value: 'abc', attributes: [], children: [] }
++ * TreeParserUtil.parse('abc {} ()');
++ *
++ * @example <caption>Both the attribute and child lists are optional. Dots and
++ * hyphens are legal in ids.</caption>
++ * // returns { value: 'example-b.com', attributes: [], children: [] }
++ * TreeParserUtil.parse('example-b.com');
++ *
++ * @example <caption>Attributes are identifiers as well, separated by commas.
++ * </caption>
++ * // returns { value: 'abc', attributes: ['attr-1', 'attr-2'], children: [] }
++ * TreeParserUtil.parse('abc {attr-1, attr-2}');
++ *
++ * @example <caption>Commas separate children in the child list.</caption>
++ * // returns { value: 'b', attributes: [], children: [
++ * //           { value: 'c', attributes: [], children: [] },
++ * //           { value: 'd', attributes: [], children: [] }
++ * //         ]}
++ * TreeParserUtil.parse('b (c, d)';
++ *
++ * @example <caption>Children can have children, and so on.</caption>
++ * // returns { value: 'e', attributes: [], children: [
++ * //           { value: 'f', attributes: [], children: [
++ * //             { value: 'g', attributes: [], children: [
++ * //               { value: 'h', attributes: [], children: [] },
++ * //               { value: 'i', attributes: [], children: [
++ * //                 { value: 'j', attributes: [], children: [] }
++ * //               ]},
++ * //             ]}
++ * //           ]}
++ * //         ]}
++ * TreeParserUtil.parse('e(f(g(h(),i(j))))';
++ *
++ * @example <caption>Attributes can be applied to children at any level of
++ * nesting.</caption>
++ * // returns { value: 'b', attributes: ['red', 'blue'], children: [
++ * //           { value: 'c', attributes: [], children: [] },
++ * //           { value: 'd', attributes: ['green'], children: [] }
++ * //         ]}
++ * TreeParserUtil.parse('b{red,blue}(c,d{green})';
++ *
++ * @example <caption>flatten() converts a [sub]tree back to a string.</caption>
++ * var tree = TreeParserUtil.parse('b.com (c.com(e.com), d.com)');
++ * TreeParserUtil.flatten(tree.children[0]);  // returns 'c.com(e.com())'
++ */
++var TreeParserUtil = (function() {
++  'use strict';
++
++  /**
++   * Parses an input string into a tree. See class comment for examples.
++   * @returns A tree of the form {value: <string>, children: <Array.<tree>>}.
++   */
++  function parse(input) {
++    var tokenStream = lex(input);
++
++    var result = takeIdAndChild(tokenStream);
++    if (tokenStream.length != 0)
++      throw new Error('Expected end of stream, but found "' +
++                      tokenStream[0] + '".')
++    return result;
++  }
++
++  /**
++   * Inverse of |parse|. Converts a parsed tree object into a string. Can be
++   * used to forward a subtree as an argument to a nested document.
++   */
++  function flatten(tree) {
++    var result = tree.value;
++    if (tree.attributes && tree.attributes.length)
++      result += '{' + tree.attributes.join(",") + "}";
++    return result + '(' + tree.children.map(flatten).join(',') + ')';
++  }
++
++  /**
++   * Lexer function to convert an input string into a token stream.  Splits the
++   * input along whitespace, parens and commas. Whitespace is removed, while
++   * parens and commas are preserved as standalone tokens.
++   *
++   * @param {string} input The input string.
++   * @return {Array.<string>} The resulting token stream.
++   */
++  function lex(input) {
++    return input.split(/(\s+|\(|\)|{|}|,)/).reduce(
++      function (resultArray, token) {
++        var trimmed = token.trim();
++        if (trimmed) {
++          resultArray.push(trimmed);
++        }
++        return resultArray;
++      }, []);
++  }
++
++  /**
++   * Consumes from the stream an identifier with optional attribute and child
++   * lists, returning its parsed representation.
++   */
++  function takeIdAndChild(tokenStream) {
++    return { value: takeIdentifier(tokenStream),
++             attributes: takeAttributeList(tokenStream),
++             children: takeChildList(tokenStream) };
++  }
++
++  /**
++   * Consumes from the stream an identifier, returning its value (as a string).
++   */
++  function takeIdentifier(tokenStream) {
++    if (tokenStream.length == 0)
++      throw new Error('Expected an identifier, but found end-of-stream.');
++    var token = tokenStream.shift();
++    // This regex includes slash, question mark, ampersand, and period in order
++    // to accommodate full URLs, which may be passed to
++    // cross_site_iframe_factory.html as leaf node locations. Colon is for port
++    // numbers, which may also be specified. Semicolon and equals are for cookie
++    // strings, which may sometimes be provided in URL query strings such as for
++    // the EmbeddedTestServer default handler /set-cookie.
++    const re = new RegExp('^[a-zA-Z0-9\\/_?&;:.=-]+$');
++    if (!token.match(re))
++      throw new Error('Expected an identifier, but found "' + token + '".');
++    return token;
++  }
++
++  /**
++   * Consumes an optional attribute list from the token stream, returning a list
++   * of the parsed attribute identifiers.
++   */
++  function takeAttributeList(tokenStream) {
++    // Remove the next token from the stream if it matches |token|.
++    function tryToEatA(token) {
++      if (tokenStream[0] == token) {
++        tokenStream.shift();
++        return true;
++      }
++      return false;
++    }
++
++    // Bare identifier case, as in 'b' in the input '(a (b, c))'
++    if (!tryToEatA('{'))
++      return [];
++
++    // Empty list case, as in 'b' in the input 'a (b {}, c)'.
++    if (tryToEatA('}')) {
++      return [];
++    }
++
++    // List with at least one entry.
++    var result = [ takeIdentifier(tokenStream) ];
++
++    // Additional entries allowed with comma.
++    while (tryToEatA(',')) {
++      result.push(takeIdentifier(tokenStream));
++    }
++
++    // End of list.
++    if (tryToEatA('}')) {
++      return result;
++    }
++    if (tokenStream.length == 0)
++      throw new Error('Expected "}" or ",", but found end-of-stream.');
++    throw new Error('Expected "}" or ",", but found "' + tokenStream[0] + '".');
++  }
++
++  /**
++   * Consumes an optional child list from the token stream, returning a list of
++   * the parsed children.
++   */
++  function takeChildList(tokenStream) {
++    // Remove the next token from the stream if it matches |token|.
++    function tryToEatA(token) {
++      if (tokenStream[0] == token) {
++        tokenStream.shift();
++        return true;
++      }
++      return false;
++    }
++
++    // Bare identifier case, as in 'b' in the input '(a (b, c))'
++    if (!tryToEatA('('))
++      return [];
++
++    // Empty list case, as in 'b' in the input 'a (b (), c)'.
++    if (tryToEatA(')')) {
++      return [];
++    }
++
++    // List with at least one entry.
++    var result = [ takeIdAndChild(tokenStream) ];
++
++    // Additional entries allowed with commas.
++    while (tryToEatA(',')) {
++      result.push(takeIdAndChild(tokenStream));
++    }
++
++    // End of list.
++    if (tryToEatA(')')) {
++      return result;
++    }
++    if (tokenStream.length == 0)
++      throw new Error('Expected ")" or ",", but found end-of-stream.');
++    throw new Error('Expected ")" or ",", but found "' + tokenStream[0] + '".');
++  }
++
++  return {
++    parse:   parse,
++    flatten: flatten
++  };
++})();
++
++document.scriptExecuted = true;
+--- /dev/null
++++ b/content/test/data/web_ui_dedicated_worker.js
+@@ -0,0 +1,9 @@
++// Copyright 2021 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++self.onmessage = (e) => {
++  if (e.data === 'ping') {
++    self.postMessage('pong');
++  }
++};
+--- /dev/null
++++ b/content/test/data/web_ui_mojo_native.js
+@@ -0,0 +1,14 @@
++// Copyright 2017 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++'use strict';
++
++window.isNativeMojoAvailable = () => {
++  return 'Mojo' in self && 'MojoHandle' in self && 'MojoWatcher' in self &&
++      'createMessagePipe' in Mojo && 'writeMessage' in MojoHandle.prototype &&
++      'cancel' in MojoWatcher.prototype;
++};
++
++window.isChromeSendAvailable = () => {
++  return 'chrome' in self && 'send' in chrome;
++};
+--- /dev/null
++++ b/content/test/data/web_ui_mojo_test.js
+@@ -0,0 +1,46 @@
++// Copyright 2020 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++import {WebUIMojoTestCache} from './content/test/data/web_ui_test.test-mojom-webui.js';
++
++/** @type {{send: function(*)}} */
++Window.prototype.domAutomationController;
++
++const TEST_DATA = [
++  { url: 'https://google.com/', contents: 'i am in fact feeling lucky' },
++  { url: 'https://youtube.com/', contents: 'probably cat videos?' },
++  { url: 'https://example.com/', contents: 'internets wow' },
++];
++
++async function doTest() {
++  const cache = WebUIMojoTestCache.getRemote();
++  for (const entry of TEST_DATA) {
++    cache.put({ url: entry.url }, entry.contents);
++  }
++
++  const {items} = await cache.getAll();
++  if (items.length != TEST_DATA.length) {
++    return false;
++  }
++
++  const entries = {};
++  for (const item of items) {
++    entries[item.url.url] = item.contents;
++  }
++
++  for (const entry of TEST_DATA) {
++    if (!(entry.url in entries)) {
++      return false;
++    }
++    if (entries[entry.url] != entry.contents) {
++      return false;
++    }
++  }
++
++  return true;
++}
++
++window.runTest = async function() {
++  window.domAutomationController.send(await doTest());
++}
+--- /dev/null
++++ b/content/test/data/web_ui_shared_worker.js
+@@ -0,0 +1,12 @@
++// Copyright 2020 The Chromium Authors. All rights reserved.
++// Use of this source code is governed by a BSD-style license that can be
++// found in the LICENSE file.
++
++onconnect = (event) => {
++  const port = event.ports[0];
++  port.onmessage = (e) => {
++    if (e.data === 'ping') {
++      port.postMessage('pong');
++    }
++  };
++};
diff --git a/debian/patches/warnings/deprecated.patch b/debian/patches/warnings/deprecated.patch
deleted file mode 100644
index 505bebb..0000000
--- a/debian/patches/warnings/deprecated.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-description: ignore deprecated bison directive warnings
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/blink/renderer/build/scripts/rule_bison.py
-+++ b/third_party/blink/renderer/build/scripts/rule_bison.py
-@@ -83,7 +83,7 @@ def main():
-                                      output_basename + BISON_HEADER_EXT)
- 
-     return_code = subprocess.call(
--        [bison_exe, '-d', input_file, '-o', output_cc])
-+        [bison_exe, '-Wno-deprecated', '-d', input_file, '-o', output_cc])
-     assert return_code == 0
-     # If the file doesn't exist, this raise an OSError.
-     os.stat(original_output_h)
diff --git a/debian/patches/warnings/gcc-diagnostic.patch b/debian/patches/warnings/gcc-diagnostic.patch
deleted file mode 100644
index e8e32ac..0000000
--- a/debian/patches/warnings/gcc-diagnostic.patch
+++ /dev/null
@@ -1,16 +0,0 @@
-description: avoid clang warnings about gcc specific compiler flag
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/blink/renderer/platform/heap/impl/finalizer_traits.h
-+++ b/third_party/blink/renderer/platform/heap/impl/finalizer_traits.h
-@@ -43,10 +43,7 @@ struct FinalizerTraitImpl<T, true> {
- // an object's base class has a virtual destructor. In case there is no virtual
- // destructor present, the object is always finalized through its leaf type. In
- // other words: there is no finalization through a base pointer.
--#pragma GCC diagnostic push
--#pragma GCC diagnostic ignored "-Wdelete-non-virtual-dtor"
-       static_cast<T*>(obj)->~T();
--#pragma GCC diagnostic pop
-     }
-   };
-   using FinalizeImpl =
diff --git a/debian/patches/warnings/int-in-bool-context.patch b/debian/patches/warnings/int-in-bool-context.patch
deleted file mode 100644
index 65c030d..0000000
--- a/debian/patches/warnings/int-in-bool-context.patch
+++ /dev/null
@@ -1,98 +0,0 @@
-description: fix int-in-bool-context gcc warnings
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/webrtc/modules/video_processing/video_denoiser.cc
-+++ b/third_party/webrtc/modules/video_processing/video_denoiser.cc
-@@ -180,7 +180,7 @@ void VideoDenoiser::CopySrcOnMOB(const uint8_t* y_src,
-       // artifacts.
-       if (mb_filter_decision_[mb_index] != FILTER_BLOCK ||
-           IsTrailingBlock(moving_edge_, mb_row, mb_col) ||
--          (x_density_[mb_col] * y_density_[mb_row] &&
-+          (x_density_[mb_col] * y_density_[mb_row] != 0 &&
-            moving_object_[mb_row * mb_cols_ + mb_col])) {
-         // Copy y source.
-         libyuv::CopyPlane(mb_src, stride_src, mb_dst, stride_dst, 16, 16);
---- a/gpu/command_buffer/service/gles2_cmd_decoder.cc
-+++ b/gpu/command_buffer/service/gles2_cmd_decoder.cc
-@@ -16511,7 +16511,8 @@ bool GLES2DecoderImpl::GetUniformSetup(G
-   }
-   uint32_t checked_size = 0;
-   if (!SizedResult<T>::ComputeSize(num_elements).AssignIfValid(&checked_size)) {
--    return error::kOutOfBounds;
-+    *error = error::kOutOfBounds;
-+    return false;
-   }
-   result = GetSharedMemoryAs<SizedResult<T>*>(shm_id, shm_offset, checked_size);
-   if (!result) {
---- a/content/browser/renderer_host/render_widget_host_view_base.cc
-+++ b/content/browser/renderer_host/render_widget_host_view_base.cc
-@@ -294,15 +294,16 @@ void RenderWidgetHostViewBase::SetBackgr
-   if (default_background_color_ == color)
-     return;
- 
--  bool opaque = default_background_color_
--                    ? SkColorGetA(*default_background_color_)
--                    : SK_AlphaOPAQUE;
-+  bool opaque_background = true;
-+  if (default_background_color_)
-+    opaque_background = (SkColorGetA(*default_background_color_) == SK_AlphaOPAQUE);
-   default_background_color_ = color;
-   UpdateBackgroundColor();
--  if (opaque != (SkColorGetA(color) == SK_AlphaOPAQUE)) {
-+
-+  bool opaque_foreground = (SkColorGetA(color) == SK_AlphaOPAQUE);
-+  if (opaque_background != opaque_foreground) {
-     if (host()->owner_delegate()) {
--      host()->owner_delegate()->SetBackgroundOpaque(SkColorGetA(color) ==
--                                                    SK_AlphaOPAQUE);
-+      host()->owner_delegate()->SetBackgroundOpaque(opaque_foreground);
-     }
-   }
- }
---- a/third_party/blink/renderer/core/html/parser/html_tree_builder.cc
-+++ b/third_party/blink/renderer/core/html/parser/html_tree_builder.cc
-@@ -1054,7 +1054,7 @@ void HTMLTreeBuilder::ProcessStartTagFor
-   }
-   if (token->GetName() == html_names::kColTag) {
-     ProcessFakeStartTag(html_names::kColgroupTag);
--    DCHECK(kInColumnGroupMode);
-+    DCHECK_EQ(GetInsertionMode(), kInColumnGroupMode);
-     ProcessStartTag(token);
-     return;
-   }
---- a/extensions/browser/api/socket/tcp_socket.cc
-+++ b/extensions/browser/api/socket/tcp_socket.cc
-@@ -213,7 +213,7 @@ void TCPSocket::SetKeepAlive(bool enable
-                              int delay,
-                              SetKeepAliveCallback callback) {
-   if (!client_socket_) {
--    std::move(callback).Run(net::ERR_FAILED);
-+    std::move(callback).Run(false);
-     return;
-   }
-   client_socket_->SetKeepAlive(enable, delay, std::move(callback));
-@@ -221,7 +221,7 @@ void TCPSocket::SetKeepAlive(bool enable
- 
- void TCPSocket::SetNoDelay(bool no_delay, SetNoDelayCallback callback) {
-   if (!client_socket_) {
--    std::move(callback).Run(net::ERR_FAILED);
-+    std::move(callback).Run(false);
-     return;
-   }
-   client_socket_->SetNoDelay(no_delay, std::move(callback));
---- a/chrome/renderer/searchbox/searchbox.cc
-+++ b/chrome/renderer/searchbox/searchbox.cc
-@@ -290,11 +290,11 @@ void SearchBox::Paste(const base::string
- }
- 
- void SearchBox::StartCapturingKeyStrokes() {
--  embedded_search_service_->FocusOmnibox(page_seq_no_, OMNIBOX_FOCUS_INVISIBLE);
-+  embedded_search_service_->FocusOmnibox(page_seq_no_, true);
- }
- 
- void SearchBox::StopCapturingKeyStrokes() {
--  embedded_search_service_->FocusOmnibox(page_seq_no_, OMNIBOX_FOCUS_NONE);
-+  embedded_search_service_->FocusOmnibox(page_seq_no_, false);
- }
- 
- void SearchBox::UndoAllMostVisitedDeletions() {
diff --git a/debian/patches/warnings/multichar.patch b/debian/patches/warnings/multichar.patch
deleted file mode 100644
index 3dbfa12..0000000
--- a/debian/patches/warnings/multichar.patch
+++ /dev/null
@@ -1,13 +0,0 @@
-description: crashpad relies on multicharacter integer assignments
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/crashpad/crashpad/BUILD.gn
-+++ b/third_party/crashpad/crashpad/BUILD.gn
-@@ -17,6 +17,7 @@ import("build/test.gni")
- import("util/net/tls.gni")
- 
- config("crashpad_config") {
-+  cflags = [ "-Wno-multichar" ]
-   include_dirs = [ "." ]
- }
- 
diff --git a/debian/patches/warnings/null-destination.patch b/debian/patches/warnings/null-destination.patch
deleted file mode 100644
index e929ec5..0000000
--- a/debian/patches/warnings/null-destination.patch
+++ /dev/null
@@ -1,22 +0,0 @@
-description: use stack_buf before possible branching (see gcc bug #83139)
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/base/strings/stringprintf.cc
-+++ b/base/strings/stringprintf.cc
-@@ -67,14 +67,14 @@ static void StringAppendVT(std::basic_st
-   int result = vsnprintfT(stack_buf, base::size(stack_buf), format, ap_copy);
-   va_end(ap_copy);
- 
--  if (result >= 0 && result < static_cast<int>(base::size(stack_buf))) {
-+  int mem_length = static_cast<int>(base::size(stack_buf));
-+  if (result >= 0 && result < mem_length) {
-     // It fit.
-     dst->append(stack_buf, result);
-     return;
-   }
- 
-   // Repeatedly increase buffer size until it fits.
--  int mem_length = base::size(stack_buf);
-   while (true) {
-     if (result < 0) {
- #if defined(OS_WIN)
diff --git a/debian/patches/warnings/restrict.patch b/debian/patches/warnings/restrict.patch
deleted file mode 100644
index 5dd088f..0000000
--- a/debian/patches/warnings/restrict.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-desciption: wrong object passed to function with restricted arguments
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/chrome/browser/resource_coordinator/tab_ranker/pairwise_inference.cc
-+++ b/chrome/browser/resource_coordinator/tab_ranker/pairwise_inference.cc
-@@ -1980,7 +1980,7 @@ void Inference(const float* __restrict f
- 
-   // dnn/hiddenlayer_0/hiddenlayer_0/Relu
-   Relu<float>(2,  // rank
--              fixed->shape0, fixed->alloc1, fixed->alloc1);
-+              fixed->shape0, fixed->alloc0, fixed->alloc1);
- 
-   // dnn/logits/MatMul_merged_with_dnn/logits/BiasAdd
-   FullyConnected<float>(
diff --git a/debian/patches/warnings/sign-compare.patch b/debian/patches/warnings/sign-compare.patch
deleted file mode 100644
index 4cb8977..0000000
--- a/debian/patches/warnings/sign-compare.patch
+++ /dev/null
@@ -1,93 +0,0 @@
-description: fix gcc sign-compare warnings
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/storage/browser/file_system/obfuscated_file_util_memory_delegate.cc
-+++ b/storage/browser/file_system/obfuscated_file_util_memory_delegate.cc
-@@ -541,10 +541,15 @@ base::File::Error ObfuscatedFileUtilMemo
-   if (source_info.is_directory)
-     return base::File::FILE_ERROR_NOT_A_FILE;
- 
-+  // Negative file size.
-+  if (source_info.size < 0)
-+    return base::File::FILE_ERROR_FAILED;
-+
-   // |size_t| limits the maximum size that the memory file can keep and |int|
-   // limits the maximum size that base::ReadFile function reads.
--  if (source_info.size > std::numeric_limits<size_t>::max() ||
--      source_info.size > std::numeric_limits<int>::max()) {
-+  uint64_t size = source_info.size;
-+  if (size > std::numeric_limits<size_t>::max() ||
-+      size > std::numeric_limits<int>::max()) {
-     return base::File::FILE_ERROR_NO_SPACE;
-   }
- 
---- a/device/fido/credential_management.cc
-+++ b/device/fido/credential_management.cc
-@@ -130,7 +130,7 @@ base::Optional<CredentialsMetadataRespon
-   if (it == response_map.end() || !it->second.is_unsigned()) {
-     return base::nullopt;
-   }
--  const int64_t existing_count = it->second.GetUnsigned();
-+  const uint64_t existing_count = it->second.GetUnsigned();
-   if (existing_count > std::numeric_limits<size_t>::max()) {
-     return base::nullopt;
-   }
-@@ -142,7 +142,7 @@ base::Optional<CredentialsMetadataRespon
-   if (it == response_map.end() || !it->second.is_unsigned()) {
-     return base::nullopt;
-   }
--  const int64_t remaining_count = it->second.GetUnsigned();
-+  const uint64_t remaining_count = it->second.GetUnsigned();
-   if (remaining_count > std::numeric_limits<size_t>::max()) {
-     return base::nullopt;
-   }
-@@ -173,8 +173,11 @@ base::Optional<EnumerateRPsResponse> Enu
-     return base::nullopt;
-   }
-   if (expect_rp_count) {
--    if (it == response_map.end() || !it->second.is_unsigned() ||
--        it->second.GetUnsigned() > std::numeric_limits<size_t>::max()) {
-+    if (it == response_map.end() || !it->second.is_unsigned()) {
-+      return base::nullopt;
-+    }
-+    const uint64_t count = it->second.GetUnsigned();
-+    if (count > std::numeric_limits<size_t>::max()) {
-       return base::nullopt;
-     }
-     rp_count = static_cast<size_t>(it->second.GetUnsigned());
-@@ -290,8 +293,11 @@ EnumerateCredentialsResponse::Parse(
-   } else {
-     it = response_map.find(cbor::Value(
-         static_cast<int>(CredentialManagementResponseKey::kTotalCredentials)));
--    if (it == response_map.end() || !it->second.is_unsigned() ||
--        it->second.GetUnsigned() > std::numeric_limits<size_t>::max()) {
-+    if (it == response_map.end() || !it->second.is_unsigned()) {
-+      return base::nullopt;
-+    }
-+    const uint64_t count = it->second.GetUnsigned();
-+    if (count > std::numeric_limits<size_t>::max()) {
-       return base::nullopt;
-     }
-     credential_count = static_cast<size_t>(it->second.GetUnsigned());
---- a/third_party/webrtc/modules/rtp_rtcp/source/rtp_packet_history.cc
-+++ b/third_party/webrtc/modules/rtp_rtcp/source/rtp_packet_history.cc
-@@ -134,7 +134,7 @@ void RtpPacketHistory::PutRtpPacket(std:
-   // Store packet.
-   const uint16_t rtp_seq_no = packet->SequenceNumber();
-   int packet_index = GetPacketIndex(rtp_seq_no);
--  if (packet_index >= 0u &&
-+  if (packet_index >= 0 &&
-       static_cast<size_t>(packet_index) < packet_history_.size() &&
-       packet_history_[packet_index].packet_ != nullptr) {
-     RTC_LOG(LS_WARNING) << "Duplicate packet inserted: " << rtp_seq_no;
---- a/chrome/browser/chromeos/input_method/input_method_engine_base.cc
-+++ b/chrome/browser/chromeos/input_method/input_method_engine_base.cc
-@@ -39,7 +39,7 @@ const char kErrorWrongContext[] = "Context is not active.";
- const char kErrorInvalidValue[] = "Argument '%s' with value '%d' is not valid.";
- 
- bool IsUint32Value(int i) {
--  return 0 <= i && i <= std::numeric_limits<uint32_t>::max();
-+  return 0 <= i && static_cast<uint32_t>(i) <= std::numeric_limits<uint32_t>::max();
- }
- 
- }  // namespace
diff --git a/debian/patches/warnings/stringop-overflow.patch b/debian/patches/warnings/stringop-overflow.patch
deleted file mode 100644
index af1fa4f..0000000
--- a/debian/patches/warnings/stringop-overflow.patch
+++ /dev/null
@@ -1,14 +0,0 @@
-description: https://gcc.gnu.org/bugzilla//show_bug.cgi?id=85783
-author: Michael Gilbert <mgilbert@debian.org>
-
---- a/third_party/skia/include/private/SkMalloc.h
-+++ b/third_party/skia/include/private/SkMalloc.h
-@@ -116,7 +116,7 @@ static inline void sk_bzero(void* buffer
- static inline void* sk_careful_memcpy(void* dst, const void* src, size_t len) {
-     // When we pass >0 len we had better already be passing valid pointers.
-     // So we just need to skip calling memcpy when len == 0.
--    if (len) {
-+    if (len && len <= PTRDIFF_MAX) {
-         memcpy(dst,src,len);
-     }
-     return dst;
-- 
2.30.2

